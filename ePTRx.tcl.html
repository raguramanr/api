<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ePTRx.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ePTRx.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ePTRx.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ePTRx.tcl-annot.html">annotations</a> | <a href="ePTRx.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">##################################################################</span>
<span class="comment-line"># $RCSfile: ixiaRx.tcl,v $ - SQA Library</span>
<span class="comment-line">#</span>
<span class="comment-line"># Copyright (c) 1999 by Extreme Networks Inc.</span>
<span class="comment-line"># </span>
<span class="comment-line"># Revision control history</span>
<span class="comment-line"># ------------------------</span>
<span class="comment-line"># $Header: /export/cvsroot/automation/Lib/ixiaRx.tcl,v 2.33.6.37 2010/08/24 01:39:52 ghundertmark Exp $</span>
<span class="comment-line">#</span>
<span class="comment-line"># Extreme Networks modification history</span>
<span class="comment-line"># -------------------------------------</span>
<span class="comment-line"># $Log: ixiaRx.tcl,v $</span>
<span class="comment-line"># Revision 2.33.6.37  2010/08/24 01:39:52  ghundertmark</span>
<span class="comment-line"># Merge branch 12_4 to trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.37  2010/08/24 01:39:52  ghundertmark</span>
<span class="comment-line"># Merge branch 12_4 to trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.36  2009/07/07 22:39:03  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.35.2.2  2010/08/19 02:22:08  ghundertmark</span>
<span class="comment-line"># Local changes on NAS branch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.35.2.1  2009/07/07 22:37:05  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.35  2009/07/01 10:55:41  nellinivasu</span>
<span class="comment-line"># Merged From Branch 'branch-dev_v12-1-rel4'</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.34  2009/04/14 00:46:34  lagrawal</span>
<span class="comment-line"># merge from dev branch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.33.6.1  2009/03/04 06:53:06  ghundertmark</span>
<span class="comment-line"># check for divid by zero</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.33  2008/08/05 03:44:07  lagrawal</span>
<span class="comment-line"># merge from branch-fixes_v12-1-rel0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.32.4.1  2008/06/07 01:33:19  lagrawal</span>
<span class="comment-line"># murge from branch-dev_v12-1-rel0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.32.2.1  2008/06/06 22:09:22  autotest-sc</span>
<span class="comment-line"># Murged from exos_br_12_1 to branch-dev_v12-1-rel0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.32  2008/05/08 15:21:17  nellinivasu</span>
<span class="comment-line"># Moved proc SetPortFilter from Clearflow module to Lib.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.31  2007/11/05 22:26:10  achilukuri</span>
<span class="comment-line"># Fixed EnablePortFilter proc</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.30  2007/11/02 20:08:48  achilukuri</span>
<span class="comment-line"># Fixed the EnablePortFilter proc</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.29  2007/10/22 16:24:12  achilukuri</span>
<span class="comment-line"># Added pattern1 option to EnablePortFilter proc</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.27  2007/06/25 23:20:37  rabhavikatti</span>
<span class="comment-line"># Modified for STXS4 card type</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.26  2007/05/01 23:02:17  ghundertmark</span>
<span class="comment-line"># Add proc to return time stamps specific to the indexed packet numbers</span>
<span class="comment-line"># on an ixia port GetCapturedFramesTimeStampIndexed</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.25  2007/04/30 11:41:41  ghundertmark</span>
<span class="comment-line"># Alter CheckRateTxRx sum checking, fix negative check percentage for failed case</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.24  2007/03/20 20:48:36  ghundertmark</span>
<span class="comment-line"># Fix sumTx vr sumRx in CheckRatesTxRx</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.23  2007/02/01 18:50:24  ghundertmark</span>
<span class="comment-line"># Add enhancement to checkratesrxtx to allow check of rxtotals</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.22  2007/01/29 20:12:09  skumar</span>
<span class="comment-line"># StartCapture twice to avoid leftover pkt in DisablePorts</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.21  2007/01/03 22:01:11  skumar</span>
<span class="comment-line"># Do not call package req at top</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.20  2006/11/17 15:00:36  skumar</span>
<span class="comment-line"># Fixed the loopback on txs cards</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.19  2006/10/23 19:10:20  skumar</span>
<span class="comment-line"># DisableIxiaPorts clears the buffer</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.18  2006/10/05 19:29:24  skumar</span>
<span class="comment-line"># Enable/disable using simulateCableDisconnect</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.17  2006/09/29 22:38:16  djain</span>
<span class="comment-line"># Commit for Release Q1FY07-Rel11.4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.16  2006/07/12 22:27:33  smohanty</span>
<span class="comment-line"># Merged from exos-br-11_4 for L1 switch integration</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.15.2.1  2006/07/01 00:06:16  smohanty</span>
<span class="comment-line"># Modified for L1 switch integration</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.15  2006/06/30 22:35:35  ghundertmark</span>
<span class="comment-line"># Q4FY06 Release commit</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.14  2006/06/23 17:50:16  ghundertmark</span>
<span class="comment-line"># Correct percent_tolerance in CheckRatesTxRx</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.13  2006/06/22 15:37:43  ghundertmark</span>
<span class="comment-line"># add checkratesTxRx, which compares tx and rx on a per port basis instead of just a tx to multiple rx... compared to checkrates</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.12  2006/05/25 01:51:23  skumar</span>
<span class="comment-line"># Added proc to get oversize rx rate, option in CheckRate</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.11  2006/04/27 01:14:26  smohanty</span>
<span class="comment-line"># Added ClearPortsStats in proc StartPortsCapture to clear all the previous</span>
<span class="comment-line"># statistics of the port.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.10  2006/04/25 02:48:12  smohanty</span>
<span class="comment-line"># Modified GetCapturedFrames for not getting any packets if it is more than</span>
<span class="comment-line"># a specified number of packets. By default the threshhold is 200</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.9  2006/02/23 20:29:40  agoyal</span>
<span class="comment-line"># merge from branch-12</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.7.2.1  2006/02/18 19:09:04  agoyal</span>
<span class="comment-line"># add procedure to return number of captured packets</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.7  2005/12/08 02:50:58  skumar</span>
<span class="comment-line"># Removed list val for patternMask in EnableFilter</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.6  2005/06/21 18:44:04  skumar</span>
<span class="comment-line"># Fixed DisablePortFilter to enable capture/filter triggers</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.5  2005/02/13 08:26:05  skumar</span>
<span class="comment-line"># Redo anyPattern code in EnablePortFilter</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.4  2004/12/06 21:44:06  skumar</span>
<span class="comment-line"># Updated portFilter routine for EAPS tests</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.3  2004/06/16 20:09:52  cshaw</span>
<span class="comment-line"># merge from main trunk again for ixOS3.70 stuff</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.44  2004/02/13 19:45:22  alim</span>
<span class="comment-line"># Changed name of EnablePorts to EnableIxiaPorts and added code to check linkStatus (DisablePorts as well)</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.43  2003/07/13 02:59:07  skumar</span>
<span class="comment-line"># Info for better debugability</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.2  2004/04/01 21:57:02  skumar</span>
<span class="comment-line"># Commit as part of release5</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.6.1  2003/08/20 03:20:05  cshaw</span>
<span class="comment-line"># trunk-exos release</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33.4.1  2003/06/23 21:28:45  cshaw</span>
<span class="comment-line"># Merged in EW trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.42  2003/04/18 19:36:19  autotest</span>
<span class="comment-line"># Added GetNumOversizedFramesReceived.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.41.8.1  2003/04/14 17:14:24  cshaw</span>
<span class="comment-line"># modify GetCapturedFramesTimeStamp to allow timestamp be written to file</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.41  2002/12/10 22:58:08  skumar</span>
<span class="comment-line"># Merged from br-1-0.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.40  2002/12/04 19:27:17  autotest</span>
<span class="comment-line"># Fix ixia problem in loopback/normal sequence. Retains prev port's config.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.39  2002/11/22 17:52:55  skumar</span>
<span class="comment-line"># Port get in DisablePorts to avoid taking prev written port config. Fixes bug in DisablePorts.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.38.2.1  2002/12/10 21:12:43  skumar</span>
<span class="comment-line"># Merged from br-1-0.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.40  2002/12/04 19:27:17  autotest</span>
<span class="comment-line"># Fix ixia problem in loopback/normal sequence. Retains prev port's config.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.39  2002/11/22 17:52:55  skumar</span>
<span class="comment-line"># Port get in DisablePorts to avoid taking prev written port config. Fixes bug in DisablePorts.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.38  2002/10/28 22:08:48  cshaw</span>
<span class="comment-line"># Add GetRxArpRequest</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.37  2002/09/04 23:23:40  aleu</span>
<span class="comment-line"># add proc CheckMatchPacketType{}</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.36  2002/08/13 02:21:05  tquach</span>
<span class="comment-line"># add comment</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.35  2002/07/22 21:46:47  tquach</span>
<span class="comment-line"># Add comment</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.34  2002/07/19 00:33:04  skumar</span>
<span class="comment-line"># Change port specific calls *ixClearPortStats* to ixClearStats.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33  2002/06/28 19:07:28  aleu</span>
<span class="comment-line"># added EnablePortFilter{} &amp; DisablePortFilter{}</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.32  2002/06/07 19:21:54  tquach</span>
<span class="comment-line"># Fixed checkrate</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.31  2002/05/06 21:31:43  aleu</span>
<span class="comment-line"># remove all cardSpeed global var</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.30  2001/12/19 00:28:30  tquach</span>
<span class="comment-line"># Change checkrate</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.29  2001/11/21 03:07:51  tquach</span>
<span class="comment-line"># Change CheckRate function because of receiving 1 or 2 packages problem</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.28  2001/11/08 01:27:26  aleu</span>
<span class="comment-line"># add GetByteRatereceived{} and GetByteRateSent{}</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.27  2001/11/06 23:38:46  tquach</span>
<span class="comment-line"># Change percent tolerance</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.26  2001/07/27 19:11:29  skumar</span>
<span class="comment-line"># Fixed the gigPort related commands in Enable/DisablePorts.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.25  2001/07/24 22:12:01  tquach</span>
<span class="comment-line"># Add fix for 1000GBIC card</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.24  2001/06/07 00:42:07  skumar</span>
<span class="comment-line"># Minor changes in ixiaUserDefinedStat1.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.23  2001/04/13 23:12:49  skumar</span>
<span class="comment-line"># Added getTaggedFrameRateReceived proc.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.22  2000/10/26 19:35:05  tnguyen</span>
<span class="comment-line"># Fix version function call for 2.1</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.21  2000/10/25 18:48:07  skumar</span>
<span class="comment-line"># Changes take care of write to report file if fd_res given to</span>
<span class="comment-line"># GetCapturesFrames.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.20  2000/10/21 02:49:55  skumar</span>
<span class="comment-line"># Put version check for GetNumBytes due to ixia bug in 2.1.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.19  2000/10/20 17:36:57  tnguyen</span>
<span class="comment-line"># Add StartPortsTransmit function and Add another header for CheckRates</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.18  2000/10/17 18:10:28  tnguyen</span>
<span class="comment-line"># Fix a bug in check rate and add a comment line to this function</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.17  2000/10/10 21:50:27  skumar</span>
<span class="comment-line"># Changed result_warning-&gt;result_error.</span>
<span class="comment-line"># Certain changes for output formatting.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.16  2000/09/25 18:26:48  tnguyen</span>
<span class="comment-line"># Call capturing ports instead of capturing cards</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.15  2000/09/24 22:33:22  skumar</span>
<span class="comment-line"># Added functions CheckRates, GetCapturedFramesTimeStamp.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.14  2000/09/12 22:56:12  tnguyen</span>
<span class="comment-line"># Add functions to enable and disable ports</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.13  2000/08/15 22:00:21  skumar</span>
<span class="comment-line"># Fixed a typo from ixiaSop to ixiaStop.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.12  2000/08/04 22:25:34  tnguyen</span>
<span class="comment-line"># Global change of commonly used funtions to conform with new conventions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11  2000/08/04 18:29:37  jfan</span>
<span class="comment-line"># Change &#34;put&#34; to &#34;result_debug&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.10  2000/08/04 15:59:59  tnguyen</span>
<span class="comment-line"># Add wrapper functions for many ixia functions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.9  2000/04/28 17:25:56  jlequang</span>
<span class="comment-line"># Fist stage of incorporating old BD-extension to Thanh's</span>
<span class="comment-line"># new enhancement.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.8  2000/04/07 00:23:48  tnguyen</span>
<span class="comment-line"># Various modifications to the whole project in Lib, L2 and L3.  Commit changes for all these folders at the same time.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.7  2000/01/07 00:00:24  jfan</span>
<span class="comment-line"># Add &#34;after 1000&#34; to insure Ixia statistics updated</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.6  1999/10/11 16:19:24  jfan</span>
<span class="comment-line"># Disable some debugging messages because they are not currently used</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.5  1999/09/27 22:27:25  jfan</span>
<span class="comment-line"># Use result_debug, result_ok &amp; result_error for messages</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.4  1999/08/10 18:10:34  jfan</span>
<span class="comment-line"># Added ixiaCapture_ip and ixiaCaptureOnePort_ip</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.3  1999/08/06 22:54:49  andrew</span>
<span class="comment-line"># Style change</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.2  1999/07/23 23:23:06  aedem</span>
<span class="comment-line"># Removed load {expect.dll} line</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.1  1999/07/23 14:50:23  aedem</span>
<span class="comment-line"># Merge for 2.0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1.2.2  1999/07/23 18:40:14  aedem</span>
<span class="comment-line"># Updated to use the new result formatting functions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1.2.1  1999/06/30 15:16:12  aedem</span>
<span class="comment-line"># Updated for Linux and Ixia 2.0 Beta</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1  1999/06/25 17:53:46  jfan</span>
<span class="comment-line"># Initial import.</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">##################################################################</span>

set auto_path [linsert $auto_path 0 . ]

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaCapture</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Start capturing packets for all ports</span>
<span class="comment-line">#               </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Chid - chassis id</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      return [ixiaCaptureOnePort $chasis $card $port $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaCapture_327">proc <a href="ePTRx.tcl-annot.html#::::ixiaCapture">::::ixiaCapture</a></a></strong> {{fd_res &#34;NULL&#34;} \
                  {chid 1}        \
                  {fd_in &#34;NULL&#34;}} {
   global spawn_id
<span class="comment-line">#   global one2oneArray</span>

<span class="comment-line">#   foreach txMap [lsort [array names one2oneArray]] {</span>
<span class="comment-line">#      set rxMap $one2oneArray($txMap)</span>
<span class="comment-line">#	  scan $txMap &#34;%d,%d,%d&#34; x y z</span>
<span class="comment-line">#      scan [join $rxMap] &#34;%d %d %d&#34; chid c p</span>
      <a name="::capture(1)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $chid $c $p
      set numCapFrames [<a name="::capture(2)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]
      <a name="::captureBuffer(1)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $chid $c $p 1 $numCapFrames

      puts &#34;--- txMap=$txMap rxMap=$rxMap&#34;
      puts $fd_res &#34;--- txMap=$txMap rxMap=$rxMap&#34;
      if { $fd_in != &#34;NULL&#34; } { puts $fd_in &#34;^ $txMap $rxMap&#34; }
      <a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chid $c $p
      set uds1 [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]
      puts &#34;frames sent = [<a name="::stat(3)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts &#34;frames received = [<a name="::stat(4)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      puts &#34;capture cget -nPackets = $numCapFrames&#34;
      puts $fd_res &#34;frames sent = [<a name="::stat(5)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts $fd_res &#34;frames received = [<a name="::stat(6)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      puts $fd_res &#34;capture cget -nPackets = $numCapFrames&#34;
      if { $fd_in != &#34;NULL&#34; } { 
         puts $fd_in &#34;[<a name="::stat(7)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
         puts $fd_in &#34;[<a name="::stat(8)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      }

      for {set i 0} {$i &lt;= $numCapFrames} {incr i} {
         <a name="::captureBuffer(2)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i
         puts &#34;captureBuffer cget -frame = [<a name="::captureBuffer(3)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
         puts $fd_res &#34;captureBuffer cget -frame = [<a name="::captureBuffer(4)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
         if {$fd_in != &#34;NULL&#34;} { puts $fd_in &#34;[<a name="::captureBuffer(5)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34; }
<span class="comment-line">#         puts &#34;captureBuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;</span>
      }
<span class="comment-line">#   }</span>
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaCaptureOnePort</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Start capturing packets for a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id  </span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#             if file = NULL, it will return a list containing raw captured data</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      return [ixiaCaptureOnePort $chasis $card $port $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">################################################################## </span>
if { 0 } {
<strong><a name="::::ixiaCaptureOnePort_386">proc <a href="ePTRx.tcl-annot.html#::::ixiaCaptureOnePort">::::ixiaCaptureOnePort</a></a></strong> {{ch 1}          \
                         {cd 1}          \
                         {pt 1}          \
                         {fd_res &#34;NULL&#34;} \
                         {fd_in &#34;NULL&#34;}} {
   set rc [<a name="::capture(3)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt];
<span class="comment-line">#   puts &#34;capture get returned rc=$rc&#34;;</span>
<span class="comment-line">#   set numCapFrames [capture cget -nPackets];</span>
<span class="comment-line">#   set rc [captureBuffer get $ch $cd $pt 1 $numCapFrames];</span>
   set rc [<a name="::captureBuffer(6)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $ch $cd $pt 1];
 <span class="comment-line">#  puts &#34;capture cget -nPackets = $numCapFrames&#34;;</span>
  <span class="comment-line"># puts &#34;captureBuffer get returned rc=$rc&#34;;</span>
   <span class="comment-line">#puts &#34;--- ($ch $cd $pt)&#34;;</span>
<span class="comment-line">#   if { $fd_res != &#34;NULL&#34; } {</span>
<span class="comment-line">#      puts $fd_res &#34;--- ($ch $cd $pt)&#34;;</span>
<span class="comment-line">#   }</span>
   if { $fd_in != &#34;NULL&#34; } {
    <span class="comment-line">#  puts $fd_in &#34;^ ($ch $cd $pt)&#34;;</span>
   }

<span class="comment-line">#   stat get statAllStats $ch $cd $pt;</span>
<span class="comment-line">#   set uds1 [stat cget -userDefinedStat1];</span>
  <span class="comment-line"># puts &#34;frames sent = [stat cget -framesSent]&#34;;</span>
  <span class="comment-line"># puts &#34;frames received = [stat cget -framesReceived]&#34;;</span>
   if { $fd_in != &#34;NULL&#34; } { 
      puts $fd_in &#34;[<a name="::stat(9)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;;
      puts $fd_in &#34;[<a name="::stat(10)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;;
   }
<span class="comment-line">#   for {set i 0} {$i &lt;= $numCapFrames} {incr i}</span>
<span class="comment-line">#      set rc [captureBuffer getframe $i]</span>
      set rawFrames [<a name="::captureBuffer(7)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]
      <span class="comment-line">#puts &#34;rawFrames $rawFrames&#34;</span>
      return $rawFrames;
}
    <span class="comment-line">#  puts &#34;captureBuffer getframe returned rc=$rc&#34;;</span>
<span class="comment-line">#      puts &#34;capturebuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;;</span>
     <span class="comment-line"># puts &#34;captureBuffer cget -frame = [captureBuffer cget -frame]&#34;;</span>
<span class="comment-line">#      if { $fd_res != &#34;NULL&#34; } {</span>
<span class="comment-line">#         puts $fd_res &#34;Traffic on port $pt=[captureBuffer cget -frame]&#34;;</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#      if {$fd_in != &#34;NULL&#34;} {</span>
<span class="comment-line">#         puts $fd_in &#34;[captureBuffer cget -frame]&#34;;</span>
<span class="comment-line">#      } else {</span>
<span class="comment-line">#        lappend rawFrames &#34;[captureBuffer cget -frame]&#34;;</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#      puts &#34;Inside Capture One Port Raw Frames : $rawFrames&#34;</span>
<span class="comment-line">#      puts &#34;captureBuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;;</span>
<span class="comment-line">#   ##</span>
<span class="comment-line">#      if {$fd_in == &#34;NULL&#34;} {</span>
<span class="comment-line">#        puts &#34;Inside Capture If&#34;</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#      if { [ info exists rawFrames ] != &#34;1&#34; } {</span>
<span class="comment-line">#         set rawFrames {};</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#      puts &#34;Inside Capture One Port Raw Frames : $rawFrames&#34;</span>
<span class="comment-line">#     return $rawFrames;</span>
<span class="comment-line">#</span>
}
<strong><a name="::::ixiaCaptureOnePort_444">proc <a href="ePTRx.tcl-annot.html#::::ixiaCaptureOnePort">::::ixiaCaptureOnePort</a></a></strong> {{ch 1}          \
                         {cd 1}          \
                         {pt 1}          \
                         {fd_res &#34;NULL&#34;} \
                         {fd_in &#34;NULL&#34;}} {
   set rc [<a name="::capture(4)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt];
<span class="comment-line">#   puts &#34;capture get returned rc=$rc&#34;;</span>
   set numCapFrames [<a name="::capture(5)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets];
 <span class="comment-line">#  puts &#34;capture cget -nPackets = $numCapFrames&#34;;</span>
   set rc [<a name="::captureBuffer(8)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $ch $cd $pt 1 $numCapFrames];
  <span class="comment-line"># puts &#34;captureBuffer get returned rc=$rc&#34;;</span>
   <span class="comment-line">#puts &#34;--- ($ch $cd $pt)&#34;;</span>
<span class="comment-line">#   if { $fd_res != &#34;NULL&#34; } {</span>
<span class="comment-line">#      puts $fd_res &#34;--- ($ch $cd $pt)&#34;;</span>
<span class="comment-line">#   }</span>
   if { $fd_in != &#34;NULL&#34; } {
    <span class="comment-line">#  puts $fd_in &#34;^ ($ch $cd $pt)&#34;;</span>
   }

<span class="comment-line">#   stat get statAllStats $ch $cd $pt;</span>
<span class="comment-line">#   set uds1 [stat cget -userDefinedStat1];</span>
  <span class="comment-line"># puts &#34;frames sent = [stat cget -framesSent]&#34;;</span>
  <span class="comment-line"># puts &#34;frames received = [stat cget -framesReceived]&#34;;</span>
   if { $fd_in != &#34;NULL&#34; } {
      puts $fd_in &#34;[<a name="::stat(11)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;;
      puts $fd_in &#34;[<a name="::stat(12)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;;
   }

   for {set i 1} {$i &lt;= $numCapFrames} {incr i} {
      set rc [<a name="::captureBuffer(9)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i];
    <span class="comment-line">#  puts &#34;captureBuffer getframe returned rc=$rc&#34;;</span>
<span class="comment-line">#      puts &#34;capturebuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;;</span>
     <span class="comment-line"># puts &#34;captureBuffer cget -frame = [captureBuffer cget -frame]&#34;;</span>
      if { $fd_res != &#34;NULL&#34; } {
         puts $fd_res &#34;Traffic on port $pt=[<a name="::captureBuffer(10)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;;
      }
      if {$fd_in != &#34;NULL&#34;} {
         puts $fd_in &#34;[<a name="::captureBuffer(11)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;;
      } else {
         lappend rawFrames &#34;[<a name="::captureBuffer(12)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;;
      }
<span class="comment-line">#      puts &#34;captureBuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;;</span>
   }
   if {$fd_in == &#34;NULL&#34;} {
      if { [ info exists rawFrames ] != &#34;1&#34; } {
         set rawFrames {};
      }
      return $rawFrames;
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaStat</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get Ixia statistics for a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id  </span>
<span class="comment-line">#                </span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#             it will return a list containing statistics for that  port</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      return [ixiaStat $chasis $card $port $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaStat_515">proc <a href="ePTRx.tcl-annot.html#::::ixiaStat">::::ixiaStat</a></a></strong> {{ch 1}          \
               {cd 1}          \
               {pt 1}          \
               {fd_res &#34;NULL&#34;} \
               {fd_in &#34;NULL&#34;}} {
   global spawn_id

   after 1000
   puts &#34;--- ($ch $cd $pt)&#34;
   puts $fd_res &#34;--- ($ch $cd $pt)&#34;
   if { $fd_in != &#34;NULL&#34; } { puts $fd_in &#34;^ ($ch $cd $pt)&#34; }
   <a name="::capture(6)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt
   <a name="::stat(13)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $ch $cd $pt
<span class="comment-line">#   set uds1 [stat cget -userDefinedStat1]</span>
   puts &#34;frames sent = [<a name="::stat(14)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
   puts &#34;frames received = [<a name="::stat(15)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
   puts $fd_res &#34;frames sent = [<a name="::stat(16)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
   puts $fd_res &#34;frames received = [<a name="::stat(17)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
   if { $fd_in != &#34;NULL&#34; } { 
      puts $fd_in &#34;[<a name="::stat(18)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts $fd_in &#34;[<a name="::stat(19)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
   }
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaUserDefinedStat1</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Ixia statistics - get a port statistic based on user define stat 1</span>
<span class="comment-line">#     </span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - port id  </span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return $SentReceivedPackets</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaUserDefinedStat1 $portId $filePt]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaUserDefinedStat1_558">proc <a href="ePTRx.tcl-annot.html#::::ixiaUserDefinedStat1">::::ixiaUserDefinedStat1</a></a></strong> {{portId 1}          \
               {fd_res &#34;NULL&#34;} \
               {fd_in &#34;NULL&#34;}} {
   global spawn_id

   after 1000
   <a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId ch cd pt
   if {$fd_res != &#34;NULL&#34;} {puts $fd_res &#34;--- ($ch $cd $pt)&#34;}
   if { $fd_in != &#34;NULL&#34; } { puts $fd_in &#34;^ ($ch $cd $pt)&#34; }
   <a name="::capture(7)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt
   <a name="::stat(20)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $ch $cd $pt
   set frReceived [<a name="::stat(21)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]
   set frSent [<a name="::stat(22)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]
   puts &#34;Frames sent = $frSent&#34;
   if {$fd_res!=&#34;NULL&#34;} {puts $fd_res &#34;Frames sent = $frSent&#34;}
   puts &#34;Total frames received = [<a name="::stat(23)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived] (not used)&#34;
   puts &#34;Filtered frames UDS1 received = $frReceived&#34;
   if {$fd_res!=&#34;NULL&#34;} {puts $fd_res &#34;Filtered frames UDS1 received = $frReceived&#34;}
   if { $fd_in != &#34;NULL&#34; } { 
      puts $fd_in &#34;$frSent&#34;
      puts $fd_in &#34;$frReceived&#34;
   } else {
      set SentReceivedPackets &#34;$frSent $frReceived&#34;
      return $SentReceivedPackets
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaStatFlood</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Ixia statistics - get a port statistics</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id  </span>
<span class="comment-line">#                fd_res - file pointer</span>
<span class="comment-line">#                fd_in - file pointer</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaStatFlood $chasis $card $port $fd_res $fd_in]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaStatFlood_606">proc <a href="ePTRx.tcl-annot.html#::::ixiaStatFlood">::::ixiaStatFlood</a></a></strong> {{ch 1}          \
                    {cd 1}          \
                    {pt 1}          \
                    {fd_res &#34;NULL&#34;} \
                    {fd_in &#34;NULL&#34;}} {
   global spawn_id

   puts &#34;--- ($ch $cd $pt)&#34;
   puts $fd_res &#34;--- ($ch $cd $pt)&#34;
	if { $fd_in != &#34;NULL&#34; } {
		puts $fd_in &#34;^ ($ch $cd $pt)&#34;
	}
   <a name="::capture(8)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt
   <a name="::stat(24)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $ch $cd $pt
   puts &#34;frames sent = [<a name="::stat(25)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]\nflooding frames received = [<a name="::stat(26)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]&#34;
   puts $fd_res &#34;frames sent = [<a name="::stat(27)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]\nflooding frames received = [<a name="::stat(28)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]&#34;
   if { $fd_in != &#34;NULL&#34; } { 
      puts $fd_in &#34;[<a name="::stat(29)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts $fd_in &#34;[<a name="::stat(30)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]&#34;
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaPayloadOnePort</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Return statistic on a Ixia's port.</span>
<span class="comment-line">#              It will return the transmit rate or receive rate based on the port </span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id </span>
<span class="comment-line">#                direction - traffic direction </span>
<span class="comment-line">#                fd_res - file pointer</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              TxRate</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaPayloadOnePort $chasis $card $port $direction $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaPayloadOnePort_650">proc <a href="ePTRx.tcl-annot.html#::::ixiaPayloadOnePort">::::ixiaPayloadOnePort</a></a></strong> {{ch 1}            \
                         {cd 1}            \
                         {pt 1}            \
                         {direction &#34;tx&#34;}  \
                         {fd_res &#34;NULL&#34;}} {
   global spawn_id

   <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- ($ch $cd $pt)&#34;
<span class="comment-line">#   capture get $ch $cd $pt</span>
   <a name="::stat(31)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $ch $cd $pt
   set txRate [<a name="::stat(32)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]
   set rxRate [<a name="::stat(33)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]

   <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;frames sent rate = $txRate\nframes received rate = $rxRate&#34;

   if { $direction == &#34;tx&#34; } {
      return $txRate
   } else {
      return $rxRate
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaCapture_ip</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Capture IP packets for all ports</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Chid - chassis id</span>
<span class="comment-line">#                fd_res - file pointer</span>
<span class="comment-line">#                fd_in - file pointer</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#                Return information in a file</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaCapture_ip $fd_res $chid $fd_in]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaCapture_ip_691">proc <a href="ePTRx.tcl-annot.html#::::ixiaCapture_ip">::::ixiaCapture_ip</a></a></strong> {{fd_res &#34;NULL&#34;} \
                     {chid 1}        \
                     {fd_in &#34;NULL&#34;}} {
   global spawn_id
<span class="comment-line">#  global one2oneArray</span>

<span class="comment-line">#  foreach txMap [lsort [array names one2oneArray]] {</span>
<span class="comment-line">#     set rxMap $one2oneArray($txMap)</span>
<span class="comment-line">#  scan $txMap &#34;%d,%d,%d&#34; x y z</span>
<span class="comment-line">#     scan [join $rxMap] &#34;%d %d %d&#34; chid c p</span>
      <a name="::capture(9)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $chid $c $p
      set numCapFrames [<a name="::capture(10)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]
      <a name="::captureBuffer(13)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $chid $c $p 1 $numCapFrames

      puts &#34;--- txMap=$txMap rxMap=$rxMap&#34;
      puts $fd_res &#34;--- txMap=$txMap rxMap=$rxMap&#34;
      if { $fd_in != &#34;NULL&#34; } { puts $fd_in &#34;^ $txMap $rxMap&#34; }
      <a name="::stat(34)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chid $c $p
      set uds1 [<a name="::stat(35)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]
      puts &#34;    frames sent = [<a name="::stat(36)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts &#34;    frames received = [<a name="::stat(37)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      puts &#34;    capture cget -nPackets = $numCapFrames&#34;
      puts $fd_res &#34;    frames sent = [<a name="::stat(38)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts $fd_res &#34;    frames received = [<a name="::stat(39)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      puts $fd_res &#34;    capture cget -nPackets = $numCapFrames&#34;
      if { $fd_in != &#34;NULL&#34; } { 
         puts $fd_in &#34;[<a name="::stat(40)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
         puts $fd_in &#34;[<a name="::stat(41)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
      }

      for {set i 0} {$i &lt;= $numCapFrames} {incr i} {
         <a name="::captureBuffer(14)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i
         puts &#34;    captureBuffer cget -frame = [<a name="::captureBuffer(15)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
         puts $fd_res &#34;    captureBuffer cget -frame = [<a name="::captureBuffer(16)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
         if {$fd_in != &#34;NULL&#34;} { puts $fd_in &#34;[<a name="::captureBuffer(17)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34; }
      }
      puts &#34;-------------------\n&#34;
      puts $fd_res &#34;-------------------\n&#34;
   }
   puts &#34;\r&#34;
   puts $fd_res &#34;\r&#34;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaCaptureOnePort_ip</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Capture IP packets for a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id  </span>
<span class="comment-line">#                dList - </span>
<span class="comment-line">#                fd_res - file pointer</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args:  </span>
<span class="comment-line">#                Write information in a file</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaCaptureOnePort_ip $chasis $card $port $dList $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">################################################################## </span>

<strong><a name="::::ixiaCaptureOnePort_ip_755">proc <a href="ePTRx.tcl-annot.html#::::ixiaCaptureOnePort_ip">::::ixiaCaptureOnePort_ip</a></a></strong> {{ch 1}			 \
                            {cd 1}			 \
                            {pt 1}			 \
		            {dList {}}  	 \
                            {fd_res &#34;NULL&#34;}	 \
						    {fd_in &#34;NULL&#34;}} {
   global spawn_id

   <a name="::capture(11)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt
   set numCapFrames [<a name="::capture(12)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]
   <a name="::captureBuffer(18)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $ch $cd $pt 1 $numCapFrames

   puts &#34;--- ($ch $cd $pt)&#34;
   puts $fd_res &#34;--- ($ch $cd $pt)&#34;
   if { $fd_in != &#34;NULL&#34; } { puts $fd_in &#34;^ ($ch $cd $pt)&#34; }

   <a name="::stat(42)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $ch $cd $pt
   set uds1 [<a name="::stat(43)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]
   puts &#34;    frames sent = [<a name="::stat(44)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
   puts &#34;    frames received = [<a name="::stat(45)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
   puts &#34;    capture cget -nPackets = $numCapFrames&#34;
   puts $fd_res &#34;    frames sent = [<a name="::stat(46)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
   puts $fd_res &#34;    frames received = [<a name="::stat(47)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]&#34;
   puts $fd_res &#34;    capture cget -nPackets = $numCapFrames&#34;
   if { $fd_in != &#34;NULL&#34; } { 
      puts $fd_in &#34;[<a name="::stat(48)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]&#34;
      puts $fd_in &#34;[<a name="::capture(13)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]&#34;
   }

   for {set i 0} {$i &lt;= $numCapFrames} {incr i} {
      <a name="::captureBuffer(19)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i
      puts &#34;    captureBuffer cget -frame = [<a name="::captureBuffer(20)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
      puts $fd_res &#34;    captureBuffer cget -frame = [<a name="::captureBuffer(21)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34;
      if {$fd_in != &#34;NULL&#34;} { puts $fd_in &#34;[<a name="::captureBuffer(22)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -frame]&#34; }

      set capframe [<a name="::captureBuffer(23)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i]
      <a name="::ip(1)"><a href="./ePTClient.tcl.html#::ip_974">::ip</a></a> decode $capframe
      foreach item [lsort $dList] {
<a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- item=$item&#34;
		 set value [<a name="::ip(2)"><a href="./ePTClient.tcl.html#::ip_974">::ip</a></a> cget -$item]
         <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;    $item=$value&#34;
         if { $fd_in != &#34;NULL&#34; } { 
            <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;    $item=$value&#34;
		 }
	  }
   }
   puts &#34;\r&#34;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: StartPortsCapture</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Start ports capture</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              none  </span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [StartPortsCapture $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::StartPortsCapture_820">proc <a href="ePTRx.tcl-annot.html#::::StartPortsCapture">::::StartPortsCapture</a></a></strong> {portIdList} {

  <span class="comment-line"># foreach portId $portIdList {</span>
  <span class="comment-line">#    MapIxiaPortId $portId chas card port</span>
  <span class="comment-line">#    ixStartPortCapture  $chas $card $port</span>
  <span class="comment-line">#    puts &#34;ixStartPortCapture  $chas $card $port&#34;      </span>
  <span class="comment-line"># }</span>

  global portMappingList
  
  <a name="::ClearPortsStats(1)"><a href="./ePTRx.tcl.html#::ClearPortsStats_951">::ClearPortsStats</a></a> $portIdList

  <a name="::ClearPortsStats(2)"><a href="./ePTRx.tcl.html#::ClearPortsStats_951">::ClearPortsStats</a></a> $portIdList 

<span class="comment-line">#  foreach p $portIdList {</span>
<span class="comment-line">#     set portList [lindex $portMappingList [expr $p-1]]</span>
<span class="comment-line">#     result_debug &#34;INFO: DUT[lindex $portList 2] [lindex $portList 1] egresses to portId [lindex $portList 0]&#34;</span>
<span class="comment-line">#  }</span>
  foreach portId $portIdList {
      <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
      lappend plist &#34;$chas $card $port&#34;
  }

  <a name="::ixStartCapture(1)"><a href="./mapping.tcl.html#::ixStartCapture_106">::ixStartCapture</a></a> $plist

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: StopPortsCapture</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Stop ports capture</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##              [StopPortsCapture $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::StopPortsCapture_862">proc <a href="ePTRx.tcl-annot.html#::::StopPortsCapture">::::StopPortsCapture</a></a></strong> {portIdList} {

   <span class="comment-line">#foreach portId $portIdList {</span>
   <span class="comment-line">#   MapIxiaPortId $portId chas card port</span>
   <span class="comment-line">#   ixStopPortCapture  $chas $card $port</span>
   <span class="comment-line">#}</span>

   foreach portId $portIdList {
     <a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
     lappend plist &#34;$chas $card $port&#34;
   }

   <a name="::ixStopCapture(1)"><a href="./mapping.tcl.html#::ixStopCapture_109">::ixStopCapture</a></a> $plist

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: StopPortsTransmit</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Stop Ports Transmit</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##              [StopPortsCapture $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::StopPortsTransmit_893">proc <a href="ePTRx.tcl-annot.html#::::StopPortsTransmit">::::StopPortsTransmit</a></a></strong> {portIdList} {
   <span class="comment-line">#foreach portId $portIdList {</span>
   <span class="comment-line">#   MapIxiaPortId $portId txChas txCard txPort</span>
   <span class="comment-line">#   ixStopPortTransmit  $txChas $txCard $txPort</span>
   <span class="comment-line">#}  </span>

   foreach portId $portIdList {
     <a name="::MapIxiaPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
     lappend plist &#34;$chas $card $port&#34;
   }

   <a name="::ixStopTransmit(1)"><a href="./mapping.tcl.html#::ixStopTransmit_100">::ixStopTransmit</a></a> $plist
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: StartPortsTransmit</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Start Ports Transmit</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [StartPortsTransmit $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::StartPortsTransmit_922">proc <a href="ePTRx.tcl-annot.html#::::StartPortsTransmit">::::StartPortsTransmit</a></a></strong> {portIdList} {
   <span class="comment-line">#foreach portId $portIdList {</span>
   <span class="comment-line">#   MapIxiaPortId $portId txChas txCard txPort</span>
   <span class="comment-line">#   ixStartPortTransmit  $txChas $txCard $txPort</span>
   <span class="comment-line">#}  </span>

   foreach portId $portIdList {
     <a name="::MapIxiaPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
     lappend plist &#34;$chas $card $port&#34;
   }

   <a name="::ixStartTransmit(1)"><a href="./mapping.tcl.html#::ixStartTransmit_91">::ixStartTransmit</a></a> $plist
}
       
<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ClearPortsStats</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Clear all Ports Stats</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##              [ClearPortsStats $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################            </span>
<strong><a name="::::ClearPortsStats_951">proc <a href="ePTRx.tcl-annot.html#::::ClearPortsStats">::::ClearPortsStats</a></a></strong> {portIdList} {
   <span class="comment-line">#foreach portId $portIdList {</span>
   <span class="comment-line">#   MapIxiaPortId $portId txChas txCard txPort</span>
   <span class="comment-line">#   ixClearPortStats $txChas $txCard $txPort</span>
   <span class="comment-line">#}</span>

   foreach portId $portIdList {
     <a name="::MapIxiaPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
     lappend plist &#34;$chas $card $port&#34;
   }

   <a name="::ixClearStats(1)"><a href="./mapping.tcl.html#::ixClearStats_124">::ixClearStats</a></a> $plist

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetCapturedFrames</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the captured frames</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return the captured frames</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#             [GetCapturedFrames $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::GetCapturedFrames_982">proc <a href="ePTRx.tcl-annot.html#::::GetCapturedFrames">::::GetCapturedFrames</a></a></strong> {portId {fd_res &#34;NULL&#34;} {packThreshold 200}} {
<span class="comment-line">#   puts &#34;portId: $portId&#34;</span>
   set numRece [<a name="::GetNumFramesReceived(1)"><a href="./ePTRx.tcl.html#::GetNumFramesReceived_1346">::GetNumFramesReceived</a></a> $portId]
   if {$numRece &gt; $packThreshold} {
      <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;High number of packets ($numRece) captured. \
                    Return without getting any packets&#34;
      return
   }
   <a name="::MapIxiaPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasis card port
   return [<a name="::ixiaCaptureOnePort(1)"><a href="./ePTRx.tcl.html#::ixiaCaptureOnePort_444">::ixiaCaptureOnePort</a></a> $chasis $card $port $fd_res]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetCapturedFramesTimeStamp</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the captured frames time stamp</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return the captured frames time stamp</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [GetCapturedFramesTimeStamp $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::GetCapturedFramesTimeStamp_1010">proc <a href="ePTRx.tcl-annot.html#::::GetCapturedFramesTimeStamp">::::GetCapturedFramesTimeStamp</a></a></strong> {portId {fd_res &#34;NULL&#34;}} {
<span class="comment-line">#  puts &#34;portId: $portId&#34;</span>
   <a name="::MapIxiaPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasis card port
   return [<a name="::ixiaCapturedFramesTimeStamp(1)"><a href="./ePTRx.tcl.html#::ixiaCapturedFramesTimeStamp_1777">::ixiaCapturedFramesTimeStamp</a></a> $chasis $card $port $fd_res]
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetCapturedFramesTimeStampIndexed</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the captured frames time stamp</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:  indexList - List of index numbers &#34;1 4 9 10&#34;</span>
<span class="comment-line">#              portId - Port id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return a list of captured frames time stamps</span>
<span class="comment-line">#              for the indexes input.  Time is the 6 MSDigits</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [GetCapturedFramesTimeStampIndexed $indexList $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetCapturedFramesTimeStampIndexed_1034">proc <a href="ePTRx.tcl-annot.html#::::GetCapturedFramesTimeStampIndexed">::::GetCapturedFramesTimeStampIndexed</a></a></strong> {{indexList &#34;1 2 3&#34;} {portId 1}} {
   set zeroTime 0
   set hitFirst 0
   foreach pCount $indexList {
      set timeString [lindex [<a name="::GetCapturedFramesTimeStamp(1)"><a href="./ePTRx.tcl.html#::GetCapturedFramesTimeStamp_1010">::GetCapturedFramesTimeStamp</a></a> $portId] $pCount]
      set timeLength [string length $timeString]
      switch $timeLength {
         &#34;18&#34; {
            lappend actTimeList [string range $timeString 0 8]
            set currentTime [string range $timeString 0 8]
         }         
         &#34;17&#34; {
            lappend actTimeList [string range $timeString 0 7]
            set currentTime [string range $timeString 0 7]
         }
         &#34;16&#34; {
            lappend actTimeList [string range $timeString 0 6]
            set currentTime [string range $timeString 0 6]
         }
         &#34;15&#34; {
            lappend actTimeList [string range $timeString 0 5]
            set currentTime [string range $timeString 0 5]
         }
         &#34;14&#34; {
            lappend actTimeList [string range $timeString 0 4]
            set currentTime [string range $timeString 0 4]
         }
         &#34;13&#34; {
            lappend actTimeList [string range $timeString 0 3]
            set currentTime [string range $timeString 0 3]
         }
         default {
            <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Illegal time length $timeLength $timeString&#34;
            lappend actTimeList &#34;&#34;
         }
      }
      if {$hitFirst == 0} {
         set hitFirst 1;
         set zeroTime $currentTime
         
      }
      <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Normalized Time: [expr $currentTime - $zeroTime] \
                    TimeStamp: $currentTime&#34;
   }
return $actTimeList
}
<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: EnablePorts</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Turn on loop back on the ixia port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [EnablePorts $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::EnablePorts_1096">proc <a href="ePTRx.tcl-annot.html#::::EnablePorts">::::EnablePorts</a></a></strong> {portIdList} {
    <a name="::EnableIxiaPorts(1)"><a href="./ePTRx.tcl.html#::EnableIxiaPorts_1117">::EnableIxiaPorts</a></a> $portIdList;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: EnableIxiaPorts</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Turn on loop back on the ixia port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [EnableIxiaPorts $portIdList]</span>
<span class="comment-line">##             [EnableIxiaPorts $portIdList 0]  ;# Do not wait for link</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::EnableIxiaPorts_1117">proc <a href="ePTRx.tcl-annot.html#::::EnableIxiaPorts">::::EnableIxiaPorts</a></a></strong> {portIdList {maxWait 15}} {

    <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Enabling Ixia ports $portIdList&#34;

    foreach portId $portIdList {
	<a name="::MapIxiaPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasis card port
	<span class="comment-line">#SK  Get the port before re-writing to avoid messing up the old port info.</span>
	<a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chasis $card $port
	
        set ixiaCardType [<a name="::getIxiaCardType(1)"><a href="./misc.tcl.html#::getIxiaCardType_3690">::getIxiaCardType</a></a> $portId]
        <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;port $portId IXIA CARD IS $ixiaCardType&#34;
        if {![regexp -nocase &#34;TXS|GBIC|STX&#34; $ixiaCardType]} { ;<span class="comment-line"># LM dont have cabledisconnect</span>
           <a name="::port(2)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback false
        } else {
           <a name="::port(3)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -enableSimulateCableDisconnect false
        }
	
	<span class="comment-line"># add this line for GBIC card</span>
	<a name="::port(4)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -rxTxMode gigNormal
	
	<a name="::port(5)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> set $chasis $card $port
	<a name="::port(6)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> write $chasis $card $port
	
<span class="comment-line"># ---   Required for Ixia ports shared across setups by a Extreme</span>
<span class="comment-line">#       Device as L1 Switch</span>
        <a name="::exDevIxiaPortEnable(1)"><a href="./SetupShareLib.tcl.html#::exDevIxiaPortEnable_671">::exDevIxiaPortEnable</a></a> -portId $portId

	if {$maxWait == 0} {
	    continue
	}

	set maxWaitCounter $maxWait
	while { $maxWaitCounter } {
	    <a name="::port(7)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chasis $card $port
	    if {[<a name="::port(8)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> cget -linkState] == 1} {
		<a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;FOUND LINK UP for portId:$portId!&#34;
		break
	    } else {
		<a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Waiting for portId:$portId linkUp..&#34;
		sleep 1
		incr maxWaitCounter -1
	    }
	}
	if {$maxWaitCounter == 0} {
	    <a name="::result_warning(1)"><a href="./ql_multi.tcl.html#::result_warning_407">::result_warning</a></a> &#34;WARNING: No linkUp for Ixia portId:$portId&#34;
	}
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DisablePorts</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Turn off loop back on the ixia port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [DisablePorts $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::DisablePorts_1182">proc <a href="ePTRx.tcl-annot.html#::::DisablePorts">::::DisablePorts</a></a></strong> {portIdList} {
   <a name="::DisableIxiaPorts(1)"><a href="./ePTRx.tcl.html#::DisableIxiaPorts_1201">::DisableIxiaPorts</a></a> $portIdList;
}
<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DisableIxiaPorts</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Turn off loop back on the ixia port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">##             [DisableIxiaPorts $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::DisableIxiaPorts_1201">proc <a href="ePTRx.tcl-annot.html#::::DisableIxiaPorts">::::DisableIxiaPorts</a></a></strong> {portIdList} {

   <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Disabling Ixia ports $portIdList&#34;

   <span class="comment-line">#an indirect way to disable a port</span>
   foreach portId $portIdList {
      <a name="::MapIxiaPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasis card port

      <span class="comment-line">#SK  Get the port before re-writing to avoid messing up the old port info.</span>
      <a name="::port(9)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chasis $card $port

      set ixiaCardType [<a name="::getIxiaCardType(2)"><a href="./misc.tcl.html#::getIxiaCardType_3690">::getIxiaCardType</a></a> $portId]
      <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;port $portId IXIA CARD IS $ixiaCardType&#34;

      <span class="comment-line">#SK: Following code needed to clear the buffer on disabled port.</span>
      <span class="comment-line">#SK: Put the port on loopback, start port capture to clear the buffer</span>
      if {![regexp -nocase &#34;TXS|GBIC&#34; $ixiaCardType]} {
         <a name="::port(10)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback true
      } else {
         <a name="::port(11)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback true
         <a name="::port(12)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -rxTxMode gigLoopback
      }
      <a name="::port(13)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> set $chasis $card $port
      <a name="::port(14)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> write $chasis $card $port
      <a name="::StartPortsCapture(1)"><a href="./ePTRx.tcl.html#::StartPortsCapture_820">::StartPortsCapture</a></a> $portId
      <a name="::StartPortsCapture(2)"><a href="./ePTRx.tcl.html#::StartPortsCapture_820">::StartPortsCapture</a></a> $portId
      if {![regexp -nocase &#34;TXS|GBIC&#34; $ixiaCardType]} {
         <a name="::port(15)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback false
      } else {
         <a name="::port(16)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback false
	 <a name="::port(17)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -rxTxMode gigNormal
      }
      
      <span class="comment-line">#SK: Actual disable port</span>
      if {![regexp -nocase &#34;TXS|GBIC|STX&#34; $ixiaCardType]} {
         <a name="::port(18)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -loopback true
      } else {
         <a name="::port(19)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> config -enableSimulateCableDisconnect true
      }

      <a name="::port(20)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> set $chasis $card $port
      <a name="::port(21)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> write $chasis $card $port

<span class="comment-line"># --- Required for Ixia ports shared across setups by a Extreme</span>
<span class="comment-line">#     Device as L1 Switch</span>
      <a name="::exDevIxiaPortDisable(1)"><a href="./SetupShareLib.tcl.html#::exDevIxiaPortDisable_627">::exDevIxiaPortDisable</a></a> -portId $portId
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetNumBytesSent</span>

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetNumBytesSent</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of bytes sent on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return bytes sent</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetNumBytesSent $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::GetNumBytesSent_1269">proc <a href="ePTRx.tcl-annot.html#::::GetNumBytesSent">::::GetNumBytesSent</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(49)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   <a name="::version(1)"><a href="./ePTClient.tcl.html#::version_470">::version</a></a> get
<span class="comment-line">#   set ver [version cget -productVersion]</span>
   set bytesSent [<a name="::stat(50)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
   <span class="comment-line">#this bytesSent is only half of the actual bytes sent (Ixia bug)</span>
   <a name="::port(22)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chasisId $card $port
<span class="comment-line">#   if {([port cget -speed] == 100) &amp;&amp; ([regexp -nocase &#34;2.1&#34; $ver])} {</span>
<span class="comment-line">#      return [expr $bytesSent/2]</span>
<span class="comment-line">#   } else { return $bytesSent }</span>
return $bytesSent
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetNumBytesReceived</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of bytes received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return bytes received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetNumBytesReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::GetNumBytesReceived_1299">proc <a href="ePTRx.tcl-annot.html#::::GetNumBytesReceived">::::GetNumBytesReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(51)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   set bytesRecv [<a name="::stat(52)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
   <span class="comment-line">#remove the stupid comma</span>
   regsub -all {,} $bytesRecv {} bytesRecv
   return $bytesRecv
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetNumFramesSent</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of frames sent on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return frames sent</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetNumFramesSent $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetNumFramesSent_1324">proc <a href="ePTRx.tcl-annot.html#::::GetNumFramesSent">::::GetNumFramesSent</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(53)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   return [<a name="::stat(54)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetNumFramesReceived</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of frames received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return frames received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetNumFramesReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetNumFramesReceived_1346">proc <a href="ePTRx.tcl-annot.html#::::GetNumFramesReceived">::::GetNumFramesReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(55)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   return [<a name="::stat(56)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]
}

<strong><a name="::::GetNumOversizedFramesReceived_1352">proc <a href="ePTRx.tcl-annot.html#::::GetNumOversizedFramesReceived">::::GetNumOversizedFramesReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(15)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(57)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   return [<a name="::stat(58)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -oversize]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetFrameRateSent</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of frame rate sent on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return frame rate sent</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetFrameRateSent $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetFrameRateSent_1374">proc <a href="ePTRx.tcl-annot.html#::::GetFrameRateSent">::::GetFrameRateSent</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(16)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(59)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(60)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesSent]
}

<strong><a name="::::GetOversizedFrameRateReceived_1380">proc <a href="ePTRx.tcl-annot.html#::::GetOversizedFrameRateReceived">::::GetOversizedFrameRateReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(17)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(61)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(62)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -oversize]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetFrameRateReceived</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of frame rate received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return frame rate received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetFrameRateReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetFrameRateReceived_1402">proc <a href="ePTRx.tcl-annot.html#::::GetFrameRateReceived">::::GetFrameRateReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(18)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(63)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(64)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -framesReceived]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetTaggedFrameRateReceived</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of tagged frame rate received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return tagged frame rate received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetTaggedFrameRateReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetTaggedFrameRateReceived_1424">proc <a href="ePTRx.tcl-annot.html#::::GetTaggedFrameRateReceived">::::GetTaggedFrameRateReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(19)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(65)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(66)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -vlanTaggedFramesRx]
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetByteRateSent</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of byte rate sent on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return byte rate sent</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetByteRateSent $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetByteRateSent_1446">proc <a href="ePTRx.tcl-annot.html#::::GetByteRateSent">::::GetByteRateSent</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(20)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(67)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(68)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
   
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetByteRateReceived</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of byte rate received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return byte rate received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetByteRateReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetByteRateReceived_1469">proc <a href="ePTRx.tcl-annot.html#::::GetByteRateReceived">::::GetByteRateReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(21)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(69)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
   return [<a name="::stat(70)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
   
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetRxArpRequest</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Get the number of ARP request received on a port</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return numer of ARP request received</span>
<span class="comment-line">#              </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [GetRxArpRequest $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetRxArpRequest_1492">proc <a href="ePTRx.tcl-annot.html#::::GetRxArpRequest">::::GetRxArpRequest</a></a></strong> {{portId &#34;1&#34;}} {
	<a name="::MapIxiaPortId(22)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasis card port
	<a name="::stat(71)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasis $card $port
	return [<a name="::stat(72)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -rxArpRequest]
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Description: CheckRates</span>
<span class="comment-line">#     This proc can be used to check the tx and Rx packet rate.</span>
<span class="comment-line">#     It accepts Rx ports' list to check on multiple rx ports.</span>
<span class="comment-line">#     It calls GetFrameRateSent and GetFrameRateReceived.</span>
<span class="comment-line"># Input args: txPortId, rxPortIdList, percent_tolerance</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line"># CheckRates $txPort $rxPortList</span>
<span class="comment-line">##################################################################    </span>

<strong><a name="::::CheckRates_1509">proc <a href="ePTRx.tcl-annot.html#::::CheckRates">::::CheckRates</a></a></strong> {txPortId rxPortIdList {comment &#34;&#34;} {percent_tolerance .011} args } {
   set rtValue &#34;ok&#34;
  <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CheckRates $args {
    reportResults 1
     oversize &#34;false&#34;
     reportResults 1
  }

   
   if {$txPortId &gt; 100 } {
      set txRate $txPortId
   } else { set txRate [<a name="::GetFrameRateSent(1)"><a href="./ePTRx.tcl.html#::GetFrameRateSent_1374">::GetFrameRateSent</a></a> $txPortId] }

   if {$reportResults} {
      <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Checking Rates $comment&#34;
   }

   foreach var $rxPortIdList {
  
      set rxPort [lindex $var 0]
      set rxPercent [lindex $var 1]
      set tag [lindex $var 2]
      if {$tag!=&#34;&#34;} {
         set rxRate [<a name="::GetTaggedFrameRateReceived(1)"><a href="./ePTRx.tcl.html#::GetTaggedFrameRateReceived_1424">::GetTaggedFrameRateReceived</a></a> $rxPort]
      } else {
         set rxRate [<a name="::GetFrameRateReceived(1)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> $rxPort]
      }
      if {$oversize==&#34;true&#34;} {
         set rxRate [<a name="::GetOversizedFrameRateReceived(1)"><a href="./ePTRx.tcl.html#::GetOversizedFrameRateReceived_1380">::GetOversizedFrameRateReceived</a></a> $rxPort]
      }
   
      if {$reportResults} {
         <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Comparing txRate($txPortId)=$txRate and rxRate($rxPort)=$rxRate&#34;
      }
      <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Comparing txRate($txPortId)=$txRate and rxRate($rxPort)=$rxRate&#34;

      if { $txRate == 0 } {         
         if { $rxRate == 0 } {
            if {$reportResults == 1} {
        	    <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;txRate($txPortId)=rxRate($rxPort)=0&#34;
		} else {
	            <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;txRate($txPortId)=rxRate($rxPort)=0&#34;
		}
	         set rtValue &#34;error&#34;
         } else {
            if {$reportResults == 1} {
	         <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;txRate($txPortId)=0 but rxRate($rxPort)=$rxRate&#34;
		 } else {
	         <a name="::result_debug(17)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;txRate($txPortId)=0 but rxRate($rxPort)=$rxRate&#34;
		 }
	         set rtValue &#34;error&#34;
         }
      } else {
         set exp_rxRate [expr abs (double($txRate) * $rxPercent/100)]
         if {$rxRate &lt; $exp_rxRate} {
             set diff [expr abs( double($exp_rxRate) - double($rxRate) )]
         } else {
             set diff [expr abs( double($rxRate) - double($exp_rxRate) )]
         }
         <a name="::result_debug(18)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Rate $exp_rxRate Diff $diff&#34;
         if {$exp_rxRate &lt; 0.0001 } {
            if {($txRate &gt; 1000) &amp;&amp; ($rxRate &lt;= 10)} {
                set pPercent 0;
            } else {
                set pPercent [expr $diff * $percent_tolerance] ;<span class="comment-line"># not sure this is right             </span>
            }
         } else {
            set pPercent [expr double($diff) / double($exp_rxRate) * 100.0]
         }           
         <a name="::result_debug(19)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- pPercent=$pPercent&#34;
         if { $pPercent &lt;= $percent_tolerance } {
            <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;TxRate:$txRate, rxRate:$rxRate check Passed&#34;
	      set rtValue &#34;ok&#34;
	 } elseif { $diff &lt;= 5 } {
            <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;TxRate:$txRate, rxRate:$rxRate check Passed&#34;
	      set rtValue &#34;ok&#34;	         
         } else {
	if {$reportResults == 1} {
            <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;TxRate:$txRate, rxRate:$rxRate check Failed. diff percentage:$pPercent exceeds %tolerance:$percent_tolerance&#34;
            <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> [format &#34;Difference (%01.2f%%) exceeds tolerance (%01.2f%%). Tx Rate is $txRate, Rx Rate is $rxRate.\n&#34; $pPercent $percent_tolerance]
	  } else {
	    <a name="::result_debug(20)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;TxRate:$txRate, rxRate:$rxRate check Failed. diff percentage:$pPercent exceeds %tolerance:$percent_tolerance&#34;
            <a name="::result_debug(21)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> [format &#34;Difference (%01.2f%%) exceeds tolerance (%01.2f%%). Tx Rate is $txRate, Rx Rate is $rxRate.\n&#34; $pPercent $percent_tolerance]
	  }
            set rtValue &#34;error&#34;
         }
      }
      if {$reportResults} {
         <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      }
   }
   if {$reportResults} {
      <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }
   return $rtValue
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Description: CheckRatesTxRx</span>
<span class="comment-line">#     This proc can be used to check the tx and Rx packet rate.</span>
<span class="comment-line">#     It accepts Tx and Rx ports' list to check on multiple rx ports.</span>
<span class="comment-line">#     It calls GetFrameRateSent and GetFrameRateReceived.</span>
<span class="comment-line">#</span>
<span class="comment-line">#     Differs from CheckRates in that specific Tx port %s are matched to</span>
<span class="comment-line">#     specific rx port %s.  negTest is used to verify 0% receives</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: infoList, percent_tolerance</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># lappend infoList {{1 1} {9 100 1}} :port1 tagged tx to port9 tagged expect 100%</span>
<span class="comment-line"># lappend infoList {{2 1} {10 100 1}}</span>
<span class="comment-line"># lappend infoList {{3} {11 50}} :port3 untag tx to port9 untag expect 50%</span>
<span class="comment-line"># lappend infoList {{4} {12 100}}</span>
<span class="comment-line"># lappend infoList {{negTest} {1 0}} :port1 expects 0%</span>
<span class="comment-line"># lappend infoList {{negTest} {2 0}}</span>
<span class="comment-line"># lappend infoList {{negTest} {3 0}}</span>
<span class="comment-line"># lappend infoList {{negTest} {4 0}}</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line"># CheckRatesTxRx $infoList</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">##################################################################    </span>

<strong><a name="::::CheckRatesTxRx_1631">proc <a href="ePTRx.tcl-annot.html#::::CheckRatesTxRx">::::CheckRatesTxRx</a></a></strong> {infoList {comment &#34;&#34;} {percent_tolerance .011} {sumRx &#34;No&#34;} {expectedSum 100}} {
    set rtValue &#34;ok&#34;
    
    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Checking Rates $comment&#34;
    set getSumTx 1
    set sumRxList &#34;&#34;
    foreach var $infoList {
        set txInfoList [lindex $var 0]
        set rxInfoList [lindex $var 1]
        <a name="::result_debug(22)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Transmit Information = $txInfoList&#34;
        <a name="::result_debug(23)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Receive Information = $rxInfoList&#34;
        <span class="comment-line"># set tx vars</span>
        set txPort [lindex $txInfoList 0]
        set txTag [lindex $txInfoList 1]
        <span class="comment-line">#   set the sumTx for sumRx comparison</span>
        if {$getSumTx &amp;&amp; $txPort != &#34;negTest&#34;} {
           set sumTx [<a name="::GetFrameRateSent(2)"><a href="./ePTRx.tcl.html#::GetFrameRateSent_1374">::GetFrameRateSent</a></a> $txPort]
           set getSumTx 0
        }
        <span class="comment-line"># set rx vars</span>
        set rxPort [lindex $rxInfoList 0]
        set rxPercent [lindex $rxInfoList 1]
        set rxTag [lindex $rxInfoList 2]
        <span class="comment-line">#######################################################</span>
        <span class="comment-line"># Setup the the RX port rates</span>
        <span class="comment-line">#######################################################</span>
        if {$rxTag!=&#34;&#34;} {
            set rxRate [<a name="::GetTaggedFrameRateReceived(2)"><a href="./ePTRx.tcl.html#::GetTaggedFrameRateReceived_1424">::GetTaggedFrameRateReceived</a></a> $rxPort]
        } else {
            set rxRate [<a name="::GetFrameRateReceived(2)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> $rxPort]
        }
        lappend sumRxList $rxRate
        <span class="comment-line">#######################################################</span>
        <span class="comment-line"># Setup Negative Test rx Port Verification</span>
        <span class="comment-line">#######################################################</span>
        if {$txPort == &#34;negTest&#34;} {
            <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Negative Test: Expecting 0% on rxRate($rxPort)=$rxRate&#34;
            <a name="::result_debug(24)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Negative Test: Expecting 0% on rxRate($rxPort)=$rxRate&#34;
            <a name="::result_debug(25)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- rxPercent=$rxPercent&#34;
            if { $rxRate &lt; [expr [<a name="::GetPortIdSpeed(1)"><a href="./ePTMisc.tcl.html#::GetPortIdSpeed_451">::GetPortIdSpeed</a></a> $rxPort] * $percent_tolerance] } {
                    <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Negative Test: $rxPort RxRate:$rxRate check Passed&#34;
                    set rtValue &#34;ok&#34;
            } else {
                    set pPercent [expr [<a name="::GetPortIdSpeed(2)"><a href="./ePTMisc.tcl.html#::GetPortIdSpeed_451">::GetPortIdSpeed</a></a> $rxPort] * $percent_tolerance]
                    <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Negative Test: $rxPort rxRate:$rxRate check Failed. diff percentage:$pPercent exceeds %tolerance:$percent_tolerance&#34;
                    set rtValue &#34;error&#34;
            }

            <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
            continue;

        }
        <span class="comment-line">#######################################################</span>
        <span class="comment-line"># Setup the the TX port rates</span>
        <span class="comment-line">#######################################################</span>
        set txRate [<a name="::GetFrameRateSent(3)"><a href="./ePTRx.tcl.html#::GetFrameRateSent_1374">::GetFrameRateSent</a></a> $txPort]
        
        <a name="::result_debug(26)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;tx1 = [<a name="::GetFrameRateReceived(3)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> 1] tx2 = [<a name="::GetFrameRateReceived(4)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> 2] \
                      tx3 = [<a name="::GetFrameRateReceived(5)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> 3] tx4 = [<a name="::GetFrameRateReceived(6)"><a href="./ePTRx.tcl.html#::GetFrameRateReceived_1402">::GetFrameRateReceived</a></a> 4]&#34;
        <span class="comment-line">#######################################################</span>
        <span class="comment-line"># Start port compare</span>
        <span class="comment-line">#######################################################</span>
        set exp_rxRate [expr abs (double($txRate) * $rxPercent/100)]
        <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;txRate($txPort)=$txRate to rxRate($rxPort)=$rxRate (want $exp_rxRate)&#34;
        <a name="::result_debug(27)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Sending txRate($txPort)=$txRate to rxRate($rxPort)=$rxRate&#34;
        
        if {$rxRate &lt; $exp_rxRate} {
            set diff [expr abs( double($exp_rxRate) - double($rxRate) )]
        } else {
            set diff [expr abs( double($rxRate) - double($exp_rxRate) )]
        }
        <a name="::result_debug(28)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Expected Rate at rxRate($rxPort) = $exp_rxRate Difference = $diff&#34;
        if {$exp_rxRate &lt; 0.0001 } {
            <span class="comment-line"># If expected rate = 0</span>
            if {$txRate != 0} {
                set pPercent [expr double($diff) / double($txRate)] ;<span class="comment-line"># not sure this is right</span>
        } else {
                set pPercent 0
            }
                         
        } else {
            set pPercent [expr double($diff) / double($exp_rxRate)] ;<span class="comment-line"># perc missed by</span>
        }           
        <a name="::result_debug(29)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- pPercent=$pPercent&#34;
        if { $pPercent &lt;= $percent_tolerance } {
            <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$txPort TxRate:$txRate, $rxPort RxRate:$rxRate check Passed&#34;
            set rtValue &#34;ok&#34;
        } elseif { $diff &lt;= 5 } {
            <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$txPort TxRate:$txRate, $rxPort rxRate:$rxRate check Passed&#34;
            set rtValue &#34;ok&#34;	         
        } else {
            <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$txPort TxRate:$txRate, $rxPort rxRate:$rxRate check Failed. diff percentage:$pPercent exceeds %tolerance:$percent_tolerance&#34;
            <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> [format &#34;Difference (%01.2f%%) exceeds tolerance (%01.2f%%). Tx Rate is $txRate, Rx Rate is $rxRate.\n&#34; $pPercent $percent_tolerance]
            set rtValue &#34;error&#34;
        }
        <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }
   if {$sumRx == &#34;SumRx&#34;} {
      <span class="comment-line">#set expectCount [expr double($sumTx) * $rxPercent / 100]</span>
      set expectCount [expr (double($expectedSum) / double(100)) * $sumTx]
      set rSum 0
      foreach sRate $sumRxList {
         set rSum [expr abs( double($rSum) + double($sRate) )]
      }
      set diff [expr abs( double($rSum) - double($expectCount) )]
      if {$expectCount != 0} {
         set pPercent [expr double($diff) / double($expectCount)]
      } else {
         if {$rSum &lt; 100} {
            set pPercent 0.0
         } else {
            set pPercent 0.20
         }
      }
      <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Sum Rx Totals: $rSum (want ${expectCount})&#34;
      if {$pPercent &lt; 0.18} {
         <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Expected Rx Sum: $expectCount  Actual Sum: $rSum  Diff: $diff&#34;
      } else {
         <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Expected Rx Sum: $expectCount  Actual Sum: $rSum  Diff: $diff&#34;
      }
      <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }
   <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   return $rtValue
}    


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ixiaCapturedFramesTimeStamp</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Ixia capture frames timestamp</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#                Ch - chassis id</span>
<span class="comment-line">#                cd - card id</span>
<span class="comment-line">#                pt - port id  </span>
<span class="comment-line">#                fd_res - file pointer</span>
<span class="comment-line">#                                            </span>
<span class="comment-line"># Output args: </span>
<span class="comment-line">#              return $timeStamps</span>
<span class="comment-line"># </span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [ixiaCapturedFramesTimeStamp $chasis $card $port $fd_res]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: utility</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::ixiaCapturedFramesTimeStamp_1777">proc <a href="ePTRx.tcl-annot.html#::::ixiaCapturedFramesTimeStamp">::::ixiaCapturedFramesTimeStamp</a></a></strong> {{ch 1}          \
                         {cd 1}          \
                         {pt 1}          \
                         {fd_res &#34;NULL&#34;} \
						 {fd_in &#34;NULL&#34;}} {
   global spawn_id

   <a name="::capture(14)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $ch $cd $pt
   set numCapFrames [<a name="::capture(15)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]
   <a name="::captureBuffer(24)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> get $ch $cd $pt 1 $numCapFrames


   for {set i 1} {$i &lt;= $numCapFrames} {incr i} {
      <a name="::captureBuffer(25)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> getframe $i
      puts &#34;capturebuffer cget -timestamp = [<a name="::captureBuffer(26)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -timestamp]&#34;
      if { $fd_res != &#34;NULL&#34; } { 
         puts $fd_res &#34;captureBuffer cget -timestamp = [<a name="::captureBuffer(27)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -timestamp]&#34;
      }
      if {$fd_in != &#34;NULL&#34;} { 
         puts $fd_in &#34;[<a name="::captureBuffer(28)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -timestamp]&#34; 
      } else {
         lappend timeStamps &#34;[<a name="::captureBuffer(29)"><a href="./ePTClient.tcl.html#::captureBuffer_1714">::captureBuffer</a></a> cget -timestamp]&#34;
      }
<span class="comment-line">#      puts &#34;captureBuffer cget -timestamp = [captureBuffer cget -timestamp]&#34;</span>
   }
   if {$fd_in == &#34;NULL&#34;} { 
     if { [ info exists timeStamps ] != &#34;1&#34; } { set timeStamps {} }
      return $timeStamps
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     This proc can be used to enable filter on the rx Ports.</span>
<span class="comment-line">#     Each rx port filters and counts the received frames based on UDS1.</span>
<span class="comment-line"># Input args: PortIdList, daMacList, saMacList, daIpList</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line"># Typical usage example:</span>
<span class="comment-line">#  ixiaPortFilterStat1 &#34;1 2&#34; &#34;$daMAc1 $daMac2&#34; &#34;$saMac1 $saMac2&#34; &#34;$daIpAddress&#34;</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::EnablePortFilter_1817">proc <a href="ePTRx.tcl-annot.html#::::EnablePortFilter">::::EnablePortFilter</a></a></strong> { portIdList {daMacList &#34;{00 00 00 00 00 00}&#34;} \
			   {saMacList &#34;{00 00 00 00 00 00}&#34;} \
			   {daIpList &#34;&#34;} {patternMask {00 00 00 00}} {pattern1 &#34;&#34;} {patternOffset1 &#34;32&#34;} {saMaskLst &#34;{00 00 00 00 00 00}&#34;} {daMaskLst &#34;{00 00 00 00 00 00}&#34;}} {

   global one2oneArray
   <a name="::result_debug(30)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nEnabling filter UDS1 for ports: $portIdList&#34;
   if {[llength $portIdList] &lt; 1} {
     <a name="::result_debug(31)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;empty port list: can't enable port filter&#34;
     return
   }   
   <a name="::map(1)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> new -type  one2one
   <a name="::map(2)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> config -type  one2one
   set pos 0  
   foreach portId $portIdList {
      set daMac [lindex $daMacList $pos] 
      if {$daMac == &#34;&#34;} {
        set daMac &#34;00 00 00 00 00 00&#34;
      }
      set saMac [lindex $saMacList $pos] 
      if {$saMac == &#34;&#34;} {
        set saMac &#34;00 00 00 00 00 00&#34;
      }
      set daIp [lindex $daIpList $pos]
      <span class="comment-line">#----- addding saMask and daMask for the source and dest mac</span>
      set saMask [lindex $saMaskLst $pos]
      if {$saMask == &#34;&#34;} {
        set saMask &#34;00 00 00 00 00 00&#34;
      }
      set daMask [lindex $daMaskLst $pos]
      if {$daMask == &#34;&#34;} {
        set daMask &#34;00 00 00 00 00 00&#34;
      }
   
      <a name="::MapIxiaPortId(23)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId ch c p
      <a name="::map(3)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> add $ch $c $p $ch $c $p
      <a name="::filter(1)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> setDefault        
      <a name="::filter(2)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1Enable  true
      <a name="::filter(3)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable                true
      <a name="::filter(4)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable               true
      if {[regexp -nocase &#34;00 00 00 00 00 00&#34; $saMac]} {
        <a name="::filter(5)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1SA      anyPattern
      } else {
        <a name="::filter(6)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1SA      addr1
      }
      if {[regexp -nocase &#34;00 00 00 00 00 00&#34; $daMac]} {
        <a name="::filter(7)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1DA      anyPattern
      } else {
        <a name="::filter(8)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1DA      addr1
      }

      <a name="::filter(9)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern       anyPattern
      <a name="::filter(10)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern   anyPattern
      <a name="::filter(11)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA   anyAddr
      <a name="::filter(12)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA    anyAddr


 if {$daIp != &#34;&#34;} {
        <a name="::filter(13)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1Pattern    pattern1
      }
if {$pattern1 != &#34;&#34; } {
   <a name="::filter(14)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1Pattern    pattern1
}

      <a name="::filter(15)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a>                       set               $ch $c $p
      <a name="::filterPallette(1)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> setDefault
      <a name="::filterPallette(2)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -DA1  $daMac
      <a name="::filterPallette(3)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -SA1  $saMac
      <a name="::filterPallette(4)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -DAMask1 $daMask
      <a name="::filterPallette(5)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -SAMask1 $saMask
 if {$daIp != &#34;&#34;} {
      <a name="::filterPallette(6)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -matchType1   matchIpDAEthernetII
      set fir &#34;&#34;
      set sec &#34;&#34;
      set thi &#34;&#34;
      set fou &#34;&#34;
      scan $daIp %d.%d.%d.%d fir sec thi fou
      if {($fir!=&#34;&#34;)&amp;&amp;($sec!=&#34;&#34;)&amp;&amp;($thi!=&#34;&#34;)&amp;&amp;($fou!=&#34;&#34;)} {
         set pattern1 [string toupper [format &#34;%02x %02x %02x %02x&#34; $fir $sec $thi $fou]]
      } else {

         set pattern1 &#34;&#34;
      }

 <a name="::filterPallette(7)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -pattern1 $pattern1
      <a name="::filterPallette(8)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternOffset1 32
}
 if {$patternMask!=&#34;00 00 00 00&#34;} {
         <a name="::filterPallette(9)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternMask1 $patternMask
      }
if {$pattern1 != &#34;&#34; } {
<a name="::filterPallette(10)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a>               config            -pattern1           $pattern1 
<a name="::filterPallette(11)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a>               config            -patternOffset1     $patternOffset1              
}

<a name="::filterPallette(12)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a>               set               $ch $c $p
      
      <a name="::result_debug(32)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;port $portId: DA1=$daMac; SA1=$saMac; pattern1=$pattern1 patternOffset1 $patternOffset1&#34;
      incr pos
   }
<span class="comment-line">#   parray one2oneArray</span>
<span class="comment-line">#   writeConfigToHardware one2oneArray</span>

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DisablePortFilter</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Turn off the ixia ports filter</span>
<span class="comment-line">#               </span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - port list</span>
<span class="comment-line">#                                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#              </span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#              [DisablePortFilter $portIdList]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::DisablePortFilter_1937">proc <a href="ePTRx.tcl-annot.html#::::DisablePortFilter">::::DisablePortFilter</a></a></strong> { portIdList } {
   
   global one2oneArray
   <a name="::result_debug(33)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nDisabling filter UDS1 for ports: $portIdList&#34;
   if {[llength $portIdList] &lt; 1} {
     <a name="::result_debug(34)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;empty port list: can't disable port filter&#34;
     return
   }
   <a name="::map(4)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> new -type  one2one
   <a name="::map(5)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> config -type  one2one
   foreach portId $portIdList {
      <a name="::MapIxiaPortId(24)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId ch c p
      <a name="::map(6)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> add $ch $c $p $ch $c $p
      <a name="::filter(16)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> setDefault
      <a name="::filter(17)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable true ;<span class="comment-line"># needed to capture pkts</span>
      <a name="::filter(18)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable true ;<span class="comment-line"># needed to capture pkts</span>
      <a name="::filter(19)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> set $ch $c $p
      <a name="::filterPallette(13)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> setDefault
      <a name="::filterPallette(14)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> set $ch $c $p
   }
   <a name="::writeConfigToHardware(1)"><a href="./mapping.tcl.html#::writeConfigToHardware_148">::writeConfigToHardware</a></a> one2oneArray
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: CheckMatchPacketType   </span>
<span class="comment-line"># Description: </span>
<span class="comment-line">#	check and return the no. of matched packets from the captured frames list on </span>
<span class="comment-line">#	given ixia port no. by comparing the specified packet type (required), source ip,</span>
<span class="comment-line">#	destination ip, source Mac, and destination Mac.  The latter 4 optional parameters</span>
<span class="comment-line">#	can be bypassed with default value &#34;dontcare&#34;.   		     </span>
<span class="comment-line"># Input args: portId pktType args(-scrIp -destIp -srcMac -destMac)</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	set matchCnt [CheckMatchPacketType 1 &#34;ARP_REQUEST&#34; -srcIp &#34;10.10.10.1&#34;]   </span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::CheckMatchPacketType_1973">proc <a href="ePTRx.tcl-annot.html#::::CheckMatchPacketType">::::CheckMatchPacketType</a></a></strong> {portId pktType args } {
  <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CheckMatchPacketType $args {
  	srcIp &#34;dontcare&#34;
  	destIp &#34;dontcare&#34;
  	srcMac &#34;dontcare&#34;
  	destMac &#34;dontcare&#34;
  }
  <a name="::result_debug(35)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;CheckMatchPacketType{}: checking $pktType in the captured packets on port $portId&#34;
  set frameList [<a name="::GetCapturedFrames(1)"><a href="./ePTRx.tcl.html#::GetCapturedFrames_982">::GetCapturedFrames</a></a> $portId]
  set matchCnt 0    
  foreach frame $frameList {
    set sIpMatch 0
    set dIpMatch 0
    set sMacMatch 0
    set dMacMatch 0
    set msgtype [<a name="::GetMessageType(1)"><a href="./MessageDecoding.tcl.html#::GetMessageType_992">::GetMessageType</a></a> $frame]
    if {$srcIp == &#34;dontcare&#34; || $srcIp == [<a name="::GetSourceIPAddress(1)"><a href="./MessageDecoding.tcl.html#::GetSourceIPAddress_411">::GetSourceIPAddress</a></a> $frame]} {set sIpMatch 1}
    if {$destIp == &#34;dontcare&#34; || $destIp == [<a name="::GetDestIPAddress(1)"><a href="./MessageDecoding.tcl.html#::GetDestIPAddress_447">::GetDestIPAddress</a></a> $frame]} {set dIpMatch 1}
    if {$srcMac == &#34;dontcare&#34; || $srcMac == [<a name="::GetSenderMacAddress(1)"><a href="./MessageDecoding.tcl.html#::GetSenderMacAddress_62">::GetSenderMacAddress</a></a> $frame]} {set sMacMatch 1}
    if {$destMac == &#34;dontcare&#34; || $destMac == [<a name="::GetTargetMacAddress(1)"><a href="./MessageDecoding.tcl.html#::GetTargetMacAddress_159">::GetTargetMacAddress</a></a> $frame]} {set dMacMatch 1}   
    if {($msgtype == $pktType) &amp;&amp; $sIpMatch &amp;&amp; $dIpMatch &amp;&amp; $sMacMatch &amp;&amp; $dMacMatch } {
       incr matchCnt
       <a name="::result_debug(36)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;matched $msgtype packet #$matchCnt:&#34;
       <a name="::result_debug(37)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$frame&#34;       
    }
  }
  <a name="::result_debug(38)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;CheckMatchPacketType{}: total $matchCnt matched $pktType packets identified&#34;
  return $matchCnt
}  
<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: getNumOfCapturedPackets   </span>
<span class="comment-line"># Description: </span>
<span class="comment-line">#	gets the number of packets in a ports capture buffer</span>
<span class="comment-line"># Input args: portid </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	set numCapPackets [getNumOfCapturedPackets ]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::getNumOfCapturedPackets_2012">proc <a href="ePTRx.tcl-annot.html#::::getNumOfCapturedPackets">::::getNumOfCapturedPackets</a></a></strong> {portid } {
      set numCapFrames 0

      <a name="::MapIxiaPortId(25)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portid chassis card port
      <a name="::capture(16)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> get $chassis $card $port
      set numCapFrames [<a name="::capture(17)"><a href="./ePTClient.tcl.html#::capture_1672">::capture</a></a> cget -nPackets]

      return $numCapFrames
}
<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: StartPortsTransmitDuration</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Start Ports Transmit for duration</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portIdList - Port list</span>
<span class="comment-line">#              duration   - time in secs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">##             [StartPortsTransmitDuration $portIdList 210]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::StartPortsTransmitDuration_2037">proc <a href="ePTRx.tcl-annot.html#::::StartPortsTransmitDuration">::::StartPortsTransmitDuration</a></a></strong> {portIdList duration} {


foreach portId $portIdList {
   <a name="::MapIxiaPortId(26)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
   lappend plist &#34;$chas $card $port&#34;
}

if [ixSetScheduledTransmitTime plist $duration] {
   ixPuts $::ixErrorInfo }
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetNumFilteredFramesReceived</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Get the number of Filtered frames received on a port</span>
<span class="comment-line">#              with filter enabled using EnablePortFilter proc</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              portId - Port Id</span>
<span class="comment-line">#</span>
<span class="comment-line"># Output args:</span>
<span class="comment-line">#              return Filtered frames received</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              [GetNumFilteredFramesReceived $portId]</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetNumFilteredFramesReceived_2066">proc <a href="ePTRx.tcl-annot.html#::::GetNumFilteredFramesReceived">::::GetNumFilteredFramesReceived</a></a></strong> {portId} {
   <a name="::MapIxiaPortId(27)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
   <a name="::stat(73)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chasisId $card $port
   return [<a name="::stat(74)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -userDefinedStat1]
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     This proc can be used to enable filter on the rx Ports.</span>
<span class="comment-line">#     Each rx port filters and counts the received frames based on UDS1.</span>
<span class="comment-line"># Input args: PortIdList, daMacList, saMacList, daIpList</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line"># Typical usage example:</span>
<span class="comment-line">#  ixiaPortFilterStat1 &#34;1 2&#34; &#34;$daMAc1 $daMac2&#34; &#34;$saMac1 $saMac2&#34; &#34;$daIpAddress&#34;</span>
<span class="comment-line">##################################################################</span>

<strong><a name="::::SetPortFilter_2083">proc <a href="ePTRx.tcl-annot.html#::::SetPortFilter">::::SetPortFilter</a></a></strong> { portId pattern1 offset1} {

   global one2oneArray
   <a name="::result_debug(39)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nEnabling filter UDS1 for ports: $portId&#34;

<span class="comment-line">#   map new -type  one2one</span>
<span class="comment-line">#   map config -type  one2one</span>

   <a name="::MapIxiaPortId(28)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId ch c p
   <a name="::map(7)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> add $ch $c $p $ch $c $p
<span class="comment-line">#   filter setDefault</span>
   <a name="::filter(20)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable                true
   <a name="::filter(21)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable               true

   <a name="::filter(22)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern       anyPattern
   <a name="::filter(23)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern   anyPattern
   <a name="::filter(24)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA   anyAddr
   <a name="::filter(25)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA    anyAddr
   <a name="::filter(26)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1Enable  true
   <a name="::filter(27)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1SA      anyPattern
   <a name="::filter(28)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1DA      anyPattern
   <a name="::filter(29)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -userDefinedStat1Pattern    pattern1
<span class="comment-line">#   filter set $ch $c $p</span>

<span class="comment-line">#   filterPallette setDefault</span>
   <a name="::filterPallette(15)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -pattern1 $pattern1
   <a name="::filterPallette(16)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternOffset1 $offset1
   <a name="::filterPallette(17)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternMask1 &#34;00 00 00 00&#34;
<span class="comment-line">#   filterPallette set $ch $c $p</span>

   <a name="::result_debug(40)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;port $portId: pattern=$pattern1; offset=$offset1; &#34;
   set portList [list $ch:$c:$p]
    if [ <a name="::ixWriteConfigToHardware(1)"><a href="./mapping.tcl.html#::ixWriteConfigToHardware_151">::ixWriteConfigToHardware</a></a> portList -noVerbose -noProtocolServer] {
      <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;writeStreams:: Error in writing the Config to hardware $ch $c $p&#34;
      return -1
   }


}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
