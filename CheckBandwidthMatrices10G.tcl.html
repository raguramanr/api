<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>CheckBandwidthMatrices10G.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#CheckBandwidthMatrices10G.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>CheckBandwidthMatrices10G.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="CheckBandwidthMatrices10G.tcl-annot.html">annotations</a> | <a href="CheckBandwidthMatrices10G.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::CheckBandwidthMatrix10Gig_1">proc <a href="CheckBandwidthMatrices10G.tcl-annot.html#::::CheckBandwidthMatrix10Gig">::::CheckBandwidthMatrix10Gig</a></a></strong> {args} {
   <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CheckBandwidthMatrix10Gig $args {
     numIxiaCd &#34;3&#34;
     <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a> &#34;ip&#34;
     srcMacAddrTxList &#34;srcMac&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     QPList &#34;1 2 3 4&#34;
     tagList &#34;none none none none&#34;
     checkQosList &#34;&#34;
     ratioExpectList &#34;100.00 100.00 100.00 100.00&#34;
     ratioThreshold &#34;13&#34;
     ratioAggregateThreshold &#34;14&#34;
     checkMatrix &#34;1-7&#34;
     qosType &#34;802.1p&#34;
     filePt &#34;NULL&#34;
     testFileName &#34;Temp&#34;
   }

global startCardNum
set pPattern &#34;5678&#34;
if {$protocol == &#34;multicast&#34;} {
   set joinGroup 22
   set portList {1 2 3 4}
   foreach portId $portList {
      set portIdTx [expr $portId + 8]
      set multicastIP 22[expr $portId + 4].1.2.3
      set destMacMulticast &#34;01 00 5E 01 02 03&#34; 
      set clientIP1 192.20.$portId.2
      <span class="comment-line">#send an join multicast group igmp packet</span>
      <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$clientIP1 joins multicast group $multicastIP&#34;
      set rxPort [<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx chasis card port]
      set frameSent [<a name="::ixiaConf_2Ports_ip(1)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $chasis -txCard $card  -txPort $port \
                       -rxChas $chasis -rxCard $card  -rxPort $rxPort  \
                       -ipProtocol &#34;igmp&#34; -type $joinGroup -ttl 1 \
                       -startCardNum $startCardNum  -dMacAddr $destMacMulticast \
                       -sIpAddr  $clientIP1  -dIpAddr $multicastIP -groupAddr $multicastIP ]
   }

   set ipProtocol &#34;udp&#34;
   set destMacAddrTxList {01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03}
   <span class="comment-line">#send join</span>
} else {
   set ipProtocol $protocol
}
set QPa &#34;QP[lindex $QPList 0]&#34;
set QPb &#34;QP[lindex $QPList 1]&#34;
set QPc &#34;QP[lindex $QPList 2]&#34;
set QPd &#34;QP[lindex $QPList 3]&#34;
set Qa [expr [lindex $QPList 0] - 1]
set Qb [expr [lindex $QPList 1] - 1]
set Qc [expr [lindex $QPList 2] - 1]
set Qd [expr [lindex $QPList 3] - 1]

if {$checkMatrix == 8} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 8 Bandwidth criteria using $QPa, $QPb, $QPc, $QPd&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;        
   <span class="comment-line">#Test Matrix 8</span>
   <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPa minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPb minbw 10 % maxbw 100 % priority Normal&#34;
   <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPc minbw 10 % maxbw 100 % priority Medium&#34;
   <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPd minbw 10 % maxbw 100 % priority High&#34;
} elseif {$checkMatrix == &#34;1-7&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 1 Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   
   global DUT1_CONNECT
   <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt
   <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPa minbw 0 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPb minbw 0 % maxbw 100 % priority Normal&#34;
   <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPc minbw 0 % maxbw 100 % priority Medium&#34;
   <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPd minbw 0 % maxbw 100 % priority High&#34;
}

   set portIdTxList {1 2 3 4}
   set priList &#34;0 1 2 3&#34;
   set portIdRxList {9 10 11 12}
   foreach portIdTx $portIdTxList {
      if {$portIdTx==1} {
         set percent 9.6
      } else {
         set percent 100
      }
      <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         global DUTs_info
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      
      if {$srcMacAddrTxList != &#34;srcMac&#34;} {
      <span class="comment-line">#send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(2)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort \
                       -startCardNum $startCardNum -dataPattern $pPattern -sMacAddr [lindex $srcMacAddrTxList [expr $portIdTx-1]] \
                       -streamType &#34;contPacket&#34; -percentage $percent -TOS $TOS -frameSizeType &#34;sizeRandom&#34; \
                       -ipProtocol $ipProtocol -pDstPort $dPort -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx  -sIpAddr $sIpAddr  -dIpAddr $dIpAddr \
                       -wTag $wTag -tagNo $tag -userPriority $priority ]
      } else {
      <span class="comment-line">#send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(3)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort \
                       -startCardNum $startCardNum -dataPattern $pPattern \
                       -streamType &#34;contPacket&#34; -percentage $percent -TOS $TOS -frameSizeType &#34;sizeRandom&#34; \
                       -ipProtocol $ipProtocol -pDstPort $dPort -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx  -sIpAddr $sIpAddr  -dIpAddr $dIpAddr \
                       -wTag $wTag -tagNo $tag -userPriority $priority ]
      }
      <span class="comment-line">#wait for things to settle down</span>
      sleep 7
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(3)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      }
      if {$checkMatrix == 8} {
      
      } elseif {$checkMatrix == &#34;1-7&#34;} {
         set ratioFound [format %.2f [expr $rateArray($portIdRx,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect 100
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port $portIdRx. Got $ratioFound EXPECT $ratioExpect +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port $portIdRx. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioThreshold&#34;
         }
      }
   }
   if {$checkMatrix == 8} { 
      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(4)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(5)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(6)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
            <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx8 Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      } 
      set ratioExpectArray(9) 0
      set ratioExpectArray(10) 0
      set ratioExpectArray(11) 100
      set ratioExpectArray(12) 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 8 failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 8 pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioThreshold&#34;
         }
      } 
      <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

      <span class="comment-line">#check Q</span>
      <span class="comment-line">#lappend checkQosList &#34;0 1000 minPacket&#34; ;#not testing this, unpredictable for now</span>
      lappend checkQosList &#34;$Qb 10 maxPacket&#34;
      lappend checkQosList &#34;$Qc 1000 minPacket&#34;
      lappend checkQosList &#34;$Qd 10 maxPacket&#34;
      <a name="::CheckQoSMonitor(1)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(1)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList
   } elseif {$checkMatrix == &#34;1-7&#34;} {
      set ratioExpectArray(9) 100
      set ratioExpectArray(10) 100
      set ratioExpectArray(11) 100
      set ratioExpectArray(12) 100
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioThreshold&#34;
         }
      }   
      <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line">#check Q</span>
      <span class="comment-line"># Matrix1 has qosmonitor problems when leaking to Q2.</span>
      lappend checkQosList &#34;$Qa 1000 minPacket&#34;
      lappend checkQosList &#34;$Qb 1000 minPacket&#34;
      lappend checkQosList &#34;$Qc 1000 minPacket&#34;
      lappend checkQosList &#34;$Qd 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(2)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(2)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPa minbw 0 % maxbw 100 % priority Low&#34;
      <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPb minbw 0 % maxbw 100 % priority LowHi&#34;
      <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPc minbw 0 % maxbw 100 % priority Normal&#34;
      <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile $QPd minbw 0 % maxbw 100 % priority NormalHi&#34;
      set priList &#34;0 1 2 3&#34;
      if {$qosType==&#34;diffserv&#34;} {
         <span class="comment-line">#set TOSList &#34;0x00 0x40 0x80 0xc0&#34;</span>
         set TOSList &#34;0x00 0x20 0x40 0x60&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 qosprofile QP4 ports [<a name="::MapDUTPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 qosprofile QP2 ports [<a name="::MapDUTPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x40 0x20&#34;
      }
      <a name="::configMatrix(1)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 2 Bandwidth criteria using QP1, QP2, QP3, QP4&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   <span class="comment-line">#Test Matrix 2</span>
   <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp1 minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp2 minbw 10 % maxbw 100 % priority Normal&#34;
   <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp3 minbw 10 % maxbw 100 % priority Medium&#34;
   <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp4 minbw 10 % maxbw 100 % priority High&#34;

      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(7)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(8)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(9)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx2 Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 100.00
      set ratioExpectArray(11) 100.00
      set ratioExpectArray(12) 100.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect 400
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed aggregate rate ratio threshold test. Got $ratioFound EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate aggregate ratio threshold test. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line">#check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(3)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(3)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList

      <span class="comment-line">#restore to default</span>
      <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP1 minbw 0 % maxbw 100 % priority Low&#34;
      <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP2 minbw 0 % maxbw 100 % priority lowhi&#34;
      <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP3 minbw 0 % maxbw 100 % priority normal&#34;
      <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 0 % maxbw 100 % priority normalHi&#34;
      set priList &#34;0 2 4 6&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x40 0x80 0xc0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(25)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 9 qosprofile QP7 ports [<a name="::MapDUTPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(26)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 qosprofile QP3 ports [<a name="::MapDUTPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x80 0x24&#34;
      }
      <a name="::configMatrix(2)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3 Bandwidth criteria using QP1, QP3, QP5, QP7&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   <span class="comment-line">#Test Matrix 3</span>
   <a name="::SendACmd(27)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp1 minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(28)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp3 minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(29)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp5 minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(30)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile qp7 minbw 10 % maxbw 100 % priority Low&#34;
      
      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(10)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(11)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(12)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
            <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3 Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 100.00
      set ratioExpectArray(11) 100.00
      set ratioExpectArray(12) 100.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect 400
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed aggregate rate ratio threshold test. Got $ratioFound EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate aggregate ratio threshold test. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line">#check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(4)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(4)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line">#restore to default</span>
      <a name="::SendACmd(31)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP1 minbw 0 % maxbw 100 % priority Low&#34;
      <a name="::SendACmd(32)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP3 minbw 0 % maxbw 100 % priority Normal&#34;
      <a name="::SendACmd(33)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP5 minbw 0 % maxbw 100 % priority Medium&#34;
      <a name="::SendACmd(34)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP7 minbw 0 % maxbw 100 % priority High&#34;
      set priList &#34;1 3 5 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x20 0x60 0xa0 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(35)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(36)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 9 qosprofile QP4 ports [<a name="::MapDUTPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(37)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 qosprofile QP8 ports [<a name="::MapDUTPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x20 0x24 0xa0 0x64&#34;
      }
      <a name="::configMatrix(3)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol
      
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3b Bandwidth criteria using QP2, QP4, QP6, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;      
   <span class="comment-line">#Test Matrix 3b</span>
   <a name="::SendACmd(38)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP2 minbw 10 % maxbw 50 % priority Low&#34;
   <a name="::SendACmd(39)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 10 % maxbw 50 % priority Low&#34;
   <a name="::SendACmd(40)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP6 minbw 10 % maxbw 50 % priority Low&#34;
   <a name="::SendACmd(41)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP8 minbw 10 % maxbw 70 % priority Low&#34;
      
      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(13)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(14)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(15)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
            <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3b Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      }    
      set sum 0
      set ratioExpectArray(9) 50.00
      set ratioExpectArray(10) 50.00
      set ratioExpectArray(11) 50.00
      set ratioExpectArray(12) 70.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect 232
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed aggregate rate ratio threshold test. Got $ratioFound EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate aggregate ratio threshold test. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } 
      <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line">#check Q</span>
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;5 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(5)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(5)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line">#restore to default</span>
      <a name="::SendACmd(42)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP2 minbw 0 % maxbw 100 % priority LowHi&#34;
      <a name="::SendACmd(43)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 0 % maxbw 100 % priority NormalHi&#34;
      <a name="::SendACmd(44)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP6 minbw 0 % maxbw 100 % priority MediumHi&#34;
      <a name="::SendACmd(45)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP8 minbw 0 % maxbw 100 % priority HighHi&#34;

   <span class="comment-line"># Matrix 4 deleted</span>
      set priList &#34;0 3 4 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x60 0x80 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(46)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(47)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 qosprofile QP4 ports [<a name="::MapDUTPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(48)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 qosprofile QP8 ports [<a name="::MapDUTPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x20 0x80 0x64&#34;
      }
      <a name="::configMatrix(4)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 5 Bandwidth criteria using QP1, QP4, QP5, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;          
   <span class="comment-line">#Test Matrix 5</span>
   <a name="::SendACmd(49)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP1 minbw 10 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(50)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 10 % maxbw 50 % priority Normal&#34;
   <a name="::SendACmd(51)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP5 minbw 10 % maxbw 40 % priority Medium&#34;
   <a name="::SendACmd(52)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP8 minbw 10 % maxbw 30 % priority High&#34;
      
      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(16)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(17)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(18)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
            <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx5 Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 50.00
      set ratioExpectArray(11) 42.00
      set ratioExpectArray(12) 33.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect 232
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed aggregate rate ratio threshold test. Got $ratioFound EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate aggregate ratio threshold test. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line">#check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(6)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(6)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList      

      <span class="comment-line">#restore to default</span>
      <a name="::SendACmd(53)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP1 minbw 0 % maxbw 100 % priority Low&#34;
      <a name="::SendACmd(54)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 0 % maxbw 100 % priority NormalHi&#34;
      <a name="::SendACmd(55)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP5 minbw 0 % maxbw 100 % priority Medium&#34;
      <a name="::SendACmd(56)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP8 minbw 0 % maxbw 100 % priority HighHi&#34;
} elseif {$checkMatrix == &#34;user&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking User Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(7)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
      
      <span class="comment-line">#wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(19)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(20)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(21)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;MtrxUser Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) [lindex $ratioExpectList 0]
      set ratioExpectArray(10) [lindex $ratioExpectList 1]
      set ratioExpectArray(11) [lindex $ratioExpectList 2]
      set ratioExpectArray(12) [lindex $ratioExpectList 3]
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed rate ratio threshold test on port $portId. Got $ratioFound EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate ratio threshold test on port $portId. Got $ratioFound AS EXPECT $ratioExpect +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect [expr $ratioExpectArray(9)+$ratioExpectArray(10)+$ratioExpectArray(11)+$ratioExpectArray(12)]
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed aggregate rate ratio threshold test. Got $ratioFound EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate aggregate ratio threshold test. Got $ratioFound AS EXPECT $ratioExpect +/- $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
     <span class="comment-line">#check Q</span>
     <span class="comment-line"># Commented to skip failure because of PD12684,14184. Will be uncommened once the PD is fixed. 09/20/02sk</span>
      if {![regexp -nocase &#34;3.2|4.2&#34; $testFileName]} {
         if {$testFileName==&#34;10.1.3&#34; &amp;&amp; ![regexp -nocase &#34;G8X|G8T|10gig&#34; $DUTs_info(DUT1,bladeType)]} {
            <a name="::CheckQoSMonitor(7)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(7)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
            unset checkQosList
         } else {
            <a name="::SendACmd(57)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(8)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
         }
      } else {
         <a name="::SendACmd(58)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(9)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
      }

}
   <span class="comment-line">#special check for multicast, these commands should not cause switch to crash</span>
   if {$protocol == &#34;multicast&#34;} { 
      global DUT2_CONNECT
      <a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT $filePt
<span class="comment-line">#      SendACmd	&#34;clear igmp snooping&#34;</span>
<span class="comment-line">#      SendACmd	&#34;disable pim&#34;</span>
<span class="comment-line">#      SendACmd	&#34;enable pim&#34;</span>

      global DUT1_CONNECT
     <a name="::Login(3)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt
<span class="comment-line">#      SendACmd	&#34;clear igmp snooping&#34;</span>
<span class="comment-line">#      SendACmd	&#34;disable pim&#34;</span>
<span class="comment-line">#      SendACmd	&#34;enable pim&#34;</span>
   }
   <span class="comment-line">#stop Tx</span>
   foreach portIdTx $portIdTxList {
         <a name="::MapIxiaPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
         <a name="::ixStopPortTransmit(1)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }
   <span class="comment-line">#restore to default</span>
   <a name="::SendACmd(59)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP1 minbw 0 % maxbw 100 % priority Low&#34;
   <a name="::SendACmd(60)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP2 minbw 0 % maxbw 100 % priority LowHi&#34;
   <a name="::SendACmd(61)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP3 minbw 0 % maxbw 100 % priority Normal&#34;
   <a name="::SendACmd(62)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP4 minbw 0 % maxbw 100 % priority NormalHi&#34;
   <a name="::SendACmd(63)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP5 minbw 0 % maxbw 100 % priority Medium&#34;
   <a name="::SendACmd(64)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP6 minbw 0 % maxbw 100 % priority MediumHi&#34;
   <a name="::SendACmd(65)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP7 minbw 0 % maxbw 100 % priority High&#34;
   <a name="::SendACmd(66)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config qosprofile QP8 minbw 0 % maxbw 100 % priority HighHi&#34;

}


<strong><a name="::::QosTestSetupSingleVlan10Gig_628">proc <a href="CheckBandwidthMatrices10G.tcl-annot.html#::::QosTestSetupSingleVlan10Gig">::::QosTestSetupSingleVlan10Gig</a></a></strong> {args} {
   <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> QosTestSetupSingleVlan10Gig $args {
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     vlanDUT1IpAddrList &#34;192.10.1.1&#34;
     vlanDUT2IpAddrList &#34;192.10.1.100&#34;
     wTag &#34;false&#34;
	 tagNo &#34;2&#34;
     filePt &#34;NULL&#34;
     }
global DUT1_CONNECT
<a name="::Login(4)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt


   <a name="::SendACmd(67)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create vlan vlan1&#34;
   <a name="::SendACmd(68)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 ipa [lindex $vlanDUT1IpAddrList 0]&#34;
   if { $wTag == &#34;true&#34; } { 
      <a name="::SendACmd(69)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan1 tag $tagNo&#34;
      <a name="::SendACmd(70)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 add port [<a name="::MapDUTPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4], [<a name="::::GetATrunkPort(10)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] tag&#34;
   } else {
      <a name="::SendACmd(71)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 add port [<a name="::MapDUTPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4], [<a name="::::GetATrunkPort(11)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1]&#34;
   }

   <a name="::SendACmd(72)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $sIpAddrList 0] 00:10:00:00:00:00&#34;
   <a name="::SendACmd(73)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $sIpAddrList 1] 00:20:00:00:00:00&#34;
   <a name="::SendACmd(74)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $sIpAddrList 2] 00:30:00:00:00:00&#34;
   <a name="::SendACmd(75)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $sIpAddrList 3] 00:40:00:00:00:00&#34;
   
global DUT2_CONNECT
<a name="::Login(5)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT $filePt

   <a name="::SendACmd(76)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create vlan vlan1&#34;

   if { $wTag == &#34;true&#34; } { 
      <a name="::SendACmd(77)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan1 tag $tagNo&#34;
      <a name="::SendACmd(78)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 add port [<a name="::MapDUTPortId(15)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2], [<a name="::::GetATrunkPort(12)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] tag&#34;
   } else {
      <a name="::SendACmd(79)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 add port [<a name="::MapDUTPortId(16)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2], [<a name="::::GetATrunkPort(13)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1]&#34;
   }

   <a name="::SendACmd(80)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;nofeep&#34;
   foreach po [<a name="::::GetATrunkPort(14)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1] {
      set c 0
      set p 0
      scan $po %d:%d c p
      if {$p!=0} {
         <a name="::SendACmd(81)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;hurricanelb [expr $c-1],3&#34;
      }
   }
   <a name="::SendACmd(82)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;shswitch&#34;
   
   <a name="::SendACmd(83)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config vlan vlan1 ipa [lindex $vlanDUT2IpAddrList 0]&#34;
   <a name="::SendACmd(84)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:10:00:00:00 vlan1 ports [<a name="::MapDUTPortId(17)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9 2]&#34;
   <a name="::SendACmd(85)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:20:00:00:00 vlan1 ports [<a name="::MapDUTPortId(18)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 10 2]&#34;
   <a name="::SendACmd(86)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:30:00:00:00 vlan1 ports [<a name="::MapDUTPortId(19)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 11 2]&#34;
   <a name="::SendACmd(87)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:40:00:00:00 vlan1 ports [<a name="::MapDUTPortId(20)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 12 2]&#34;

   <a name="::SendACmd(88)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $dIpAddrList 0] 00:00:10:00:00:00&#34;
   <a name="::SendACmd(89)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $dIpAddrList 1] 00:00:20:00:00:00&#34;
   <a name="::SendACmd(90)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $dIpAddrList 2] 00:00:30:00:00:00&#34;
   <a name="::SendACmd(91)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp add [lindex $dIpAddrList 3] 00:00:40:00:00:00&#34;

}

<strong><a name="::::QosTestCleanupSingleVlan10Gig_692">proc <a href="CheckBandwidthMatrices10G.tcl-annot.html#::::QosTestCleanupSingleVlan10Gig">::::QosTestCleanupSingleVlan10Gig</a></a></strong> {args} {
   <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> QosTestCleanupSingleVlan10Gig $args {
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     filePt &#34;NULL&#34;
     }
global DUT1_CONNECT
<a name="::Login(6)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt

   <a name="::SendACmd(92)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $sIpAddrList 0]&#34;
   <a name="::SendACmd(93)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $sIpAddrList 1]&#34;
   <a name="::SendACmd(94)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $sIpAddrList 2]&#34;
   <a name="::SendACmd(95)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $sIpAddrList 3]&#34;

   <a name="::SendACmd(96)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete vlan vlan1&#34;



<span class="comment-line">#SendACmd	&#34;configure ports [GetATrunkPort 1 2 1] auto on&#34;</span>

global DUT2_CONNECT
<a name="::Login(7)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT $filePt

   <a name="::SendACmd(97)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList 0]&#34;
   <a name="::SendACmd(98)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList 1]&#34;
   <a name="::SendACmd(99)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList 2]&#34;
   <a name="::SendACmd(100)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList 3]&#34;


   <a name="::SendACmd(101)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:10:00:00:00 vlan vlan1&#34;
   <a name="::SendACmd(102)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:20:00:00:00 vlan vlan1&#34;
   <a name="::SendACmd(103)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:30:00:00:00 vlan vlan1&#34;
   <a name="::SendACmd(104)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:40:00:00:00 vlan vlan1&#34;
   
   <a name="::SendACmd(105)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete vlan vlan1&#34;

}

<strong><a name="::::configMatrix10Gig_730">proc <a href="CheckBandwidthMatrices10G.tcl-annot.html#::::configMatrix10Gig">::::configMatrix10Gig</a></a></strong> {args} {
   <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> configMatrix10Gig $args {
     priList &#34;0 1 2 3&#34;
     portIdTxList &#34;1 2 3 4&#34;
     qosType &#34;802.1p&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     tagList &#34;none none none none&#34;
     ipProtocol &#34;ip&#34;
   }
   global startCardNum
   set pPattern &#34;5678&#34;
   
   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      <a name="::ixStopPortTransmit(2)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }

   set QPa &#34;QP[expr [lindex $priList 0]+1]&#34;
   set QPb &#34;QP[expr [lindex $priList 1]+1]&#34;
   set QPc &#34;QP[expr [lindex $priList 2]+1]&#34;
   set QPd &#34;QP[expr [lindex $priList 3]+1]&#34;

   switch $qosType {
      &#34;port&#34; {
         <a name="::SendACmd(106)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(21)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1] qosprofile $QPa&#34;
         <a name="::SendACmd(107)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(22)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 2] qosprofile $QPb&#34;
         <a name="::SendACmd(108)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(23)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 3] qosprofile $QPc&#34;
         <a name="::SendACmd(109)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(24)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 4] qosprofile $QPd&#34;
      }
      &#34;mac&#34; {
         <a name="::SendACmd(110)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:10:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(111)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:20:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(112)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:30:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(113)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:40:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(114)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:10:00:00:00 vlan vlan1 port [<a name="::::GetATrunkPort(15)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPa&#34;
         <a name="::SendACmd(115)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:20:00:00:00 vlan vlan1 port [<a name="::::GetATrunkPort(16)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPb&#34;
         <a name="::SendACmd(116)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:30:00:00:00 vlan vlan1 port [<a name="::::GetATrunkPort(17)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPc&#34;
         <a name="::SendACmd(117)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:40:00:00:00 vlan vlan1 port [<a name="::::GetATrunkPort(18)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPd&#34;
      }
      &#34;vlan&#34; {
         <a name="::SendACmd(118)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf vlan1 qosprofile $QPa&#34;
         <a name="::SendACmd(119)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf vlan2 qosprofile $QPb&#34;
         <a name="::SendACmd(120)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf vlan3 qosprofile $QPc&#34;
         <a name="::SendACmd(121)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf vlan4 qosprofile $QPd&#34;
      }
      &#34;10.1.1&#34; {
         <a name="::SendACmd(122)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(123)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(124)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(125)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(126)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest any source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(127)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest any source 192.10.2.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(128)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest any source 192.10.3.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(129)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest any source 192.10.4.0/24 permit $QPd ports any&#34;
      }
      &#34;10.1.2&#34; {
         <a name="::SendACmd(130)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(131)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(132)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(133)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(134)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest 192.20.1.2/32 source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(135)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest 192.20.2.2/32 source 192.10.1.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(136)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest 192.20.3.2/32 source 192.10.1.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(137)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest 192.20.4.2/32 source 192.10.1.0/24 permit $QPd ports any&#34;
      }
      &#34;10.1.4&#34; {
         <a name="::SendACmd(138)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(139)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(140)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(141)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(142)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest 192.20.1.0/24 source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(143)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest 192.20.2.0/24 source 192.10.1.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(144)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest 192.20.3.0/24 source 192.10.1.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(145)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest 192.20.4.0/24 source 192.10.1.0/24 permit $QPd ports any&#34;
      }
      &#34;10.1.5&#34; {
         <a name="::SendACmd(146)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(147)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(148)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(149)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(150)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 tcp dest 192.20.1.0/24 ip-port 56 source 192.10.1.0/24 ip-port any permit $QPa ports any&#34;
         <a name="::SendACmd(151)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 tcp dest 192.20.1.0/24 ip-port 67 source 192.10.1.0/24 ip-port any permit $QPb ports any&#34;
         <a name="::SendACmd(152)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 tcp dest 192.20.1.0/24 ip-port 83 source 192.10.1.0/24 ip-port any permit $QPc ports any&#34;
         <a name="::SendACmd(153)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 tcp dest 192.20.1.0/24 ip-port 84 source 192.10.1.0/24 ip-port any permit $QPd ports any&#34;
      }
      &#34;10.1.6&#34; {
         <a name="::SendACmd(154)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(155)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(156)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(157)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(158)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 udp dest 192.20.1.0/24 ip-port any source 192.10.1.0/24 ip-port 51 permit $QPa ports any&#34;
         <a name="::SendACmd(159)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 udp dest 192.20.1.0/24 ip-port any source 192.10.1.0/24 ip-port 52 permit $QPb ports any&#34;
         <a name="::SendACmd(160)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 udp dest 192.20.1.0/24 ip-port any source 192.10.1.0/24 ip-port 53 permit $QPc ports any&#34;
         <a name="::SendACmd(161)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 udp dest 192.20.1.0/24 ip-port any source 192.10.1.0/24 ip-port 54 permit $QPd ports any&#34;
      }
      &#34;10.1.7&#34; {
         <a name="::SendACmd(162)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(163)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(164)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(165)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(166)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 udp dest 192.20.1.0/24 ip-port 56 source 192.10.1.0/24 ip-port 51 permit $QPa ports any&#34;
         <a name="::SendACmd(167)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 udp dest 192.20.1.0/24 ip-port 67 source 192.10.1.0/24 ip-port 52 permit $QPb ports any&#34;
         <a name="::SendACmd(168)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 udp dest 192.20.1.0/24 ip-port 83 source 192.10.1.0/24 ip-port 53 permit $QPc ports any&#34;
         <a name="::SendACmd(169)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 udp dest 192.20.1.0/24 ip-port 84 source 192.10.1.0/24 ip-port 54 permit $QPd ports any&#34;
      }
      &#34;10.2.1&#34; {
         <a name="::SendACmd(170)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(171)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(172)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(173)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(174)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest 225.1.2.3/32 source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(175)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest 226.1.2.3/32 source 192.10.1.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(176)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest 227.1.2.3/32 source 192.10.1.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(177)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest 228.1.2.3/32 source 192.10.1.0/24 permit $QPd ports any&#34;
      }
      &#34;10.2.2&#34; {
         <a name="::SendACmd(178)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(179)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(180)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(181)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(182)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest 225.1.2.3/32 source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(183)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest 226.1.2.3/32 source 192.10.2.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(184)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest 227.1.2.3/32 source 192.10.3.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(185)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest 228.1.2.3/32 source 192.10.4.0/24 permit $QPd ports any&#34;
      }
      &#34;10.2.3&#34; {
         <a name="::SendACmd(186)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(187)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(188)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(189)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(190)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 ip dest 225.0.0.0/8 source 192.10.1.0/24 permit $QPa ports any&#34;
         <a name="::SendACmd(191)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 ip dest 226.1.0.0/16 source 192.10.2.0/24 permit $QPb ports any&#34;
         <a name="::SendACmd(192)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 ip dest 227.1.2.0/24 source 192.10.3.0/24 permit $QPc ports any&#34;
         <a name="::SendACmd(193)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 ip dest 228.0.0.0/8 source 192.10.4.0/24 permit $QPd ports any&#34;
      }
      &#34;10.2.4&#34; {
         <a name="::SendACmd(194)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(195)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(196)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(197)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(198)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 udp dest 225.1.2.0/24 ip-port 56 source 192.10.1.0/24 ip-port any permit $QPa ports any&#34;
         <a name="::SendACmd(199)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 udp dest 226.1.2.0/24 ip-port 66 source 192.10.1.0/24 ip-port any permit $QPb ports any&#34;
         <a name="::SendACmd(200)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 udp dest 227.1.2.0/24 ip-port 81 source 192.10.1.0/24 ip-port any permit $QPc ports any&#34;
         <a name="::SendACmd(201)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 udp dest 228.1.2.0/24 ip-port 87 source 192.10.1.0/24 ip-port any permit $QPd ports any&#34;
      }
      &#34;10.2.5&#34; {
         <a name="::SendACmd(202)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(203)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(204)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(205)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(206)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 udp dest 225.1.2.0/24 ip-port any source 192.10.1.0/24 ip-port 51 permit $QPa ports any&#34;
         <a name="::SendACmd(207)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 udp dest 226.1.2.0/24 ip-port any source 192.10.1.0/24 ip-port 52 permit $QPb ports any&#34;
         <a name="::SendACmd(208)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 udp dest 227.1.2.0/24 ip-port any source 192.10.1.0/24 ip-port 53 permit $QPc ports any&#34;
         <a name="::SendACmd(209)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 udp dest 228.1.2.0/24 ip-port any source 192.10.1.0/24 ip-port 54 permit $QPd ports any&#34;
      }
      &#34;10.2.6&#34; {
         <a name="::SendACmd(210)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList1&#34;
         <a name="::SendACmd(211)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList2&#34;
         <a name="::SendACmd(212)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList3&#34;
         <a name="::SendACmd(213)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete access-list permitList4&#34;
         <a name="::SendACmd(214)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList1 udp dest 225.1.2.0/24 ip-port 56 source 192.10.1.0/24 ip-port 51 permit $QPa ports any&#34;
         <a name="::SendACmd(215)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList2 udp dest 226.1.2.0/24 ip-port 66 source 192.10.1.0/24 ip-port 52 permit $QPb ports any&#34;
         <a name="::SendACmd(216)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList3 udp dest 227.1.2.0/24 ip-port 81 source 192.10.1.0/24 ip-port 53 permit $QPc ports any&#34;
         <a name="::SendACmd(217)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create access-list permitList4 udp dest 228.1.2.0/24 ip-port 87 source 192.10.1.0/24 ip-port 54 permit $QPd ports any&#34;
      }
      default {
      }
   }

   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         global DUTs_info
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      <span class="comment-line">#send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(4)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort \
                       -startCardNum $startCardNum -dataPattern $pPattern \
                       -streamType &#34;contPacket&#34; -percentage 100 -TOS $TOS -frameSizeType &#34;sizeRandom&#34; \
                       -ipProtocol $ipProtocol -pDstPort $dPort -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx  -sIpAddr $sIpAddr  -dIpAddr $dIpAddr \
                       -wTag $wTag -tagNo $tag -userPriority $priority ]
      <span class="comment-line">#wait for things to settle down</span>
      sleep 3
   }
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
