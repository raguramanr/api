<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>cli_oldprocs.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#cli_oldprocs.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>cli_oldprocs.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="cli_oldprocs.tcl-annot.html">annotations</a> | <a href="cli_oldprocs.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::allCleanup15.5_1">proc <a href="cli_oldprocs.tcl-annot.html#::::allCleanup15.5">::::allCleanup15.5</a></a></strong> {numDUT} {

    global DUT${numDUT}_CONNECT
    set connect [set DUT${numDUT}_CONNECT]

    <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $connect -CheckOperational 0

    <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable port all&#34;
    <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2

    <span class="comment-line"># ----- PROTOCOL SECTION -----</span>
    <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospf&#34;
    <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config ospf delete vlan all&#34;
    <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete ospf area all&#34;
    <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config ospf routerid automatic&#34;
    <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure ospf&#34;

    <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospfv3&#34;
    <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config ospfv3 delete vlan all&#34;
    <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete ospfv3 area all&#34;
    <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config ospfv3 routerid automatic&#34;
    <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure ospfv3&#34;

    <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable mpls&#34;
    <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete l2vpn vpls all&#34;
    <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete l2vpn vpws all&#34;
    <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure mpls&#34;

    <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable pim&#34;
    <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config pim delete vlan all&#34;
    <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable pim ssm vlan all&#34;
    <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure pim&#34;

    <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable rip&#34;
    <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ripng&#34;
    <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure rip delete vlan all&#34;
    <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure ripng delete vlan all&#34;
    <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure rip&#34;
    <a name="::SendACmd(25)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure ripng&#34;

    <a name="::SendACmd(26)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable bgp&#34;
    <a name="::SendACmd(27)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete bgp neighbor all&#34;
    <a name="::SendACmd(28)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure bgp routerid 0.0.0.0&#34;
    <a name="::SendACmd(29)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure bgp AS-number 0&#34;

    <a name="::SendACmd(30)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable vrrp&#34;

    <a name="::SendACmd(31)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin ports all mac&#34;
    <a name="::SendACmd(32)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin ports all dot1x&#34;
    <a name="::SendACmd(33)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin ports all web&#34;
    <a name="::SendACmd(34)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin mac&#34;
    <a name="::SendACmd(35)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin dot1x&#34;
    <a name="::SendACmd(36)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable netlogin web&#34;
    <a name="::SendACmd(37)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure netlogin vlan&#34;

    <a name="::SendACmd(38)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure radius&#34;
    <a name="::SendACmd(39)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure identity-management&#34;

    <span class="comment-line"># ----- VLAN VMAN VR HAL -----</span>
    <a name="::SendACmd(40)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig default ipaddress&#34;
    <a name="::SendACmd(41)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure ports all redundant&#34;
    <a name="::SendACmd(42)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure default delete port all&#34;


    <span class="comment-line"># --- VLAN</span>
    set vlanName [<a name="::GetColumnValues(1)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show vlan&#34; {{0 32}} &#34;\/Total&#34; &#34;Flags :&#34;]
    if {[llength $vlanName]} {
        for {set i 0} {$i&lt;[llength [lindex $vlanName 0]]} {incr i} {
            set everyVlan [lindex [lindex $vlanName 0] $i]
            set name [split $everyVlan &#34; &#34;]
            set perVlanName [lindex $name 0]
            if {[regexp -nocase &#34;\[\-]{2,32}&#34; $perVlanName]} {continue;}
            if {$perVlanName != &#34;Default&#34; &amp;&amp; $perVlanName != &#34;Mgmt&#34;} {
                <a name="::SendACmd(43)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete vlan $perVlanName&#34;
            }
        }
    }
    <span class="comment-line"># --- VMAN</span>
    set vmanName [<a name="::GetColumnValues(2)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show vman&#34; {{0 32}} &#34;\/Total&#34; &#34;Flags :&#34;]
    if {[llength $vmanName]} {
        for {set i 0} {$i&lt;[llength [lindex $vmanName 0]]} {incr i} {
            set everyVman [lindex [lindex $vmanName 0] $i]
            set name [split $everyVman &#34; &#34;]
            set perVmanName [lindex $name 0]
            if {[regexp -nocase &#34;\[\-]{2,32}&#34; $perVmanName]} {continue;}
            <a name="::SendACmd(44)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete vman $perVmanName&#34;
        }
    }
    set shareName [<a name="::GetColumnValues(3)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show port sharing&#34; {{0 8}} \
       &#34;==============================================================================&#34; \
       &#34;==============================================================================&#34;]
    if {[llength $shareName]} {
        for {set i 0} {$i&lt;[llength [lindex $shareName 0]]} {incr i} {
            set everyShare [lindex [lindex $shareName 0] $i]
            set name [split $everyShare &#34; &#34;]
            set perShare [lindex $name 0]
            if {$perShare == &#34;        &#34; || [string trim $perShare] == &#34;&#34;} {
                continue
            }
            if {![<a name="::::CascadeSharePort(1)"><a href="./vpex.tcl.html#::::CascadeSharePort_767">::::CascadeSharePort</a></a> $numDUT $perShare]} {
                <a name="::SendACmd(45)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable sharing $perShare&#34;
            }
        }
    }


    <a name="::SendACmd(46)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable jumbo-frame por all&#34;
    <a name="::SendACmd(47)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable mac-lockdown-timeout ports all&#34;
    <a name="::SendACmd(48)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable mirroring&#34;

    <span class="comment-line">#SendACmd &#34;configure port &lt;all&gt; ethertype primary&#34;; # no easy global for all ports</span>
    <a name="::SendACmd(49)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure vman ethertype secondary&#34;
    <a name="::SendACmd(50)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure vman ethertype&#34;
    <a name="::SendACmd(51)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable dot1p examination inner-tag ports all&#34;
    <a name="::SendACmd(52)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable dot1p examination ports all&#34;
    <a name="::SendACmd(53)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable learning ports all&#34;
    <a name="::SendACmd(54)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable flooding all_cast ports all&#34;
    <a name="::SendACmd(55)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfigure access-list&#34;


    global gnssPlatform bcmLynx bcmPlatform
    set platform [<a name="::GetPlatform(1)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${numDUT}];

    if {[regexp -nocase &#34;$bcmPlatform&#34; $platform]} {
        <a name="::SendACmd(56)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 0 qp1&#34;
        <a name="::SendACmd(57)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 1 qp1&#34;
        <a name="::SendACmd(58)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 2 qp1&#34;
        <a name="::SendACmd(59)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 3 qp1&#34;
        <a name="::SendACmd(60)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 4 qp1&#34;
        <a name="::SendACmd(61)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 5 qp1&#34;
        <a name="::SendACmd(62)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 6 qp1&#34;
        <a name="::SendACmd(63)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;configure dot1p type 7 qp8&#34;
        <a name="::SendACmd(64)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp2&#34;
        <a name="::SendACmd(65)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp3&#34;
        <a name="::SendACmd(66)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp4&#34;
        <a name="::SendACmd(67)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp5&#34;
        <a name="::SendACmd(68)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp6&#34;
        <a name="::SendACmd(69)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp7&#34;
    }

    if {![regexp -nocase &#34;$bcmLynx&#34; $platform]} {
        set vrName [<a name="::GetColumnValues(4)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show virtual-router&#34; {{0 32}} &#34;Router *VLANs&#34; &#34;Flags :&#34;]
        if {[llength $vrName]} {
            for {set i 0} {$i&lt;[llength [lindex $vrName 0]]} {incr i} {
                set everyVr [lindex [lindex $vrName 0] $i]
                if {[string trim $everyVr] == &#34;&#34;} {continue;}
                set name [split $everyVr &#34; &#34;]
                set perVrName [lindex $name 0]
                if {$perVrName == &#34;KEY_NOT_FOUND&#34;} {continue;}
                if {[regexp -nocase &#34;\[\-]{2,32}&#34; $perVrName]} {continue;}
                if {$perVrName != &#34;VR-Default&#34; &amp;&amp; $perVrName != &#34;VR-Mgmt&#34; \
                                              &amp;&amp; $perVrName != &#34;VR-Control&#34;} {
                    <a name="::SendACmd(70)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete virtual-router $perVrName&#34;
                }

            }
        }
    }

    <span class="comment-line"># ----  EAPS</span>
    <a name="::SendACmd(71)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable eaps&#34;
    set eapsName [<a name="::GetColumnValues(5)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show eaps&#34; {{0 20}} &#34;Domain *State&#34; &#34;Flags :&#34;]
    if {[llength $eapsName]} {
        for {set i 0} {$i&lt;[llength [lindex $eapsName 0]]} {incr i} {
            set eapsLine [lindex [lindex $eapsName 0] $i]
            if {[string trim $eapsLine] == &#34;&#34; || $eapsLine == &#34;*&#34;} {continue;}
            set eapsWords [split $eapsLine &#34; &#34;]
            set eapsWord0 [lindex $eapsWords 0]
            if {[regexp -nocase &#34;\[\-]{2,20}&#34; $eapsWord0]} {continue;}
            if {$eapsWord0 == &#34;KEY_NOT_FOUND&#34;} {continue;}
            <a name="::SendACmd(72)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete eaps $eapsWord0&#34;
        }
    }
    set eapsShare [<a name="::GetColumnValues(6)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show eaps share&#34; {{0 13}} &#34;Shared-port *Mode&#34; \
        &#34;.*#.*&#34;]
    if {[llength $eapsShare]} {
        for {set i 0} {$i&lt;[llength [lindex $eapsShare 0]]} {incr i} {
            set eapsLine [lindex [lindex $eapsShare 0] $i]
            if {[string trim $eapsLine] == &#34;&#34;} {continue;}
            set eapsWords [split $eapsLine &#34; &#34;]
            set eapsWord0 [lindex $eapsWords 0]
            if {[regexp -nocase &#34;\[\-]{2,20}&#34; $eapsWord0]} {continue;}
            if {$eapsWord0 == &#34;KEY_NOT_FOUND&#34;} {continue;}
            <a name="::SendACmd(73)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete eaps shared-port $eapsWord0&#34;
        }
    } else {
        puts &#34;MISSED ALL shares&#34;
    }

    <span class="comment-line"># ---- STPD</span>
    <a name="::SendACmd(74)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable stpd&#34;
    set stpdName [<a name="::GetColumnValues(7)"><a href="./OptionCheck.tcl.html#::GetColumnValues_593">::GetColumnValues</a></a> &#34;show stpd&#34; {{0 20}} &#34;Name *Tag&#34; &#34;Total number of&#34;]
    if {[llength $stpdName]} {
        for {set i 0} {$i&lt;[llength [lindex $stpdName 0]]} {incr i} {
            set stpdLine [lindex [lindex $stpdName 0] $i]
            if {[string trim $stpdLine] == &#34;&#34;} {continue;}
            set stpdWords [split $stpdLine &#34; &#34;]
            set stpdWord0 [lindex $stpdWords 0]
            if {$stpdWord0 == &#34;s0&#34;} {
                continue;
            }
            if {$stpdWord0 == &#34;KEY_NOT_FOUND&#34;} {continue;}
            if {[regexp -nocase &#34;\[\-]{2,20}&#34; $stpdWord0]} {continue;}
            <a name="::SendACmd(75)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete stpd $stpdWord0&#34;
        }
    }
    <span class="comment-line">#</span>
    <span class="comment-line">#  Add code to remove PVLAN</span>
    <span class="comment-line">#</span>
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
