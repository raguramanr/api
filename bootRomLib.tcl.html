<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>bootRomLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#bootRomLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>bootRomLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="bootRomLib.tcl-annot.html">annotations</a> | <a href="bootRomLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::getSpawnId_1">proc <a href="bootRomLib.tcl-annot.html#::::getSpawnId">::::getSpawnId</a></a></strong> {ipAddr msmSpawnId} {
    global spawn_id
    global hostname
    global spawn_ids
    global getSpawnFailCount

    upvar $msmSpawnId msmId
    set newConnection 1

    if {![info exists getSpawnFailCount($ipAddr)]} {
        set getSpawnFailCount($ipAddr) 0
    }
    <span class="comment-line">#check for existing connection</span>
    if { [ info exists hostname ] == &#34;1&#34; } {
        foreach name $hostname {
            if { $name == $ipAddr } {
                set msmId $spawn_ids($name)
                if { $msmId != &#34;INVALID&#34; } {
                    <span class="comment-line"># --- use it for delay without using sleep</span>
                    set newConnection 0
                }
            }
        }
        <span class="comment-line">#if brand new connection, add to host name list</span>
        if { [lsearch $hostname $ipAddr] == -1 } {
           lappend hostname $ipAddr
        }
    } else {
        lappend hostname $ipAddr
    }


    <span class="comment-line">#spawn new connection if not exists</span>
    global connectionTimeout
    if { $newConnection == 1 } {
        if [catch &#34;spawn telnet $ipAddr&#34; reason] {
            <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;failed to spawn program: $reason\n&#34;
            error &#34;failed to spawn program: $reason\n&#34;
        }
        <span class="comment-line">#set spawn_ids($ipAddr) $spawn_id</span>
        <span class="comment-line">#set msmId $spawn_id</span>
        set timeout $connectionTimeout
        <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Connect via telnet - no login $ipAddr,  pid=$spawn_id&#34;
        <span class="comment-line">#wait for connection</span>
        expect {
            &#34;?nable to ?onnect&#34; {
                if {$getSpawnFailCount($ipAddr) &lt; 3} {
                    puts &#34;Hit Console in Use # $getSpawnFailCount($ipAddr)&#34;
                    incr getSpawnFailCount($ipAddr)
                    <a name="::::ClearConsoleDUT(1)"><a href="./termServer.tcl.html#::::ClearConsoleDUT_40">::::ClearConsoleDUT</a></a> &#34;$ipAddr&#34;
                    set spawn_ids($ipAddr) INVALID
                    <a name="::getSpawnId(1)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> $ipAddr msmId
                } else {
                    <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> $expect_out(buffer)
                    expect *
                    <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> $expect_out(buffer)
                    <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unable to connect&#34;
                    unset getSpawnFailCount($ipAddr)
                }
            }
            &#34;?onnected to&#34; {
                puts &#34;REALLY Connected via telnet -  $ipAddr,  pid=$spawn_id&#34;
                set spawn_ids($ipAddr) $spawn_id
                set msmId $spawn_id
                unset getSpawnFailCount($ipAddr)
                <span class="comment-line">#wait for all remaining characters to come</span>
            }
        }
    }
}
<strong><a name="::::_getGrubMenu_71">proc <a href="bootRomLib.tcl-annot.html#::::_getGrubMenu">::::_getGrubMenu</a></a></strong> {dut {MM &#34;A&#34;} {partition &#34;primary&#34;}} {
    set msmSpawnId &#34;INVALID&#34;
    global connectionTimeout DUTs_info
    global spawn_ids MAIN

    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global hostname
    set retValue &#34;error&#34;
    <a name="::_setMultiTaskVar(1)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0

    if {$MM == &#34;A&#34;} {
        set MMValue &#34;&#34;
        set MMDisplay &#34;A&#34;
    } else {
        set MMValue &#34;B&#34;
        set MMDisplay &#34;B&#34;
    }
    if {[info exist DUT${dut}_CONNECT${MMValue}]} {
        <a name="::getSpawnId(2)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT${MMValue}] msmSpawnId
        set spawn_id $msmSpawnId
    } else {
        <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;EXIT SendSpaces DUT${dut}_CONNECT${MMValue} Does Not Exist&#34;
        return 1
    }
    if {($msmSpawnId == &#34;INVALID&#34;) } {
        <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Error condition reached. Valid Spawn id not set&#34;
        return -1
    }

    set t1 [clock seconds];
    set newT 1
    set endTime 180
    puts &#34;At While Value $newT &lt; $endTime&#34;
    set timeout 1
    set done 1
    puts &#34;Waiting for the Grub Menu on $dut $MMDisplay. Second Count: $newT $spawn_id&#34;

    if [catch {send &#34;\r&#34;} reason] {
        <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;failed to send &lt;cr&gt;: $reason\n&#34;
        <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Reconnect to DUT${dut}_CONNECT${MMValue} [set DUT${dut}_CONNECT${MMValue}]&#34;
        <a name="::getSpawnId(3)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT${MMValue}] msmSpawnId
        set spawn_id $msmSpawnId
        <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
    }
    expect {
        -nocase -re &#34;.*grub.*&#34; {
            incr grubCount
            puts &#34;\nGot a Grub Menu DUT $dut  MM $MM Time $newT&#34;
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send -- &#34;\x1B\[A&#34;;
            expect *
            after 300
            send &#34;\r&#34;
            after 1000
            <a name="::_setMultiTaskVar(2)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
            catch {close -i $spawn_id} myr
            catch {wait} myr
            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
            <a name="::exSleep(2)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
            set timeout $connectionTimeout
            return
        }
        timeout {
            puts &#34;Sending space -  hit timeout - time $newT - $dut  MM $MM $spawn_id&#34;
            expect *
            if {[info exists expect_out(buffer)]} {
                unset expect_out(buffer)
            }
            set t2 [clock seconds];
            set newT [expr $t2-$t1];
            if {$newT &gt; $endTime} {
                <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit the end of get a Grub with no luck&#34;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                set timeout $connectionTimeout
                return -1
            }
            if [catch {send &#34; \r&#34;} reason] {
                puts &#34;Send up arrow an issue: $reason&#34;
            } else {
            }
            exp_continue
        }
    }
    <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit the end of get a bootrom with no luck&#34;
    <a name="::_setMultiTaskVar(3)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
    catch {close -i $spawn_id} myr
    catch {wait} myr
    set timeout $connectionTimeout
    return -1
}

<span class="comment-line"># -----------------------------------------------------------------------------</span>
<span class="comment-line"># proc powerSendSpacesOnDUT</span>
<span class="comment-line">#</span>
<span class="comment-line"># Fork PowerCycle to BootRom</span>
<strong><a name="::::powerSendSpacesOnDUT_183">proc <a href="bootRomLib.tcl-annot.html#::::powerSendSpacesOnDUT">::::powerSendSpacesOnDUT</a></a></strong> {dut {MM &#34;A&#34;}} {

    set msmSpawnId &#34;INVALID&#34;
    global connectionTimeout MAIN
    global spawn_ids

    <a name="::_setMultiTaskVar(4)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
    set timeout 1
    set msmAFlag &#34;FALSE&#34;
    set msmBFlag &#34;FALSE&#34;

    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global hostname
    set retValue &#34;error&#34;

    if {$MM == &#34;A&#34;} {
        set MMValue &#34;&#34;
        set MMDisplay &#34;A&#34;
    } else {
        set MMValue &#34;B&#34;
        set MMDisplay &#34;B&#34;
    }
    set myIP &#34;&#34;
    if {[info exist DUT${dut}_CONNECT${MMValue}]} {
        set myIP &#34;[set DUT${dut}_CONNECT${MMValue}]&#34;
        <a name="::getSpawnId(4)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT${MMValue}] msmSpawnId
        set spawn_id $msmSpawnId
    } else {
        <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;EXIT SendSpaces DUT${dut}_CONNECT${MMValue} Does Not Exist&#34;
        return 1
    }
    if {($msmSpawnId == &#34;INVALID&#34;) } {
        <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Error condition reached. Valid Spawn id not set&#34;
        return -1
    }

    <span class="comment-line"># Timing.  Move to time instead of random spaces sent count</span>
    set t1 [clock seconds];
    set spaceTop 400
    set endTime 300
    set newT 1
    global extraBootRomSpaces
    if {[info exist extraBootRomSpaces] &amp;&amp; $extraBootRomSpaces} {set endTime 300;} else {set endTime 220}
    puts &#34;At While Value $newT &lt; $endTime&#34;
    set lspace &#34;\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;
    append lspace &#34;\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040&#34;

    set timeout 1
    <span class="comment-line"># Clear the buffer</span>
    send &#34;\r&#34;
    expect *
    if {[info exists expect_out(buffer)]} {unset expect_out(buffer);}

    while {$newT &lt; $endTime} {
        puts -nonewline &#34;Sending spaces on DUT $dut $MMDisplay. Second Count: $newT $msmSpawnId&#34;
        if [catch {send  &#34;\040\040\040\040\040\040\040\r&#34;} reason] {
            <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;failed to send spaces: $reason\n&#34;
            <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Reconnect to DUT${dut}_CONNECT${MMValue} [set DUT${dut}_CONNECT${MMValue}]&#34;
            <a name="::getSpawnId(5)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT${MMValue}] msmSpawnId
            <a name="::exSleep(3)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
        }
        expect {
            timeout {
                puts &#34;Timeout -  $spawn_id&#34;
                if {$newT == [expr $endTime - 1]} {
                    puts &#34;NEVER GOT A BOOTROM PROMPT DUT${dut} ${MMValue}&#34;
                    catch {close -i $msmSpawnId} myr
                    catch {wait} myr
                    puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                    <a name="::exSleep(4)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 50
                    <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Eror condition reached. DUT $dut&#34;
                    return -1
                }
            }
            &#34;BootRom &gt;&#34; {
                <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot General BootROM DUT $dut  MM $MM &#34;
                <a name="::_setMultiTaskVar(5)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                puts &#34;ATBROM = ATBOOTROM$MM &#34;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                <a name="::exSleep(5)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                set timeout $connectionTimeout
                return
            }
            &#34;login:&#34; {
                if {$newT &lt; 60} {
                    <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit login, but wait for power cycler&#34;
                    send &#34;admin\r&#34;;
                    expect &#34;password:&#34;
                    send &#34;\r&#34;;
                    flush stdout
                    set t2 [clock seconds];
                    set newT [expr $t2-$t1];
                    after 1000
                    continue
                }
                <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss DUT $dut  MM $MM !!!&#34;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                after 2000
                <a name="::_setMultiTaskVar(6)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                set timeout $connectionTimeout
                return
            }
            &#34;password:&#34; {
                if {$newT &lt; 60} {
                    <a name="::result_debug(17)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit password, but wait for power cycler&#34;
                    send &#34;\r&#34;
                    flush stdout
                    set t2 [clock seconds];
                    set newT [expr $t2-$t1];
                    after 1000
                    exp_continue
                }
                <a name="::result_debug(18)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss DUT $dut  MM $MM !!!&#34;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                after 2000
                <a name="::_setMultiTaskVar(7)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                set timeout $connectionTimeout
                return
            }
            -nocase -re &#34;(\\* )?\[a-z0-9()._-]+(:|\\.)\[0-9]+ (#|&gt;) &#34; {
                if {$newT &lt; 80} {
                    puts &#34;\nHit an EXOS prompt, but wait for power cycler DUT $dut  MM $MM&#34;
                    flush stdout
                    set t2 [clock seconds];
                    set newT [expr $t2-$t1];
                    expect *
                    after 1000
                    continue
                }
                puts &#34;Got a exos: prompt. Bootrom miss DUT $dut  MM $MM !!!&#34;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                after 2000
                <a name="::_setMultiTaskVar(8)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                set timeout $connectionTimeout
                return
            }
            &#34;BOOTLOADER&gt;&#34; {
                <a name="::result_debug(19)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got BOOTLOADER DUT $dut  MM $MM &#34;
                <a name="::_setMultiTaskVar(9)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                <a name="::exSleep(6)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                set timeout $connectionTimeout
                return
            }
            &#34;Shell&gt;&#34; {
                <a name="::result_debug(20)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got BootROM DUT $dut  MM $MM &#34;
                <a name="::_setMultiTaskVar(10)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                <a name="::exSleep(7)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                set timeout $connectionTimeout
                return
            }
            &#34;BootStrap &gt;&#34; {
                <a name="::result_debug(21)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got BootStrap - Send boot to get to BootRom &#34;
                send -i $msmSpawnId &#34;boot\r&#34;
                exp_continue 
            }
            &#34;~&gt;&#34; {
                <a name="::result_debug(22)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;continue boot if in pacman &#34;
                send -i $msmSpawnId &#34;c\r&#34;
                <a name="::exSleep(8)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 50
                exp_continue
            }
            -re &#34;DRAM&#34; {
                <a name="::result_debug(23)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit DRAM $MM keep looking&#34;
                send &#34;$lspace\r&#34;
                set xc 0
                while {1} {
                    expect {
                        timeout {
                            flush stdout
                            puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting DRAM $xc \r&#34;
                            incr xc
                            if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                            send &#34;$lspace\r&#34;
                            continue
                        }
                        &#34;BootRom &gt;&#34; {
                            <a name="::result_debug(24)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot Local BootROM DUT $dut  MM $MM&#34;
                            <a name="::_setMultiTaskVar(11)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(9)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        &#34;login:&#34; {
                               <a name="::result_debug(25)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss!!!&#34;
                               <a name="::_setMultiTaskVar(12)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                               catch {close -i $msmSpawnId} myr
                               catch {wait} myr
                               puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                               <a name="::exSleep(10)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                               set timeout $connectionTimeout
                               return
                        }
                        &#34;Loading EXOS Image&#34; {
                            <a name="::result_debug(26)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Loading EXOS. Bootrom miss DUT $dut  MM $MM !!!&#34;
                            <a name="::_setMultiTaskVar(13)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(11)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        &#34;Running Image&#34; {
                            <a name="::result_debug(27)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Running Image. Bootrom miss DUT $dut  MM $MM !!!&#34;
                            <a name="::_setMultiTaskVar(14)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(12)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        -re &#34;\[a-z0-9\.\-_ ]+&#34; {
                            flush stdout
                            puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting DRAM $xc \r&#34;
                            incr xc
                            after 300
                            if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                            send &#34;$lspace\r&#34;
                            continue
                        }
                    }
                }
                exp_continue
            }
            -re &#34;Default BootLoader|Using Default image&#34; {
                <a name="::result_debug(28)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit Default BootLoader $MM &#34;
                send &#34;$lspace\r&#34;
                set xc 0
                while {1} {
                expect {
                    timeout {
                        flush stdout
                        puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting Default BootLoader $xc $MM\r&#34;
                        incr xc
                        if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                        send &#34;$lspace\r&#34;
                        continue
                    }
                    &#34;BootRom &gt;&#34; {
                        <a name="::result_debug(29)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot MAIN BootROM DUT $dut  MM $MM&#34;
                        <a name="::_setMultiTaskVar(15)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                        catch {close -i $msmSpawnId} myr
                        catch {wait} myr
                        puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                        after 3000
                        set timeout $connectionTimeout
                        return
                    }
                    &#34;login:&#34; {
                        <a name="::result_debug(30)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss!!!&#34;
                        <a name="::_setMultiTaskVar(16)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                        catch {close -i $msmSpawnId} myr
                        catch {wait} myr
                        puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                        after 3000
                        set timeout $connectionTimeout
                        return
                    }
                    &#34;Loading EXOS Image&#34; {
                        <a name="::result_debug(31)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Loading EXOS. Bootrom miss DUT $dut  MM $MM !!!&#34;
                        <a name="::_setMultiTaskVar(17)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                        catch {close -i $msmSpawnId} myr
                        catch {wait} myr
                        puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                        after 3000
                        set timeout $connectionTimeout
                        return
                    }
                    &#34;Running Image&#34; {
                        <a name="::result_debug(32)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Running Image. Bootrom miss DUT $dut  MM $MM !!!&#34;
                        <a name="::_setMultiTaskVar(18)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                        catch {close -i $msmSpawnId} myr
                        catch {wait} myr
                        puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                        after 3000
                        set timeout $connectionTimeout
                        return
                    }
                   -re &#34;\[a-z0-9\.\-_ ]+&#34; {
                        flush stdout
                        puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting Default BootLoader $xc $MM\r&#34;
                        incr xc
                        after 300
                        if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                        send &#34;$lspace\r&#34;
                        continue
                    }
                }
                }
                exp_continue
            }
            -re &#34;Self Test&#34; {
                <a name="::result_debug(33)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit Self Test $MM $expect_out(buffer)&#34;
                send &#34;$lspace\r&#34;
                set xc 0
                while {1} {
                    expect {
                        timeout {
                            flush stdout
                            puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting Self Test $xc \r&#34;
                            incr xc
                            if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                            send &#34;$lspace\r&#34;
                            exp_continue
                        }
                        &#34;BootRom &gt;&#34; {
                            <a name="::result_debug(34)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot MAIN BootROM DUT $dut  MM $MM&#34;
                            <a name="::_setMultiTaskVar(19)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                            puts &#34;ATBROM = ATBOOTROM$MM&#34;
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(13)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        &#34;login:&#34; {
                            <a name="::result_debug(35)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss!!!&#34;
                            <a name="::_setMultiTaskVar(20)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(14)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        &#34;Loading EXOS Image&#34; {
                            <a name="::result_debug(36)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Loading EXOS. Bootrom miss DUT $dut  MM $MM !!!&#34;
                            <a name="::_setMultiTaskVar(21)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(15)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                        &#34;Running Image&#34; {
                            <a name="::result_debug(37)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Running Image. Bootrom miss DUT $dut  MM $MM !!!&#34;
                            <a name="::_setMultiTaskVar(22)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                            catch {close -i $msmSpawnId} myr
                            catch {wait} myr
                            puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                            <a name="::exSleep(16)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                            set timeout $connectionTimeout
                            return
                        }
                    }
                }
                exp_continue
            }
            -re &#34;Press and h&#34; {
                <a name="::result_debug(38)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit Press Space Bar $MM &#34;
                send &#34;$lspace\r&#34;
                set xc 0
                while {1} {
                        expect {
                            timeout {
                                   flush stdout
                                   puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting Press and h $xc \r&#34;
                                   incr xc
                                   if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                                   send &#34;$lspace\r&#34;
                                   continue
                            }
                            &#34;BootRom &gt;&#34; {
                                <a name="::result_debug(39)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot MAIN BootROM DUT $dut  MM $MM&#34;
                                <a name="::_setMultiTaskVar(23)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                                puts &#34;ATBROM = ATBOOTROM$MM&#34;
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(17)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                set timeout $connectionTimeout
                                return
                            }
                            &#34;login:&#34; {
                                   <a name="::result_debug(40)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss!!!&#34;
                                   <a name="::_setMultiTaskVar(24)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                   catch {close -i $msmSpawnId} myr
                                   catch {wait} myr
                                   puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                   <a name="::exSleep(18)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                   set timeout $connectionTimeout
                                   return
                            }
                            &#34;Loading EXOS Image&#34; {
                                <a name="::result_debug(41)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Loading EXOS. Bootrom miss DUT $dut  MM $MM !!!&#34;
                                <a name="::_setMultiTaskVar(25)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(19)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                set timeout $connectionTimeout
                                return
                            }
                            &#34;Running Image&#34; {
                                <a name="::result_debug(42)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Running Image. Bootrom miss DUT $dut  MM $MM !!!&#34;
                                <a name="::_setMultiTaskVar(26)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(20)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                set timeout $connectionTimeout
                                return
                            }
                            -re &#34;\[a-z0-9\.\-_ ]+&#34; {
                                   flush stdout
                                   puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting Press and h $xc \r&#34;
                                   incr xc
                                   after 300
                                   if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                                   send &#34;$lspace\r&#34;
                                   continue
                            }
                        }
                }
                exp_continue
            }
            -re &#34;spacebar&#34; {
                <a name="::result_debug(43)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hit Space Bar $MM &#34;
                send &#34;$lspace\r&#34;
                set xc 0
                while {1} {
                        expect {
                            timeout {
                                   flush stdout
                                   puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting spacebar $xc \r&#34;
                                   incr xc
                                   if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                                   send &#34;$lspace\r&#34;
                                   continue
                            }
                            &#34;BootRom &gt;&#34; {
                                <a name="::result_debug(44)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nGot MAIN BootROM DUT $dut  MM $MM&#34;
                                <a name="::_setMultiTaskVar(27)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 1
                                puts &#34;ATBROM = ATBOOTROM$MM &#34;
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(21)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 1
                                set timeout $connectionTimeout
                                return
                            }
                            &#34;login:&#34; {
                                   <a name="::result_debug(45)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got a login: prompt. Bootrom miss!!!&#34;
                                   <a name="::_setMultiTaskVar(28)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                   catch {close -i $msmSpawnId} myr
                                   catch {wait} myr
                                   puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                   <a name="::exSleep(22)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                   set timeout $connectionTimeout
                                   return
                            }
                            &#34;Loading EXOS Image&#34; {
                                <a name="::result_debug(46)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Loading EXOS. Bootrom miss DUT $dut  MM $MM !!!&#34;
                                <a name="::_setMultiTaskVar(29)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(23)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                set timeout $connectionTimeout
                                return
                            }
                            &#34;Running Image&#34; {
                                <a name="::result_debug(47)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Got Running Image. Bootrom miss DUT $dut  MM $MM !!!&#34;
                                <a name="::_setMultiTaskVar(30)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> MAIN(ATBOOTROM$MM) 0
                                catch {close -i $msmSpawnId} myr
                                catch {wait} myr
                                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                                <a name="::exSleep(24)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                                set timeout $connectionTimeout
                                return
                            }
                            &#34;*&#34; {
                                flush stdout
                                puts -nonewline &#34;DUT$dut $MM - Sending spaces after hitting spacebar $xc \r&#34;
                                incr xc
                                after 300
                                if {$xc &gt; $spaceTop} {puts &#34;&gt;&gt;&gt;&gt; 100&#34;; break;}
                                send  &#34;$lspace\r&#34;
                                exp_continue
                            }
                        }
                }
                exp_continue
            }
            eof {
                <a name="::result_debug(48)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;got EOF on DUT${dut}_CONNECT${MMValue} !!!&#34;;
                catch {close -i $msmSpawnId} myr
                catch {wait} myr
                puts &#34;WAIT on closing close -i $msmSpawnId&#34;
                <a name="::exSleep(25)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
                set spawn_ids([set DUT${dut}_CONNECT${MMValue}]) &#34;INVALID&#34;
                <a name="::getSpawnId(6)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT${MMValue}] msmSpawnId
                <a name="::result_debug(49)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;New spawnid is $msmSpawnId&#34;
            }
        }
        set t2 [clock seconds];
        set newT [expr $t2-$t1];
        after 500
    }
    set timeout $connectionTimeout
    catch {exp_close} myr
    catch {exp_wait} myr
    return $retValue
}
<strong><a name="::::DelayedPowerCycleDUT_712">proc <a href="bootRomLib.tcl-annot.html#::::DelayedPowerCycleDUT">::::DelayedPowerCycleDUT</a></a></strong> {DUT {wait &#34;YES&#34;} {showError &#34;true&#34;} {delay &#34;3&#34;} } {
    <span class="comment-line">#exSleep $delay</span>
    set varSleep [expr {int(rand()*6)}]
    <a name="::exSleep(26)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> $varSleep
    <a name="::_setMultiTaskVar(31)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> DUTs_info(DUT${DUT},powerCycleStatus) &#34;ok&#34;
    if {[<a name="::PowerCycleDUT(1)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $DUT $wait $showError] &lt;= 0} {
        if {[<a name="::PowerCycleDUT(2)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $DUT $wait $showError] &lt;= 0} {
            <a name="::_setMultiTaskVar(32)"><a href="./multiTask.tcl.html#::_setMultiTaskVar_167">::_setMultiTaskVar</a></a> DUTs_info(DUT${DUT},powerCycleStatus) &#34;error&#34;
        }
    }
}
<strong><a name="::::pcToGrub_723">proc <a href="bootRomLib.tcl-annot.html#::::pcToGrub">::::pcToGrub</a></a></strong> {dut} {
    global connectionTimeout MAIN
    global spawn_id spawn_ids
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global whichDutNow
    set whichDutNow $dut

    set retValue &#34;error&#34;
    set msmaPresent &#34;TRUE&#34;
    set msmbPresent &#34;FALSE&#34;
    set mmList &#34;&#34;
    set procList &#34;&#34;
    if {[info exist DUT${dut}_CONNECT]} {
        set msmaPresent &#34;TRUE&#34;
        lappend procList &#34;_getGrubMenu $dut A&#34;
        lappend mmList DUT${dut}_CONNECT
    } else {
        set msmaPresent &#34;FALSE&#34;
    }

    if {[info exist DUT${dut}_CONNECTB]} {
        set msmbPresent &#34;TRUE&#34;
        lappend procList &#34;_getGrubMenu $dut B&#34;
        lappend mmList DUT${dut}_CONNECTB
    } else {
        set msmbPresent &#34;FALSE&#34;
    }


    if {($msmaPresent == &#34;TRUE&#34;) ||
        ($msmbPresent == &#34;TRUE&#34;)} {
        lappend procList &#34;DelayedPowerCycleDUT $dut NO false&#34;
        <a name="::result_debug(50)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n@@@\n@@@Calling MultiTask Send Spaces on Consoles and PowerCycle\n@@@\n$procList\n@@@&#34;
        <a name="::MultiTask(1)"><a href="./multiTask.tcl.html#::MultiTask_39">::MultiTask</a></a> $procList
    } else {
        return -1
    }
}

<strong><a name="::::pcToBootRom_763">proc <a href="bootRomLib.tcl-annot.html#::::pcToBootRom">::::pcToBootRom</a></a></strong> {dut} {
    global connectionTimeout MAIN
    global spawn_id bcmxOnieX86
    global spawn_ids DUTs_info
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global LITEBOOTROM
    global whichDutNow
    set whichDutNow $dut
    if {[info exists LITEBOOTROM] &amp;&amp; $LITEBOOTROM} {
        set liteRom 1
    } else {
        set liteRom 0
    }
    set MAIN(ATBOOTROMA) 0
    set MAIN(ATBOOTROMB) 0
    set grub 0
    set retValue &#34;error&#34;
    set msmaPresent &#34;TRUE&#34;
    set msmbPresent &#34;FALSE&#34;
    set mmList &#34;&#34;
    set procList &#34;&#34;
    if {[info exist DUT${dut}_CONNECT]} {
        set msmaPresent &#34;TRUE&#34;
        if {[info exists DUTs_info(DUT${dut},sysType)] &amp;&amp; \
               [regexp -nocase &#34;$bcmxOnieX86&#34; $DUTs_info(DUT${dut},sysType)]} {
            lappend procList &#34;_getGrubMenu $dut A&#34;
            set grub 1
        } else {
            lappend procList &#34;powerSendSpacesOnDUT $dut A&#34;
        }
        lappend mmList DUT${dut}_CONNECT
    } else {
        set msmaPresent &#34;FALSE&#34;
    }

    if {[info exist DUT${dut}_CONNECTB]} {
        set msmbPresent &#34;TRUE&#34;
        if {[info exists DUTs_info(DUT${dut},sysType)] &amp;&amp; \
               [regexp -nocase &#34;$bcmxOnieX86&#34; $DUTs_info(DUT${dut},sysType)]} {
            lappend procList &#34;_getGrubMenu $dut B&#34;
            set grub 1
        } else {
            lappend procList &#34;powerSendSpacesOnDUT $dut B&#34;
        }
        lappend mmList DUT${dut}_CONNECTB
    } else {
        set msmbPresent &#34;FALSE&#34;
    }


    if {($msmaPresent == &#34;TRUE&#34;) ||
        ($msmbPresent == &#34;TRUE&#34;)} {
        lappend procList &#34;DelayedPowerCycleDUT $dut NO false&#34;
        <a name="::result_debug(51)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n@@@\n@@@Calling MultiTask Send Spaces on Consoles and PowerCycle\n@@@\n$procList\n@@@&#34;
        <a name="::MultiTask(2)"><a href="./multiTask.tcl.html#::MultiTask_39">::MultiTask</a></a> $procList
        if {$grub} {
            set timeout $connectionTimeout
            return &#34;ok&#34;
        }
    } else {
        return -1
    }
    if {$msmaPresent == &#34;TRUE&#34; &amp;&amp; !$MAIN(ATBOOTROMA)} {
        <a name="::result_debug(52)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;!!!!\n!!!!\nDUT $dut A is not at BootROM\n!!!!\n!!!!&#34;
    }
    if {$msmbPresent == &#34;TRUE&#34; &amp;&amp; !$MAIN(ATBOOTROMB)} {
        <a name="::result_debug(53)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;!!!!\n!!!!\nDUT $dut B is not at BootROM\n!!!!\n!!!!&#34;
    }
    set BootSent 0
    foreach mmConsole $mmList {
        set f 0
        if {[info exist $mmConsole]} {
            <a name="::getSpawnId(7)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set $mmConsole] msmSpawnId
        } else {
            <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set $mmConsole]
        }        
        set timeout 5
        if {[info exists msmSpawnId]} {
            set spawn_id $msmSpawnId
        } else {
            <a name="::result_debug(54)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n@@\n@@\nCould not get spawnId with getSpawnId proc\n@@\n@@&#34;;
            continue;
        }

        if {!$liteRom} {
            <a name="::result_debug(55)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n config none  DONE!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
            send &#34;config none\r&#34;
        } else {
            send &#34;\r&#34;
        }
        expect {
            &#34;BootRom &gt;&#34; {
                send &#34;boot 1\r&#34;
                expect &#34;boot 1&#34;
                set BootSent 1
                <a name="::result_debug(56)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now booting image 1 $spawn_id DONE!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
                <span class="comment-line">#result_debug &#34;$expect_out(buffer)&#34;</span>
            }
            &#34;BootRom&gt;&#34; {
                send &#34;boot 1\r&#34;
                expect &#34;boot 1&#34;
                set BootSent 1
                <a name="::result_debug(57)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now booting image 1 DONE!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
            }
            &#34;BOOTLOADER&gt;&#34; {
                send &#34;boot 1\r&#34;
                expect &#34;boot 1&#34;
                set BootSent 1
                <a name="::result_debug(58)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now booting Mariner image 1 DONE!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
                <a name="::result_debug(59)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
            }
            &#34;Shell&gt;&#34; {
                <span class="comment-line"># Everest bootrom</span>
                send &#34;boot 1\r&#34;
                expect &#34;boot 1&#34;
                set BootSent 1
                <a name="::result_debug(60)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now booting Everest image 1 DONE!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
                <a name="::result_debug(61)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
            }
            timeout {
                incr f
                if {$f &gt; 6} { break;}
                puts &#34;timeout hit&#34;
                send &#34;\r&#34;
                exp_continue
            }
        }
        <a name="::exSleep(27)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 3
    }
    if {$BootSent} {
        <a name="::exSleep(28)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
        set retValue &#34;ok&#34;
    } else {
        <span class="comment-line"># error reached, failed to get into bootrom prompt</span>
       <a name="::result_debug(62)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Error reached, we did not succeed in getting into bootrom&#34;
       set retValue &#34;error&#34;
    }
    if {$msmaPresent == &#34;TRUE&#34; &amp;&amp; $msmbPresent == &#34;TRUE&#34; &amp;&amp; $MAIN(ATBOOTROMB) &amp;&amp; !$MAIN(ATBOOTROMA)} {
        <a name="::result_debug(63)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;!!!!\n!!!!\nBUMMER!! YOU ARE ABOUT TO HIT A MIS-MATCH - B is primary A unknown\n!!!!\n!!!!&#34;
    } elseif {$msmaPresent == &#34;TRUE&#34; &amp;&amp; $msmbPresent == &#34;TRUE&#34; &amp;&amp; !$MAIN(ATBOOTROMB) &amp;&amp; $MAIN(ATBOOTROMA)} {
        <a name="::result_debug(64)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;!!!!\n!!!!\nBUMMER!! YOU ARE ABOUT TO HIT A MIS-MATCH - A is primary B unknown\n!!!!\n!!!!&#34;
    } else {
    }

    set timeout $connectionTimeout
    return $retValue
}

<strong><a name="::::powerCycleToBootRom_912">proc <a href="bootRomLib.tcl-annot.html#::::powerCycleToBootRom">::::powerCycleToBootRom</a></a></strong> {dut} {

    set msmaSpawnId &#34;INVALID&#34;
    set msmbSpawnId &#34;INVALID&#34;
    global connectionTimeout
    global spawn_id
    global spawn_ids

    set timeout 1
    set msmaFlag &#34;FALSE&#34;
    set msmbFlag &#34;FALSE&#34;
    set numPowerCycle 0
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    set retValue &#34;error&#34;

    <span class="comment-line"># TEMPORARY VOYAGER DUE TO NO BOOTROM</span>
    global skipBootRom
    global LITEBOOTROM
    if {[info exists LITEBOOTROM] &amp;&amp; $LITEBOOTROM} {
        set liteRom 1
    } else {
        set liteRom 0
    }
    if {[info exist skipBootRom] &amp;&amp; $skipBootRom} {
        <a name="::result_debug(65)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n!!!!!!!\n!!!!!!!\nVoyager Power Cycle to Primary\n!!!!!!!\n!!!!!!!&#34;
        <a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT] -CheckOperational &#34;0&#34;
        <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;use image primary&#34;
        if {[<a name="::PowerCycleDUT(3)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $dut &#34;YES&#34;]==1} {
            <a name="::result_debug(66)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-------\nSuccess\n-------&#34;
            return &#34;ok&#34;
        } else {
            <a name="::result_debug(67)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-------\nFailure\n-------&#34;
            return &#34;error&#34;
        }
    }    

    <span class="comment-line"># if msma does not exist then set flag to TRUE</span>
    if {[info exist DUT${dut}_CONNECT]} {
        set msmaPresent &#34;TRUE&#34;
        <a name="::getSpawnId(8)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT] msmaSpawnId
    } else {
        set msmaPresent &#34;FALSE&#34;
        set msmaFlag &#34;TRUE&#34;
        set msmaSpawnId &#34;NOTPRESENT&#34;
    }

    if {[info exist DUT${dut}_CONNECTB]} {
        set msmbPresent &#34;TRUE&#34;
        <a name="::getSpawnId(9)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECTB] msmbSpawnId
    } else {
        set msmbPresent &#34;FALSE&#34;
        set msmbFlag &#34;TRUE&#34;
        set msmbSpawnId &#34;NOTPRESENT&#34;
    }


    if {($msmaSpawnId == &#34;INVALID&#34;) ||
        ($msmbSpawnId == &#34;INVALID&#34;)} {
        <a name="::result_debug(68)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Eror condition reached. Valid Spawn id not set&#34;
        <a name="::result_debug(69)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;msmaSpawnId: $msmaSpawnId&#34;
        <a name="::result_debug(70)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;msmbSpawnId: $msmbSpawnId&#34;
    }

<a name="::result_debug(71)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;the msmbPresent $msmbPresent, msmaPresent $msmaPresent| msmaFlag $msmaFlag, msmbFlag $msmbFlag&#34;
    if {[<a name="::PowerCycleDUT(4)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $dut &#34;NO&#34;]==1} {

    <span class="comment-line"># while both flags not set loop</span>
    <span class="comment-line">#while {($msmaFlag == &#34;FALSE&#34;) || ($msmbFlag == &#34;FALSE&#34;)} {</span>
    <span class="comment-line">#}</span>

    <span class="comment-line"># Add the option to extend the spaces for new platforms that take a while to boot to the boot rom</span>
    global extraBootRomSpaces
    if {[info exist extraBootRomSpaces] &amp;&amp; $extraBootRomSpaces} {set spaceLoopCount 300; <a name="::exSleep(29)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 1;} else {set spaceLoopCount 100}
    for {set i 0} {$i &lt;= $spaceLoopCount} {incr i} {

        <span class="comment-line"># Is flag for msma set if not login</span>
        if {($msmaFlag == &#34;FALSE&#34;) &amp;&amp; ($msmaPresent == &#34;TRUE&#34;)} {
            <span class="comment-line"># Connect to msma</span>
            set spawn_id $msmaSpawnId
    
            <span class="comment-line"># Send spaces and CR</span>
            puts &#34;Now sending spaces&#34;
            <span class="comment-line">#send &#34;                 \r&#34;</span>
            if {[catch {exp_send &#34;                 \r&#34;} reason]} {
                if {  [regexp -nocase &#34;not open&#34; $reason] } {
                    <a name="::result_print(1)"><a href="./loadConsoles.tcl.html#::result_print_12">::result_print</a></a> &#34;\n~~~~~\nexpec send found spawn id not open \
                        : reconnect\n~~~~~&#34;;
                    <span class="comment-line"># # The connection has been dropped. Clean up the spawnId and hostname entries</span>
                    <a name="::_clearDutConnectionVars(1)"><a href="./login.tcl.html#::_clearDutConnectionVars_1969">::_clearDutConnectionVars</a></a> $dut;
                    global DUT${dut}_CONNECT
                    if {[<a name="::Login(3)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT] -CheckOperational &#34;0&#34; -masterCheck &#34;0&#34;]&lt;=0} {
                        <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Login is not successful on retry after spawn id not open&#34;
                        return &#34;&#34;
                    }
                }
            }
            <span class="comment-line"># Check to see if boot prompt is there</span>
            expect {
                &#34;BootRom &gt;&#34; {
                    <span class="comment-line"># if there set flag</span>
                    set msmaFlag &#34;TRUE&#34;
                    <a name="::result_debug(72)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;!!!! HIT BOOTROM DUT$dut: $expect_out(buffer)&#34;
                }
                &#34;BOOTLOADER&gt;&#34; {
                    <span class="comment-line"># if there set flag</span>
                    set msmaFlag &#34;TRUE&#34;
                    <a name="::result_debug(73)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msma DUT$dut: $expect_out(buffer)&#34;
                }
                &#34;Shell&gt;&#34; {
                    <span class="comment-line"># if there set flag (Everest bootrom)</span>
                    set msmaFlag &#34;TRUE&#34;
                    <a name="::result_debug(74)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msma DUT$dut: $expect_out(buffer)&#34;
                }
                &#34;BootStrap &gt;&#34; {
                    <a name="::result_debug(75)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msma DUT$dut: $expect_out(buffer)&#34;
                   send &#34;boot\r&#34;
                }
                &#34;~&gt;&#34; {
                    <span class="comment-line"># Pacman prompt</span>
                    <a name="::result_debug(76)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;continue boot if in pacman&#34;
                    send &#34;c\r&#34;
                }
                &#34;login:&#34; {
                    <span class="comment-line"># else check to see if login prompt is there</span>
                    <span class="comment-line"># if there &#34;too late&#34;, reboot</span>
                    <a name="::PowerCycleDUT(5)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $dut &#34;NO&#34;
                    incr numPowerCycle
                }
                eof {
                    <a name="::result_debug(77)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;got EOF!!!&#34;;
                    <a name="::exSleep(30)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 3
                    set spawn_ids([set DUT${dut}_CONNECT]) &#34;INVALID&#34;
	            <a name="::getSpawnId(10)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECT] msmaSpawnId
                }
                timeout {
                }
            }
        }
    
        <a name="::result_debug(78)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut msmbPresent $msmbPresent, msmaPresent $msmaPresent| msmaFlag $msmaFlag, msmbFlag $msmbFlag&#34;
        <span class="comment-line"># Is flag for msmb set if not login</span>
        if {($msmbFlag == &#34;FALSE&#34;) &amp;&amp; ($msmbPresent == &#34;TRUE&#34;)} {
            <span class="comment-line"># Connect to msmb</span>
            set spawn_id $msmbSpawnId

            <span class="comment-line"># Send spaces and CR</span>
            puts &#34;Now sending spaces&#34;
            <span class="comment-line">#send &#34;                 \r&#34;</span>
            if {[catch {exp_send &#34;                 \r&#34;} reason]} {
                if {  [regexp -nocase &#34;not open&#34; $reason] } {
                    <a name="::result_print(2)"><a href="./loadConsoles.tcl.html#::result_print_12">::result_print</a></a> &#34;\n~~~~~\nexpec send found spawn id not open \
                        : reconnect\n~~~~~&#34;;
                    <span class="comment-line"># # The connection has been dropped. Clean up the spawnId and hostname entries</span>
                    <a name="::_clearDutConnectionVars(2)"><a href="./login.tcl.html#::_clearDutConnectionVars_1969">::_clearDutConnectionVars</a></a> $dut;
                    global DUT${dut}_CONNECT
                    if {[<a name="::Login(4)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT] -CheckOperational &#34;0&#34; -masterCheck &#34;0&#34;]&lt;=0} {
                        <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Login is not successful on retry after spawn id not open&#34;
                        return &#34;&#34;
                    }
                }
            }
            <span class="comment-line"># Check to see if boot prompt is there</span>
            expect {
                &#34;BootRom &gt;&#34; {
                    <span class="comment-line"># if there set flag</span>
                    set msmbFlag &#34;TRUE&#34;
                    <a name="::result_debug(79)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msmb DUT$dut : $expect_out(buffer)&#34;
                }
                &#34;BOOTLOADER&gt;&#34; {
                    <span class="comment-line"># if there set flag</span>
                    set msmbFlag &#34;TRUE&#34;
                    <a name="::result_debug(80)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msmb DUT$dut : $expect_out(buffer)&#34;
                }
                &#34;Shell&gt;&#34; {
                    <span class="comment-line"># if there set flag (Everest bootrom)</span>
                    set msmbFlag &#34;TRUE&#34;
                    <a name="::result_debug(81)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msmb DUT$dut : $expect_out(buffer)&#34;
                }
                &#34;BootStrap &gt;&#34; {
                    <a name="::result_debug(82)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;expectbuffer msmb: $expect_out(buffer)&#34;
                   send &#34;boot\r&#34;
                }
                &#34;~&gt;&#34; {
                    <span class="comment-line"># Pacman prompt</span>
                    <a name="::result_debug(83)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;continue boot if in pacman&#34;
                    send &#34;c\r&#34;
                }
                &#34;login:&#34; {
                    <span class="comment-line"># else check to see if login prompt is there</span>
                    <span class="comment-line"># if there &#34;too late&#34;, reboot</span>
                    <a name="::PowerCycleDUT(6)"><a href="./poweroutlet.tcl.html#::PowerCycleDUT_377">::PowerCycleDUT</a></a> $dut &#34;NO&#34;
                    incr numPowerCycle
                }
                eof {
                    <a name="::result_debug(84)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;got EOF!!!&#34;;
                    <a name="::exSleep(31)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 3
                    set spawn_ids([set DUT${dut}_CONNECTB]) &#34;INVALID&#34;
	            <a name="::getSpawnId(11)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECTB] msmbSpawnId
                }
                timeout {
                }
            }
        }
        <a name="::result_debug(85)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut msmbPresent $msmbPresent, msmaPresent $msmaPresent| msmaFlag $msmaFlag, msmbFlag $msmbFlag&#34;
        if {($msmaFlag == &#34;TRUE&#34;) &amp;&amp; ($msmbFlag == &#34;TRUE&#34;)} {
            <a name="::result_debug(86)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Both msms are now in the bootrom prompt&#34;
            break
        }
        if {$numPowerCycle &gt; 2} {
            <a name="::result_debug(87)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Too many power cycles.  Can not continue&#34;
            break
        }
    }

    if {($msmaFlag == &#34;TRUE&#34;) &amp;&amp; ($msmbFlag == &#34;TRUE&#34;)} {
        <a name="::result_debug(88)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now booting image 1 DONE DUT$dut !!!!!\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
        set timeout 5

        if {($msmaPresent == &#34;TRUE&#34;)} {
            <span class="comment-line"># Connect to msma</span>
            set spawn_id $msmaSpawnId

            <span class="comment-line"># dis pacman</span>
            <span class="comment-line">#result_debug &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Turn Off PACMAN\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;</span>
            <span class="comment-line">#send &#34;enable debug-mode\r&#34;</span>
            <span class="comment-line">#exSleep 2</span>
            <span class="comment-line">#expect {</span>
            <span class="comment-line">#   &#34;assword:&#34; {</span>
            <span class="comment-line">#        result_debug &#34;$expect_out(buffer)&#34;</span>
            <span class="comment-line">#        exSleep 2</span>
            <span class="comment-line">#        send &#34;dbgextr\r&#34;</span>
            <span class="comment-line">#        expect &#34;BootRom &gt;&#34;</span>
            <span class="comment-line">#        send &#34;cmdline pacman=0\r&#34;</span>
            <span class="comment-line">#        expect &#34;BootRom &gt;&#34;</span>
            <span class="comment-line">#        result_debug &#34;$expect_out(buffer)&#34;</span>
            <span class="comment-line">#   }</span>
            <span class="comment-line">#   &#34;BOOTLOADER&gt;&#34; {</span>
            <span class="comment-line">#        send &#34;cmdline pacman=0\r&#34;</span>
            <span class="comment-line">#        expect &#34;BOOTLOADER&gt;&#34;</span>
            <span class="comment-line">#        result_debug &#34;$expect_out(buffer)&#34;</span>
            <span class="comment-line">#   }</span>
            <span class="comment-line">#   &#34;Shell&gt;&#34; {</span>
            <span class="comment-line">#        # Everest bootrom</span>
            <span class="comment-line">#        result_debug &#34;$expect_out(buffer)&#34;</span>
            <span class="comment-line">#   }</span>
            <span class="comment-line">#}</span>
            <span class="comment-line"># Send boot 1</span>
            <a name="::result_debug(89)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now sending config none MSMA DUT$dut \n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
            if {!$liteRom} {
                send &#34;config none\r&#34;
            } else {
                send &#34;&#34;
            }
            expect {
               &#34;BootRom &gt;&#34; {
                   send &#34;boot 1\r&#34;
                   expect &#34;boot 1&#34;
                   <a name="::result_debug(90)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
               &#34;BOOTLOADER&gt;&#34; {
                   send &#34;boot 1\r&#34;
                   expect &#34;boot 1&#34;
                   <a name="::result_debug(91)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
               &#34;Shell&gt;&#34; {
                   <span class="comment-line"># Everest bootrom</span>
                   send &#34;boot 1\r&#34;
                   expect &#34;boot 1&#34;
                   <a name="::result_debug(92)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
             }
        }

        if {($msmbPresent == &#34;TRUE&#34;)} {
            <span class="comment-line"># Connect to msmb</span>
            set spawn_id $msmbSpawnId

            <span class="comment-line"># dis pacman</span>
            <a name="::result_debug(93)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Turn Off PACMAN\n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
            send &#34;enable debug-mode\r&#34;
            <a name="::exSleep(32)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
            expect {
               &#34;assword:&#34; {
                    <a name="::result_debug(94)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
                    <a name="::exSleep(33)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
                    send &#34;dbgextr\r&#34;
                    expect &#34;BootRom &gt;&#34;
                    send &#34;cmdline pacman=0\r&#34;
                    expect &#34;BootRom &gt;&#34;
                    <a name="::result_debug(95)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
               }
               &#34;BOOTLOADER&gt;&#34; {
                    send &#34;cmdline pacman=0\r&#34;
                    expect &#34;BOOTLOADER&gt;&#34;
                    <a name="::result_debug(96)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
               }
               &#34;Shell&gt;&#34; {
                    <span class="comment-line"># Everest bootrom</span>
                    <a name="::result_debug(97)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$expect_out(buffer)&#34;
               }
            }
            <span class="comment-line"># Send boot 1</span>
            <a name="::result_debug(98)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n Now sending config none MSMB DUT$dut \n &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#34;
            send &#34;config none\r&#34;
            expect {
               &#34;BootRom &gt;&#34; {
                  send &#34;boot 1\r&#34;
                  expect &#34;boot 1&#34;
                  <a name="::result_debug(99)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
               &#34;BOOTLOADER&gt;&#34; {
                  send &#34;boot 1\r&#34;
                  expect &#34;boot 1&#34;
                  <a name="::result_debug(100)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
               &#34;Shell&gt;&#34; {
                  <span class="comment-line"># Everest bootrom</span>
                  send &#34;boot 1\r&#34;
                  expect &#34;boot 1&#34;
                  <a name="::result_debug(101)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DUT$dut $expect_out(buffer)&#34;
               }
             }
        }
       set retValue &#34;ok&#34;
    } else {
        <span class="comment-line"># error reached, failed to get into bootrom prompt</span>
       <a name="::result_debug(102)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Error reached, we did not succeed in getting into bootrom&#34;
       set retValue &#34;error&#34;
    }
    }
    set timeout $connectionTimeout
   return $retValue
}




<strong><a name="::::rebootToBootRom_1250">proc <a href="bootRomLib.tcl-annot.html#::::rebootToBootRom">::::rebootToBootRom</a></a></strong> {{dut 1} {msm &#34;&#34;} {mode bootrom}} {

    global connectionTimeout
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global spawn_id

    set timeout 1
    set BootPrompt 0

    <a name="::Login(5)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT]

    ;<span class="comment-line"># Setup spawn_id to correct MSM And Rebooting the DUT</span>
    if {$msm == &#34;A&#34;} {
		<a name="::slow_send(1)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm A\r&#34;

    } elseif { $msm == &#34;B&#34;} {
		<a name="::slow_send(2)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm B\r&#34;

    } elseif { $msm == &#34;&#34;} {
		<a name="::slow_send(3)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot\r&#34;
    <span class="comment-line">#-------Adding this part of code to send a particular</span>
    <span class="comment-line">#       slot on stacking to bootrom or bootstrap</span>
    } elseif { [regexp {[0-9]+}  $msm slotNo] } {
                <a name="::slow_send(4)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot slot $slotNo \r&#34;

    } else {
	<a name="::result_debug(103)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Invalid Argument&#34;
	<a name="::result_debug(104)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Usage : {<a name="::rebootToBootRom(1)"><a href="./bootRomLib.tcl.html#::rebootToBootRom_1250">::rebootToBootRom</a></a> 1} (or) {<a name="::rebootToBootRom(2)"><a href="./bootRomLib.tcl.html#::rebootToBootRom_1250">::rebootToBootRom</a></a> 1} &lt;A/B&gt; &#34;
	return 0
    }
     
    <span class="comment-line">#---Answering Reboot questions</span>
        set timeout 8
	expect &#34;\\?&#34; {
		<a name="::result_pre(1)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
                send &#34;y\r&#34;
                exp_continue
               }
      
   <a name="::result_debug(105)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Waiting for switch to go down&#34;
   <a name="::exSleep(34)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 10

    if {$msm == &#34;B&#34;} {
           if {[info exist DUT${dut}_CONNECTB]} {
            <a name="::getSpawnId(12)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECTB] spawn_id
        	} else {
	            return 0
        	}
         }
    
    <span class="comment-line">#---spawn_id should point to target MSM console</span>
	set timeout 60
	set expect_out(buffer) &#34;&#34;
	expect &#34;*&#34;
	expect -nocase -re &#34;spacebar.*$mode&#34; {
	send &#34;                 \r&#34;
	<a name="::result_pre(2)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
        <a name="::result_debug(106)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Now sending spaces to stop at BOOTROM prompt&#34;
	<span class="comment-line"># Check to see if boot prompt is there</span>
	expect {
	  &#34;BootRom &gt; &#34; {
               set BootPrompt &#34;TRUE&#34;
           }
           &#34;BOOTLOADER&gt; &#34; {
               set BootPrompt &#34;TRUE&#34;
           }
	   &#34;BootStrap &gt; &#34; {
		set BootPrompt &#34;TRUE&#34;
           }
           &#34;~&gt;&#34; {
               <span class="comment-line"># Pacman prompt</span>
               <a name="::result_debug(107)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;continue boot if in pacman&#34;
               send &#34;c\r&#34;
           }
	   &#34;login:&#34; {
		<span class="comment-line"># else check to see if login prompt is there</span>
		send &#34;admin\r&#34;
		expect &#34;password&#34;
		send &#34;\r&#34;
		expect &#34;#&#34;
		<a name="::result_debug(108)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Unable to get Boot prompt&#34;
	   }
	   timeout {
	   }
	 }
       }
     <a name="::result_pre(3)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
     set timeout $connectionTimeout

<a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Checking the router prompt&#34;
    if {$BootPrompt == &#34;TRUE&#34; } {
	<a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;The router is at Boot Prompt&#34;
	<a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return 1
    } else {
	<a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unable to get to Boot Prompt&#34;
	<a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return 0
    }
}
<strong><a name="::::enableHeapTrc_1351">proc <a href="bootRomLib.tcl-annot.html#::::enableHeapTrc">::::enableHeapTrc</a></a></strong> {{dut 1} {msm &#34;&#34;}} {

    global connectionTimeout
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global spawn_id
    set HeapTrcEnabled &#34;FALSE&#34;

    if { $msm == &#34;B&#34; } {
        if { [info exist DUT${dut}_CONNECTB]} {
             <a name="::Login(6)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECTB] -CheckOperational 0 -masterCheck 0
             <a name="::EnableDebugMode(1)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
             <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
        } else {
	    <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;MSMB not present&#34;
	    return 1
        }
    }
    <a name="::Login(7)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT]

    ;<span class="comment-line"># Setup spawn_id to correct MSM And Rebooting the DUT</span>
    if {$msm == &#34;A&#34;} {
                <a name="::EnableDebugMode(2)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
		<a name="::slow_send(5)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm A\r&#34;

    } elseif { $msm == &#34;B&#34;} {
		<a name="::slow_send(6)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm B\r&#34;
    } elseif { $msm == &#34;&#34;} {
                <a name="::EnableDebugMode(3)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
		<a name="::slow_send(7)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot\r&#34;
    } else {
	<a name="::result_debug(109)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Invalid Argument&#34;
	<a name="::result_debug(110)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Usage : {<a name="::enableHeapTrc(1)"><a href="./bootRomLib.tcl.html#::enableHeapTrc_1351">::enableHeapTrc</a></a> 1} (or) {<a name="::rebootToBootRom(3)"><a href="./bootRomLib.tcl.html#::rebootToBootRom_1250">::rebootToBootRom</a></a> 1} &lt;A/B&gt; &#34;
	return 0
    }
     
    <span class="comment-line">#---Answering Reboot questions</span>
    set timeout 8
    expect &#34;\\?&#34; {
		<a name="::result_pre(4)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
                send &#34;y\r&#34;
                exp_continue
    }
      
    <a name="::result_debug(111)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Waiting for switch to go down&#34;
    <a name="::exSleep(35)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 10

    if {$msm == &#34;B&#34;} {
           if {[info exist DUT${dut}_CONNECTB]} {
               <a name="::getSpawnId(13)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECTB] spawn_id
           } else {
	            return 0
           }
    }
    
    <span class="comment-line">#---spawn_id should point to target MSM console</span>
    set timeout 200 
    set expect_out(buffer) &#34;&#34;
    expect {
	   &#34;login:&#34; {
                if {$msm == &#34;B&#34;} {
                    <a name="::Login(8)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECTB] -CheckOperational 0 -masterCheck 0               
                } else {
                    <a name="::Login(9)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT] -CheckOperational 0 -masterCheck 0               
                }
                <a name="::EnableDebugMode(4)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry disable pacman&#34;
                <a name="::DisableDebugMode(1)"><a href="./misc.tcl.html#::DisableDebugMode_2957">::DisableDebugMode</a></a> 
	   }
           &#34;Press enter within 5 second&#34; {
	     send &#34;\r\r\r&#34;
             exp_continue
           }
           &#34;pacman settings&#34; {
                sleep 5;
                puts &#34;7b\r&#34;
		send &#34;7b\r&#34;
		expect &#34;boot_enable_malloc_trace=&#34;
                puts &#34;true\r&#34;
		send &#34;true\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;8a\r&#34;
		send &#34;8a\r&#34;
		expect &#34;pacman_autostart=&#34;
                puts &#34;true\r&#34;
		send &#34;true\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;s\r&#34;
		send &#34;s\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;c\r&#34;
		send &#34;c\r&#34;
                set HeapTrcEnabled &#34;TRUE&#34;
                exp_continue
           }
	   timeout {
	         <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Timeout while enabling HeapTrc&#34;
	   }
     }
     <a name="::result_pre(5)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
     set timeout $connectionTimeout
     if {$HeapTrcEnabled == &#34;TRUE&#34; } {
	<a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;HeapTrc is enabled on DUT&#34;
	return 1
     } else {
	<a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unable to enabled HeapTrc on DUT&#34;
	return 0
     }
}
<strong><a name="::::disableHeapTrc_1462">proc <a href="bootRomLib.tcl-annot.html#::::disableHeapTrc">::::disableHeapTrc</a></a></strong> {{dut 1} {msm &#34;&#34;}} {

    global connectionTimeout
    global DUT${dut}_CONNECT
    global DUT${dut}_CONNECTB
    global spawn_id
    set HeapTrcDisabled &#34;FALSE&#34;

    if { $msm == &#34;B&#34; } {
        if { [info exist DUT${dut}_CONNECTB]} {
             <a name="::Login(10)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECTB] -CheckOperational 0 -masterCheck 0
             <a name="::EnableDebugMode(5)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
             <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
        } else {
	    <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;MSMB not present&#34;
	    return 1
        }
    }
    <a name="::Login(11)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT]

    ;<span class="comment-line"># Setup spawn_id to correct MSM And Rebooting the DUT</span>
    if {$msm == &#34;A&#34;} {
                <a name="::EnableDebugMode(6)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
		<a name="::slow_send(8)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm A\r&#34;

    } elseif { $msm == &#34;B&#34;} {
		<a name="::slow_send(9)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot msm B\r&#34;
    } elseif { $msm == &#34;&#34;} {
                <a name="::EnableDebugMode(7)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry enable pacman&#34;
		<a name="::slow_send(10)"><a href="./SendSwCmd.tcl.html#::slow_send_1567">::slow_send</a></a> &#34;reboot\r&#34;
    } else {
	<a name="::result_debug(112)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Invalid Argument&#34;
	<a name="::result_debug(113)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Usage : {DisableHeapTrc 1} (or) {<a name="::rebootToBootRom(4)"><a href="./bootRomLib.tcl.html#::rebootToBootRom_1250">::rebootToBootRom</a></a> 1} &lt;A/B&gt; &#34;
	return 0
    }
     
    <span class="comment-line">#---Answering Reboot questions</span>
    set timeout 8
    expect &#34;\\?&#34; {
		<a name="::result_pre(6)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
                send &#34;y\r&#34;
                exp_continue
    }
      
    <a name="::result_debug(114)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Waiting for switch to go down&#34;
    <a name="::exSleep(36)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 10

    if {$msm == &#34;B&#34;} {
           if {[info exist DUT${dut}_CONNECTB]} {
               <a name="::getSpawnId(14)"><a href="./bootRomLib.tcl.html#::getSpawnId_1">::getSpawnId</a></a> [set DUT${dut}_CONNECTB] spawn_id
           } else {
	            return 0
           }
    }
    
    <span class="comment-line">#---spawn_id should point to target MSM console</span>
    set timeout 200 
    set expect_out(buffer) &#34;&#34;
    expect {
	   &#34;login:&#34; {
                if {$msm == &#34;B&#34;} {
                    <a name="::Login(12)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECTB] -CheckOperational 0 -masterCheck 0               
                } else {
                    <a name="::Login(13)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT] -CheckOperational 0 -masterCheck 0               
                }
                <a name="::EnableDebugMode(8)"><a href="./misc.tcl.html#::EnableDebugMode_2430">::EnableDebugMode</a></a> 
                <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;jerry disable pacman&#34;
                <a name="::DisableDebugMode(2)"><a href="./misc.tcl.html#::DisableDebugMode_2957">::DisableDebugMode</a></a> 
	   }
           &#34;Press enter within 5 second&#34; {
	     send &#34;\r\r\r&#34;
             exp_continue
           }
           &#34;pacman settings&#34; {
                sleep 5;
                puts &#34;7b\r&#34;
		send &#34;7b\r&#34;
		expect &#34;boot_enable_malloc_trace=&#34;
                puts &#34;false\r&#34;
		send &#34;false\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;8a\r&#34;
		send &#34;8a\r&#34;
		expect &#34;pacman_autostart=&#34;
                puts &#34;true\r&#34;
		send &#34;true\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;s\r&#34;
		send &#34;s\r&#34;
		expect &#34;&gt;&#34;
                puts &#34;c\r&#34;
		send &#34;c\r&#34;
                set HeapTrcDisabled &#34;TRUE&#34;
                exp_continue
           }
	   timeout {
	         <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Timeout while enabling HeapTrc&#34;
	   }
     }
     <a name="::result_pre(7)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $expect_out(buffer)
     set timeout $connectionTimeout
     if {$HeapTrcDisabled == &#34;TRUE&#34; } {
	<a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;HeapTrc is disabled on DUT&#34;
	return 1
     } else {
	<a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unable to disabled HeapTrc on DUT&#34;
	return 0
     }
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
