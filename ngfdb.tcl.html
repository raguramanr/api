<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ngfdb.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ngfdb.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ngfdb.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ngfdb.tcl-annot.html">annotations</a> | <a href="ngfdb.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ngfdb_analysis</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: This procedure is the main function that will try to gather</span>
<span class="comment-line">#              all the information on the ngfdbDump table. It make sure all the </span>
<span class="comment-line">#              ipaddresses in the same bucket. In addition, it will build a random ipaddress</span>
<span class="comment-line">#              list to store the replacement ipaddress. So later we can check if it replace the</span>
<span class="comment-line">#              same ipaddress in the ngfdbdump table or not. </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#              sIpList     - list of ip address</span>
<span class="comment-line">#              flag        - To build the array list or not</span>
<span class="comment-line">#              daMulticast - destination multicast ip address</span>
<span class="comment-line">#              fd_res      - file descriptor</span>
<span class="comment-line">#              testNo      - test case number</span>
<span class="comment-line">#              DUT_C       - console ip address</span>
<span class="comment-line">#              DUT_IP      - telnet ip address</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        ngfdb_analysis $ipList &#34;over&#34; $multicastIP $fd_res $testNo $DUT1_CONNECT $DUT1_IP</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::ngfdb_analysis_27">proc <a href="ngfdb.tcl-annot.html#::::ngfdb_analysis">::::ngfdb_analysis</a></a></strong> {sIpList flag daMulticast fd_res testNo DUT_C DUT_IP} {

   global bItem
   global bCount

   <span class="comment-line"># -- open a tmp file</span>
   set fd_in [open &#34;Tmp/tmp_$testNo&#34; &#34;w+&#34;]
   set result &#34;ok&#34;
   set date [clock format [clock seconds] -format &#34;%m-%d-%Y %I.%M.%S%p&#34;]
   <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;*** date=$date&#34;

   <span class="comment-line"># -- put the ngfdbDump table output to a file </span>
   <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT_C
   <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;nofeep&#34; $fd_res
   <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;\n&#34; $fd_res
   <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;ngfdbDump&#34; $fd_res $fd_in
   <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;shswitch&#34; $fd_res
 
   <span class="comment-line"># -- check for ip addresses</span>
   set count 0	;<span class="comment-line"># number of sets of IP addresses to check</span>
   set bCount 0
   foreach ipList $sIpList {
      <span class="comment-line">#result_debug &#34;@@@ ipList=$ipList&#34;</span>
      incr count 1
      seek $fd_in 0
      set rList {}	 ;<span class="comment-line"># random list      </span>
      <span class="comment-line"># -- loop throught the table for the ipaddresses</span>
      while {[gets $fd_in line] != -1} {
         set inList [<a name="::eSplit(1)"><a href="./misc.tcl.html#::eSplit_115">::eSplit</a></a> $line]
         <span class="comment-line">#result_debug &#34;--- inList=$inList&#34;</span>
	 set len [llength $inList]
	 if { $len &gt;= 13 } {
             foreach ipAddr $ipList {
                 <span class="comment-line">#result_debug &#34;--- ipAddr=$ipAddr&#34;</span>
                 if { ([lindex $inList 1] == &#34;IP&#34;) &amp;&amp;
                      ([lindex $inList 2] == &#34;SA&#34;) } {                      
                     <span class="comment-line">#result_debug &#34;!!!!!!!! IP SA&#34;                     </span>
                     if { [lindex $inList 9] == $ipAddr } {
                         <span class="comment-line"># -- store information about each ipaddress in an array</span>
                         set bCount [expr $bCount + 1]
                         <span class="comment-line">#result_debug &#34;--- bCount=$bCount&#34;</span>
	                 set bItem($bCount,saIp)   [lindex $inList 9]
			 set bItem($bCount,fGroup) [lindex $inList 12]
                         set tmp [lindex $inList 15]
			 set bItem($bCount,nh)     [string range $tmp 0 3 ]
			 set bItem($bCount,nhI)    [string range $tmp 5 end ]
                         if {$flag == &#34;over&#34;} { 
                             lappend rList [set bItem($bCount,saIp)] 
                         }  
		      }
		  }   
	      }
	  }
       }
       <span class="comment-line">#result_debug &#34;@@@ bCount = $bCount  &#34;</span>
       <span class="comment-line">#for {set i 1} {$i&lt;=$bCount} {incr i 1} {</span>
       <span class="comment-line">#result_debug &#34;bItem($i,saIp)  =[set bItem($i,saIp)]&#34;</span>
       <span class="comment-line">#result_debug &#34;bItem($i,fGroup)=[set bItem($i,fGroup)]&#34;</span>
       <span class="comment-line">#result_debug &#34;bItem($i,nh)    =[set bItem($i,nh)]&#34;</span>
       <span class="comment-line">#result_debug &#34;bItem($i,nhI)   =[set bItem($i,nhI)]\n&#34;</span>
       <span class="comment-line">#}</span>
       <span class="comment-line"># -- build the list of the replaced ip addresses</span>
       <span class="comment-line"># -- so check_random can use it later</span>
       if {$flag == &#34;over&#34;} { <a name="::buildRandomList(1)"><a href="./ngfdb.tcl.html#::buildRandomList_197">::buildRandomList</a></a> $ipList $rList	}
       <span class="comment-line"># -- make sure they are in the same bucket</span>
       <a name="::ngfdb_check_same_bucket(1)"><a href="./ngfdb.tcl.html#::ngfdb_check_same_bucket_116">::ngfdb_check_same_bucket</a></a>
       <span class="comment-line"># -- make sure the next hop point to two groups and the index is from 0-3</span>
       <a name="::ngfdb_check_next_hop(1)"><a href="./ngfdb.tcl.html#::ngfdb_check_next_hop_284">::ngfdb_check_next_hop</a></a> $fd_in 
       <span class="comment-line"># -- flow group should be ffff</span>
       <a name="::ngfdb_check_flow_group(1)"><a href="./ngfdb.tcl.html#::ngfdb_check_flow_group_373">::ngfdb_check_flow_group</a></a> $daMulticast $fd_in 
   }
   close $fd_in
}  

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ngfdb_check_same_bucket</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Make sure all the field belong to the same buckets.</span>
<span class="comment-line">#              There are two buckets and the index is 0 to 3</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        ngfdb_check_same_bucket</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::ngfdb_check_same_bucket_116">proc <a href="ngfdb.tcl-annot.html#::::ngfdb_check_same_bucket">::::ngfdb_check_same_bucket</a></a></strong> {} {

   <span class="comment-line">#result_debug &#34;--- ngfdb_check_same_bucket&#34;</span>
   global bItem
   global bCount
   set result &#34;ok&#34;
   if { $bCount &lt; 8 } {
      <span class="comment-line"># -- if less than 8, then there is a problem</span>
      set result &#34;error_bCount8&#34;
   } else {
      <span class="comment-line"># -- sort them in two buckets</span>
      set bSaIp $bItem(1,saIp)
      set bNh1 $bItem(1,nh)
      set bucket1 {}
      set bucket2 {}
      for {set i 1} {$i&lt;=$bCount} {incr i 1} {
         set nh  [set bItem($i,nh)]
         set nhI [set bItem($i,nhI)]
         if { $nh == $bNh1 } {
            lappend bucket1 $i
	 } else {
            <span class="comment-line">#result_debug &#34;--- i=$i, bCount=$bCount, bItem($bCount,nh)=[set bItem($bCount,nh)]&#34;</span>
            set bNh2 [set bItem($i,nh)]
            lappend bucket2 $i
	 }
      }
      <span class="comment-line">#result_debug &#34;--- bucket1=$bucket1&#34;</span>
      <span class="comment-line">#result_debug &#34;--- bucket2=$bucket2&#34;</span>

      for {set j 1} {$j&lt;=2} {incr j 1} {
         if { ![info exists bNh$j]	} { 
            <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;bNh$j doesn't exist&#34;
            set result &#34;error_bNh$j&#34;
            continue 
         }
	 set iList$j {}
         foreach i [set bucket$j] {
	    if { [set bItem($i,nh)] != [set bNh$j] } {
	       <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;[set bItem($i,saIp)] is not in the same bucket with others&#34;
	       set result &#34;error_bucket&#34;
	    } else {
	       lappend iList$j [set bItem($i,nhI)]
	    }
	 }
         set tmpList [lsort [set iList$j]]
         <span class="comment-line">#result_debug &#34;--- tmpList=$tmpList&#34;</span>
	 if { $tmpList != {0 1 2 3} } {
	    <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket [set bNh$j] is not all right&#34;
	    set result &#34;error_index&#34;
	 }
      }
   }
   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Bucket checking&#34;
   switch $result {
      &#34;ok&#34; { <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Bucket checking pass&#34; }
	  &#34;error_bCount8&#34; { <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket checking failed. Less than 8 entries&#34; }
	  &#34;error_bNh1&#34; { <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket checking failed. bNh1 not available&#34; }
	  &#34;error_bNh2&#34; { <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket checking failed. bNh2 not available&#34; }
	  &#34;error_bucket&#34; { <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket checking failed. Some entry is not in the same bucket&#34; }
	  &#34;error_index&#34; { <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Bucket checking failed. Bucket indexes not all right&#34; }
   }
   <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   return $result
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: buildRandomList</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Build the random list. So we can compare later</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: </span>
<span class="comment-line">#              ipList : ip address list</span>
<span class="comment-line">#              rList  : ip address list</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        buildRandomList $ipList $rList</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">################################################################## </span>
<strong><a name="::::buildRandomList_197">proc <a href="ngfdb.tcl-annot.html#::::buildRandomList">::::buildRandomList</a></a></strong> {ipList rList} {
   upvar 2 randomList _randomList

   <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- buildRandomList&#34;
   <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** _randomList=$_randomList&#34;
   <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** ipList=$ipList&#34;
   <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** rList=$rList&#34;

   <span class="comment-line"># -- if less than 8 ipaddresses then it fail</span>
   set len [llength $rList]
   if { $len &lt; 8 } {
       <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;buildRandomList with less than 8 IP addresses&#34;
       return error
   }
   <span class="comment-line"># -- find the replacement ipaddress and save it </span>
   foreach item [lsort $ipList] {
       set hit &#34;false&#34;
       foreach r $rList {
	     if { $item == $r } {
	        set hit &#34;true&#34; 
	        break 
	     }
       }
       if { $hit == &#34;false&#34; } { lappend _randomList $item }
   }
   <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** _randomList=$_randomList&#34;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: check_random</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Make sure the ip addresses were replaced randomly</span>
<span class="comment-line">#              that means the ipaddresses in randomlist is not all the same </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: </span>
<span class="comment-line">#              randomList : ip address list</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        check_random $randomList</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::check_random_241">proc <a href="ngfdb.tcl-annot.html#::::check_random">::::check_random</a></a></strong> {randomList} {

   <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- check_random&#34;
   set passCount 3
   set count 0
   set cValue &#34;&#34;
   <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Check ngfdb replacement randomly&#34;
   <span class="comment-line"># -- make sure the ipaddresses in the randonlist variable is not the same</span>
   foreach r [lsort $randomList] {
      if { $cValue == &#34;&#34; } { set cValue $r }
      if { $cValue == $r } {
         incr count 1
         <span class="comment-line"># -- should not have too many ipaddresses the same</span>
         <span class="comment-line"># -- based on variable passcount </span>
         if { $count &gt; $passCount } { 
            <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Check random failed&#34;
            return &#34;error&#34; 
         } 
      } else {
	     set cValue $r
	     set count 0
      }
   }
   <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Check random passed&#34;
   <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   return &#34;ok&#34;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ngfdb_check_next_hop</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Use the ngfdbdump table to map the ip address to the mac address </span>
<span class="comment-line">#              based on index pointer. </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  none</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        ngfdb_check_next_hop $fd_in</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################       </span>
<strong><a name="::::ngfdb_check_next_hop_284">proc <a href="ngfdb.tcl-annot.html#::::ngfdb_check_next_hop">::::ngfdb_check_next_hop</a></a></strong> {fd_in} {

   <span class="comment-line">#result_debug &#34;--- ngfdb_check_next_hop&#34;</span>
   global bItem
   global bCount
   <span class="comment-line">#result_debug &#34;--- bCount=$bCount&#34;</span>
   set result &#34;ok&#34;
   for {set i 1} {$i&lt;=$bCount} {incr i 1} {
      set found &#34;false&#34;
      <span class="comment-line"># -- get next hop and index</span>
      set nh [set bItem($i,nh)]
      set nhI [set bItem($i,nhI)]
      <span class="comment-line">#result_debug &#34;--- nh=$nh&#34;</span>
      <span class="comment-line">#result_debug &#34;--- nhI=$nhI&#34;</span>
      <span class="comment-line"># -- get the ipaddress and convert them to hex number</span>
      set ip [set bItem($i,saIp)]
      set ipFList [split $ip .]
      set ipF1 [lindex $ipFList 0]
      set ipF2 [lindex $ipFList 1]
      set ipF3 [lindex $ipFList 2]
      set ipF4 [lindex $ipFList 3]
      <span class="comment-line">#result_debug &#34;--- ip=$ip&#34;</span>
      <span class="comment-line">#result_debug &#34;--- ipF1=$ipF1&#34;  </span>
      <span class="comment-line">#result_debug &#34;--- ipF2=$ipF2&#34;  </span>
      <span class="comment-line">#result_debug &#34;--- ipF3=$ipF3&#34;  </span>
      <span class="comment-line">#result_debug &#34;--- ipF4=$ipF4\n&#34;</span>
      seek $fd_in 0
      <span class="comment-line"># -- go throught the table </span>
      while {[gets $fd_in line] != -1} {
         set inList [<a name="::eSplit(2)"><a href="./misc.tcl.html#::eSplit_115">::eSplit</a></a> $line]
         set len [llength $inList]
	 if { $len &gt;= 9 } {
	    if { ([lindex $inList 1] == &#34;MAC&#34;) &amp;&amp;
		 ([lindex $inList 2] == &#34;NH&#34;) } {
	       set tmp [lindex $inList 0]
	       set aNh    [string range $tmp 0 4 ]
	       set aNhI   [string range $tmp 6 end ]     
               <span class="comment-line">#result_debug &#34;--- aNh=$aNh&#34;</span>
               <span class="comment-line">#result_debug &#34;--- aNh=$aNhI&#34;</span>
               <span class="comment-line"># -- match the index</span>
	       if { ([string range $aNh 1 end ]== $nh) &amp;&amp; ($aNhI == $nhI) } {
                  set found &#34;true&#34;
                  set mac [lindex $inList 9]
                  <span class="comment-line">#result_debug &#34;--- mac=$mac  &#34;</span>
	          set macFList [split $mac :]
	          <span class="comment-line"># -- convert to hex</span>
                  set xxx [expr &#34;0x[lindex $macFList 2]&#34;]
                  <span class="comment-line">#result_debug &#34;--- xxx=$xxx&#34;</span>
                  <span class="comment-line">#result_debug &#34;--- ipF1=$ipF1&#34;</span>
                  if { ([expr &#34;0x[lindex $macFList 2]&#34;] == $ipF1) &amp;&amp;
		       ([expr &#34;0x[lindex $macFList 3]&#34;] == $ipF2) &amp;&amp;
		       ([expr &#34;0x[lindex $macFList 4]&#34;] == $ipF3) &amp;&amp;
		       ([expr &#34;0x[lindex $macFList 5]&#34;] == $ipF4) } {
			  set found &#34;true&#34;
		          break
	          }
               }
            }
	 }
      }
      if { $found == &#34;false&#34; } { set result &#34;error&#34; }
      <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Next hop field check for $ip&#34;
      switch $found {
         &#34;true&#34; { <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Next hop checking for $ip pass&#34; }
	 &#34;false&#34; { <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Next hop checking for $ip failed&#34; }
      }
      <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }

   return $result
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: ngfdb_check_flow_group</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Make sure the flow group number is the same with the</span>
<span class="comment-line">#              multicast flow group number</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  </span>
<span class="comment-line">#              daMulticast - destination ip</span>
<span class="comment-line">#              fd_in       - file descriptor</span>
<span class="comment-line">#                </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#        ngfdb_check_flow_group $destinationip $fd_in</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################  </span>
<strong><a name="::::ngfdb_check_flow_group_373">proc <a href="ngfdb.tcl-annot.html#::::ngfdb_check_flow_group">::::ngfdb_check_flow_group</a></a></strong> {daMulticast fd_in} {

   <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- ngfdb_check_flow_group&#34;
   global bItem
   global bCount

   set result &#34;ok&#34;
   for {set i 1} {$i&lt;=$bCount} {incr i 1} {
      <span class="comment-line"># -- get the group number</span>
      set ip     [set bItem($i,saIp)]
      set fGroup [set bItem($i,fGroup)]
      <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- fGroup=$fGroup&#34;
      set found &#34;false&#34;
      seek $fd_in 0
      <span class="comment-line"># -- find the multicast line</span>
      while {[gets $fd_in line] != -1} {
         set inList [<a name="::eSplit(3)"><a href="./misc.tcl.html#::eSplit_115">::eSplit</a></a> $line]
             set len [llength $inList]
	     if { $len &gt;= 11 } {
			if { ([lindex $inList 1] == &#34;IPMC&#34;) &amp;&amp;
			     ([lindex $inList 2] == &#34;DA&#34;) } {
			   if { [lindex $inList 9]	== $daMulticast } {
			      <span class="comment-line"># -- found, check the group number</span>
			      if { [lindex $inList 14]	== $fGroup } {
                                  <span class="comment-line">#result_debug &#34;--- flow_group match&#34;</span>
                                  set found &#34;true&#34;
				  break
			      }
			   }
			}
		 }
	  }
	  if { $found == &#34;false&#34; } { set result &#34;error&#34; }
          <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Flow group field check for $ip&#34;
          switch $found {
             &#34;true&#34; { <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Flow group checking for $ip pass&#34; }
	     &#34;false&#34; { <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Flow group checking for $ip failed&#34; }
          }
          <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }
   return $result
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
