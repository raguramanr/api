<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpCheckBandwidthMatrices10G.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpCheckBandwidthMatrices10G.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpCheckBandwidthMatrices10G.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpCheckBandwidthMatrices10G.tcl-annot.html">annotations</a> | <a href="snmpCheckBandwidthMatrices10G.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpCheckBandwidthMatrix10Gig   </span>
<span class="comment-line"># Description:  Verify the effects of QOS based on qos profiles matrix</span>
<span class="comment-line">#		in QOS test plan or user-specified ones</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	snmpCheckBandwidthMatrix10Gig -checkMatrix 8 -filePt $fd_res </span>
<span class="comment-line">#                                -testFileName $testNo     </span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>

<strong><a name="::::snmpCheckBandwidthMatrix10Gig_16">proc <a href="snmpCheckBandwidthMatrices10G.tcl-annot.html#::::snmpCheckBandwidthMatrix10Gig">::::snmpCheckBandwidthMatrix10Gig</a></a></strong> {args} {
   <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckBandwidthMatrix10Gig $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     numIxiaCd &#34;3&#34;
     <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a> &#34;ip&#34;
     srcMacAddrTxList &#34;srcMac&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     QPList &#34;1 2 3 4&#34;
     tagList &#34;none none none none&#34;
     checkQosList &#34;&#34;
     ratioExpectList &#34;100.00 100.00 100.00 100.00&#34;
     ratioThreshold &#34;13&#34;
     ratioAggregateThreshold &#34;14&#34;
     checkMatrix &#34;1-7&#34;
     qosType &#34;802.1p&#34;
     filePt &#34;NULL&#34;
     testFileName &#34;Temp&#34;
   }

global startCardNum
set pPattern &#34;5678&#34;
if {$protocol == &#34;multicast&#34;} {
   set joinGroup 22
   set portList {1 2 3 4}
   foreach portId $portList {
      set portIdTx [expr $portId + 8]
      set multicastIP 22[expr $portId + 4].1.2.3
      set destMacMulticast &#34;01 00 5E 01 02 03&#34; 
      set clientIP1 192.20.$portId.2
      <span class="comment-line"># ---- send an join multicast group igmp packet</span>
      <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$clientIP1 joins multicast group $multicastIP&#34;
      set rxPort [<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx chasis card port]
      set frameSent [<a name="::ixiaConf_2Ports_ip(1)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $chasis -txCard $card  \
                       -txPort $port -rxChas $chasis -rxCard $card  \
                       -rxPort $rxPort -ipProtocol &#34;igmp&#34; -type $joinGroup \
                       -ttl 1 -startCardNum $startCardNum  \
                       -dMacAddr $destMacMulticast -sIpAddr  $clientIP1 \
                       -dIpAddr $multicastIP -groupAddr $multicastIP ]
   }

   set ipProtocol &#34;udp&#34;
   set destMacAddrTxList {01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03}
   <span class="comment-line"># ---- send join</span>
} else {
   set ipProtocol $protocol
}
set QPa &#34;QP[lindex $QPList 0]&#34;
set QPb &#34;QP[lindex $QPList 1]&#34;
set QPc &#34;QP[lindex $QPList 2]&#34;
set QPd &#34;QP[lindex $QPList 3]&#34;
set Qa [expr [lindex $QPList 0] - 1]
set Qb [expr [lindex $QPList 1] - 1]
set Qc [expr [lindex $QPList 2] - 1]
set Qd [expr [lindex $QPList 3] - 1]

if {$checkMatrix == 8} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 8 Bandwidth criteria using $QPa, \
                $QPb, $QPc, $QPd&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;        
   <span class="comment-line"># ---- Test Matrix 8</span>

   <a name="::snmpConfigQosProfile(1)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPa -minbw 10 \
                         -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile $QPa for Matrix 8&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(2)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPb -minbw 10 \
                         -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                         profile $QPb for Matrix 8&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(3)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPc -minbw 10 \
                         -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                         profile $QPc for Matrix 8&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(4)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPd -minbw 10 \
                         -maxbw 100 -priority 7 -comment &#34;configuring QOS \
                         profile $QPd for Matrix 8&#34; -fd $filePt

} elseif {$checkMatrix == &#34;1-7&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 1 Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   
   global DUT1_CONNECT
   <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt
   <a name="::snmpConfigQosProfile(5)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPa -minbw 0 \
                         -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile $QPa for Matrix 1&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(6)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPb -minbw 0 \
                         -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                         profile $QPb for Matrix 1&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(7)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPc -minbw 0 \
                         -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                         profile $QPc for Matrix 1&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(8)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPd -minbw 0 \
                         -maxbw 100 -priority 7 -comment &#34;configuring QOS \
                         profile $QPd for Matrix 1&#34; -fd $filePt

}

   set portIdTxList {1 2 3 4}
   set priList &#34;0 1 2 3&#34;
   set portIdRxList {9 10 11 12}
   foreach portIdTx $portIdTxList {
      if {$portIdTx==1} {
         set percent 9.6
      } else {
         set percent 100
      }
      <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         global DUTs_info
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      
      if {$srcMacAddrTxList != &#34;srcMac&#34;} {
      <span class="comment-line"># ---- send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(2)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard \
                       -txPort $txPort -rxChas $rxChas -rxCard $rxCard \
                       -rxPort $rxPort -startCardNum $startCardNum \
                       -dataPattern $pPattern \
                       -sMacAddr [lindex $srcMacAddrTxList [expr $portIdTx-1]] \
                       -streamType &#34;contPacket&#34; -percentage $percent \
                       -TOS $TOS -frameSizeType &#34;sizeRandom&#34; \
                       -ipProtocol $ipProtocol -pDstPort $dPort \
                       -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx  -sIpAddr $sIpAddr \
                       -dIpAddr $dIpAddr -wTag $wTag -tagNo $tag \
                       -userPriority $priority ]
      } else {
      <span class="comment-line"># ---- send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(3)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard \
                       -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort \
                       -startCardNum $startCardNum -dataPattern $pPattern \
                       -streamType &#34;contPacket&#34; -percentage $percent \
                       -TOS $TOS -frameSizeType &#34;sizeRandom&#34; \
                       -ipProtocol $ipProtocol -pDstPort $dPort \
                       -pSrcPort $sPort -dMacAddr $destMacAddrTx  \
                       -sIpAddr $sIpAddr  -dIpAddr $dIpAddr \
                       -wTag $wTag -tagNo $tag -userPriority $priority ]
      }
      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 7
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(3)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      }
      if {$checkMatrix == 8} {
      
      } elseif {$checkMatrix == &#34;1-7&#34;} {
         set ratioFound [format %.2f [expr $rateArray($portIdRx,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect 100
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port \
                          $portIdRx. Got $ratioFound EXPECT $ratioExpect \
                          +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port \
                       $portIdRx. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $ratioThreshold&#34;
         }
      }
   }
   if {$checkMatrix == 8} { 
      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(4)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(5)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(6)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
            <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx8 Rate on port $portId Sent: $rateSent Recv: \
                          $rateRecv&#34;
      } 
      set ratioExpectArray(9) 0
      set ratioExpectArray(10) 0
      set ratioExpectArray(11) 100
      set ratioExpectArray(12) 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 8 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 8 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $ratioThreshold&#34;
         }
      } 
      <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

      <span class="comment-line"># ---- check Q</span>
      <span class="comment-line"># ---- lappend checkQosList &#34;0 1000 minPacket&#34; </span>
      <span class="comment-line"># ---- not testing this, unpredictable for now</span>

      lappend checkQosList &#34;$Qb 10 maxPacket&#34;
      lappend checkQosList &#34;$Qc 1000 minPacket&#34;
      lappend checkQosList &#34;$Qd 10 maxPacket&#34;
      <a name="::CheckQoSMonitor(1)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(1)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList
   } elseif {$checkMatrix == &#34;1-7&#34;} {
      set ratioExpectArray(9) 100
      set ratioExpectArray(10) 100
      set ratioExpectArray(11) 100
      set ratioExpectArray(12) 100
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $ratioThreshold&#34;
         }
      }   
      <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      <span class="comment-line"># ---- Matrix1 has qosmonitor problems when leaking to Q2.</span>
      lappend checkQosList &#34;$Qa 1000 minPacket&#34;
      lappend checkQosList &#34;$Qb 1000 minPacket&#34;
      lappend checkQosList &#34;$Qc 1000 minPacket&#34;
      lappend checkQosList &#34;$Qd 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(2)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(2)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <a name="::snmpConfigQosProfile(9)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPa -minbw 0 \
                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                            profile $QPa for Matrix 1&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(10)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPb -minbw 0 \
                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \
                            profile $QPb for Matrix 1&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(11)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPc -minbw 0 \
                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                            profile $QPc for Matrix 1&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(12)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name $QPd -minbw 0 \
                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \
                            profile $QPd for Matrix 1&#34; -fd $filePt

      set priList &#34;0 1 2 3&#34;
      if {$qosType==&#34;diffserv&#34;} {
         <span class="comment-line"># ---- set TOSList &#34;0x00 0x40 0x80 0xc0&#34;</span>
         set TOSList &#34;0x00 0x20 0x40 0x60&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;configure diffserv examination code-point 8 qosprofile QP4 ports [<a name="::MapDUTPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;configure diffserv examination code-point 25 qosprofile QP2 ports [<a name="::MapDUTPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x40 0x20&#34;
      }
      <a name="::configMatrix(1)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 2 Bandwidth criteria using QP1, QP2, QP3, QP4&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   <span class="comment-line"># ---- Test Matrix 2</span>

   <a name="::snmpConfigQosProfile(13)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp1 for Matrix 2&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(14)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp2&#34; -minbw 10 \
                        -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                         profile qp2 for Matrix 2&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(15)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp3&#34; -minbw 10 \
                        -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                         profile qp3 for Matrix 2&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(16)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 10 \
                        -maxbw 100 -priority 7 -comment &#34;configuring QOS \
                         profile qp4 for Matrix 2&#34; -fd $filePt

      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(7)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(8)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(9)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx2 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 100.00
      set ratioExpectArray(11) 100.00
      set ratioExpectArray(12) 100.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]

         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold} {
            <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 400
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;

      <a name="::CheckQoSMonitor(3)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(3)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList

      <span class="comment-line"># ---- restore to default</span>

      <a name="::snmpConfigQosProfile(17)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name qp1 -minbw 0 \
                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                            profile qp1 for default in Matrix 2&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(18)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name qp2 -minbw 0 \
                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \
                            profile qp2 for default in Matrix 2&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(19)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name qp3 -minbw 0 \
                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                            profile qp3 default in for Matrix 2&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(20)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name qp4 -minbw 0 \
                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \
                            profile qp4 default in for Matrix 2&#34; -fd $filePt


      set priList &#34;0 2 4 6&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x40 0x80 0xc0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;unconfigure diffserv examination ports [<a name="::MapDUTPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 9 qosprofile \
                              QP7 ports [<a name="::MapDUTPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 25 qosprofile \
                              QP3 ports [<a name="::MapDUTPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x80 0x24&#34;
      }
      <a name="::configMatrix(2)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList \
                   -qosType $qosType -sIpAddrList $sIpAddrList \
                   -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList \
                   -TOSList $TOSList -tagList $tagList \
                   -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3 Bandwidth criteria using QP1, QP3, QP5, QP7&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;

   <span class="comment-line"># ---- Test Matrix 3</span>
   <a name="::snmpConfigQosProfile(21)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp1 for Matrix 3&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(22)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp3&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp3 for Matrix 3&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(23)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp5&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp5 for Matrix 3&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(24)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp7&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp7 for Matrix 3&#34; -fd $filePt

      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(10)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(11)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(12)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 100.00
      set ratioExpectArray(11) 100.00
      set ratioExpectArray(12) 100.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 400
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(4)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(4)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line"># ---- restore to default</span>

      <a name="::snmpConfigQosProfile(25)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 0 \
                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                            profile qp1 for default after Matrix 3&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(26)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp3&#34; -minbw 0 \
                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                            profile qp3 for default after Matrix 3&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(27)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp5&#34; -minbw 0 \
                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                            profile qp5 for default after Matrix 3&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(28)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp7&#34; -minbw 0 \
                           -maxbw 100 -priority 7 -comment &#34;configuring QOS \
                            profile qp7 for default after Matrix 3&#34; -fd $filePt

      set priList &#34;1 3 5 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x20 0x60 0xa0 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;unconfigure diffserv examination ports [<a name="::MapDUTPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 9 qosprofile \
                    QP4 ports [<a name="::MapDUTPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 25 qosprofile \
                    QP8 ports [<a name="::MapDUTPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x20 0x24 0xa0 0x64&#34;
      }
      <a name="::configMatrix(3)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList \
                   -qosType $qosType -sIpAddrList $sIpAddrList \
                   -dIpAddrList $dIpAddrList -sPortList $sPortList \
                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \
                   -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol
      
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3b Bandwidth criteria using QP2, QP4, QP6, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;      
   <span class="comment-line">#Test Matrix 3b</span>
   <a name="::snmpConfigQosProfile(29)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp2&#34; -minbw 10 \
                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \
                         profile qp4 for Matrix 3b&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(30)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 10 \
                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \
                         profile qp5 for Matrix 3b&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(31)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp6&#34; -minbw 10 \
                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \
                         profile qp6 for Matrix 3b&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(32)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp8&#34; -minbw 10 \
                        -maxbw 70 -priority 1 -comment &#34;configuring QOS \
                         profile qp7 for Matrix 3b&#34; -fd $filePt

      
      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(13)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(14)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(15)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3b Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      }    
      set sum 0
      set ratioExpectArray(9) 50.00
      set ratioExpectArray(10) 50.00
      set ratioExpectArray(11) 50.00
      set ratioExpectArray(12) 70.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 232
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      } 
      <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;5 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(5)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(5)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line"># ---- restore to default</span>

      <a name="::snmpConfigQosProfile(33)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp2&#34; -minbw 0 \
                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \
                            profile qp2 for default after Matrix 3b&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(34)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 0 \
                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \
                            profile qp4 for default after Matrix 3b&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(35)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp6&#34; -minbw 0 \
                           -maxbw 100 -priority 6 -comment &#34;configuring QOS \
                            profile qp6 for default after Matrix 3b&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(36)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp8&#34; -minbw 0 \
                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \
                            profile qp8 for default after Matrix 3b&#34; -fd $filePt


   <span class="comment-line">#  ---- Matrix 4 deleted</span>
      set priList &#34;0 3 4 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x60 0x80 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;unconfigure diffserv examination ports [<a name="::MapDUTPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 8 qosprofile \
                    QP4 ports [<a name="::MapDUTPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure diffserv examination code-point 25 qosprofile \
                    QP8 ports [<a name="::MapDUTPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x20 0x80 0x64&#34;
      }
      <a name="::configMatrix(4)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList \
                   -qosType $qosType -sIpAddrList $sIpAddrList \
                   -dIpAddrList $dIpAddrList -sPortList $sPortList \
                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \
                   -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 5 Bandwidth criteria using QP1, QP4, QP5, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;          
   <span class="comment-line"># ---- Test Matrix 5</span>
   <a name="::snmpConfigQosProfile(37)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 10 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp1 for Matrix 5&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(38)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 10 \
                        -maxbw 50 -priority 3 -comment &#34;configuring QOS \
                         profile qp4 for Matrix 5&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(39)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp5&#34; -minbw 10 \
                        -maxbw 40 -priority 5 -comment &#34;configuring QOS \
                         profile qp5 for Matrix 5&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(40)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp8&#34; -minbw 10 \
                        -maxbw 30 -priority 7 -comment &#34;configuring QOS \
                         profile qp8 for Matrix 5&#34; -fd $filePt

      
      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(16)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(17)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(18)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx5 Rate on port $portId Sent: $rateSent Recv: \
                      $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 100.00
      set ratioExpectArray(10) 50.00
      set ratioExpectArray(11) 42.00
      set ratioExpectArray(12) 33.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed rate ratio threshold test on port \
                         $portId. Got $ratioFound EXPECT $ratioExpect \
                         +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate ratio threshold test on port \
                      $portId. Got $ratioFound AS EXPECT $ratioExpect \
                      +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 232
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(6)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(6)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList      

      <span class="comment-line"># ---- restore to default</span>
      <a name="::snmpConfigQosProfile(41)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 0 \
                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                            profile qp1 for default after Matrix 5&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(42)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 0 \
                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \
                            profile qp4 for default after Matrix 5&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(43)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp5&#34; -minbw 0 \
                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                            profile qp5 default after for Matrix 5&#34; -fd $filePt

      <a name="::snmpConfigQosProfile(44)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp8&#34; -minbw 0 \
                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \
                            profile qp8 default after for Matrix 5&#34; -fd $filePt

} elseif {$checkMatrix == &#34;user&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking User Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(7)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
      
      <span class="comment-line"># ---- wait for things to settle down</span>
      sleep 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(19)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(20)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(21)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;MtrxUser Rate on port $portId Sent: $rateSent Recv: \
                      $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) [lindex $ratioExpectList 0]
      set ratioExpectArray(10) [lindex $ratioExpectList 1]
      set ratioExpectArray(11) [lindex $ratioExpectList 2]
      set ratioExpectArray(12) [lindex $ratioExpectList 3]
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
         <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed rate ratio threshold test on port \
                      $portId. Got $ratioFound EXPECT $ratioExpect \
                      +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line">#total rate</span>
      set ratioExpect [expr $ratioExpectArray(9)+$ratioExpectArray(10)+$ratioExpectArray(11)+$ratioExpectArray(12)]
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
     <span class="comment-line"># ---- check Q</span>
      if {![regexp -nocase &#34;3.2|4.2&#34; $testFileName]} {
         if {$testFileName==&#34;10.1.3&#34; &amp;&amp; \
               ![regexp -nocase &#34;G8X|G8T|10gig&#34; $DUTs_info(DUT1,bladeType)]} {
            <a name="::CheckQoSMonitor(7)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(7)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt \
                            $testFileName 
            unset checkQosList
         } else {
            <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(8)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
         }
      } else {
         <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(9)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
      }

}
   <span class="comment-line"># ---- stop Tx</span>
   foreach portIdTx $portIdTxList {
         <a name="::MapIxiaPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
         <a name="::ixStopPortTransmit(1)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }

   <span class="comment-line"># ---- restore to default</span>
   <a name="::snmpConfigQosProfile(45)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp1&#34; -minbw 0 \
                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \
                         profile qp1 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(46)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp2&#34; -minbw 0 \
                        -maxbw 100 -priority 2 -comment &#34;configuring QOS \
                         profile qp2 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(47)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp3&#34; -minbw 0 \
                        -maxbw 100 -priority 3 -comment &#34;configuring QOS \
                         profile qp3 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(48)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp4&#34; -minbw 0 \
                        -maxbw 100 -priority 4 -comment &#34;configuring QOS \
                         profile qp4 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(49)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp5&#34; -minbw 0 \
                        -maxbw 100 -priority 5 -comment &#34;configuring QOS \
                         profile qp5 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(50)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp6&#34; -minbw 0 \
                        -maxbw 100 -priority 6 -comment &#34;configuring QOS \
                         profile qp6 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(51)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp7&#34; -minbw 0 \
                        -maxbw 100 -priority 7 -comment &#34;configuring QOS \
                         profile qp7 for default&#34; -fd $filePt

   <a name="::snmpConfigQosProfile(52)"><a href="./snmpQOSLib.tcl.html#::snmpConfigQosProfile_131">::snmpConfigQosProfile</a></a> -session $session1 -name &#34;qp8&#34; -minbw 0 \
                        -maxbw 100 -priority 8 -comment &#34;configuring QOS \
                         profile qp8 for default&#34; -fd $filePt

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestSetupSingleVlan10Gig   </span>
<span class="comment-line"># Description:  Set up one vlan only on both DUTs per single vlan QOS tests</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line"># 	snmpQosTestSetupSingleVlan10Gig -wTag &#34;true&#34; -filePt $fd_res     </span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpQosTestSetupSingleVlan10Gig_890">proc <a href="snmpCheckBandwidthMatrices10G.tcl-annot.html#::::snmpQosTestSetupSingleVlan10Gig">::::snmpQosTestSetupSingleVlan10Gig</a></a></strong> {args} {
   <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestSetupSingleVlan10Gig $args {
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     sNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     dNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     vlanDUT1IpAddrList &#34;192.10.1.1&#34;
     vlanDUT2IpAddrList &#34;192.10.1.100&#34;
     vlanDUT1MaskList &#34;255.255.255.0&#34;
     vlanDUT2MaskList &#34;255.255.255.0&#34;
     wTag &#34;false&#34;
	 tagNo &#34;2&#34;
     filePt &#34;NULL&#34;
     }
global DUT1_CONNECT
<a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt

   set vlan_id(1) [<a name="::snmpCreateVlan(1)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session1 -name &#34;vlan1&#34; -fd $filePt]
   lappend retList $vlan_id(1)

   set addr [lindex $vlanDUT1IpAddrList 0]
   set mask [lindex $vlanDUT1MaskList 0]
   <a name="::snmpAssignIPAddrToVlan(1)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
      -addr $addr -mask $mask -fd $filePt

   if { $wTag == &#34;true&#34; } { 
      set tag_id(1) [<a name="::snmpCreateTag(1)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session1 -tagid $tagNo -fd $filePt]
      lappend retList $tag_id(1)

      <a name="::snmpAddPortToVlan(1)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::MapDUTPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpAddPortToVlan(2)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::::GetATrunkPort(10)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -tagid $tag_id(1) -fd $filePt
   } else {
      <a name="::snmpAddPortToVlan(3)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::MapDUTPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
      <a name="::snmpAddPortToVlan(4)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::::GetATrunkPort(11)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
   }

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $sIpAddrList $i]
      set network [lindex $sNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(1)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session1 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:$i0:00:00:00:00&#34; -fd $filePt
   }
   
   global DUT2_CONNECT
   <a name="::Login(3)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT $filePt

   set vlan_id(2) [<a name="::snmpCreateVlan(2)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session2 -name &#34;vlan1&#34; -fd $filePt]
   lappend retList $vlan_id(2)

   if { $wTag == &#34;true&#34; } { 
      set tag_id(2) [<a name="::snmpCreateTag(2)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session2 -tagid $tagNo -fd $filePt]
      lappend retList $tag_id(2)

      <a name="::snmpAddPortToVlan(5)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::MapDUTPortId(15)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpAddPortToVlan(6)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::::GetATrunkPort(12)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -tagid $tag_id(2) -fd $filePt
   } else {
      <a name="::snmpAddPortToVlan(7)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::MapDUTPortId(16)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -fd $filePt
      <a name="::snmpAddPortToVlan(8)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::::GetATrunkPort(13)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
   }

   <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;nofeep&#34;
   foreach po [<a name="::::GetATrunkPort(14)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1] {
      set c 0
      set p 0
      scan $po %d:%d c p
      if {$p!=0} {
         <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;hurricanelb [expr $c-1],3&#34;
      }
   }
   <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;shswitch&#34;
   
   set addr [lindex $vlanDUT2IpAddrList 0]
   set mask [lindex $vlanDUT2MaskList 0]

   <a name="::snmpAssignIPAddrToVlan(2)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                          -addr $addr -mask $mask -fd $filePt

   <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:00:10:00:00:00 vlan1 ports [<a name="::MapDUTPortId(17)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9 2]&#34;
   <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:00:20:00:00:00 vlan1 ports [<a name="::MapDUTPortId(18)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 10 2]&#34;
   <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:00:30:00:00:00 vlan1 ports [<a name="::MapDUTPortId(19)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 11 2]&#34;
   <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:00:40:00:00:00 vlan1 ports [<a name="::MapDUTPortId(20)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 12 2]&#34;

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $dIpAddrList $i]
      set network [lindex $dNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(2)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session2 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:$i0:00:00:00:00&#34; -fd $filePt
   }

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestCleanupSingleVlan10Gig   </span>
<span class="comment-line"># Description: Clean up the QOS config set up by snmpQosTestSetupSingleVlan  </span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      	snmpQosTestCleanupSingleVlan10Gig -filePt $fd_res</span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpQosTestCleanupSingleVlan10Gig_1001">proc <a href="snmpCheckBandwidthMatrices10G.tcl-annot.html#::::snmpQosTestCleanupSingleVlan10Gig">::::snmpQosTestCleanupSingleVlan10Gig</a></a></strong> {args} {
   <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestCleanupSingleVlan10Gig $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     retList  &#34;&#34;
     wTag &#34;&#34;
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     filePt &#34;NULL&#34;
     }
global DUT1_CONNECT
<a name="::Login(4)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT $filePt

   if { $wTag == &#34;true&#34; } {
      foreach key $retList {
        switch $index {
          &#34;1&#34; {
             set vlan_id(1) $key
           }
          &#34;2&#34; {
             set tag_id(1) $key
           }
          &#34;3&#34; {
             set vlan_id(2) $key
           }
          &#34;4&#34; {
             set tag_id(2) $key
           }
          
        }
        incr index
      }

   } else {
      foreach key $retList {
        switch $index {
          &#34;1&#34; {
             set vlan_id(1) $key
           }
          &#34;2&#34; {
             set vlan_id(2) $key
           }
        }
        incr index
      }
   }

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $sIpAddrList $i]
      set network [lindex $sNetwork $i]
      <a name="::snmpDeleteIpArpEntry(1)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session1 -network $network \
                           -ipaddr $ipaddr -fd $filePt
   }

   if {$wTag == &#34;true&#34;} {
      <a name="::snmpDelIPAddrFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id(1)
      <a name="::snmpDelPortFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::MapDUTPortId(21)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDelPortFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::::GetATrunkPort(15)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDeleteTag(1)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session1 -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDeleteVlan(1)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id(1)
   } else {
      <a name="::snmpDelIPAddrFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id(1)
      <a name="::snmpDelPortFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::MapDUTPortId(22)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
      <a name="::snmpDelPortFromVlan(4)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::::GetATrunkPort(16)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
      <a name="::snmpDeleteVlan(2)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id(1)
   }

   global DUT2_CONNECT
   <a name="::Login(5)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT $filePt

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $dIpAddrList $i]
      set network [lindex $dNetwork $i]
      <a name="::snmpDeleteIpArpEntry(2)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session2 -network $network \
                           -ipaddr $ipaddr -fd $filePt
   }

   <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F1:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F2:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F3:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(25)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F4:00:00:01 vlan vlan1&#34;
   
   if {$wTag == &#34;true&#34;} {
      <a name="::snmpDelIPAddrFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id(2)
      <a name="::snmpDelPortFromVlan(5)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::MapDUTPortId(23)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDelPortFromVlan(6)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::::GetATrunkPort(17)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDeleteTag(2)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session2 -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDeleteVlan(3)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id(2)
   } else {
      <a name="::snmpDelIPAddrFromVlan(4)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id(2)
      <a name="::snmpDelPortFromVlan(7)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::MapDUTPortId(24)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -fd $filePt
      <a name="::snmpDelPortFromVlan(8)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::::GetATrunkPort(18)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
      <a name="::snmpDeleteVlan(4)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id(2)
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpConfigMatrix10Gig   </span>
<span class="comment-line"># Description:  Send IP stream from a list of ports after acess-list or port/vlan/fdb</span>
<span class="comment-line">#		are configured per qosType</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#  	snmpConfigMatrix10Gig -priList $priList -portIdTxList $portIdTxList -qosType $qosType \</span>
<span class="comment-line">#		     -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                    -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#		     -destMacAddrTxList $destMacAddrTxList -ipProtocol $ipProtocol    </span>
<span class="comment-line"># Category: SetupSwitch, SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpConfigMatrix10Gig_1119">proc <a href="snmpCheckBandwidthMatrices10G.tcl-annot.html#::::snmpConfigMatrix10Gig">::::snmpConfigMatrix10Gig</a></a></strong> {args} {
   <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpConfigMatrix10Gig $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     priList &#34;0 1 2 3&#34;
     portIdTxList &#34;1 2 3 4&#34;
     qosType &#34;802.1p&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     tagList &#34;none none none none&#34;
     ipProtocol &#34;ip&#34;
   }
   global startCardNum
   global DUTs_info
   global DUTs_Slot_info

   set pPattern &#34;5678&#34;
   
   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      <a name="::ixStopPortTransmit(2)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }

   set QPa &#34;QP[expr [lindex $priList 0]+1]&#34;
   set QPb &#34;QP[expr [lindex $priList 1]+1]&#34;
   set QPc &#34;QP[expr [lindex $priList 2]+1]&#34;
   set QPd &#34;QP[expr [lindex $priList 3]+1]&#34;

   switch $qosType {
      &#34;port&#34; {
         <a name="::SendACmd(26)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(25)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1] qosprofile $QPa&#34;
         <a name="::SendACmd(27)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(26)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 2] qosprofile $QPb&#34;
         <a name="::SendACmd(28)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(27)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 3] qosprofile $QPc&#34;
         <a name="::SendACmd(29)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(28)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 4] qosprofile $QPd&#34;
      }
      &#34;mac&#34; {
         <a name="::SendACmd(30)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:10:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(31)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:20:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(32)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:30:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(33)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:00:40:00:00:00 vlan vlan1&#34;
         <a name="::SendACmd(34)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:10:00:00:00 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(19)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPa&#34;
         <a name="::SendACmd(35)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:20:00:00:00 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(20)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPb&#34;
         <a name="::SendACmd(36)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:30:00:00:00 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(21)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPc&#34;
         <a name="::SendACmd(37)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:00:40:00:00:00 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(22)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPd&#34;
      }
      &#34;vlan&#34; {
         set QPT(1) $QPa
         set QPT(2) $QPb
         set QPT(3) $QPc
         set QPT(4) $QPd

         for {set i 1} {$i &lt;= 4} {incr i 1} {
            set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session1 &#34;vlan$i&#34;]
            <a name="::snmpConfigVlanQos(1)"><a href="./snmpQOSLib.tcl.html#::snmpConfigVlanQos_428">::snmpConfigVlanQos</a></a> -session $session1 -name $QPT($i) \
                              -vlanindex $vlan_id($i) -comment &#34;configuring \
                               QOS profile $QPT($i) for vlan$i&#34;
         }

      }
      &#34;10.1.1&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(1)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(2)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(3)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(4)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(1)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                             -destaddrst 0.0.0.0 -destaddrend 255.255.255.255 \
                             -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                             -profindex $profIndex
         }

      }
      &#34;10.1.2&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(2)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(2)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(5)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(6)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(7)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(8)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(2)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                             -destaddrst 192.20.$i.2 -destaddrend 192.20.$i.2 \
                             -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                             -profindex $profIndex
         }

      }
      &#34;10.1.4&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(3)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(3)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(9)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(10)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(11)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(12)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(3)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.$i.0 -destaddrend 192.20.$i.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.1.5&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(4)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(4)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(13)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set dPort 56
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(14)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set dPort 67
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(15)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(16)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set dPort 84
            }
            <a name="::snmpCreateQosAcl(4)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -protocol 3 -destl4st $dPort -srcaddrst 192.10.1.0 \
                            -srcaddrend 192.10.1.255 -profindex $profIndex
         }

      }
      &#34;10.1.6&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(5)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(5)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(17)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set sPort 51
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(18)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set sPort 52
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(19)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set sPort 53
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(20)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set sPort 54
            }
            <a name="::snmpCreateQosAcl(5)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 3 -srcl4st $sPort -profindex $profIndex
         }
      }
      &#34;10.1.7&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(6)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(6)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(21)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set dPort 56
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(22)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set dPort 67
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(23)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(24)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set dPort 84
            }
            <a name="::snmpCreateQosAcl(6)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -protocol 2 -destl4st $dPort -srcaddrst 192.10.1.0 \
                            -srcaddrend 192.10.1.255 -profindex $profIndex
         }
      }
      &#34;10.2.1&#34; {
         
         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(7)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(7)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(25)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(26)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(27)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(28)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
            }
            <a name="::snmpCreateQosAcl(7)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.3 -destaddrend $net.1.2.3 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.2&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(8)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(8)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(29)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(30)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(31)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(32)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
            }
            <a name="::snmpCreateQosAcl(8)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.3 -destaddrend $net.1.2.3 \
                            -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.3&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(9)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(9)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(33)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set netst 225.0.0.0
               set netend 225.255.255.255
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(34)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set netst 226.1.0.0
               set netend 226.1.255.255
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(35)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set netst 227.1.2.0
               set netend 227.1.2.255
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(36)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set netst 228.0.0.0
               set netend 228.255.255.255
            }
            <a name="::snmpCreateQosAcl(9)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $netst -destaddrend $netend \
                            -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.4&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(10)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(10)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(37)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               dPort 56
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(38)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               dPort 66
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(39)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               dPort 81
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(40)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               dPort 87
            }
            <a name="::snmpCreateQosAcl(10)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -destl4st $dPort -profindex $profIndex
         }
      }
      &#34;10.2.5&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(11)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(11)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(41)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               sPort 51
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(42)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               sPort 52
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(43)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               sPort 53
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(44)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               sPort 54
            }
            <a name="::snmpCreateQosAcl(11)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -srcl4st $sPort -profindex $profIndex
         }
      }
      &#34;10.2.6&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(12)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(12)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(45)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               sPort 51
               dPort 56
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(46)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               sPort 52
               dPort 66
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(47)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               sPort 53
               dPort 81
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(48)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               sPort 54
               dPort 87
            }
            <a name="::snmpCreateQosAcl(12)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -srcl4st $sPort -destl4st $dPort \
                            -profindex $profIndex
         }
      }
      default {
      }
   }

   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         global DUTs_info
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      <span class="comment-line">#send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(4)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard \
                       -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort  \
                       -startCardNum $startCardNum -dataPattern $pPattern \
                       -streamType &#34;contPacket&#34; -percentage 100 -TOS $TOS \
                       -frameSizeType &#34;sizeRandom&#34; -ipProtocol $ipProtocol \
                       -pDstPort $dPort -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx -sIpAddr $sIpAddr \
                       -dIpAddr $dIpAddr -wTag $wTag -tagNo $tag \
                       -userPriority $priority ]
      <span class="comment-line">#wait for things to settle down</span>
      <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 3
   }
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
