<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>cliLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#cliLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>cliLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="cliLib.tcl-annot.html">annotations</a> | <a href="cliLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetCLIPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       This function converts the specified list of portIds to</span>
<span class="comment-line">#       to the list of corresponding DUT port numbers.</span>
<span class="comment-line"># Input args: {portIdString} {cliportList}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: integer or : separated list of integers</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#       SendACmd  &#34;config vlan1 add port [GetCLIPort 3-5,7 &#34;cliActivePortList&#34;]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetCLIPort_14">proc <a href="cliLib.tcl-annot.html#::::GetCLIPort">::::GetCLIPort</a></a></strong> { {portIdString 1}
                  {active &#34;active&#34;} } {

   global cliActivePortList MAIN;
   global cliNonActivePortList;
   set portString &#34;&#34;;
   if { $active == &#34;active&#34;} { 
      set cliPortList $cliActivePortList;
   } else {
      set cliPortList $cliNonActivePortList;
   }

   <span class="comment-line">#first filter the comma</span>
   regsub -all {,} $portIdString { } portRangeList
   foreach portRange $portRangeList {
      if { [regexp {[0-9]-[0-9]} $portRange] == 1} {
         <span class="comment-line">#if in range format</span>

         <span class="comment-line">#puts &#34;Range: $portRange&#34;</span>
         set temp [split $portRange &#34;-&#34;]
         set startRange [lindex $temp 0]
         set endRange [lindex $temp 1]
         <span class="comment-line">#puts &#34;RangeProcessed: |$temp|$startRange|$endRange|&#34;</span>
         for {set i $startRange} {$i &lt;= $endRange} {incr i} {
            set DUTPort [lindex $cliPortList [expr ($i + 1)]]
            if {[info exists MAIN(PRINTTopoInfo)]} {
               if {$MAIN(PRINTTopoInfo)} {
                  <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: CLI $active port# $i is $DUTPort&#34;
               }
            }
            if {$DUTPort != &#34;&#34;} { append portString &#34;, $DUTPort&#34;; }
         }
      } elseif {[regexp {[0-9]} $portRange] == 1 } {
         <span class="comment-line">#or just a single number</span>
         <span class="comment-line">#puts &#34;Single: $portRange DUTId:$DUTId&#34;</span>
         set DUTPort [lindex $cliPortList [expr ($portRange + 1)]]
         if {[info exists MAIN(PRINTTopoInfo)]} {
            if {$MAIN(PRINTTopoInfo)} {
               <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: CLI $active port# $portRange is $DUTPort&#34;
            }
         }
          if {$DUTPort != &#34;&#34;} { append portString &#34;, $DUTPort&#34;; }
      } else {
         <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;GetCLIPort: Unknown portId format $portRange&#34;
         error &#34;GetCLIPort: Unknown portId format $portRange&#34;
      }
   }
   <span class="comment-line">#remove the first comma</span>
   regsub {, } $portString {} newString
   return $newString
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetActiveCLIPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       This function converts the specified list of portIds to</span>
<span class="comment-line">#       to the active cli ports</span>
<span class="comment-line"># Input args: {portIdString}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: integer or : separated list of integers</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#       SendACmd  &#34;config vlan1 add port [GetActiveCLIPort 3-5,7]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetActiveCLIPort_79">proc <a href="cliLib.tcl-annot.html#::::GetActiveCLIPort">::::GetActiveCLIPort</a></a></strong> { {portIdString 1} } {
   return [<a name="::GetCLIPort(1)"><a href="./cliLib.tcl.html#::GetCLIPort_14">::GetCLIPort</a></a> $portIdString &#34;active&#34;];
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetNonActiveCLIPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       This function converts the specified list of portIds to</span>
<span class="comment-line">#       to the non-active cli ports</span>
<span class="comment-line"># Input args: {portIdString}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: integer or : separated list of integers</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#       SendACmd  &#34;config vlan1 add port [GetNonActiveCLIPort 3-5,7]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetNonActiveCLIPort_96">proc <a href="cliLib.tcl-annot.html#::::GetNonActiveCLIPort">::::GetNonActiveCLIPort</a></a></strong> { {portIdString 1} } {
   return [<a name="::GetCLIPort(2)"><a href="./cliLib.tcl.html#::GetCLIPort_14">::GetCLIPort</a></a> $portIdString &#34;nonActive&#34;];
}


</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
