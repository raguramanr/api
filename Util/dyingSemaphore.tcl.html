<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>dyingSemaphore.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#dyingSemaphore.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>dyingSemaphore.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="dyingSemaphore.tcl-annot.html">annotations</a> | <a href="dyingSemaphore.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>
source ../Lib/parse_args.tcl
source ../Lib/mainLib.tcl
source ../Lib/login.tcl
source ../Lib/SendSwCmd.tcl
source ../Autoweb/cgi-bin/cgiScripts/modulesToBeSummarized.cfg
source ./runReg.cfg
source ../main/runReg.cfg
if {$tcl_platform(platform) == &#34;windows&#34;} {
    load &#34;expect52.dll&#34;
} else {
    load [lindex [glob &#34;/usr/lib/libexpect*so*&#34;] 0]
}

<strong><a name="::print_usage_15">proc <a href="dyingSemaphore.tcl-annot.html#::print_usage">::print_usage</a></a></strong><a name="::print_usage"></a> {} {
   global DEVREG
   puts &#34;\r&#34;
   puts {Usage: dyingSemiphore.tcl -cfg &lt;config file&gt; -qId &lt;queueId&gt; [-time &lt;delay seconds&gt;] [-help]}
   puts &#34;   &lt;cfg&gt;: Path of the config file name (e.g. short/ptgm4x6.2.2b4.cfg)&#34;
   puts &#34;   &lt;qId&gt;: Queue that is calling this file ID&#34;
   puts &#34;   \[time\]:  Execution time in secs&#34;
   puts {   \[help\]: Prints the help screen of this program)} 
   puts &#34;\r&#34;
}


parse_args dyingSemiphore $argv {
      cfg &#34;null&#34;
      qId &#34;null&#34;
      time &#34;900&#34;
      help &#34;null&#34;
}

<span class="comment-line"># Check if &#34;-help&#34; asked, print_usage in that case</span>
if {$help!=&#34;null&#34;} {
   <a name="::print_usage(1)"><a href="./dyingSemaphore.tcl.html#::print_usage_15">::print_usage</a></a>
   return 1
}

<span class="comment-line"># checking command parameters</span>
if {$argc&lt;2} {
   puts &#34;Not enough parameters&#34;
   <a name="::print_usage(2)"><a href="./dyingSemaphore.tcl.html#::print_usage_15">::print_usage</a></a>
   puts stderr &#34;Not enough parameters&#34;
   return
}
<span class="comment-line"># ---------------------------------------------------------------</span>
<span class="comment-line"># The purpose of this file is to have a running process with this</span>
<span class="comment-line">#    cfg and qId in the ps -aux string.  Other queuing system tasks</span>
<span class="comment-line">#    can check for their cfg file name and queueId to make decisions</span>
<span class="comment-line">#</span>
<span class="comment-line"># This is used instead of writing to a file so that it will clean</span>
<span class="comment-line">#    itself up</span>
<span class="comment-line"># ---------------------------------------------------------------</span>
set mSec ${time}000
after $mSec;
return;
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:00.</cite>
</div>

</body>
</html>
