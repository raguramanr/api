<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpQOSLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpQOSLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpQOSLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpQOSLib.tcl-annot.html">annotations</a> | <a href="snmpQOSLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>


<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpGetQosProfileIndexFromName</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#    This procedures retrieves the QOSprofile index for the</span>
<span class="comment-line">#    given QOS profile name</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    sessionid - SNMP session established with the DUT</span>
<span class="comment-line">#    profname  - Name of the QOS Profile</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#     QOS profile index / ERROR </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#     snmpGetQosProfileIndexFromName $sessionid &#34;QP1&#34;</span>
<span class="comment-line">###############################################################</span>
<strong><a name="::::snmpGetQosProfileIndexFromName_27">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpGetQosProfileIndexFromName">::::snmpGetQosProfileIndexFromName</a></a></strong> { sessionid profname} {
   set result [snmpGetTable -session $sessionid -oid extremeQosProfileName]

   foreach profInfo [split $result &#34;\n&#34;] {
     foreach item [split $profInfo &#34;\ : , \&#34;&#34;] {
     if {[string compare [string tolower $profname] \
                            [string tolower $item]] == 0 } {
          regexp {.*[.]([0-9]+)} $profInfo res index
          if { [info exists index] } {
             <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;snmpGetQosProfileIndexFromName - QOS profile index \
                           for $profname is $index&#34;
             return $index
          }
        }
     }
   }
   <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;snmpGetQosProfileIndexFromName - QOS profile index for \
                 $profname is ERROR&#34;
   return &#34;ERROR&#34;
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpGetQosACLIndexFromName</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#    This procedures retrieves the QOSprofile index for the</span>
<span class="comment-line">#    given QOS profile name</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    sessionid - SNMP session established with the DUT</span>
<span class="comment-line">#    profname  - Name of the QOS Profile</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#     QOS profile index / ERROR </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#     snmpGetQosACLIndexFromName $sessionid &#34;QP1&#34;</span>
<span class="comment-line">###############################################################</span>
<strong><a name="::::snmpGetQosACLIndexFromName_71">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpGetQosACLIndexFromName">::::snmpGetQosACLIndexFromName</a></a></strong> { sessionid rulename} {
   set result [snmpGetTable -session $sessionid -oid extremeQosRuleName]

   foreach profInfo [split $result &#34;\n&#34;] {
     foreach item [split $profInfo &#34;\ : , \&#34;&#34;] {
     if {[string compare [string tolower $rulename] \
                            [string tolower $item]] == 0 } {
          regexp {.*[.]([0-9]+)} $profInfo res index
          if { [info exists index] } {
             <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;snmpGetQosACLIndexFromName - QOS ACL index \
                           for $rulename is $index&#34;
             return $index
          }
        }
     }
   }
   <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;snmpGetQosACLIndexFromName - QOS profile index for \
                 $rulename is ERROR&#34;
   return &#34;ERROR&#34;
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpConfigQosProfile</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates and modifies a qos profile with the  </span>
<span class="comment-line">#  appropriate parameter values specified.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos profile which needs to be modified</span>
<span class="comment-line">#                 or created.</span>
<span class="comment-line">#    name       - Name of the Qos profile which need to be modified or created. </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    minbw      - minimum bandwidth of the Qos profile.</span>
<span class="comment-line">#    maxbw      - maximum bandwidth of the Qos profile.</span>
<span class="comment-line">#    priority   - priority of the Qos profile.</span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpConfigQosProfile -session $sessionid -index 2 -name TQP -minbw 10 </span>
<span class="comment-line">#                         -maxbw 75 -priority 2 -comment &#34;configuring QOS </span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpConfigQosProfile -session $sessionid -name TQP -minbw 10 </span>
<span class="comment-line">#                         -maxbw 95 -priority 2 -comment &#34;configuring QOS </span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpConfigQosProfile -session $sessionid -index 2 -minbw 20 </span>
<span class="comment-line">#                         -maxbw 75 -priority 2 -comment &#34;configuring QOS </span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpConfigQosProfile_131">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpConfigQosProfile">::::snmpConfigQosProfile</a></a></strong> { args } {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpConfigQosProfile $args {
       session    &#34;&#34;
       index      &#34;&#34;
       name       &#34;&#34;
       minbw      &#34;&#34;
       maxbw      &#34;&#34;
       priority   &#34;&#34;
       comment    &#34;snmpConfigQosProfile&#34;
       fd         &#34;NULL&#34;
    }
 
    set func &#34;snmpConfigQosProfile:&#34; 

    <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func: Configuring QOS Profile&#34;

    if { $session == &#34;&#34;} {
       error &#34;$func session must be specified&#34;
       return Error
    }

    if {$index != &#34;&#34; &amp;&amp; $name == &#34;&#34;} {
       error &#34;$func index or name of the Qos profile must be specified&#34;
       return Error
    }

    set var &#34;snmpSet -session $session &#34; 

    <a name="::snmpDebug(1)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func SNMP Set string is $var&#34; $fd

    if {$name == &#34;&#34; &amp;&amp; $index == &#34;&#34;} {
       set index [<a name="::snmpGetQosProfileIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session $name]
       if {$index == &#34;ERROR&#34;} {
          error &#34;Qos profile $name does not exist&#34;
          return Error
       }
    }

    if {$minbw != &#34;&#34;} {
       lappend var -oid extremeQosProfileMinBw.$index -type i -val $minbw
    }
 
    <a name="::snmpDebug(2)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;SNMP Set string is $var&#34; $fd
    if {$maxbw != &#34;&#34;} {
       lappend var -oid extremeQosProfileMaxBw.$index -type i -val $maxbw
    }
   
    <a name="::snmpDebug(3)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;SNMP Set string is $var&#34; $fd
    if {$priority != &#34;&#34;} {
       lappend var -oid extremeQosProfilePriority.$index -type i -val $priority
    }
    <a name="::snmpDebug(4)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;SNMP Set string is $var&#34; $fd

    set res [snmpGet -session $session -oid \
                        extremeQosProfileRowStatus.$index]
    <a name="::snmpDebug(5)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$var&#34; $fd

    set status [<a name="::snmpUtilGetVal(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]

    <a name="::snmpDebug(6)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func row status is $status&#34; $fd

    if {[string compare [string tolower $status] &#34;active&#34;] != 0 } {
       lappend var -oid extremeQosProfileRowStatus.$index -type i -val 4
    }

    <span class="comment-line"># ---- configure QOS profile</span>
    <a name="::snmpDebug(7)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;SNMP Set string is $var&#34; $fd
    set result [eval $var]
    <a name="::snmpDebug(8)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result&#34; $fd
    return $result
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVerifyQosProfile</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies the attributes of a qos profile with the  </span>
<span class="comment-line">#             values specified.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos profile which needs to be modified</span>
<span class="comment-line">#                 or created.</span>
<span class="comment-line">#    name       - Name of the Qos profile which need to be modified or created. </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    minbw      - minimum bandwidth of the Qos profile.</span>
<span class="comment-line">#    maxbw      - maximum bandwidth of the Qos profile.</span>
<span class="comment-line">#    priority   - priority of the Qos profile(1-8).</span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs</span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVerifyQosProfile -session $sessionid -index 2 -name TQP -minbw 10 </span>
<span class="comment-line">#                         -maxbw 75 -priority 2 -comment &#34;verifying QOS </span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpVerifyQosProfile -session $sessionid -name TQP -minbw 10 </span>
<span class="comment-line">#                         -maxbw 95 -priority 2 -comment &#34;verifying QOS </span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpVerifyQosProfile -session $sessionid -index 2 -minbw 20 </span>
<span class="comment-line">#                         -maxbw 75 -priority low -comment &#34;verifying QOS</span>
<span class="comment-line">#                         profile&#34; -fd $fd_res </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpVerifyQosProfile_242">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpVerifyQosProfile">::::snmpVerifyQosProfile</a></a></strong> { args } {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVerifyQosProfile $args {
       session    &#34;&#34;
       index      &#34;&#34;
       name       &#34;&#34;
       minbw      &#34;&#34;
       maxbw      &#34;&#34;
       priority   &#34;&#34;
       status     &#34;&#34;
       comment    &#34;snmpVerifyQosProfile&#34;
       fd         &#34;NULL&#34;
    }
 
    set func &#34;snmpVerifyQosProfile:&#34; 

    <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Verifying QOS Profile&#34;

    if { $session == &#34;&#34;} {
       error &#34;$func session must be specified&#34;
       return Error
    }

    if {$index == &#34;&#34; &amp;&amp; $name == &#34;&#34;} {
       error &#34;$func index or name of the Qos profile must be specified&#34;
       return Error
    }

    if {$name != &#34;&#34; &amp;&amp; $index == &#34;&#34;} {
       set index [<a name="::snmpGetQosProfileIndexFromName(2)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session $name]
       if {$index == &#34;ERROR&#34;} {
          error &#34;Qos profile $name does not exist&#34;
          return
       }
    }

    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if {$minbw != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosProfileMinBw.$index]
 	<a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;SNMP Get operation returns $res&#34;		
       <a name="::snmpDebug(9)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG  &#34;SNMP Get operation returns $res&#34;

       set val [<a name="::snmpUtilGetVal(2)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(10)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG  &#34;SNMP Get operation returns value $val&#34;

       if {$minbw == $val} {
          <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;minimum bandwidth for QOS profile $index is $val as \
                     expected&#34;
       } else {
          <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;minimum bandwidth for QOS profile $index is expected \
                     $minbw but got $val&#34;
       }
    }
 
    if {$maxbw != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosProfileMaxBw.$index]
	<a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;SNMP Get operation returns $res&#34;
       <a name="::snmpDebug(11)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG  &#34;SNMP Get operation returns $res&#34;
       set val [<a name="::snmpUtilGetVal(3)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(12)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG  &#34;SNMP Get operation returns value $val&#34;

       if {$maxbw == $val} {
          <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;maximum bandwidth for QOS profile $index is $val as \
                     expected&#34;
       } else {
          <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;maximum bandwidth for QOS profile $index is expected \
                     $maxbw but got $val&#34;
       }
    }
   
    if {$priority != &#34;&#34;} {
      
       set priority [string tolower $priority]
       switch $priority {
          &#34;1&#34; {
              set priority &#34;low&#34;
           }
          &#34;2&#34; {
              set priority &#34;lowhi&#34;
           }
          &#34;3&#34; {
              set priority &#34;normal&#34;
           }
          &#34;4&#34; {
              set priority &#34;normalhigh&#34;
           }
          &#34;5&#34; {
              set priority &#34;midium&#34;
           }
          &#34;6&#34; {
              set priority &#34;midiumhigh&#34;
           }
          &#34;7&#34; {
              set priority &#34;high&#34;
           }
          &#34;8&#34; {
              set priority &#34;highhi&#34;
           }
       }

       set res [snmpGet -session $session -oid extremeQosProfilePriority.$index]
       <a name="::snmpDebug(13)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG  &#34;SNMP Get operation returns $res&#34;
       set val [<a name="::snmpUtilGetVal(4)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(14)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG  &#34;SNMP Get operation returns value $val&#34;

       if {[string compare [string tolower $val] $priority] == 0 } {
          <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;priority for QOS profile $index is $val as expected&#34;
       } else {
          <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;priority for QOS profile $index is expected 
                        $priority but got $val&#34;
       }
    }

    if {$status != &#34;&#34;} {
      
       set status [string tolower $status]
       switch $status {
          &#34;1&#34; {
              set priority &#34;active&#34;
           }
          &#34;2&#34; {
              set priority &#34;notinservice&#34;
           }
          &#34;3&#34; {
              set priority &#34;notready&#34;
           }
          &#34;4&#34; {
              set priority &#34;createandgo&#34;
           }
          &#34;5&#34; {
              set priority &#34;createandwait&#34;
           }
          &#34;6&#34; {
              set priority &#34;destroy&#34;
           }
       }

       set res [snmpGet -session $session -oid \
                                 extremeQosProfileRowStatus.$index]
       <a name="::snmpDebug(15)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG  &#34;SNMP Get operation returns $res&#34;
       set val [<a name="::snmpUtilGetVal(5)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(16)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG  &#34;SNMP Get operation returns value $val&#34;

       if {[string compare [string tolower $status] $val] == 0 } {
          <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Row Status for QOS profile $index is $val as expected&#34;
       } else {
          <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Row Status for QOS profile $index is expected 
                        $status but got $val&#34;
       }
    }

    <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpConfigVlanQos</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure configures a qos profile for a specified vlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos profile which needs to be modified</span>
<span class="comment-line">#                 or created.</span>
<span class="comment-line">#    name       - Name of the Qos profile which need to be modified or created. </span>
<span class="comment-line">#    vlanindex  - Vlan if index of the Vlan with which QOS profile is to be </span>
<span class="comment-line">#                 associated </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpConfigVlanQos -session $sessionid -name QP1 -vlanindex 70 </span>
<span class="comment-line">#                      -comment &#34;configuring QOS profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpConfigVlanQos -session $sessionid -index 1 -vlanindex 70 </span>
<span class="comment-line">#                      -comment &#34;configuring QOS profile&#34; -fd $fd_res </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpConfigVlanQos_428">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpConfigVlanQos">::::snmpConfigVlanQos</a></a></strong> { args } {
    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpConfigVlanQos $args {
       session    &#34;&#34;
       name       &#34;&#34;
       index      &#34;&#34;
       vlanindex  &#34;&#34;
       comment    &#34;&#34;
       fd         &#34;NULL&#34;
    }
 
    set func &#34;snmpConfigVlanQos:&#34; 

    <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Configuring VLAN QOS&#34;

    if { $session == &#34;&#34; || $vlanindex == &#34;&#34;} {
       error &#34;$func session and vlan if index must be specified&#34;
       return Error
    }

    if {$index == &#34;&#34; &amp;&amp; $name == &#34;&#34;} {
       error &#34;$func index or name of the Qos profile must be specified&#34;
       return Error
    }

    if {$name != &#34;&#34; &amp;&amp; $index == &#34;&#34;} {
       set index [<a name="::snmpGetQosProfileIndexFromName(3)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session $name]
       if {$index == &#34;ERROR&#34;} {
          error &#34;Qos profile $name does not exist&#34;
          return
       }
    }

    <a name="::snmpDebug(17)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func Configuring QOS profile $name to vlan \
                  ifindex $vlanindex&#34; $fd

    set result [snmpSet -session $session -oid \
                extremeQosByVlanMappingQosProfileIndex.$vlanindex -type i \
                -val $index]
    <a name="::snmpDebug(18)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result&#34; $fd
    return $result
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVerifyVlanQos</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies if the specified qos profile is configured</span>
<span class="comment-line">#  for the specified vlan.                  </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos profile which needs to be modified</span>
<span class="comment-line">#                 or created.</span>
<span class="comment-line">#    name       - Name of the Qos profile which need to be verified for the </span>
<span class="comment-line">#                 specified vlan. </span>
<span class="comment-line">#    vlanindex  - Vlan if index of the Vlan with which QOS profile is to be </span>
<span class="comment-line">#                 verified.</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVerifyVlanQos -session $sessionid -name QP1 -vlanindex 70 </span>
<span class="comment-line">#                      -comment &#34;verifying Vlan QOS profile&#34; -fd $fd_res </span>
<span class="comment-line">#    snmpVerifyVlanQos -session $sessionid -index 1 -vlanindex 70 </span>
<span class="comment-line">#                      -comment &#34;verifying Vlan QOS profile&#34; -fd $fd_res </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpVerifyVlanQos_504">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpVerifyVlanQos">::::snmpVerifyVlanQos</a></a></strong> { args } {
    <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVerifyVlanQos $args {
       session    &#34;&#34;
       name       &#34;&#34;
       index      &#34;&#34;
       vlanindex  &#34;&#34;
       comment    &#34;snmpVerifyVlanQos&#34;
       fd         &#34;NULL&#34;
    }
 
    set func &#34;snmpVerifyVlanQos:&#34; 

    <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Verifying Vlan QOS&#34;

    if { $session == &#34;&#34; || $vlanindex == &#34;&#34;} {
       error &#34;$func session and vlan if index must be specified&#34;
       return Error
    }

    if {$index == &#34;&#34; &amp;&amp; $name == &#34;&#34;} {
       error &#34;$func index or name of the Qos profile must be specified&#34;
       return Error
    }

    if {$name != &#34;&#34; &amp;&amp; $index == &#34;&#34;} {
       set index [<a name="::snmpGetQosProfileIndexFromName(4)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session $name]
       if {$index == &#34;ERROR&#34;} {
          error &#34;Qos profile $name does not exist&#34;
          return
       }
    }

    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    set result [snmpGet -session $session -oid \
                extremeQosByVlanMappingQosProfileIndex.$vlanindex]
    <a name="::snmpDebug(19)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$result&#34; $fd

    set val [<a name="::snmpUtilGetVal(6)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]

    if {$val == $index} {
       <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Vlan Index $vlanindex is associated with Qos profile index \
                  $val as expected&#34;
    } else {
       <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Vlan Index $vlanindex is associated with Qos profile index\
                  $val but expected to be associated with Qos profile $index&#34;
    }

    <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
}


<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCreateQosAcl    </span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates and modifies a qos ACL with the  </span>
<span class="comment-line">#  appropriate parameter values specified.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    inport     - Specific port for which the rule applies  </span>
<span class="comment-line">#    inportmask - List of ports for which the rule is applied  </span>
<span class="comment-line">#    destaddrst - Starting ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    destaddrend- Last ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    srcaddrst  - Starting ip address of the source address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    srcaddrend - Last ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    protocol   - Specific type of traffic. tcp/udp/ip  </span>
<span class="comment-line">#    destl4st   - Starting of the range of the destination L4 port of the </span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    srcl4st    - Starting of the range of the source L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    destl4end  - Last of the range of the destination L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    srcl4end   - Last of the range of the source L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    profindex  - Index of the QOS profile associated with the rule</span>
<span class="comment-line">#    ruleowner  - name of the ruleowner  </span>
<span class="comment-line">#    name       - Name of the Qos profile which need to be modified or created. </span>
<span class="comment-line">#    precedence - precedence of the rule  </span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCreateQosAcl -session $sessionid -index 2 -name &#34;acl1&#34;</span>
<span class="comment-line">#                     -destaddrst 10.0.0.2 -destaddrend 10.0.0.100 </span>
<span class="comment-line">#                     -srcaddrst 11.0.0.2 -srcaddrend 11.0.0.10</span>
<span class="comment-line">#                     -precedence 10 -comment &#34;configuring QOS Acl&#34; -fd $fd_res</span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpCreateQosAcl_607">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpCreateQosAcl">::::snmpCreateQosAcl</a></a></strong> { args } {
    <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCreateQosAcl $args {
       session       &#34;&#34;
       scope         &#34;&#34;
       direction     &#34;&#34;
       inport        &#34;&#34;
       inportmask    &#34;&#34;
       destaddrst    &#34;&#34;
       destaddrend   &#34;&#34;
       srcaddrst     &#34;&#34;
       srcaddrend    &#34;&#34;
       <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a>      &#34;&#34;
       destl4st      &#34;&#34;
       srcl4st       &#34;&#34;
       destl4end     &#34;&#34;
       srcl4end      &#34;&#34;
       profindex     &#34;&#34;
       ruleowner     &#34;&#34;
       precedence    &#34;&#34;
       name          &#34;&#34;
       comment       &#34;&#34;
       fd            &#34;NULL&#34;
    }
 
    set func &#34;snmpCreateQosAcl:&#34;

    <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Creating ACL Rule&#34;

    if { $session == &#34;&#34; } {
       error &#34;$func session must be specified&#34;
       return Error
    }

    set var &#34;snmpSet -session $session &#34; 

    <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Check pt 1&#34;
    set res [snmpGet -session $session -oid \
                              extremeNextAvailableQosRuleIndex.0]
    <a name="::snmpDebug(20)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-next available qos index is $res&#34; $fd

    set index [<a name="::snmpUtilGetVal(7)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
 
    <a name="::snmpDebug(21)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func next available qos index is $index&#34; $fd
 
    lappend inputInfo ACL is created with

    if {$scope != &#34;&#34;} {
       lappend var -oid extremeQosRuleScope.$index -type i -val $scope
       lappend inputInfo scope $scope
    }
 
    if {$direction != &#34;&#34;} {
       lappend var -oid extremeQosRuleDirection.$index -type i -val $direction
       lappend inputInfo direction $direction
    }
 
    if {$inport != &#34;&#34;} {
       lappend var -oid extremeQosRuleInPort.$index -type i -val $inport
       lappend inputInfo inport $inport
    }
 
    if {$inportmask != &#34;&#34;} {
       lappend var -oid extremeQosRuleInPortMask.$index -type x -val $inportmask
       lappend inputInfo inportmask $inportmask
    }
 
    if {$destaddrst != &#34;&#34;} {
       lappend var -oid extremeQosRuleDestAddrStart.$index -type a \
                   -val $destaddrst
       lappend inputInfo destaddrst $destaddrst
    }
 
    if {$destaddrend != &#34;&#34;} {
       lappend var -oid extremeQosRuleDestAddrEnd.$index -type a \
                   -val $destaddrend
       lappend inputInfo destaddrend $destaddrend
    }
 
    if {$srcaddrst != &#34;&#34;} {
       lappend var -oid extremeQosRuleSrcAddrStart.$index -type a \
                   -val $srcaddrst
       lappend inputInfo srcaddrst $srcaddrst
    }
 
    if {$srcaddrend != &#34;&#34;} {
       lappend var -oid extremeQosRuleSrcAddrEnd.$index -type a -val $srcaddrend
       lappend inputInfo srcaddrend $srcaddrend
    }
 
    if {$protocol != &#34;&#34;} {
       lappend var -oid extremeQosRuleProtocol.$index -type i -val $protocol
       lappend inputInfo protocol $protocol
    }
 
    if {$srcl4st != &#34;&#34;} {
       lappend var -oid extremeQosRuleSourceL4PortStart.$index -type i \
                   -val $srcl4st
       lappend inputInfo srcl4st $srcl4st
    }
 
    if {$srcl4end != &#34;&#34;} {
       lappend var -oid extremeQosRuleSourceL4PortEnd.$index -type i \
                   -val $srcl4end
       lappend inputInfo srcl4end $srcl4end
    }
 
    if {$destl4st != &#34;&#34;} {
       lappend var -oid extremeQosRuleDestL4PortStart.$index -type i \
                   -val $destl4st
       lappend inputInfo destl4st $destl4st
    }
 
    if {$destl4end != &#34;&#34;} {
       lappend var -oid extremeQosRuleDestL4PortEnd.$index -type i \
                   -val $destl4end
       lappend inputInfo destl4end $destl4end
    }
 
    if {$profindex != &#34;&#34;} {
       lappend var -oid extremeQosRuleQosProfileIndex.$index -type i \
                   -val $profindex
       lappend inputInfo profindex $profindex
    }
 
    if {$ruleowner != &#34;&#34;} {
       lappend var -oid extremeQosRuleOwner.$index -type s -val $ruleowner
       lappend inputInfo ruleowner $ruleowner
    }
 
    if {$precedence != &#34;&#34;} {
       lappend var -oid extremeQosRulePrecedence.$index -type i -val $precedence
       lappend inputInfo precedence $precedence
    }
 
    if {$name != &#34;&#34;} {
       lappend var -oid extremeQosRuleName.$index -type s -val $name
       lappend inputInfo name $name
    }
 
    lappend var -oid extremeQosRuleRowStatus.$index -type i -val 4

    <a name="::snmpDebug(22)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func $inputInfo&#34; $fd

    <span class="comment-line"># ---- configure QOS profile</span>
    set result [eval $var]
    <a name="::snmpDebug(23)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpSet-$result&#34; $fd

    if { [regexp -nocase &#34;error&#34; $result] == 1} {
       <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;ACL profile $name returns $result&#34;
       return error
    }

    <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;ACL profile $name returns $index&#34;
    return $index
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpDeleteQosAcl    </span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates and modifies a qos ACL with the  </span>
<span class="comment-line">#  appropriate parameter values specified.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos profile which need to be deleted. </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    name       - Name of the ACL which needs to be deleted.</span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpDeleteQosAcl -session $sessionid -index 2</span>
<span class="comment-line">#                     -comment &#34;Deleting QOS Acl index 3&#34; -fd $fd_res</span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpDeleteQosAcl_791">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpDeleteQosAcl">::::snmpDeleteQosAcl</a></a></strong> { args } {
    <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpDeleteQosAcl $args {
       session       &#34;&#34;
       index         &#34;&#34;
       name          &#34;&#34;
       comment       &#34;&#34;
       fd            &#34;NULL&#34;
    }
 
    set func &#34;snmpDeleteQosAcl:&#34;

    <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Deleting ACL Rules&#34;

    if { $session == &#34;&#34; } {
       error &#34;$func session must be specified&#34;
       return Error
    }

    if { $name == &#34;&#34; &amp;&amp; $index == &#34;&#34;} {
       error &#34;$func ACL name or index must be specified&#34;
       return Error
    }

    if {$name != &#34;&#34;} {
       set index [<a name="::snmpGetQosACLIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session $name]
       <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func Deleting the ACL Rule $name&#34;
    } else {
       <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func Deleting the ACL Rule with index $index&#34;
    }

    set res [snmpSet -session $session -oid  extremeQosRuleRowStatus.$index \
                     -type i -val 6]
    <a name="::snmpDebug(24)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$res&#34; $fd
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVerifyQosAcl    </span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies the parameters of a ACL with the  </span>
<span class="comment-line">#  specified values.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    index      - Index of the Qos ACL. </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    scope      - any/signaled/inband   </span>
<span class="comment-line">#    direction  - any/forward/backward </span>
<span class="comment-line">#    inport     - Specific port for which the rule applies  </span>
<span class="comment-line">#    inportmask - List of ports for which the rule is applied  </span>
<span class="comment-line">#    destaddrst - Starting ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    destaddrend- Last ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    srcaddrst  - Starting ip address of the source address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    srcaddrend - Last ip address of the destination address range of a ip</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    protocol   - Specific type of traffic. tcp/udp/ip  </span>
<span class="comment-line">#    destl4st   - Starting of the range of the destination L4 port of the </span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    srcl4st    - Starting of the range of the source L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied</span>
<span class="comment-line">#    destl4end  - Last of the range of the destination L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    srcl4end   - Last of the range of the source L4 port of the</span>
<span class="comment-line">#                 traffic for which the rule is applied  </span>
<span class="comment-line">#    profindex  - Index of the QOS profile associated with the rule</span>
<span class="comment-line">#    ruleowner  - name of the ruleowner  </span>
<span class="comment-line">#    precedence - precedence of the rule  </span>
<span class="comment-line">#    name       - Name of the rule.  </span>
<span class="comment-line">#    status     - Row status of the entry.  </span>
<span class="comment-line">#    comment    - User comment for logging in the command outputs   </span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVerifyQosAcl -session $sessionid -index 2 -name &#34;acl1&#34;</span>
<span class="comment-line">#                     -destaddrst 10.0.0.2 -destaddrend 10.0.0.100 </span>
<span class="comment-line">#                     -srcaddrst 11.0.0.2 -srcaddrend 11.0.0.10</span>
<span class="comment-line">#                     -precedence 10 -comment &#34;verifying QOS Acl&#34; -fd $fd_res</span>
<span class="comment-line">###############################################################</span>
<strong><a name="::::snmpVerifyQosAcl_880">proc <a href="snmpQOSLib.tcl-annot.html#::::snmpVerifyQosAcl">::::snmpVerifyQosAcl</a></a></strong> { args } {
    <a name="::parse_args(7)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVerifyQosAcl $args {
       session       &#34;&#34;
       index         &#34;&#34;
       scope         &#34;&#34;
       direction     &#34;&#34;
       inport        &#34;&#34;
       inportmask    &#34;&#34;
       destaddrst    &#34;&#34;
       destaddrend   &#34;&#34;
       srcaddrst     &#34;&#34;
       srcaddrend    &#34;&#34;
       <a name="::protocol(2)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a>      &#34;&#34;
       destl4st      &#34;&#34;
       srcl4st       &#34;&#34;
       destl4end     &#34;&#34;
       srcl4end      &#34;&#34;
       profindex     &#34;&#34;
       ruleowner     &#34;&#34;
       precedence    &#34;&#34;
       name          &#34;&#34;
       status        &#34;&#34;
       comment       &#34;snmpVerifyQosAcl&#34;
       fd            &#34;NULL&#34;
    }
 
    set func &#34;snmpVerifyQosAcl:&#34;

    <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func : Verifying ACL Rule&#34;

    if { $session == &#34;&#34; || $index == &#34;&#34;} {
       error &#34;$func session and QOS ACL index must be specified&#34;
       return Error
    }

    if {$comment == &#34;&#34;} {
       if {$name == &#34;&#34;} {
          set comment &#34;Verifying the Parameters configured for QOS ACL \
                    Index $index using SNMP&#34;
       } else {
          set comment &#34;Verifying the Parameters configured for QOS ACL \
                    Index $index name $name using SNMP&#34;
       }
    }

    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if {$scope != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleScope.$index] 
       <a name="::snmpDebug(25)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(8)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(26)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $scope} {
          <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;scope is $val as expected&#34;
       } else {
          <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;scope is expected $scope but got $val&#34;
       }
    }
 
    if {$direction != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleDirection.$index] 
       <a name="::snmpDebug(27)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(9)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(28)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $direction} {
          <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Direction is $val as expected&#34;
       } else {
          <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Direction is expected $direction but got $val&#34;
       }
    }
 
    if {$inport != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleInPort.$index] 
       <a name="::snmpDebug(29)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(10)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(30)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $inport} {
          <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleInPort is $val as expected&#34;
       } else {
          <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleInPort is expected $inport but got $val&#34;
       }
    }
 
    if {$inportmask != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleInPortMask.$index]
       <a name="::snmpDebug(31)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(11)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(32)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $inportmask} {
          <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleInPortMask is $val as expected&#34;
       } else {
          <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleInPortMask is expected $inportmask \
                        but got $val&#34;
       }
    }
 
    if {$destaddrst != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                                 extremeQosRuleDestAddrStart.$index]
       <a name="::snmpDebug(33)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(12)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $res]
       <a name="::snmpDebug(34)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $destaddrst} {
          <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleDestAddrStart is $val as expected&#34;
       } else {
          <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleDestAddrStart is expected $destaddrst \
                        but got $val&#34;
       }
    }
 
    if {$destaddrend != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleDestAddrEnd.$index]
       <a name="::snmpDebug(35)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(13)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $res]
       <a name="::snmpDebug(36)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $destaddrend} {
          <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleDestAddrEnd is $val as expected&#34;
       } else {
          <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleDestAddrEnd is expected $destaddrend \
                        but got $val&#34;
       }
    }

    if {$srcaddrst != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                                 extremeQosRuleSrcAddrStart.$index]
       <a name="::snmpDebug(37)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(14)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $res]
       <a name="::snmpDebug(38)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $srcaddrst} {
          <a name="::result_ok(14)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleSrcAddrStart is $val as expected&#34;
       } else {
          <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleSrcAddrStart is expected $srcaddrst \
                        but got $val&#34;
       }
    }
 
    if {$srcaddrend != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleSrcAddrEnd.$index]
       <a name="::snmpDebug(39)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet- $res&#34; $fd

       set val [<a name="::snmpUtilGetVal(15)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $res]
       <a name="::snmpDebug(40)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $srcaddrend} {
          <a name="::result_ok(15)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleSrcAddrEnd is $val as expected&#34;
       } else {
          <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleSrcAddrEnd is expected $srcaddrend \
                        but got $val&#34;
       }
    }
 
    if {$protocol != &#34;&#34;} {
       set protocol [string tolower $protocol]

       switch $protocol {
          &#34;1&#34; {
              set protocol &#34;any&#34;
           }
          &#34;2&#34; {
              set protocol &#34;udp&#34;
           }
          &#34;3&#34; {
              set protocol &#34;tcp&#34;
           }
          &#34;4&#34; {
              set protocol &#34;other&#34;
           }
          &#34;5&#34; {
              set protocol &#34;tcpPermitEstablished&#34;
           }
          &#34;6&#34; {
              set protocol &#34;icmp&#34;
           }
       }

       set res [snmpGet -session $session -oid extremeQosRuleProtocol.$index]
       <a name="::snmpDebug(41)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG  &#34;$func SNMP Get operation returns $res&#34;

       set val [<a name="::snmpUtilGetVal(16)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(42)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG  &#34;SNMP Get operation returns value $val&#34;

       if {[string compare [string tolower $protocol] $val] == 0 } {
          <a name="::result_ok(16)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleProtocol is $val as expected&#34;
       } else {
          <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleProtocol is expected $protocol \
                        but got $val&#34;
       }

    }
 
    if {$srcl4st != &#34;&#34;} {
       set res [snmpGet -session $session \
                        -oid extremeQosRuleSourceL4PortStart.$index]
       <a name="::snmpDebug(43)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet - returns $res&#34; $fd

       set val [<a name="::snmpUtilGetVal(17)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(44)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $srcl4st} {
          <a name="::result_ok(17)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleSourceL4PortStart is $val as expected&#34;
       } else {
          <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleSourceL4PortStart is expected $srcl4st \
                        but got $val&#34;
       }
    }
 
    if {$srcl4end != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                                 extremeQosRuleSourceL4PortEnd.$index]
       <a name="::snmpDebug(45)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet - returns $res&#34; $fd

       set val [<a name="::snmpUtilGetVal(18)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(46)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $srcl4end} {
          <a name="::result_ok(18)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleSourceL4PortEnd is $val as expected&#34;
       } else {
          <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleSourceL4PortEnd is expected $srcl4end \
                        but got $val&#34;
       }
    }
 
    if {$destl4st != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                         extremeQosRuleDestL4PortStart.$index]
       <a name="::snmpDebug(47)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet - returns $res&#34; $fd

       set val [<a name="::snmpUtilGetVal(19)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(48)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $destl4st} {
          <a name="::result_ok(19)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleDestL4PortStart is $val as expected&#34;
       } else {
          <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleDestL4PortStart is expected $destl4st \
                        but got $val&#34;
       }
    }
 
    if {$destl4end != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                                 extremeQosRuleDestL4PortEnd.$index] 
       <a name="::snmpDebug(49)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet - returns $res&#34; $fd

       set val [<a name="::snmpUtilGetVal(20)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(50)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $destl4end} {
          <a name="::result_ok(20)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleDestL4PortEnd is $val as expected&#34;
       } else {
          <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleDestL4PortEnd is expected $destl4end \
                        but got $val&#34;
       }
    }
 
    if {$profindex != &#34;&#34;} {
       set res [snmpGet -session $session -oid \
                                 extremeQosRuleQosProfileIndex.$index]
       <a name="::snmpDebug(51)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(21)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $res]
       <a name="::snmpDebug(52)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $profindex} {
          <a name="::result_ok(21)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleQosProfileIndex is $val as expected&#34;
       } else {
          <a name="::result_error(19)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleQosProfileIndex is expected $profindex \
                        but got $val&#34;
       }
    }
 
    if {$ruleowner != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleOwner.$index] 
       <a name="::snmpDebug(53)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(22)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> str $res]
       <a name="::snmpDebug(54)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $ruleowner} {
          <a name="::result_ok(22)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleOwner is $val as expected&#34;
       } else {
          <a name="::result_error(20)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleOwner is expected $name \
                        but got $val&#34;
       }
    }
 
    if {$precedence != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRulePrecedence.$index]
       <a name="::snmpDebug(55)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd
    }
 
    if {$name != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleName.$index]
       <a name="::snmpDebug(56)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(23)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> str $res]
       <a name="::snmpDebug(57)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $name} {
          <a name="::result_ok(23)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleName is $val as expected&#34;
       } else {
          <a name="::result_error(21)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleName is expected $name \
                        but got $val&#34;
       }
    }
 
    if {$status != &#34;&#34;} {
       set res [snmpGet -session $session -oid extremeQosRuleRowStatus.$index]
       <a name="::snmpDebug(58)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$res&#34; $fd

       set val [<a name="::snmpUtilGetVal(24)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $res]
       <a name="::snmpDebug(59)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpUtilGetVal- returns $val&#34; $fd

       if {$val == $status} {
          <a name="::result_ok(24)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;extremeQosRuleRowStatus is $val as expected&#34;
       } else {
          <a name="::result_error(22)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;extremeQosRuleRowStatus is expected $status \
                        but got $val&#34;
       }
    }

    <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
