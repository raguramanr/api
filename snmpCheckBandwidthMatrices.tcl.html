<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpCheckBandwidthMatrices.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpCheckBandwidthMatrices.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpCheckBandwidthMatrices.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpCheckBandwidthMatrices.tcl-annot.html">annotations</a> | <a href="snmpCheckBandwidthMatrices.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpCheckBandwidthMatrix   </span>
<span class="comment-line"># Description:  Verify the effects of QOS based on qos profiles matrix</span>
<span class="comment-line">#		in QOS test plan or user-specified ones</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	snmpCheckBandwidthMatrix -checkMatrix 8 -filePt $fd_res </span>
<span class="comment-line">#                                -testFileName $testNo     </span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpCheckBandwidthMatrix_15">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpCheckBandwidthMatrix">::::snmpCheckBandwidthMatrix</a></a></strong> {args} {
   <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckBandwidthMatrix $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     numIxiaCd &#34;3&#34;
     <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a> &#34;ip&#34;
     srcMacAddrTxList &#34;srcMac&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     QPList &#34;1 2 3 4&#34;
     tagList &#34;none none none none&#34;
     checkQosList &#34;&#34;
     ratioExpectList &#34;25.00 25.00 25.00 25.00&#34;
     ratioThreshold &#34;13&#34;
     ratioAggregateThreshold &#34;2.5&#34;
     checkMatrix &#34;1-7&#34;
     qosType &#34;802.1p&#34;
     filePt &#34;NULL&#34;
     testFileName &#34;Temp&#34;
   }

global startCardNum
global DUTs_info
<span class="comment-line">#  ---- Check for 10Gig platform, call different checkBwMatrix specifically</span>
global DUTs_Slot_info
set 10GigSlot 0
<span class="comment-line">#for {set i 1} {$i&lt;=$DUTs_info(DUT1,numSlots)} {incr i} {</span>
<span class="comment-line">#   if {[regexp -nocase &#34;10Gig&#34; $DUTs_Slot_info(DUT1,slot$i,hwModType)]} {</span>
<span class="comment-line">#      set 10GigSlot 1</span>
<span class="comment-line">#      break</span>
<span class="comment-line">#   }</span>
<span class="comment-line">#}</span>

if {$10GigSlot} {
   <span class="comment-line">#  ---- Call 10Gig qos routine</span>
   if {$ratioAggregateThreshold==2.5} {
      set ratioAggregateThreshold 14
   }
   if {[regexp -nocase &#34;25.00 25.00 25.00 25.00&#34; $ratioExpectList]} {
      set ratioExpectList &#34;100.00 100.00 100.00 100.00&#34;
   }
   return [<a name="::snmpCheckBandwidthMatrix10Gig(1)"><a href="./snmpCheckBandwidthMatrices10G.tcl.html#::snmpCheckBandwidthMatrix10Gig_16">::snmpCheckBandwidthMatrix10Gig</a></a> -numIxiaCd $numIxiaCd \
           -protocol $protocol -srcMacAddrTxList $srcMacAddrTxList \
           -destMacAddrTxList $destMacAddrTxList -sIpAddrList $sIpAddrList \
           -dIpAddrList $dIpAddrList -sPortList $sPortList -dPortList \
            $dPortList -TOSList $TOSList -QPList $QPList -tagList $tagList \
           -checkQosList $checkQosList -ratioExpectList $ratioExpectList \
           -ratioThreshold $ratioThreshold -ratioAggregateThreshold \
            $ratioAggregateThreshold -checkMatrix $checkMatrix \
           -qosType $qosType -filePt $filePt -testFileName $testFileName]
}

set pPattern &#34;5678&#34;
if {$protocol == &#34;multicast&#34;} {
   set joinGroup 22
   set portList {1 2 3 4}
   foreach portId $portList {
      set portIdTx [expr $portId + 8]
      set multicastIP 22[expr $portId + 4].1.2.3
      set destMacMulticast &#34;01 00 5E 01 02 03&#34; 
      set clientIP1 192.20.$portId.2
      <span class="comment-line"># ---- send an join multicast group igmp packet</span>
      <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$clientIP1 joins multicast group $multicastIP&#34;
      set rxPort [<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx chasis card port]
      set frameSent [<a name="::ixiaConf_2Ports_ip(1)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $chasis -txCard $card  \
                     -txPort $port -rxChas $chasis -rxCard $card  -rxPort \
                     $rxPort -ipProtocol &#34;igmp&#34; -type $joinGroup -ttl 1 \
                     -startCardNum $startCardNum  -dMacAddr $destMacMulticast \
                     -sIpAddr  $clientIP1  -dIpAddr $multicastIP \
                     -groupAddr $multicastIP ]
   }

   set ipProtocol &#34;udp&#34;
   set destMacAddrTxList {01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03 01:00:5E:01:02:03}
   <span class="comment-line"># ---- send join</span>
} else {
   set ipProtocol $protocol
}
set QPa &#34;QP[lindex $QPList 0]&#34;
set QPb &#34;QP[lindex $QPList 1]&#34;
set QPc &#34;QP[lindex $QPList 2]&#34;
set QPd &#34;QP[lindex $QPList 3]&#34;
set Qa [expr [lindex $QPList 0] - 1]
set Qb [expr [lindex $QPList 1] - 1]
set Qc [expr [lindex $QPList 2] - 1]
set Qd [expr [lindex $QPList 3] - 1]

   <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Configuring QPs for Matrix 8&#34;
if {$checkMatrix == 8} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 8 Bandwidth criteria using $QPa, \
                $QPb, $QPc, $QPd&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;        
   <span class="comment-line"># ---- Test Matrix 8</span>
   <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Configuring QPs for Matrix 8&#34;

   <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPa minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPb minbw 10 maxbw 100 priority Normal port all&#34;
   <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPc minbw 10 maxbw 100 priority Medium port all&#34;
   <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPd minbw 10 maxbw 100 priority High port all&#34;



<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPa -minbw 10 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPa for Matrix 8&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPb -minbw 10 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPb for Matrix 8&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPc -minbw 10 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPc for Matrix 8&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPd -minbw 10 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPd for Matrix 8&#34; -fd $filePt</span>

} elseif {$checkMatrix == &#34;1-7&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 1 Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   
   global DUT1_CONNECT
<span class="comment-line">#   Login $DUT1_CONNECT $filePt</span>
<a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT

   <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPa minbw 0 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPb minbw 0 maxbw 100 priority LowHi port all&#34;
   <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPc minbw 0 maxbw 100 priority Medium port all&#34;
   <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile $QPd minbw 0 maxbw 100 priority MediumHi port all&#34;


<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPa -minbw 0 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPa for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPb -minbw 0 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 2 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPb for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPc -minbw 0 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPc for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name $QPd -minbw 0 \</span>
<span class="comment-line">#                         -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile $QPd for Matrix 1&#34; -fd $filePt</span>
}

   set portIdTxList {1 2 3 4}
   set priList &#34;0 1 2 3&#34;
   set portIdRxList {9 10 11 12}
   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      <span class="comment-line"># ---- send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(2)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard \
                       -txPort $txPort -rxChas $rxChas -rxCard $rxCard \
                       -rxPort $rxPort -startCardNum $startCardNum \
                       -dataPattern $pPattern -streamType &#34;contPacket&#34; \
                       -percentage 100 -TOS $TOS -frameSizeType &#34;sizeRandom&#34;  \
                       -ipProtocol $ipProtocol -pDstPort $dPort -pSrcPort \
                        $sPort -dMacAddr $destMacAddrTx  -sIpAddr $sIpAddr \
                       -dIpAddr $dIpAddr -wTag $wTag -tagNo $tag -userPriority \
                        $priority ]
      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 7
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(3)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Rate on port $portId Sent: $rateSent Recv: $rateRecv&#34;
      }
      if {$checkMatrix == 8} {
      
      } elseif {$checkMatrix == &#34;1-7&#34;} {
         set ratioFound [format %.2f [expr $rateArray($portIdRx,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect 100
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port \
             $portIdRx. Got $ratioFound EXPECT $ratioExpect +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port \
             $portIdRx. Got $ratioFound AS EXPECT $ratioExpect \
            +/- $ratioThreshold&#34;
         }
      }
   }
   if {$checkMatrix == 8} { 
      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(2)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(4)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(5)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(6)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx8 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 

      set ratioExpectArray(9) 0
      set ratioExpectArray(10) 0
      set ratioExpectArray(11) 100
      set ratioExpectArray(12) 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 8 failed rate ratio threshold test on \
                          port $portId. Got $ratioFound EXPECT \
                          $ratioExpect +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 8 pass rate ratio threshold test on port \
                      $portId. Got $ratioFound AS EXPECT $ratioExpect \
                      +/- $ratioThreshold&#34;
         }
      } 
      <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

      <span class="comment-line"># ---- lappend checkQosList &#34;0 1000 minPacket&#34; </span>
      <span class="comment-line">#      not testing this, unpredictable for now</span>
      lappend checkQosList &#34;$Qb 10 maxPacket&#34;
      lappend checkQosList &#34;$Qc 1000 minPacket&#34;
      lappend checkQosList &#34;$Qd 10 maxPacket&#34;
      <a name="::CheckQoSMonitor(1)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(1)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList
   } elseif {$checkMatrix == &#34;1-7&#34;} {
      set ratioExpectArray(9) 0
      set ratioExpectArray(10) 0
      set ratioExpectArray(11) 0
      set ratioExpectArray(12) 100
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioThreshold } {
            <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 1 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $ratioThreshold&#34;
         } else {
            <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 1 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $ratioThreshold&#34;
         }
      }   
      <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      <span class="comment-line"># ---- Matrix1 has qosmonitor problems when leaking to Q2.</span>
      lappend checkQosList &#34;$Qa 10 maxPacket&#34;
      lappend checkQosList &#34;$Qb 10 maxPacket&#34;
      lappend checkQosList &#34;$Qc 3000 maxPacket&#34;
      lappend checkQosList &#34;$Qd 30000 minPacket&#34;
      <a name="::CheckQoSMonitor(2)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(2)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  


      <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile $QPa minbw 0 maxbw 100 priority Low port all&#34;
      <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile $QPb minbw 0 maxbw 100 priority LowHi port all&#34;
      <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile $QPc minbw 0 maxbw 100 priority Normal port all&#34;
      <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile $QPd minbw 0 maxbw 100 priority NormalHi port all&#34;

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name $QPa -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile $QPa for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name $QPb -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile $QPb for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#     snmpConfigQosProfile -session $session1 -name $QPc -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile $QPc for Matrix 1&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name $QPd -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile $QPd for Matrix 1&#34; -fd $filePt</span>

      set priList &#34;0 2 4 6&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x40 0x80 0xc0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>    &#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>    &#34;config diffserv examination code-point 8 qosprofile \
                      QP7 ports [<a name="::MapDUTPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>    &#34;config diffserv examination code-point 25 qosprofile \
                      QP3 ports [<a name="::MapDUTPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x80 0x20&#34;
      }

 <a name="::configMatrix(1)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol


 <span class="comment-line">#     snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
 <span class="comment-line">#                  -priList $priList -portIdTxList $portIdTxList -qosType \</span>
 <span class="comment-line">#                  $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList\</span>
 <span class="comment-line">#                  -sPortList $sPortList -dPortList $dPortList -TOSList \</span>
 <span class="comment-line">#                   $TOSList -tagList $tagList -destMacAddrTxList \</span>
 <span class="comment-line">#                   $destMacAddrTxList -ipProtocol $ipProtocol</span>

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 2 Bandwidth criteria using QP1, QP3, QP5, QP7&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   <span class="comment-line"># ---- Test Matrix 2</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp1 for Matrix 2&#34; -fd $filePt</span>

   <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp1 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp3 minbw 10 maxbw 100 priority Normal port all&#34;
   <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp5 minbw 10 maxbw 100 priority Medium port all&#34;
   <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp7 minbw 10 maxbw 100 priority High port all&#34;


<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp3 for Matrix 2&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp5 for Matrix 2&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp7 for Matrix 2&#34; -fd $filePt</span>

      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(3)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(7)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(8)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(9)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx2 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 10.00
      set ratioExpectArray(10) 10.00
      set ratioExpectArray(11) 10.00
      set ratioExpectArray(12) 70.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate ratio threshold test on port $portId.\
                       Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 2 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect \
                       +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 2 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect \
                    +/- $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(3)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(3)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName
      unset checkQosList

      <span class="comment-line"># ---- restore to default</span>

      <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP1 minbw 0 maxbw 100 priority Low port all&#34;
      <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP3 minbw 0 maxbw 100 priority Normal port all&#34;
      <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
      <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP7 minbw 0 maxbw 100 priority High port all&#34;


 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name qp1 -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp1 for default in Matrix 2&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name qp3 -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp3 for default in Matrix 2&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name qp5 -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp5 default in for Matrix 2&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name qp7 -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp7 default in for Matrix 2&#34; -fd $filePt</span>



      set priList &#34;1 3 5 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x20 0x60 0xa0 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(25)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point 9 qosprofile \
                   QP8 ports [<a name="::MapDUTPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(26)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point 25 qosprofile QP4 \
                   ports [<a name="::MapDUTPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x20 0x64 0xa0 0x24&#34;
      }
      
 <a name="::configMatrix(2)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol


<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#                   -priList $priList -portIdTxList $portIdTxList -qosType \</span>
<span class="comment-line">#                   $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList\</span>
<span class="comment-line">#                   -sPortList $sPortList -dPortList $dPortList -TOSList \</span>
<span class="comment-line">#                   $TOSList -tagList $tagList -destMacAddrTxList \</span>
<span class="comment-line">#                   $destMacAddrTxList -ipProtocol $ipProtocol</span>

   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3 Bandwidth criteria using QP2, QP4, QP6, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
   <span class="comment-line">#Test Matrix 3</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp2&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp2 for Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp4 for Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp6 for Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp8 for Matrix 3&#34; -fd $filePt</span>

 <a name="::SendACmd(27)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp2 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(28)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp4 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(29)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp6 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(30)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile qp8 minbw 10 maxbw 100 priority Low port all&#34;


      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(4)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(10)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(11)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(12)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set sum [expr $sum + $ratioFound]
         set proratedRatioThresholdLow [expr 10.00/100.00*$ratioThreshold]
         set proratedRatioThresholdHigh [expr 25.00/100.00*$ratioThreshold]
         <span class="comment-line"># ---- between 10-25%</span>
         if {($ratioFound &lt; [expr 10 - $proratedRatioThresholdLow]) || ($ratioFound &gt; [expr 25 + $proratedRatioThresholdHigh])} {
            <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT between \
                          10 +/-$proratedRatioThresholdLow to 25 \
                          +/-$proratedRatioThresholdHigh&#34;
         } else {
            <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT between 10 \
                       +/-$proratedRatioThresholdLow to 25 \
                       +/-$proratedRatioThresholdHigh&#34;
         }
      }
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;5 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(4)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(4)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line"># ---- restore to default</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp2&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp2 for default after Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp4 for default after Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 6 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp6 for default after Matrix 3&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp8 for default after Matrix 3&#34; -fd $filePt</span>

	<a name="::SendACmd(31)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP2 minbw 0 maxbw 100 priority LowHi port all&#34;
      <a name="::SendACmd(32)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP4 minbw 0 maxbw 100 priority NormalHi port all&#34;
      <a name="::SendACmd(33)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP6 minbw 0 maxbw 100 priority MediumHi port all&#34;
      <a name="::SendACmd(34)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP8 minbw 0 maxbw 100 priority HighHi port all&#34;


      set priList &#34;3 4 5 6&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x60 0x80 0xa0 0xc0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(35)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34; 
         <a name="::SendACmd(36)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config diffserv examination code-point 8 qosprofile QP7 \
                    ports [<a name="::MapDUTPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(37)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config diffserv examination code-point 25 qosprofile QP5 \
                    ports [<a name="::MapDUTPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x60 0x64 0xa0 0x20&#34;
      }

 <a name="::configMatrix(3)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol


<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#             -priList $priList -portIdTxList $portIdTxList -qosType \</span>
<span class="comment-line">#             $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \</span>
<span class="comment-line">#             -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList\</span>
<span class="comment-line">#             -tagList $tagList -destMacAddrTxList $destMacAddrTxList \</span>
<span class="comment-line">#             -ipProtocol $ipProtocol</span>
      
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 3b Bandwidth criteria using QP4, QP5, QP6, QP7&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;      
   <span class="comment-line"># ---- Test Matrix 3b</span>

<a name="::SendACmd(38)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP4 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(39)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP5 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(40)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP6 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(41)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP7 minbw 10 maxbw 70 priority Low port all&#34;


<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp4 for Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp5 for Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp6 for Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 70 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp7 for Matrix 3b&#34; -fd $filePt</span>

      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(5)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(8)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(13)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(14)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(15)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx3b Rate on port $portId Sent: $rateSent Recv: \
            $rateRecv&#34;
      }    
      set sum 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set sum [expr $sum + $ratioFound]
         set proratedRatioThresholdLow [expr 10.00/100.00*$ratioThreshold]
         set proratedRatioThresholdHigh [expr 25.00/100.00*$ratioThreshold]
         <span class="comment-line"># ---- between 10-25%</span>
         if {($ratioFound &lt; [expr 10 - $proratedRatioThresholdLow]) || ($ratioFound &gt; [expr 25 + $proratedRatioThresholdHigh])} {
            <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT between \
                          10 +/-$proratedRatioThresholdLow to 25 \
                          +/-$proratedRatioThresholdHigh&#34;
         } else {
            <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT between 10 \
                       +/-$proratedRatioThresholdLow to 25 \
                       +/-$proratedRatioThresholdHigh&#34;
         }
      }
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 3b failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 3b pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      } 
      <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;5 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(5)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(5)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList  

      <span class="comment-line"># ---- restore to default</span>

      <a name="::SendACmd(42)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP4 minbw 0 maxbw 100 priority NormalHi port all&#34;
      <a name="::SendACmd(43)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
      <a name="::SendACmd(44)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP6 minbw 0 maxbw 100 priority MediumHi port all&#34;
      <a name="::SendACmd(45)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP7 minbw 0 maxbw 100 priority High port all&#34;

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp4 for default after Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp5 for default after Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 6 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp6 for default after Matrix 3b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp7 for default after Matrix 3b&#34; -fd $filePt</span>

   <span class="comment-line">#  ---- Matrix 4 deleted</span>
      set priList &#34;0 3 4 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x60 0x80 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(46)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(47)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 \
                               qosprofile QP8 ports [<a name="::MapDUTPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(48)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 \
                               qosprofile QP4 ports [<a name="::MapDUTPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x80 0x20&#34;
      }

<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#                   -priList $priList -portIdTxList $portIdTxList \</span>
<span class="comment-line">#                   -qosType $qosType -sIpAddrList $sIpAddrList \</span>
<span class="comment-line">#                   -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#                   -destMacAddrTxList $destMacAddrTxList \</span>
<span class="comment-line">#                   -ipProtocol $ipProtocol</span>

<a name="::configMatrix(4)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol


      
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 5 Bandwidth criteria using QP1, QP4, QP5, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;          
   <span class="comment-line"># ---- Test Matrix 5</span>

   <a name="::SendACmd(49)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP1 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(50)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP4 minbw 10 maxbw 50 priority Normalhi port all&#34;
   <a name="::SendACmd(51)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP5 minbw 10 maxbw 40 priority Medium port all&#34;
   <a name="::SendACmd(52)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP8 minbw 10 maxbw 30 priority Highhi port all&#34;


<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp1 for Matrix 5&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp4 for Matrix 5&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 40 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp5 for Matrix 5&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 30 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp8 for Matrix 5&#34; -fd $filePt</span>

      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(6)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(9)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(16)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(17)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(18)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx5 Rate on port $portId Sent: $rateSent Recv: \
                          $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 10.00
      set ratioExpectArray(10) 20.00
      set ratioExpectArray(11) 40.00
      set ratioExpectArray(12) 30.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 5 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 5 pass rate aggregate ratio threshold test. Got \
                    $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(6)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(6)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList      

      <span class="comment-line"># ---- restore to default</span>
     
 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp1 for default after Matrix 5&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp4 for default after Matrix 5&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp5 default after for Matrix 5&#34; -fd $filePt</span>

 <span class="comment-line">#     snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 0 \</span>
 <span class="comment-line">#                          -maxbw 100 -priority 8 -comment &#34;configuring QOS \</span>
 <span class="comment-line">#                           profile qp8 default after for Matrix 5&#34; -fd $filePt</span>

 <a name="::SendACmd(53)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP1 minbw 0 maxbw 100 priority Low port all&#34;
      <a name="::SendACmd(54)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP4 minbw 0 maxbw 100 priority NormalHi port all&#34;
      <a name="::SendACmd(55)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
      <a name="::SendACmd(56)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP8 minbw 0 maxbw 100 priority HighHi port all&#34;


      set priList &#34;0 1 2 3&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x20 0x40 0x60&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(57)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(58)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 \
                         qosprofile QP4 ports [<a name="::MapDUTPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(59)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 \
                         qosprofile QP2 ports [<a name="::MapDUTPortId(15)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x40 0x20&#34;
      }

<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#                   -priList $priList -portIdTxList $portIdTxList \</span>
<span class="comment-line">#                   -qosType $qosType -sIpAddrList $sIpAddrList \</span>
<span class="comment-line">#                   -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#                   -destMacAddrTxList $destMacAddrTxList \</span>
<span class="comment-line">#                   -ipProtocol $ipProtocol</span>
 
<a name="::configMatrix(5)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

     
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 6 Bandwidth criteria using QP1, QP2, QP3, QP4&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(7)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;  
   <span class="comment-line"># ---- Test Matrix 6</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp1 for Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp2&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp2 for Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 40 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp3 for Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 30 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp4 for Matrix 6&#34; -fd $filePt</span>

<a name="::SendACmd(60)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP1 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(61)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP2 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(62)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP3 minbw 10 maxbw 40 priority Low port all&#34;
   <a name="::SendACmd(63)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP4 minbw 10 maxbw 30 priority Low port all&#34;


      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(7)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(10)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(19)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(20)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(21)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx6 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set sum [expr $sum + $ratioFound]
         set proratedRatioThresholdLow [expr 10.00/100.00*$ratioThreshold]
         set proratedRatioThresholdHigh [expr 25.00/100.00*$ratioThreshold]
         <span class="comment-line"># ---- between 10-25%</span>
         if {($ratioFound &lt; [expr 10 - $proratedRatioThresholdLow]) || ($ratioFound &gt; [expr 25 + $proratedRatioThresholdHigh])} {
            <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix6 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT between 10 \
                          +/-$proratedRatioThresholdLow to 25 \
                          +/-$proratedRatioThresholdHigh&#34;
         } else {
            <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 6 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT between \
                       10 +/-$proratedRatioThresholdLow to \
                       25 +/-$proratedRatioThresholdHigh&#34;
         }
      }
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 6 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect \
                       +/- $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 6 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect \
                    +/- $ratioAggregateThreshold&#34;
      } 
      <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;1 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;3 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(7)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(7)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList   

      <span class="comment-line"># ---- restore to default</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp1 for default after Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp2&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp2 for default after Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp3 for default after Matrix 6&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp4 for default after Matrix 6&#34; -fd $filePt</span>

      <a name="::SendACmd(64)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP1 minbw 0 maxbw 100 priority Low port all&#34;
      <a name="::SendACmd(65)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP2 minbw 0 maxbw 100 priority LowHi port all&#34;
      <a name="::SendACmd(66)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP3 minbw 0 maxbw 100 priority Normal port all&#34;
      <a name="::SendACmd(67)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP4 minbw 0 maxbw 100 priority NormalHi port all&#34;



      set priList &#34;4 5 6 7&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x80 0xa0 0xc0 0xe0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(68)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(16)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(69)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 \
                         qosprofile QP8 ports [<a name="::MapDUTPortId(17)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(70)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 \
                         qosprofile QP6 ports [<a name="::MapDUTPortId(18)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x80 0x64 0xc0 0x20&#34;
      }

<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#                   -priList $priList -portIdTxList $portIdTxList \</span>
<span class="comment-line">#                   -qosType $qosType -sIpAddrList $sIpAddrList \</span>
<span class="comment-line">#                   -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#                   -destMacAddrTxList $destMacAddrTxList \</span>
<span class="comment-line">#                   -ipProtocol $ipProtocol</span>


      <a name="::configMatrix(6)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

   
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 6b Bandwidth criteria using QP5, QP6, QP7, QP8&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(8)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;           
   <span class="comment-line"># ---- Test Matrix 6b</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp5 for Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp6 for Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 40 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp7 for Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 10 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp8 for Matrix 6b&#34; -fd $filePt</span>

<a name="::SendACmd(71)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP5 minbw 10 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(72)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP6 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(73)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP7 minbw 10 maxbw 40 priority Low port all&#34;
   <a name="::SendACmd(74)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP8 minbw 10 maxbw 10 priority Low port all&#34;


      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(8)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(11)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(22)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(23)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(24)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx6b Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 

      set sum 0
      set ratioExpectArray(9) 30.00
      set ratioExpectArray(10) 30.00
      set ratioExpectArray(11) 30.00
      set ratioExpectArray(12) 9.60
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 6b failed rate ratio threshold test on \
                          port $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(14)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 6b pass rate ratio threshold test on \
                       port $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 6b failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(15)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 6b pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(8)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;5 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      lappend checkQosList &#34;7 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(8)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(8)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList    

      <span class="comment-line"># ---- restore to default</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp5 for default after Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 6 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp6 for default after Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp7 for default after Matrix 6b&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp8 for default after Matrix 6b&#34; -fd $filePt</span>

<a name="::SendACmd(75)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
      <a name="::SendACmd(76)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP6 minbw 0 maxbw 100 priority MediumHi port all&#34;
      <a name="::SendACmd(77)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP7 minbw 0 maxbw 100 priority High port all&#34;
      <a name="::SendACmd(78)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP8 minbw 0 maxbw 100 priority HighHi port all&#34;


      set priList &#34;0 2 4 6&#34;
      if {$qosType==&#34;diffserv&#34;} {
         set TOSList &#34;0x00 0x40 0x80 0xc0&#34;
      } elseif {$qosType==&#34;diffservCodePoint&#34;} {
         <a name="::SendACmd(79)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;unconfig diffserv examination ports [<a name="::MapDUTPortId(19)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;      
         <a name="::SendACmd(80)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 8 \
                         qosprofile QP7 ports [<a name="::MapDUTPortId(20)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         <a name="::SendACmd(81)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config diffserv examination code-point 25 \
                         qosprofile QP3 ports [<a name="::MapDUTPortId(21)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4]&#34;
         set TOSList &#34;0x00 0x64 0x80 0x20&#34;
      }

<span class="comment-line">#      snmpConfigMatrix -session1 $session1 -session2 $session2 \</span>
<span class="comment-line">#                   -priList $priList -portIdTxList $portIdTxList \</span>
<span class="comment-line">#                   -qosType $qosType -sIpAddrList $sIpAddrList \</span>
<span class="comment-line">#                   -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                   -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#                   -destMacAddrTxList $destMacAddrTxList \</span>
<span class="comment-line">#                   -ipProtocol $ipProtocol</span>

<a name="::configMatrix(7)"><a href="./CheckBandwidthMatrices.tcl.html#::configMatrix_1450">::configMatrix</a></a> -priList $priList -portIdTxList $portIdTxList -qosType $qosType -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                   -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList -tagList $tagList -destMacAddrTxList $destMacAddrTxList \
                   -ipProtocol $ipProtocol

      
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking Matrix 7 Bandwidth criteria using QP1, QP3, QP5, QP7&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(9)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;        
   <span class="comment-line"># ---- Test Matrix 7</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 10 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp1 for Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 15 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp3 for Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 25 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp5 for Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#   snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 35 \</span>
<span class="comment-line">#                        -maxbw 50 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                         profile qp7 for Matrix 7&#34; -fd $filePt</span>

<a name="::SendACmd(82)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP1 minbw 10 maxbw 50 priority Low port all&#34;
   <a name="::SendACmd(83)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP3 minbw 20 maxbw 50 priority Normal port all&#34;
   <a name="::SendACmd(84)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP5 minbw 25 maxbw 50 priority Medium port all&#34;
   <a name="::SendACmd(85)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP7 minbw 35 maxbw 50 priority High port all&#34;


      <span class="comment-line"># ---- wait for things to settle down</span>
      <a name="::exSleep(9)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(12)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(25)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(26)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(27)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Mtrx7 Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) 10.00
      set ratioExpectArray(10) 18.70
      set ratioExpectArray(11) 26.30
      set ratioExpectArray(12) 45.00
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 7 failed rate ratio threshold test on port \
                          $portId. Got $ratioFound EXPECT $ratioExpect +/- \
                          $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(16)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 7 pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect 100
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix 7 failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(17)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix 7 pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(9)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      lappend checkQosList &#34;0 1000 minPacket&#34;
      lappend checkQosList &#34;2 1000 minPacket&#34;
      lappend checkQosList &#34;4 1000 minPacket&#34;
      lappend checkQosList &#34;6 1000 minPacket&#34;
      <a name="::CheckQoSMonitor(9)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(9)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList $filePt $testFileName 
      unset checkQosList   
      <span class="comment-line"># ---- restore to default</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp1 for default after Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp3 for default after Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp5 for default after Matrix 7&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp7 for default after Matrix 7&#34; -fd $filePt</span>

<a name="::SendACmd(86)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP1 minbw 0 maxbw 100 priority Low port all&#34;
      <a name="::SendACmd(87)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP3 minbw 0 maxbw 100 priority Normal port all&#34;
      <a name="::SendACmd(88)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
      <a name="::SendACmd(89)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;config qosprofile QP7 minbw 0 maxbw 100 priority High port all&#34;


} elseif {$checkMatrix == &#34;user&#34;} {
   <span class="comment-line">################################################</span>
   set subTest &#34;Checking User Bandwidth criteria&#34;
   <span class="comment-line">################################################</span>
   result_h2 &#34;$subTest&#34;
   <a name="::report_start_test(10)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
      
      <span class="comment-line">#wait for things to settle down</span>
      <a name="::exSleep(10)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
      set portIdList {1 2 3 4 9 10 11 12}
      foreach portId $portIdList {
         
         <a name="::MapIxiaPortId(13)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
         <a name="::stat(28)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> getRate statAllStats $chasisId $card $port
         set rateSent [<a name="::stat(29)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesSent]
         set rateRecv [<a name="::stat(30)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -bytesReceived]
         set rateArray($portId,sent) $rateSent.00
         set rateArray($portId,recv) $rateRecv.00
      
         <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;MtrxUser Rate on port $portId Sent: $rateSent Recv: \
                       $rateRecv&#34;
      } 
      set sum 0
      set ratioExpectArray(9) [lindex $ratioExpectList 0]
      set ratioExpectArray(10) [lindex $ratioExpectList 1]
      set ratioExpectArray(11) [lindex $ratioExpectList 2]
      set ratioExpectArray(12) [lindex $ratioExpectList 3]
      foreach portId $portIdRxList {
         set portIdTx [expr $portId - 8]
         set ratioFound [format %.2f [expr $rateArray($portId,recv)*100/($rateArray($portIdTx,sent)+1)]]
         set ratioExpect $ratioExpectArray($portId)
         set proratedRatioThreshold [expr $ratioExpect/100.00*$ratioThreshold]
         set sum [expr $ratioFound + $sum]
         if {[expr abs($ratioFound - $ratioExpect)] &gt; $proratedRatioThreshold } {
            <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed rate ratio threshold test on \
                          port $portId. Got $ratioFound EXPECT $ratioExpect \
                          +/- $proratedRatioThreshold&#34;
         } else {
            <a name="::result_ok(18)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate ratio threshold test on port \
                       $portId. Got $ratioFound AS EXPECT $ratioExpect \
                       +/- $proratedRatioThreshold&#34;
         }
      } 
      <span class="comment-line"># ---- total rate</span>
      set ratioExpect [expr $ratioExpectArray(9)+$ratioExpectArray(10)+$ratioExpectArray(11)+$ratioExpectArray(12)]
      set ratioFound $sum
      if {[expr abs($ratioFound - $ratioExpect)] &gt; $ratioAggregateThreshold } {
         <a name="::result_error(19)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Matrix user failed aggregate rate ratio threshold test. \
                       Got $ratioFound EXPECT $ratioExpect +/- \
                       $ratioAggregateThreshold&#34;
      } else {
         <a name="::result_ok(19)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Matrix user pass rate aggregate ratio threshold test. \
                    Got $ratioFound AS EXPECT $ratioExpect +/- \
                    $ratioAggregateThreshold&#34;
      }
      <a name="::report_end_test(10)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
      <span class="comment-line"># ---- check Q</span>
      <span class="comment-line"># ---- Commented to skip failure because of PD12684,14184. </span>
      <span class="comment-line">#      Will be uncommened once the PD is fixed. 09/20/02sk</span>
      if {![regexp -nocase &#34;3.2|4.2&#34; $testFileName]} {
         if {$testFileName==&#34;10.1.3&#34; &amp;&amp; \
                  ![regexp -nocase &#34;G8X|G8T&#34; $DUTs_info(DUT1,bladeType)]} {
            <a name="::CheckQoSMonitor(10)"><a href="./CheckBandwidthMatrices.tcl.html#::CheckQoSMonitor_898">::CheckQoSMonitor</a></a> [<a name="::::GetATrunkPort(10)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] $checkQosList \
                                              $filePt $testFileName 
            unset checkQosList 
         } else {
            <a name="::SendACmd(90)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(11)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
         }
      } else {
         <a name="::SendACmd(91)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show ports [<a name="::::GetATrunkPort(12)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosmonitor&#34;
      }
}
   <span class="comment-line"># ---- special check for multicast, these commands should not cause </span>
   <span class="comment-line">#      switch to crash</span>
   if {$protocol == &#34;multicast&#34;} { 
      global DUT2_CONNECT
<span class="comment-line">#      Login $DUT2_CONNECT $filePt</span>
<a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT
      <a name="::SendACmd(92)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;clear igmp snooping&#34;

      global DUT1_CONNECT
 <span class="comment-line">#     Login $DUT1_CONNECT $filePt</span>
<a name="::Login(3)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT
      <a name="::SendACmd(93)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;clear igmp snooping&#34;
   }
   <span class="comment-line"># ---- stop Tx</span>
   foreach portIdTx $portIdTxList {
         <a name="::MapIxiaPortId(14)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
         <a name="::ixStopPortTransmit(1)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }
   <span class="comment-line"># ---- restore to default</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp1&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 1 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp1 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp2&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 2 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp2 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp3&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 3 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp3 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp4&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 4 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp4 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp5&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 5 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp5 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp6&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 6 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp6 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp7&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 7 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp7 for default&#34; -fd $filePt</span>

<span class="comment-line">#      snmpConfigQosProfile -session $session1 -name &#34;qp8&#34; -minbw 0 \</span>
<span class="comment-line">#                           -maxbw 100 -priority 8 -comment &#34;configuring QOS \</span>
<span class="comment-line">#                            profile qp8 for default&#34; -fd $filePt</span>

 <a name="::SendACmd(94)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP1 minbw 0 maxbw 100 priority Low port all&#34;
   <a name="::SendACmd(95)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP2 minbw 0 maxbw 100 priority LowHi port all&#34;
   <a name="::SendACmd(96)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP3 minbw 0 maxbw 100 priority Normal port all&#34;
   <a name="::SendACmd(97)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP4 minbw 0 maxbw 100 priority NormalHi port all&#34;
   <a name="::SendACmd(98)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP5 minbw 0 maxbw 100 priority Medium port all&#34;
   <a name="::SendACmd(99)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP6 minbw 0 maxbw 100 priority MediumHi port all&#34;
   <a name="::SendACmd(100)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP7 minbw 0 maxbw 100 priority High port all&#34;
   <a name="::SendACmd(101)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;config qosprofile QP8 minbw 0 maxbw 100 priority HighHi port all&#34;


}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestSetupSingleVlan   </span>
<span class="comment-line"># Description:  Set up one vlan only on both DUTs per single vlan QOS tests</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line"># 	snmpQosTestSetupSingleVlan -wTag &#34;true&#34; -filePt $fd_res     </span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>

<strong><a name="::::snmpQosTestSetupSingleVlan_1420">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpQosTestSetupSingleVlan">::::snmpQosTestSetupSingleVlan</a></a></strong> {args} {
   <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestSetupSingleVlan $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     sNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     dNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     vlanDUT1IpAddrList &#34;192.10.1.1&#34;
     vlanDUT2IpAddrList &#34;192.10.1.100&#34;
     vlanDUT1MaskList &#34;255.255.255.0&#34;
     vlanDUT2MaskList &#34;255.255.255.0&#34;
     wTag &#34;false&#34;
	 tagNo &#34;2&#34;
     filePt &#34;NULL&#34;
     }

   global DUT1_CONNECT
   global DUTs_info
   global DUTs_Slot_info

   set 10GigSlot 0
<span class="comment-line">#   for {set i 1} {$i&lt;=$DUTs_info(DUT1,numSlots)} {incr i} {</span>
<span class="comment-line">#      if {[regexp -nocase &#34;10Gig&#34; $DUTs_Slot_info(DUT1,slot$i,hwModType)]} {</span>
<span class="comment-line">#         set 10GigSlot 1</span>
<span class="comment-line">#         break</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#   }</span>

   if {$10GigSlot} {
      <span class="comment-line"># ---- Call 10Gig qos routine</span>
      return [<a name="::snmpQosTestSetupSingleVlan10Gig(1)"><a href="./snmpCheckBandwidthMatrices10G.tcl.html#::snmpQosTestSetupSingleVlan10Gig_890">::snmpQosTestSetupSingleVlan10Gig</a></a> -sIpAddrList $sIpAddrList \
                          -dIpAddrList $dIpAddrList -vlanDUT1IpAddrList \
                           $vlanDUT1IpAddrList -vlanDUT2IpAddrList \
                           $vlanDUT2IpAddrList -wTag $wTag -tagNo $tagNo \
                          -filePt $filePt]
   }

<span class="comment-line">#   Login $DUT1_CONNECT $filePt</span>
	<a name="::Login(4)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT

   set vlan_id(1) [<a name="::snmpCreateVlan(1)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session1 -name &#34;vlan1&#34; -fd $filePt]
   lappend retList $vlan_id(1)
   if { $wTag == &#34;true&#34; } { 
      set tag_id(1) [<a name="::snmpCreateTag(1)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session1 -tagid $tagNo -fd $filePt]
      lappend retList $tag_id(1)

      <a name="::snmpAddPortToVlan(1)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::MapDUTPortId(22)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpAddPortToVlan(2)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::::GetATrunkPort(13)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -tagid $tag_id(1) -fd $filePt
   } else {
      <a name="::snmpAddPortToVlan(3)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::MapDUTPortId(23)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
      <a name="::snmpAddPortToVlan(4)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                    -port [<a name="::::GetATrunkPort(14)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
   }

   set addr [lindex $vlanDUT1IpAddrList 0]
   set mask [lindex $vlanDUT1MaskList 0]
   <a name="::snmpAssignIPAddrToVlan(1)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
      -addr $addr -mask $mask -fd $filePt

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $sIpAddrList $i]
      set network [lindex $sNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(1)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session1 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:A1:F$j:00:00:01&#34; -fd $filePt
   }

   global DUT2_CONNECT
<span class="comment-line">#   Login $DUT2_CONNECT $filePt</span>
<a name="::Login(5)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT

   set vlan_id(2) [<a name="::snmpCreateVlan(2)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session2 -name &#34;vlan1&#34; -fd $filePt]
   lappend retList $vlan_id(2)

   if { $wTag == &#34;true&#34; } { 
      set tag_id(2) [<a name="::snmpCreateTag(2)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session2 -tagid $tagNo -fd $filePt]
      lappend retList $tag_id(2)

      <a name="::snmpAddPortToVlan(5)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::MapDUTPortId(24)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpAddPortToVlan(6)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::::GetATrunkPort(15)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -tagid $tag_id(2) -fd $filePt
   } else {
      <a name="::snmpAddPortToVlan(7)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::MapDUTPortId(25)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -fd $filePt
      <a name="::snmpAddPortToVlan(8)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                    -port [<a name="::::GetATrunkPort(16)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
   }
   
   set addr [lindex $vlanDUT2IpAddrList 0]
   set mask [lindex $vlanDUT2MaskList 0]
   <a name="::snmpAssignIPAddrToVlan(2)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
      -addr $addr -mask $mask -fd $filePt

   <a name="::SendACmd(102)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:A3:F1:00:00:01 vlan1 ports [<a name="::MapDUTPortId(26)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9 2]&#34;
   <a name="::SendACmd(103)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:A3:F2:00:00:01 vlan1 ports [<a name="::MapDUTPortId(27)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 10 2]&#34;
   <a name="::SendACmd(104)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:A3:F3:00:00:01 vlan1 ports [<a name="::MapDUTPortId(28)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 11 2]&#34;
   <a name="::SendACmd(105)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;create fdbentry 00:A3:F4:00:00:01 vlan1 ports [<a name="::MapDUTPortId(29)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 12 2]&#34;

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $dIpAddrList $i]
      set network [lindex $dNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(2)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session2 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:A3:F$j:00:00:01&#34; -fd $filePt
   }

   return $retList
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestCleanupSingleVlan   </span>
<span class="comment-line"># Description: Clean up the QOS config set up by snmpQosTestSetupSingleVlan  </span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      	snmpQosTestCleanupSingleVlan -filePt $fd_res</span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpQosTestCleanupSingleVlan_1544">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpQosTestCleanupSingleVlan">::::snmpQosTestCleanupSingleVlan</a></a></strong> {args} {
   <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestCleanupSingleVlan $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     retList  &#34;&#34;
     wTag &#34;&#34;
     sIpAddrList &#34;192.10.1.11 192.10.1.12 192.10.1.13 192.10.1.14&#34;
     dIpAddrList &#34;192.10.1.21 192.10.1.22 192.10.1.23 192.10.1.24&#34;
     sNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     dNetwork &#34;192.10.1.1 192.10.1.1 192.10.1.1 192.10.1.1&#34;
     filePt &#34;NULL&#34;
     }
   global DUT1_CONNECT
   global DUTs_info
   global DUTs_Slot_info

   set 10GigSlot 0
<span class="comment-line">#   for {set i 1} {$i&lt;=$DUTs_info(DUT1,numSlots)} {incr i} {</span>
<span class="comment-line">#      if {[regexp -nocase &#34;10Gig&#34; $DUTs_Slot_info(DUT1,slot$i,hwModType)]} {</span>
<span class="comment-line">#         set 10GigSlot 1</span>
<span class="comment-line">#         break</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#   }</span>

   if {$10GigSlot} {
      <span class="comment-line"># ---- Call 10Gig qos routine</span>
      return [snmpsnmpQosTestCleanupSingleVlan10Gig -sIpAddrList $sIpAddrList \
                                  -dIpAddrList $dIpAddrList -filePt $filePt]
   }

<span class="comment-line">#   Login $DUT1_CONNECT $filePt</span>
<a name="::Login(6)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT

   set index 1

   if { $wTag == &#34;true&#34; } {
      foreach key $retList {
        switch $index {
          &#34;1&#34; {
             set vlan_id(1) $key
           }
          &#34;2&#34; {
             set tag_id(1) $key
           }
          &#34;3&#34; {
             set vlan_id(2) $key
           }
          &#34;4&#34; {
             set tag_id(2) $key
           }
          
        }
        incr index
      }

   } else {
      foreach key $retList {
        switch $index {
          &#34;1&#34; {
             set vlan_id(1) $key
           }
          &#34;2&#34; {
             set vlan_id(2) $key
           }
        }
        incr index
      }
   }

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $sIpAddrList $i]
      set network [lindex $sNetwork $i]
      <a name="::snmpDeleteIpArpEntry(1)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session1 -network $network \
                           -ipaddr $ipaddr -fd $filePt
   }

   if {$wTag == &#34;true&#34;} {
      <a name="::snmpDelIPAddrFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id(1)
      <a name="::snmpDelPortFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::MapDUTPortId(30)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDelPortFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::::GetATrunkPort(17)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDeleteTag(1)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session1 -tagid $tag_id(1) -fd $filePt
      <a name="::snmpDeleteVlan(1)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id(1)
   } else {
      <a name="::snmpDelIPAddrFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id(1)
      <a name="::snmpDelPortFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::MapDUTPortId(31)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
      <a name="::snmpDelPortFromVlan(4)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                       -port [<a name="::::GetATrunkPort(18)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
      <a name="::snmpDeleteVlan(2)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id(1)
   }
   <a name="::SendACmd(106)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show vlan&#34;

   global DUT2_CONNECT
<span class="comment-line">#   Login $DUT2_CONNECT $filePt</span>
<a name="::Login(7)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $dIpAddrList $i]
      set network [lindex $dNetwork $i]
      <a name="::snmpDeleteIpArpEntry(2)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session2 -network $network \
                           -ipaddr $ipaddr -fd $filePt
   }

   <a name="::SendACmd(107)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F1:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(108)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F2:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(109)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F3:00:00:01 vlan vlan1&#34;
   <a name="::SendACmd(110)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F4:00:00:01 vlan vlan1&#34;
   
   if {$wTag == &#34;true&#34;} {
      <a name="::snmpDelIPAddrFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id(2)
      <a name="::snmpDelPortFromVlan(5)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::MapDUTPortId(32)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDelPortFromVlan(6)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::::GetATrunkPort(19)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDeleteTag(2)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session2 -tagid $tag_id(2) -fd $filePt
      <a name="::snmpDeleteVlan(3)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id(2)
   } else {
      <a name="::snmpDelIPAddrFromVlan(4)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id(2)
      <a name="::snmpDelPortFromVlan(7)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::MapDUTPortId(33)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -fd $filePt
      <a name="::snmpDelPortFromVlan(8)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id(2) \
                       -port [<a name="::::GetATrunkPort(20)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
      <a name="::snmpDeleteVlan(4)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id(2)
   }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestSetup   </span>
<span class="comment-line"># Description:  Set up required vlans on 2 DUTs according to test cases in </span>
<span class="comment-line">#		QOS test plan</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#      	set mode &#34;multicast&#34;</span>
<span class="comment-line">#	set vlanDUT1 &#34;single&#34;</span>
<span class="comment-line">#	set sIpAddrList &#34;192.10.1.2 192.10.1.3 192.10.1.4 192.10.1.5&#34;</span>
<span class="comment-line">#	set vlanDUT1IpAddrList &#34;192.10.1.1&#34;</span>
<span class="comment-line">#	snmpQosTestSetup -mode $mode -vlanDUT1 $vlanDUT1 -sIpAddrList $sIpAddrList \</span>
<span class="comment-line">#             	     -vlanDUT1IpAddrList $vlanDUT1IpAddrList -filePt $fd_res</span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpQosTestSetup_1688">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpQosTestSetup">::::snmpQosTestSetup</a></a></strong> {args} {
   <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestSetup $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     mode &#34;unicast&#34;
     vlanDUT1 &#34;multiple&#34;
     vlanDUT2 &#34;multiple&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sNetwork &#34;192.10.1.1 192.10.2.1 192.10.3.1 192.10.4.1&#34;
     dNetwork &#34;192.20.1.1 192.20.2.1 192.20.3.1 192.20.4.1&#34;
     vlanDUT1IpAddrList &#34;192.10.1.1 192.10.2.1 192.10.3.1 192.10.4.1&#34;
     vlanDUT2IpAddrList &#34;192.20.1.1 192.20.2.1 192.20.3.1 192.20.4.1&#34;
     vlanDUT1MaskList &#34;255.255.255.0 255.255.255.0 255.255.255.0 255.255.255.0&#34;
     vlanDUT2MaskList &#34;255.255.255.0 255.255.255.0 255.255.255.0 255.255.255.0&#34;
     ipRouteList &#34;192.20.1.0 192.20.2.0 192.20.3.0 192.20.4.0&#34;
     wTagDUT1 &#34;false false false false&#34;
	  tagListDUT1 &#34;10 20 30 40&#34;
     wTagDUT2 &#34;false false false false&#34;
	  tagListDUT2 &#34;10 20 30 40&#34;
     filePt &#34;NULL&#34;
     }
   global DUT1_CONNECT
<span class="comment-line">#   Login $DUT1_CONNECT $filePt</span>
<a name="::Login(8)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT

   set vlan_id(15) [<a name="::snmpCreateVlan(3)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session1 -name &#34;common&#34; \
                                   -fd $filePt]
   <a name="::snmpAssignIPAddrToVlan(3)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session1 -vlanid $vlan_id(15) \
                          -addr 192.207.38.1 -forwarding 1 -mask 255.255.255.0 \
                          -fd $filePt
   <a name="::snmpAddPortToVlan(9)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(15) \
                     -port [<a name="::::GetATrunkPort(21)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
   <span class="comment-line"># ---- Enable RIP on the vlan</span>
   <a name="::snmpEnableRIPIf(1)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session1 -ipa &#34;192.207.38.1&#34;

   for {set i 0} {$i &lt; 4} {incr i 1} {
      set index [expr $i + 1]
      set addr($index) [lindex $vlanDUT1IpAddrList $i]
      set mask($index) [lindex $vlanDUT1MaskList $i]
   }

   if {$vlanDUT1 == &#34;multiple&#34;} {

      for {set i 1} {$i &lt;= 4} {incr i 1} {
         set vlan_id($i) [<a name="::snmpCreateVlan(4)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session1 -name &#34;vlan$i&#34; \
                                         -fd $filePt]
         <a name="::snmpAssignIPAddrToVlan(4)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                  -addr $addr($i) -forwarding 1 -mask $mask($i) -fd $filePt
         set tCount [expr $i - 1]

         if { [lindex $wTagDUT1 $tCount] == &#34;true&#34; } { 
             set tagNo [lindex $tagListDUT1 $tCount]
             set tag_id($i) [<a name="::snmpCreateTag(3)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session1 -tagid $tagNo \
                                           -fd $filePt]
             <a name="::snmpAddPortToVlan(10)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                     -port [<a name="::MapDUTPortId(34)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $i] -tagid $tag_id($i) -fd $filePt
          } else {
             <a name="::snmpAddPortToVlan(11)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                     -port [<a name="::MapDUTPortId(35)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $i] -fd $filePt
         }
         <span class="comment-line"># ---- Enable RIP on the vlan</span>
         <a name="::snmpEnableRIPIf(2)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session1 -ipa $addr($i)
         <a name="::snmpVerifyRIPconfig(1)"><a href="./snmpRiplib.tcl.html#::snmpVerifyRIPconfig_350">::snmpVerifyRIPconfig</a></a> -session $session1 -vlanid $vlan_id($i) \
                -ipa &#34;$addr($i)&#34; -forwarding &#34;enable&#34; -ripStatus &#34;enable&#34;
      }

   } else {
       set vlan_id(1) [<a name="::snmpCreateVlan(5)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session1 -name &#34;vlan1&#34; \
                                      -fd $filePt]
       <a name="::snmpAssignIPAddrToVlan(5)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                     -addr $addr(1) -forwarding 1 -mask $mask(1) -fd $filePt

       if { [lindex $wTagDUT1 $tCount] == &#34;true&#34; } { 
           set tagNo [lindex $tagListDUT1 $tCount]
           set tag_id(1) [<a name="::snmpCreateTag(4)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session1 -tagid $tagNo \
                                         -fd $filePt]
           <a name="::snmpAddPortToVlan(12)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                   -port [<a name="::MapDUTPortId(36)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id(1) -fd $filePt
        } else {
           <a name="::snmpAddPortToVlan(13)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session1 -vlanid $vlan_id(1) \
                   -port [<a name="::MapDUTPortId(37)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
        }

        <span class="comment-line"># ---- Enable RIP on the vlan</span>
        <a name="::snmpEnableRIPIf(3)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session1 -ipa $addr(1)
   }

   if {$mode == &#34;unicast&#34;} {
   <a name="::SendACmd(111)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable rip&#34;
   } else {
      <a name="::SendACmd(112)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable igmp&#34;
      <a name="::SendACmd(113)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable igmp snooping&#34;
      <a name="::SendACmd(114)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable ipforwarding&#34;
      <a name="::SendACmd(115)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable rip&#34;
      <a name="::SendACmd(116)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable ipmcforwarding&#34;
      <a name="::SendACmd(117)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config pim add vlan all&#34;
      <a name="::SendACmd(118)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable pim&#34;
   }

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $sIpAddrList $i]
      set network [lindex $sNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(3)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session1 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:A1:F$j:00:00:01&#34; -fd $filePt
   }

   global DUT2_CONNECT
<span class="comment-line">#   Login $DUT2_CONNECT $filePt</span>
<a name="::Login(9)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT

   set vlan_id(16) [<a name="::snmpCreateVlan(6)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session2 -name &#34;common&#34; \
                                   -fd $filePt]
   <a name="::snmpAssignIPAddrToVlan(6)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session2 -vlanid $vlan_id(16) \
                          -addr 192.207.38.2 -forwarding 1 -mask 255.255.255.0 \
                          -fd $filePt
   <a name="::snmpAddPortToVlan(14)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id(16) \
                     -port [<a name="::::GetATrunkPort(22)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
   <span class="comment-line"># ---- Enable RIP on the vlan</span>
   <a name="::snmpEnableRIPIf(4)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session2 -ipa &#34;192.207.38.2&#34;

   for {set i 0} {$i &lt; 4} {incr i 1} {
      set index [expr $i + 1]
      set addr($index) [lindex $vlanDUT2IpAddrList $i]
      set mask($index) [lindex $vlanDUT2MaskList $i]
   }

   global DUTs_info
   <span class="comment-line"># Check for 10Gig platform, call different checkBwMatrix specifically</span>
   global DUTs_Slot_info
   set 10GigSlot 0
<span class="comment-line">#   for {set i 1} {$i&lt;=$DUTs_info(DUT1,numSlots)} {incr i} {</span>
<span class="comment-line">#      if {[regexp -nocase &#34;10Gig&#34; $DUTs_Slot_info(DUT1,slot$i,hwModType)]} {</span>
<span class="comment-line">#         set 10GigSlot 1</span>
<span class="comment-line">#         break</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#   }</span>
   if {$10GigSlot} {
      <a name="::SendACmd(119)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;nofeep&#34;
      foreach po [<a name="::::GetATrunkPort(23)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1] {
         set c 0
         set p 0
         scan $po %d:%d c p
         if {$p!=0} {
            <a name="::SendACmd(120)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;hurricanelb [expr $c-1],3&#34;
         }
      }
      <a name="::SendACmd(121)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;shswitch&#34;
   }
   

   if {$vlanDUT2 == &#34;multiple&#34;} {

      for {set i 1} {$i &lt;= 4} {incr i 1} {
         set vlan_id($i) [<a name="::snmpCreateVlan(7)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session2 -name &#34;vlan$i&#34; \
                                         -fd $filePt]
         <a name="::snmpAssignIPAddrToVlan(7)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                  -addr $addr($i) -forwarding 1 -mask $mask($i) -fd $filePt

         set tCount [expr $i - 1]
         set tPort [expr $i + 8]

         if { [lindex $wTagDUT2 $tCount] == &#34;true&#34; } {
             set tagNo [lindex $tagListDUT2 $tCount]
             set tag_id($i) [<a name="::snmpCreateTag(5)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session2 -tagid $tagNo \
                                           -fd $filePt]
             <a name="::snmpAddPortToVlan(15)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                  -port [<a name="::MapDUTPortId(38)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -tagid $tag_id($i) -fd $filePt
         } else {
             <a name="::snmpAddPortToVlan(16)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                     -port [<a name="::MapDUTPortId(39)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -fd $filePt
         }
         <span class="comment-line"># ---- Enable RIP on the vlan</span>
         <a name="::snmpEnableRIPIf(5)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session2 -ipa $addr($i)
         <a name="::snmpVerifyRIPconfig(2)"><a href="./snmpRiplib.tcl.html#::snmpVerifyRIPconfig_350">::snmpVerifyRIPconfig</a></a> -session $session2 -vlanid $vlan_id($i) \
                -ipa &#34;$addr($i)&#34; -forwarding &#34;enable&#34; -ripStatus &#34;enable&#34;
      }

      <a name="::SendACmd(122)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F1:00:00:01 vlan1 ports \
                                                          [<a name="::MapDUTPortId(40)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9 2]&#34;
      <a name="::SendACmd(123)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F2:00:00:01 vlan2 ports \
                                                          [<a name="::MapDUTPortId(41)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 10 2]&#34;
      <a name="::SendACmd(124)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F3:00:00:01 vlan3 ports \
                                                          [<a name="::MapDUTPortId(42)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 11 2]&#34;
      <a name="::SendACmd(125)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F4:00:00:01 vlan4 ports \
                                                          [<a name="::MapDUTPortId(43)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 12 2]&#34;
   } else {

      set i 1
      set vlan_id($i) [<a name="::snmpCreateVlan(8)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session2 -name &#34;vlan$i&#34; \
                                      -fd $filePt]
      <a name="::snmpAssignIPAddrToVlan(8)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
               -addr $addr($i) -forwarding 1 -mask $mask($i) -fd $filePt

      set tCount [expr $i - 1]

      if { [lindex $wTagDUT2 $tCount] == &#34;true&#34; } {
          set tagNo [lindex $tagListDUT2 $tCount]
          set tag_id($i) [<a name="::snmpCreateTag(6)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session2 -tagid $tagNo \
                                        -fd $filePt]
          <a name="::snmpAddPortToVlan(17)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
               -port [<a name="::MapDUTPortId(44)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -tagid $tag_id($i) -fd $filePt
      } else {
          <a name="::snmpAddPortToVlan(18)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                  -port [<a name="::MapDUTPortId(45)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9-12 2] -fd $filePt
      }
      <span class="comment-line"># ---- Enable RIP on the vlan</span>
      <a name="::snmpEnableRIPIf(6)"><a href="./snmpRiplib.tcl.html#::snmpEnableRIPIf_29">::snmpEnableRIPIf</a></a> -session $session2 -ipa $addr($i)
      <a name="::snmpVerifyRIPconfig(3)"><a href="./snmpRiplib.tcl.html#::snmpVerifyRIPconfig_350">::snmpVerifyRIPconfig</a></a> -session $session2 -vlanid $vlan_id($i) \
             -ipa &#34;$addr($i)&#34; -forwarding &#34;enable&#34; -ripStatus &#34;enable&#34;

      <a name="::SendACmd(126)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F1:00:00:01 vlan1 ports \
                                                         [<a name="::MapDUTPortId(46)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 9 2]&#34;
      <a name="::SendACmd(127)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F2:00:00:01 vlan1 ports \
                                                         [<a name="::MapDUTPortId(47)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 10 2]&#34;
      <a name="::SendACmd(128)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F3:00:00:01 vlan1 ports \
                                                         [<a name="::MapDUTPortId(48)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 11 2]&#34;
      <a name="::SendACmd(129)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F4:00:00:01 vlan1 ports \
                                                         [<a name="::MapDUTPortId(49)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 12 2]&#34;
   }

   for {set i 0} {$i &lt;4} {incr i} {
      set ipaddr [lindex $dIpAddrList $i]
      set network [lindex $dNetwork $i]
      set j [expr $i+1]
      <a name="::snmpCreateIpArpEntry(4)"><a href="./snmpL3Lib.tcl.html#::snmpCreateIpArpEntry_69">::snmpCreateIpArpEntry</a></a> -session $session2 -network $network \
                        -ipaddr $ipaddr -mac &#34;00:A3:F$j:00:00:01&#34; -fd $filePt
   }


   if {$mode == &#34;unicast&#34;} {
      <a name="::SendACmd(130)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable rip&#34;
   } else {
      <a name="::SendACmd(131)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable igmp&#34;
      <a name="::SendACmd(132)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;con igmp snooping timer 1000 1000&#34;
      <a name="::SendACmd(133)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;con igmp 500 10 1&#34;
      <a name="::SendACmd(134)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable igmp snooping&#34;
      <a name="::SendACmd(135)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable rip&#34;
      <a name="::SendACmd(136)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable ipmcforwarding&#34;
      <a name="::SendACmd(137)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config pim add vlan all&#34;
      <a name="::SendACmd(138)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;enable pim&#34;
   }

}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpQosTestCleanup   </span>
<span class="comment-line"># Description:  Clean up the QOS config set up by snmpQosTestSetup                   </span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#     snmpQosTestCleanup -session1 $sessionid1 -session2 $sessionid2 </span>
<span class="comment-line">#                        -retlist $retList -mode $mode -vlanDUT1 $vlanDUT1 </span>
<span class="comment-line">#                        -sIpAddrList $sIpAddrList     </span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpQosTestCleanup_1946">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpQosTestCleanup">::::snmpQosTestCleanup</a></a></strong> {args} {
   <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpQosTestCleanup $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     retlist  &#34;&#34;
     mode &#34;unicast&#34;
     vlanDUT1 &#34;multiple&#34;
     vlanDUT2 &#34;multiple&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sNetwork &#34;192.10.1.1 192.10.2.1 192.10.3.1 192.10.4.1&#34;
     dNetwork &#34;192.20.1.1 192.20.2.1 192.20.3.1 192.20.4.1&#34;
     vlanDUT1IpAddrList &#34;192.10.1.1 192.10.2.1 192.10.3.1 192.10.4.1&#34;
     vlanDUT2IpAddrList &#34;192.20.1.1 192.20.2.1 192.20.3.1 192.20.4.1&#34;
     wTagDUT1 &#34;false false false false&#34;
     wTagDUT2 &#34;false false false false&#34;
     tagListDUT1 &#34;10 20 30 40&#34;
     tagListDUT2 &#34;10 20 30 40&#34;
     filePt &#34;NULL&#34;
     }
   global DUT1_CONNECT
<span class="comment-line">#   Login $DUT1_CONNECT $filePt</span>
<a name="::Login(10)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT1_CONNECT
   set vlan_idc [<a name="::snmpUtilGetVlanIfIndexFromName(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session1 &#34;common&#34;]
   <a name="::snmpDisableRIPIf(1)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session1 -ipa &#34;192.207.38.1&#34;
   <a name="::snmpDelIPAddrFromVlan(5)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_idc
   <a name="::snmpDelPortFromVlan(9)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_idc \
                       -port [<a name="::::GetATrunkPort(24)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] -fd $filePt
   <a name="::snmpDeleteVlan(5)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_idc

   if {$vlanDUT1 == &#34;multiple&#34;} {
      for {set i 1} {$i &lt;= 4} {incr i 1} {

         set tCount [expr $i - 1]
         set tPort [expr $i + 8]

<span class="comment-line">#         SendACmd	&#34;config iparp del [lindex $sIpAddrList $tCount]&#34;</span>
         set ipaddr [lindex $sIpAddrList $tCount]
         set network [lindex $sNetwork $tCount]
         <a name="::snmpDeleteIpArpEntry(3)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session1 -network $network \
                              -ipaddr $ipaddr

         set addr($i) [lindex $vlanDUT1IpAddrList $tCount]

         set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(2)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session1 &#34;vlan$i&#34;]
      
         <a name="::snmpDisableRIPIf(2)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session1 -ipa &#34;$addr($i)&#34;

         <a name="::snmpDelIPAddrFromVlan(6)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id($i)

         if { [lindex $wTagDUT1 $tCount] == &#34;true&#34; } { 
            set tagNo [lindex $tagListDUT1 $tCount]
            set tag_id($i) [<a name="::snmpUtilGetTagIndexFromTag(1)"><a href="./snmplib.tcl.html#::snmpUtilGetTagIndexFromTag_2485">::snmpUtilGetTagIndexFromTag</a></a> $session1 $tagNo]
            <a name="::snmpDelPortFromVlan(10)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(50)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $i] -tagid $tag_id($i) -fd $filePt
            <a name="::snmpDeleteTag(3)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session1 -tagid $tag_id($i) -fd $filePt
         } else {
            <a name="::snmpDelPortFromVlan(11)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(51)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $i] -fd $filePt
         }

         <a name="::snmpDeleteVlan(6)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id($i)
      }
   } else {

         set i 1
         set tCount [expr $i - 1]
         set tPort [expr $i + 8]

<span class="comment-line">#         SendACmd	&#34;config iparp del [lindex $sIpAddrList $tCount]&#34;</span>
         set ipaddr [lindex $dIpAddrList $tCount]
         set network [lindex $dNetwork $tCount]
         <a name="::snmpDeleteIpArpEntry(4)"><a href="./snmpL3Lib.tcl.html#::snmpDeleteIpArpEntry_140">::snmpDeleteIpArpEntry</a></a> -session $session2 -network $network \
                              -ipaddr $ipaddr

         set addr($i) [lindex $vlanDUT1IpAddrList $tCount]

         set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(3)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session1 &#34;vlan$i&#34;]
      
         <a name="::snmpDisableRIPIf(3)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session1 -ipa &#34;$addr($i)&#34;

         <a name="::snmpDelIPAddrFromVlan(7)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session1 -vlanid $vlan_id($i)

         if { [lindex $wTagDUT1 $tCount] == &#34;true&#34; } { 
            set tagNo [lindex $tagListDUT1 $tCount]
            set tag_id($i) [<a name="::snmpUtilGetTagIndexFromTag(2)"><a href="./snmplib.tcl.html#::snmpUtilGetTagIndexFromTag_2485">::snmpUtilGetTagIndexFromTag</a></a> $session1 $tagNo]
            <a name="::snmpDelPortFromVlan(12)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(52)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -tagid $tag_id($i) -fd $filePt
            <a name="::snmpDeleteTag(4)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session1 -tagid $tag_id($i) -fd $filePt
         } else {
            <a name="::snmpDelPortFromVlan(13)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session1 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(53)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1-4] -fd $filePt
         }

         <a name="::snmpDeleteVlan(7)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session1 -vlanid $vlan_id($i)
   }

if {$mode == &#34;unicast&#34;} {
   <a name="::SendACmd(139)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable rip&#34;
} else {
   <a name="::SendACmd(140)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable igmp&#34;
   <a name="::SendACmd(141)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable igmp snooping&#34;
   <a name="::SendACmd(142)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable ipmcforwarding&#34;
   <a name="::SendACmd(143)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config pim del vlan all&#34;
   <a name="::SendACmd(144)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable pim&#34;
}


   global DUT2_CONNECT
<span class="comment-line">#   Login $DUT2_CONNECT $filePt</span>
 <a name="::Login(11)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUT2_CONNECT

   set vlan_idc [<a name="::snmpUtilGetVlanIfIndexFromName(4)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session2 &#34;common&#34;]
   <a name="::snmpDisableRIPIf(4)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session2 -ipa &#34;192.207.38.2&#34;
   <a name="::snmpDelIPAddrFromVlan(8)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_idc
   <a name="::snmpDelPortFromVlan(14)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_idc \
                       -port [<a name="::::GetATrunkPort(25)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 2 1 1] -fd $filePt
   <a name="::snmpDeleteVlan(8)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_idc

   if {$vlanDUT2 == &#34;multiple&#34;} {
      
      for {set i 1} {$i &lt;= 4} {incr i 1} {

         set tCount [expr $i - 1]
         set tPort [expr $i + 8]

         <a name="::SendACmd(145)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList $tCount]&#34;
         <a name="::SendACmd(146)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F$i:00:00:01 vlan vlan$i&#34;

         set addr($i) [lindex $vlanDUT2IpAddrList $tCount]

         set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(5)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session2 &#34;vlan$i&#34;]
      
         <a name="::snmpDisableRIPIf(5)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session2 -ipa &#34;$addr($i)&#34;

         <a name="::snmpDelIPAddrFromVlan(9)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id($i)

         if { [lindex $wTagDUT2 $tCount] == &#34;true&#34; } { 
            set tagNo [lindex $tagListDUT2 $tCount]
            set tag_id($i) [<a name="::snmpUtilGetTagIndexFromTag(3)"><a href="./snmplib.tcl.html#::snmpUtilGetTagIndexFromTag_2485">::snmpUtilGetTagIndexFromTag</a></a> $session2 $tagNo]
            <a name="::snmpDelPortFromVlan(15)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(54)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -tagid $tag_id($i) -fd $filePt
            <a name="::snmpDeleteTag(5)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session2 -tagid $tag_id($i) -fd $filePt
         } else {
            <a name="::snmpDelPortFromVlan(16)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                    -port [<a name="::MapDUTPortId(55)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -fd $filePt
         }

         <a name="::snmpDeleteVlan(9)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id($i)
      }
   } else {

      for {set i 1} {$i &lt;= 4} {incr i 1} {
         set tCount [expr $i - 1]
         <a name="::SendACmd(147)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config iparp del [lindex $dIpAddrList $tCount]&#34;
         <a name="::SendACmd(148)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F$i:00:00:01 vlan vlan1&#34;
      }
   
      set i 1
      set tCount [expr $i - 1]
      set tPort [expr $i + 8]

      set addr($i) [lindex $vlanDUT2IpAddrList $tCount]

      set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(6)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session2 &#34;vlan$i&#34;]
      
      <a name="::snmpDisableRIPIf(6)"><a href="./snmpRiplib.tcl.html#::snmpDisableRIPIf_78">::snmpDisableRIPIf</a></a> -session $session2 -ipa &#34;$addr($i)&#34;

      <a name="::snmpDelIPAddrFromVlan(10)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session2 -vlanid $vlan_id($i)

      if { [lindex $wTagDUT2 $tCount] == &#34;true&#34; } { 
         set tagNo [lindex $tagListDUT2 $tCount]
         set tag_id($i) [<a name="::snmpUtilGetTagIndexFromTag(4)"><a href="./snmplib.tcl.html#::snmpUtilGetTagIndexFromTag_2485">::snmpUtilGetTagIndexFromTag</a></a> $session2 $tagNo]
         <a name="::snmpDelPortFromVlan(17)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                 -port [<a name="::MapDUTPortId(56)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -tagid $tag_id($i) -fd $filePt
         <a name="::snmpDeleteTag(6)"><a href="./snmplib.tcl.html#::snmpDeleteTag_1282">::snmpDeleteTag</a></a> -session $session2 -tagid $tag_id($i) -fd $filePt
      } else {
         <a name="::snmpDelPortFromVlan(18)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session2 -vlanid $vlan_id($i) \
                 -port [<a name="::MapDUTPortId(57)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> $tPort 2] -fd $filePt
      }

      <a name="::snmpDeleteVlan(10)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session2 -vlanid $vlan_id($i)
   }

if {$mode == &#34;unicast&#34;} {
   <a name="::SendACmd(149)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable rip&#34;
} else {
   <a name="::SendACmd(150)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable igmp&#34;
   <a name="::SendACmd(151)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable igmp snooping&#34;
   <a name="::SendACmd(152)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>     &#34;uncon igmp&#34;
   <a name="::SendACmd(153)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable ipmcforwarding&#34;
   <a name="::SendACmd(154)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;config pim del vlan all&#34;
   <a name="::SendACmd(155)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable pim&#34;
   <a name="::SendACmd(156)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;disable rip&#34;
}

}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: snmpConfigMatrix   </span>
<span class="comment-line"># Description:  Send IP stream from a list of ports after acess-list or port/vlan/fdb</span>
<span class="comment-line">#		are configured per qosType</span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#  	snmpConfigMatrix -priList $priList -portIdTxList $portIdTxList -qosType $qosType \</span>
<span class="comment-line">#		     -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList -sPortList $sPortList \</span>
<span class="comment-line">#                    -dPortList $dPortList -TOSList $TOSList -tagList $tagList \</span>
<span class="comment-line">#		     -destMacAddrTxList $destMacAddrTxList -ipProtocol $ipProtocol    </span>
<span class="comment-line"># Category: SetupSwitch, SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::snmpConfigMatrix_2159">proc <a href="snmpCheckBandwidthMatrices.tcl-annot.html#::::snmpConfigMatrix">::::snmpConfigMatrix</a></a></strong> {args} {
   <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpConfigMatrix $args {
     session1 &#34;&#34;
     session2 &#34;&#34;
     priList &#34;0 1 2 3&#34;
     portIdTxList &#34;1 2 3 4&#34;
     qosType &#34;802.1p&#34;
     destMacAddrTxList &#34;DUTMac&#34;
     sIpAddrList &#34;192.10.1.2 192.10.2.2 192.10.3.2 192.10.4.2&#34;
     dIpAddrList &#34;192.20.1.2 192.20.2.2 192.20.3.2 192.20.4.2&#34;
     sPortList &#34;0 0 0 0&#34;
     dPortList &#34;0 0 0 0&#34;
     TOSList &#34;0x00 0x00 0x00 0x00&#34;
     tagList &#34;none none none none&#34;
     ipProtocol &#34;ip&#34;
   }
   global startCardNum
   global DUTs_info
   global DUTs_Slot_info

   set 10GigSlot 0
<span class="comment-line">#   for {set i 1} {$i&lt;=$DUTs_info(DUT1,numSlots)} {incr i} {</span>
<span class="comment-line">#      if {[regexp -nocase &#34;10Gig&#34; $DUTs_Slot_info(DUT1,slot$i,hwModType)]} {</span>
<span class="comment-line">#         set 10GigSlot 1</span>
<span class="comment-line">#         break</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#   }</span>

   if {$10GigSlot} {
      <span class="comment-line"># ---- Call 10Gig qos routine</span>
      return [<a name="::configMatrix10Gig(1)"><a href="./CheckBandwidthMatrices10G.tcl.html#::configMatrix10Gig_730">::configMatrix10Gig</a></a> -session1 $session1 -session2 $session2 \
                -priList $priList -portIdTxList $portIdTxList \
                -qosType $qosType -destMacAddrTxList $destMacAddrTxList \
                -sIpAddrList $sIpAddrList -dIpAddrList $dIpAddrList \
                -sPortList $sPortList -dPortList $dPortList -TOSList $TOSList \
                -tagList $tagList -ipProtocol $ipProtocol]
   }
   set pPattern &#34;5678&#34;
   
   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(15)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      <a name="::ixStopPortTransmit(2)"><a href="./mapping.tcl.html#::ixStopPortTransmit_103">::ixStopPortTransmit</a></a>  $txChas $txCard $txPort  
   }

   set QPa &#34;QP[expr [lindex $priList 0]+1]&#34;
   set QPb &#34;QP[expr [lindex $priList 1]+1]&#34;
   set QPc &#34;QP[expr [lindex $priList 2]+1]&#34;
   set QPd &#34;QP[expr [lindex $priList 3]+1]&#34;

   switch $qosType {
      &#34;port&#34; {
         <a name="::SendACmd(157)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(58)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 1] qosprofile $QPa&#34;
         <a name="::SendACmd(158)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(59)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 2] qosprofile $QPb&#34;
         <a name="::SendACmd(159)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(60)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 3] qosprofile $QPc&#34;
         <a name="::SendACmd(160)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;conf port [<a name="::MapDUTPortId(61)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> 4] qosprofile $QPd&#34;
      }
      &#34;mac&#34; {
         <a name="::SendACmd(161)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F1:00:00:01 vlan vlan1&#34;
         <a name="::SendACmd(162)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F2:00:00:01 vlan vlan1&#34;
         <a name="::SendACmd(163)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F3:00:00:01 vlan vlan1&#34;
         <a name="::SendACmd(164)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;delete fdbentry 00:A3:F4:00:00:01 vlan vlan1&#34;
         <a name="::SendACmd(165)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F1:00:00:01 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(26)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPa&#34;
         <a name="::SendACmd(166)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F2:00:00:01 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(27)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPb&#34;
         <a name="::SendACmd(167)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F3:00:00:01 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(28)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPc&#34;
         <a name="::SendACmd(168)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>	&#34;create fdbentry 00:A3:F4:00:00:01 vlan vlan1 \
                                port [<a name="::::GetATrunkPort(29)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> 1 2 1] qosprofile $QPd&#34;
      }
      &#34;vlan&#34; {
         set QPT(1) $QPa
         set QPT(2) $QPb
         set QPT(3) $QPc
         set QPT(4) $QPd

         for {set i 1} {$i &lt;= 4} {incr i 1} {
            set vlan_id($i) [<a name="::snmpUtilGetVlanIfIndexFromName(7)"><a href="./snmplib.tcl.html#::snmpUtilGetVlanIfIndexFromName_2447">::snmpUtilGetVlanIfIndexFromName</a></a> $session1 &#34;vlan$i&#34;]
            <a name="::snmpConfigVlanQos(1)"><a href="./snmpQOSLib.tcl.html#::snmpConfigVlanQos_428">::snmpConfigVlanQos</a></a> -session $session1 -name $QPT($i) \
                              -vlanindex $vlan_id($i) -comment &#34;configuring \
                               QOS profile $QPT($i) for vlan$i&#34;
         }

      }
      &#34;10.1.1&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(1)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(1)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(2)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(3)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(4)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(1)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                             -destaddrst 0.0.0.0 -destaddrend 255.255.255.255 \
                             -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                             -profindex $profIndex
         }

      }
      &#34;10.1.2&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(2)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(2)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(5)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(6)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(7)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(8)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(2)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                             -destaddrst 192.20.$i.2 -destaddrend 192.20.$i.2 \
                             -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                             -profindex $profIndex
         }

      }
      &#34;10.1.4&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(3)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(3)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(9)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(10)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(11)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(12)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
            }
            <a name="::snmpCreateQosAcl(3)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.$i.0 -destaddrend 192.20.$i.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.1.5&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(4)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(4)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(13)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set dPort 81
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(14)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set dPort 82
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(15)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(16)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set dPort 84
            }
            <a name="::snmpCreateQosAcl(4)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -protocol 3 -destl4st $dPort -srcaddrst 192.10.1.0 \
                            -srcaddrend 192.10.1.255 -profindex $profIndex
         }

      }
      &#34;10.1.6&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(5)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(5)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(17)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set sPort 51
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(18)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set sPort 52
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(19)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set sPort 53
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(20)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set sPort 54
            }
            <a name="::snmpCreateQosAcl(5)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 3 -srcl4st $sPort -profindex $profIndex
         }
      }
      &#34;10.1.7&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(6)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(6)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(21)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set dPort 81
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(22)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set dPort 82
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(23)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(24)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set dPort 84
            }
            <a name="::snmpCreateQosAcl(6)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst 192.20.1.0 -destaddrend 192.20.1.255 \
                            -protocol 2 -destl4st $dPort -srcaddrst 192.10.1.0 \
                            -srcaddrend 192.10.1.255 -profindex $profIndex
         }
      }
      &#34;10.2.1&#34; {
         
         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(7)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(7)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(25)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(26)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(27)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(28)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
            }
            <a name="::snmpCreateQosAcl(7)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.3 -destaddrend $net.1.2.3 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.2&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(8)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(8)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(29)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(30)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(31)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(32)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
            }
            <a name="::snmpCreateQosAcl(8)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.3 -destaddrend $net.1.2.3 \
                            -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.3&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(9)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(9)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(33)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set netst 225.0.0.0
               set netend 225.255.255.255
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(34)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set netst 226.1.0.0
               set netend 226.1.255.255
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(35)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set netst 227.1.2.0
               set netend 227.1.2.255
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(36)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set netst 228.0.0.0
               set netend 228.255.255.255
            }
            <a name="::snmpCreateQosAcl(9)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $netst -destaddrend $netend \
                            -srcaddrst 192.10.$i.0 -srcaddrend 192.10.$i.255 \
                            -profindex $profIndex
         }
      }
      &#34;10.2.4&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(10)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(10)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(37)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               dPort 81
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(38)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               dPort 82
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(39)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(40)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               dPort 84
            }
            <a name="::snmpCreateQosAcl(10)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -destl4st $dPort -profindex $profIndex
         }
      }
      &#34;10.2.5&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(11)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(11)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(41)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               sPort 51
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(42)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               sPort 52
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(43)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               sPort 53
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(44)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               sPort 54
            }
            <a name="::snmpCreateQosAcl(11)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -srcl4st $sPort -profindex $profIndex
         }
      }
      &#34;10.2.6&#34; {

         for {set i 1} {i<=4} {incr i} {
            set listIndex($i) [<a name="::snmpGetQosACLIndexFromName(12)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosACLIndexFromName_71">::snmpGetQosACLIndexFromName</a></a> $session1 \
                                                        &#34;permitList$i&#34;]
            <a name="::snmpDeleteQosAcl(12)"><a href="./snmpQOSLib.tcl.html#::snmpDeleteQosAcl_791">::snmpDeleteQosAcl</a></a> -session $session1 -index $listIndex($i)
            if {$i == 1} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(45)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPa]
               set net 225
               sPort 51
               dPort 81
            } elseif {$i == 2} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(46)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPb]
               set net 226
               sPort 52
               dPort 82
            } elseif {$i == 3} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(47)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPc]
               set net 227
               sPort 53
               dPort 83
            } elseif {$i == 4} {
               set profIndex [<a name="::snmpGetQosProfileIndexFromName(48)"><a href="./snmpQOSLib.tcl.html#::snmpGetQosProfileIndexFromName_27">::snmpGetQosProfileIndexFromName</a></a> $session1 $QPd]
               set net 228
               sPort 54
               dPort 84
            }
            <a name="::snmpCreateQosAcl(12)"><a href="./snmpQOSLib.tcl.html#::snmpCreateQosAcl_607">::snmpCreateQosAcl</a></a> -session $sessionid1 -name &#34;permitList$i&#34; \
                            -destaddrst $net.1.2.0 -destaddrend $net.1.2.255 \
                            -srcaddrst 192.10.1.0 -srcaddrend 192.10.1.255 \
                            -protocol 2 -srcl4st $sPort -destl4st $dPort \
                            -profindex $profIndex
         }
      }
      default {
      }
   }

   foreach portIdTx $portIdTxList {
      <a name="::MapIxiaPortId(16)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdTx txChas txCard txPort
      set portIdRx [expr $portIdTx + 8]
      <a name="::MapIxiaPortId(17)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portIdRx rxChas rxCard rxPort   
      set sIpAddr [lindex $sIpAddrList [expr $portIdTx - 1] ]
      set dIpAddr [lindex $dIpAddrList [expr $portIdTx - 1] ]
      set sPort [lindex $sPortList [expr $portIdTx - 1] ]
      set dPort [lindex $dPortList [expr $portIdTx - 1] ]
      set TOS [lindex $TOSList [expr $portIdTx - 1] ]
      set tag [lindex $tagList [expr $portIdTx - 1] ]
      set wTag &#34;true&#34;
      if { $tag == &#34;none&#34; } { set wTag &#34;false&#34; }
      set priority [lindex $priList [expr $portIdTx - 1] ]
      if {$destMacAddrTxList == &#34;DUTMac&#34;} {
         global DUTs_info
         set destMacAddrTx $DUTs_info(DUT1,sysMAC)
      } else {
         set destMacAddrTx [lindex $destMacAddrTxList [expr $portIdTx - 1] ]
      }
      <span class="comment-line">#send a continuous ip stream</span>
      set frameSent [<a name="::ixiaConf_2Ports_ip(3)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a>	-txChas $txChas -txCard $txCard \
                       -txPort $txPort \
                       -rxChas $rxChas -rxCard $rxCard -rxPort $rxPort  \
                       -startCardNum $startCardNum -dataPattern $pPattern \
                       -streamType &#34;contPacket&#34; -percentage 100 -TOS $TOS \
                       -frameSizeType &#34;sizeRandom&#34; -ipProtocol $ipProtocol \
                       -pDstPort $dPort -pSrcPort $sPort \
                       -dMacAddr $destMacAddrTx -sIpAddr $sIpAddr \
                       -dIpAddr $dIpAddr -wTag $wTag -tagNo $tag \
                       -userPriority $priority ]
      <span class="comment-line">#wait for things to settle down</span>
      <a name="::exSleep(11)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 3
   }
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
