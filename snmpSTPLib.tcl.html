<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpSTPLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpSTPLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpSTPLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpSTPLib.tcl-annot.html">annotations</a> | <a href="snmpSTPLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>

<span class="comment-line">########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckStpdParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the stpd parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session        - Session identifier which identifies the connection</span>
<span class="comment-line">#                     with the DUT</span>
<span class="comment-line">#    name           - Stp domain name </span>
<span class="comment-line">#    rootcost       - Root Path Cost </span>
<span class="comment-line">#    bmaxage        - Bridge MaxAge </span>
<span class="comment-line">#    bhellotime     - Bridge Hello Time </span>
<span class="comment-line">#    bforwarddelay  - Bridge Forward Delay </span>
<span class="comment-line">#    holdtime       - Stpd Domain Hold Time</span>
<span class="comment-line">#    dmaxage        - Domain MaxAge </span>
<span class="comment-line">#    dhellotime     - Domain Hello Time </span>
<span class="comment-line">#    dforwarddelay  - Domain Forward Delay </span>
<span class="comment-line">#    bridgeid       - Domain Bridge Id</span>
<span class="comment-line">#    designatedroot - Stpd Domain Designated Root</span>
<span class="comment-line">#    priority       - Bridge priority </span>
<span class="comment-line">#    ports          - Physical port for which entry contains STP info.</span>
<span class="comment-line">#    portstate      - Port state of this port number in this STPD</span>
<span class="comment-line">#    portpriority   - Port priority of this port number in this STPD</span>
<span class="comment-line">#    rootport       - Port of the root port of this bridge for this STPD</span>
<span class="comment-line">#    numports       - Number of physical ports belonging to this STPD</span>
<span class="comment-line">#    stpstate       - Enabled/Disabled state of STP on this STPD</span>
<span class="comment-line">#    portmode       - Port mode of this port in this STPD</span>
<span class="comment-line">#    rstpstatus     - Enabled/Disabled state of Rapid STP in this STPD</span>
<span class="comment-line">#    stptag         - StpId of this STPD which appears as the 802.1Q tag</span>
<span class="comment-line">#    rrfailover     - Enabled/Disabled state of Rapid Root Failover for </span>
<span class="comment-line">#                     this bridge on this STPD</span>
<span class="comment-line">#    topchanges     - The number of topology changes detected by this bridge</span>
<span class="comment-line">#    timesincetop   - The time since a topology changes was last</span>
<span class="comment-line">#                     detected by this bridge</span>
<span class="comment-line">#    portstpstate   - Enabled/Disabled state of this STP instance on this port</span>
<span class="comment-line">#    portpathcost   - Port mode of this port in this STPD</span>
<span class="comment-line">#    portdescost    - Path cost for this STPD, of the Designated Port</span>
<span class="comment-line">#    portdesroot    - Root bridge identifier, for this STPD</span>
<span class="comment-line">#    portdesbridge  - Bridge identifier for the bridge considered to be </span>
<span class="comment-line">#                     Designated Bridge</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd              - File descriptor of open log file   </span>
<span class="comment-line">#    comment         - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckStpdParameters -session $sessionid -name &#34;spanname1&#34;</span>
<span class="comment-line">#                            -rootcost 0 -ports 2:5 -portpriority 3</span>
<span class="comment-line">#                            -portmode &#34;emistp&#34;</span>
<span class="comment-line">##########################################################################</span>

<strong><a name="::::snmpCheckStpdParameters_62">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckStpdParameters">::::snmpCheckStpdParameters</a></a></strong> { args } {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckStpdParameters $args {
       session        &#34;&#34;
       name           &#34;&#34;
       rootcost       &#34;&#34;
       bmaxage        &#34;&#34;
       bhellotime     &#34;&#34;
       bforwarddelay  &#34;&#34;
       dmaxage        &#34;&#34;
       dhellotime     &#34;&#34;
       dforwarddelay  &#34;&#34;
       holdtime       &#34;&#34;
       bridgeid       &#34;&#34;
       designatedroot &#34;&#34;
       priority       &#34;&#34;
       ports          &#34;&#34;
       portstate      &#34;&#34;
       portpriority   &#34;&#34;
       rootport       &#34;&#34;
       numports       &#34;&#34;
       stpstate       &#34;&#34;
       portmode       &#34;&#34;
       rstpstatus     &#34;&#34;
       stpdtag        &#34;&#34;
       rrfailover     &#34;&#34;
       topchanges     &#34;&#34;
       timesincetop   &#34;&#34;
       portstpstate   &#34;&#34;
       portpathcost   &#34;&#34;
       portdescost    &#34;&#34;
       portdesroot    &#34;&#34;
       portdesbridge  &#34;&#34;
       fd             &#34;NULL&#34;
       comment        &#34;snmpCheckStpdParameters&#34;
    }
 
    set func &#34;snmpCheckStpdParameters:&#34; 
    set retVal 0
    set MAX_STPDS 512

    if { $session == &#34;&#34; || $name == &#34;&#34; } {
       error &#34;$func SNMP session id, STP Domain name must be specified&#34;
       return $retVal 
    }   
    if { $ports != &#34;&#34; } {
       set ports [<a name="::snmpUtilParsePortList(1)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $ports]
    }

    <a name="::snmpDebug(1)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, STP Domain name is $name &#34; $fd
    <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking STP Domain parameters for $name --&#34;

    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;
    
    <span class="comment-line"># --- Check for the STPD name</span>
    set instance 1
    if { $name != &#34;&#34; } {
       if { $name != &#34;s0&#34; } {
          while {$instance &lt;= $MAX_STPDS} {
             set result [snmpGet -session $session \
                                 -oid extremeStpDomainStpdName.$instance]
             <a name="::snmpDebug(2)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
             set stpdInstance [<a name="::snmpUtilGetVal(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> str $result]
             if {[string compare [string tolower $name] \
                                 [string tolower $stpdInstance]] == 0} {
                break
             } else {
                <a name="::snmpDebug(3)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;The STP Domain Name $stpdInstance&#34; $fd
             }
             incr instance
          }   
        }
        if { $instance == $MAX_STPDS } {
           <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Rao snmpGet- Error, Timed-out&#34;
           return $retVal
        }
    }

    <span class="comment-line"># --- Check for the STPD time since topology changes</span>
    if { $timesincetop != &#34;&#34; } {
        set result [snmpGet -session $session \
                        -oid extremeStpDomainTimeSinceTopologyChange.$instance]
        <a name="::snmpDebug(4)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set topCVal [expr [<a name="::snmpUtilGetVal(2)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> timetick $result] / 100]
        set val1 [expr $timesincetop + 4]
        if {$topCVal &lt;= $val1} {
           <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Topology changes since $timesincetop \
                      seconds exists.PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Topology changes \
                         expected $timesincetop but got $topCVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD no. of topology changes</span>
    if { $topchanges != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainTopChanges.$instance]
        <a name="::snmpDebug(5)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set topVal [<a name="::snmpUtilGetVal(3)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
        if {$topchanges == $topVal} {
           <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Topology changes $topchanges exists.PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Topology changes expected \
                         $topchanges but got $topVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD rapid root failover</span>
    if { $rrfailover != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainRRFailoverEnabled.$instance]
        <a name="::snmpDebug(6)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       
        set rrfailVal [<a name="::snmpUtilGetVal(4)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $rrfailVal] \
                           [string tolower $rrfailover]] == 0 } {
           <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Rapid Root Failover state \
                      is $rrfailover exists. PASS&#34;
        } else {
           <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Rapid Root Failover state \
                      expected is $rrfailover but got $rrfailVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD tag</span>
    if { $stpdtag != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainStpdTag.$instance]
        <a name="::snmpDebug(7)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set stpVal [<a name="::snmpUtilGetVal(5)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$stpdtag == $stpVal} {
           <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Stpd Tag $stpdtag exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Stpd Tag expected $stpdtag \
                         but got $stpVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD root cost</span>
    if { $rootcost != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainRootCost.$instance]
        <a name="::snmpDebug(8)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set costVal [<a name="::snmpUtilGetVal(6)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$rootcost == $costVal} {
           <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Root cost $rootcost exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Root cost expected $rootcost \
                         but got $costVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD rapid STP is enabled</span>
    if {$rstpstatus != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainRstpEnabled.$instance]
        <a name="::snmpDebug(9)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set rstpVal [<a name="::snmpUtilGetVal(7)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $rstpVal] \
                           [string tolower $rstpstatus]] == 0 } {
           <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Rapid STP state \
                      is $rstpstatus exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Rapid STP state \
                      expected is $rstpstatus but got $rstpVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD bridge priority</span>
    if { $priority != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainBridgePriority.$instance]
        <a name="::snmpDebug(10)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set priVal [<a name="::snmpUtilGetVal(8)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$priority == $priVal} {
           <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Priority $priority exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Priority expected $priority \
                         but got $priVal. FAIL&#34;
        }
    }


    <span class="comment-line"># --- Check for the STPD maxage</span>
    if { $dmaxage != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainMaxAge.$instance]
        <a name="::snmpDebug(11)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set ageVal [expr [<a name="::snmpUtilGetVal(9)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$dmaxage == $ageVal} {
           <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: MaxAge $dmaxage exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: MaxAge expected $dmaxage \
                         but got $ageVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD bridge maxage</span>
    if { $bmaxage != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainBridgeMaxAge.$instance]
        <a name="::snmpDebug(12)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set ageVal [expr [<a name="::snmpUtilGetVal(10)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$bmaxage == $ageVal} {
           <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Bridge MaxAge $bmaxage exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Bridge MaxAge expected $bmaxage \
                         but got $ageVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD hello time</span>
    if { $dhellotime != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainHelloTime.$instance]
        <a name="::snmpDebug(13)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set helloVal [expr [<a name="::snmpUtilGetVal(11)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$dhellotime == $helloVal} {
           <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: HelloTime $dhellotime exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: HelloTime expected $dhellotime \
                         but got $helloVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD bridge hello time</span>
    if { $bhellotime != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainBridgeHelloTime.$instance]
        <a name="::snmpDebug(14)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set helloVal [expr [<a name="::snmpUtilGetVal(12)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$bhellotime == $helloVal} {
           <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Bridge HelloTime $bhellotime exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Bridge HelloTime expected $bhellotime \
                         but got $helloVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD forward delay</span>
    if { $dforwarddelay != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainForwardDelay.$instance]
        <a name="::snmpDebug(15)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set delayVal [expr [<a name="::snmpUtilGetVal(13)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$dforwarddelay == $delayVal} {
           <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Forward delay $dforwarddelay exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Forward delay expected $dforwarddelay \
                         but got $delayVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD bridge forward delay</span>
    if { $bforwarddelay != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainBridgeForwardDelay.$instance]
        <a name="::snmpDebug(16)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set delayVal [expr [<a name="::snmpUtilGetVal(14)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$bforwarddelay == $delayVal} {
           <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Bridge Forward delay $bforwarddelay \
                      exists.PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Bridge Forward delay expected \
                         $bforwarddelay but got $delayVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD hold time</span>
    if { $holdtime != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainHoldTime.$instance]
        <a name="::snmpDebug(17)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set holdTimeVal [expr [<a name="::snmpUtilGetVal(15)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/ 100]
        if {$holdtime == $holdTimeVal} {
           <a name="::result_ok(14)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: HoldTime $holdtime exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: HoldTime expected $holdtime \
                         but got $holdTimeVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD bridge id</span>
    if { $bridgeid != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainBridgeId.$instance]
        <a name="::snmpDebug(18)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set bridgeVal [<a name="::snmpUtilGetVal(16)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
        set delim &#34;:&#34;
        regsub -all { } $bridgeVal $delim bridgeValue
        set bridgeValue [string trimright $bridgeValue ':']
        if { $bridgeid == $bridgeValue } {
           <a name="::result_ok(15)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Bridge Id $bridgeid exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Bridge Id expected $bridgeid \
                         but got $bridgeValue. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD designated root</span>
    if { $designatedroot != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainDesignatedRoot.$instance]
        <a name="::snmpDebug(19)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set designatedVal [<a name="::snmpUtilGetVal(17)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
        set delim &#34;:&#34;
        regsub -all { } $designatedVal $delim designatedValue
        set designatedValue [string trimright $designatedValue ':']
        if { $designatedroot == $designatedValue } {
           <a name="::result_ok(16)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Designated Root $designatedroot \
                      exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Designated Root expected \
                        $designatedroot but got $designatedValue. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD port state</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portstate != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortPortState.$instance.$ports]
       <a name="::snmpDebug(20)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set portVal [<a name="::snmpUtilGetVal(18)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       if { [string compare [string tolower $portVal] \
                          [string tolower $portstate]] == 0 } {
          <a name="::result_ok(17)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Port state for port#$ports \
                     is $portstate exists. PASS&#34;
       } else {
          <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Port state for port#$ports \
                       expected $portstate but got $portVal. FAIL&#34;
       }
    }
 
    <span class="comment-line"># --- Check for the STPD root port</span>
    if { $rootport != &#34;&#34; } {
       if { $rootport != 0 } {
           set rootport [<a name="::snmpUtilParsePortList(2)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $rootport]
       }
       set result [snmpGet -session $session \
                           -oid extremeStpDomainRootPortIfIndex.$instance]
       <a name="::snmpDebug(21)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set rootVal [<a name="::snmpUtilGetVal(19)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       if {$rootport == $rootVal} {
          <a name="::result_ok(18)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Root port $rootport exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Root port expected $rootport \
                        but got $rootVal. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD number of ports</span>
    if { $numports != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainNumPorts.$instance]
        <a name="::snmpDebug(22)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set portsVal [<a name="::snmpUtilGetVal(20)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$numports == $portsVal} {
           <a name="::result_ok(19)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: Number of ports $numports exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(19)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: Number of ports expected $numports \
                        but got $portsVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD STP state</span>
    if { $stpstate != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid extremeStpDomainStpEnabled.$instance]
        <a name="::snmpDebug(23)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set stpVal [<a name="::snmpUtilGetVal(21)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $stpVal] \
                           [string tolower $stpstate]] == 0 } {
           <a name="::result_ok(20)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Parameter: STP state \
                      is $stpstate exists. PASS&#34;
        } else {
           <a name="::result_error(20)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Parameter: STP state \
                        expected $stpstate but got $stpVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD port designated bridge</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portdesbridge != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortDesignatedBridge.$instance.$ports]
       <a name="::snmpDebug(24)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set rootVal [<a name="::snmpUtilGetVal(22)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       set delim &#34;:&#34;
       regsub -all { } $rootVal $delim rootValue
       set rootValue [string trimright $rootValue ':']
       if { $portdesbridge == $rootValue } {
          <a name="::result_ok(21)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Designated Bridge $portdesbridge \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(21)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Designated Bridge expected \
                        $portdesbridge but got $rootValue. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port designated port</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portdesroot != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortDesignatedRoot.$instance.$ports]
       <a name="::snmpDebug(25)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set rootVal [<a name="::snmpUtilGetVal(23)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       set delim &#34;:&#34;
       regsub -all { } $rootVal $delim rootValue
       set rootValue [string trimright $rootValue ':']
       if { $portdesroot == $rootValue } {
          <a name="::result_ok(22)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Designated root $portdesroot \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(22)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Designated root expected \
                        $portdesroot but got $rootValue. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port designated cost</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portdescost != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortDesignatedCost.$instance.$ports]
       <a name="::snmpDebug(26)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set portVal [<a name="::snmpUtilGetVal(24)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       if {$portdescost == $portVal} {
          <a name="::result_ok(23)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Designated cost is $portdescost \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(23)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Designated cost expected \
                        $portdescost but got $portVal. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port path cost</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portpathcost != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortPathCost.$instance.$ports]
       <a name="::snmpDebug(27)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set pathVal [<a name="::snmpUtilGetVal(25)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       if {$portpathcost == $pathVal} {
          <a name="::result_ok(24)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Path cost is $portpathcost \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(24)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Path cost expected $portpathcost \
                        but got $pathVal. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port STP state</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portstpstate != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortStpEnabled.$instance.$ports]
       <a name="::snmpDebug(28)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stpVal [<a name="::snmpUtilGetVal(26)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       if { [string compare [string tolower $stpVal] \
                          [string tolower $portstpstate]] == 0 } {
          <a name="::result_ok(25)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: STP state on port#$ports \
                     is $portstpstate exists. PASS&#34;
       } else {
          <a name="::result_error(25)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: STP state on port#$ports \
                       expected $portstpstate but got $stpVal. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port priority</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portpriority != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortPortPriority.$instance.$ports]
       <a name="::snmpDebug(29)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
       set portPriVal [<a name="::snmpUtilGetVal(27)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       if {$portpriority == $portPriVal} {
          <a name="::result_ok(26)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Priority $portpriority exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(26)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Priority expected $portpriority \
                        but got $portPriVal. FAIL&#34;
       }
    }

    <span class="comment-line"># --- Check for the STPD port mode of operation</span>
    if { ($ports != &#34;&#34;) &amp;&amp; ($portmode != &#34;&#34;) } {
       set result [snmpGet -session $session \
                           -oid extremeStpPortPortMode.$instance.$ports]
       <a name="::snmpDebug(30)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set modeVal [<a name="::snmpUtilGetVal(28)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       if { [string compare [string tolower $modeVal] \
                          [string tolower $portmode]] == 0 } {
          <a name="::result_ok(27)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD Port Parameter: Port mode on port#$ports \
                     is $portmode exists. PASS&#34;
       } else {
          <a name="::result_error(27)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD Port Parameter: Port mode on port#$ports \
                        expected $portmode but got $modeVal. FAIL&#34;
       }
     }

    <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(31)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetDefaultStpdParameters </span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure sets the stpd &#34;s0&#34; parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session        - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    name           - Stp domain name (s0)</span>
<span class="comment-line">#    priority       - Stp priority </span>
<span class="comment-line">#    ports          - Physical port for which entry contains STP info.</span>
<span class="comment-line">#    portpriority   - Stp port priority </span>
<span class="comment-line">#    portpathcost   - Port to the path cost of path to STP</span>
<span class="comment-line">#    maxage         - Bridge MaxAge used by all the bridges</span>
<span class="comment-line">#    hellotime      - Bridge HelloTime used by all the bridges</span>
<span class="comment-line">#    forwarddelay   - Bridge ForwardDelay used by all the bridges</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd              - File descriptor of open log file   </span>
<span class="comment-line">#    comment         - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetDefaultStpdParameters -session $sessionid -name s0 -priority 1</span>
<span class="comment-line">#                                 -ports 3:4 -portpriority 3</span>
<span class="comment-line">##########################################################################</span>

<strong><a name="::::snmpSetDefaultStpdParameters_620">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpSetDefaultStpdParameters">::::snmpSetDefaultStpdParameters</a></a></strong> { args } {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetDefaultStpdParameters $args {
       session        &#34;&#34;
       name           &#34;&#34;
       priority       &#34;&#34;
       ports          &#34;&#34;
       portpriority   &#34;&#34;
       portpathcost   &#34;&#34;
       maxage         &#34;&#34;
       hellotime      &#34;&#34;
       forwarddelay   &#34;&#34;
       fd             &#34;NULL&#34;
       comment        &#34;snmpSetDefaultStpdParameters&#34;
    }
 
    set func &#34;snmpSetDefaultStpdParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; } {
       error &#34;$func SNMP session id must be specified&#34;
       return $retVal 
    }   

    if { $name != &#34;s0&#34; } {
       error &#34;$func STPD name s0 must be specified&#34;
       return $retVal 
    }   

    if { $ports != &#34;&#34; } {
       set ports [<a name="::snmpUtilParsePortList(3)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $ports &#34;Index&#34;]
     }
    <a name="::snmpDebug(32)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd
    <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setting STP Domain \&#34;s0\&#34; parameters --&#34;

    <span class="comment-line"># --- Set STPD bridge priority</span>
    if { $priority != &#34;&#34; } {
       set result [snmpSet -session $session \
                           -oid dot1dStpPriority.0 \
                           -type i -val $priority] 
       <a name="::snmpDebug(33)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet STPD Priority - $result&#34; $fd
    }

    <span class="comment-line"># --- Set STPD bridge maxage</span>
    if { $maxage != &#34;&#34; } {
       set result [snmpSet -session $session \
                           -oid dot1dStpBridgeMaxAge.0 \
                           -type i -val $maxage] 
       <a name="::snmpDebug(34)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet STPD Bridge MaxAge - $result&#34; $fd
    }

    <span class="comment-line"># --- Set STPD bridge hellotime</span>
    if { $hellotime != &#34;&#34; } {
       set result [snmpSet -session $session \
                           -oid dot1dStpBridgeHelloTime.0 \
                           -type i -val $hellotime] 
       <a name="::snmpDebug(35)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet STPD Bridge HelloTime - $result&#34; $fd
    }

    <span class="comment-line"># --- Set STPD bridge forward delay</span>
    if { $forwarddelay != &#34;&#34; } {
       set result [snmpSet -session $session \
                           -oid dot1dStpBridgeForwardDelay.0 \
                           -type i -val $forwarddelay] 
       <a name="::snmpDebug(36)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet STPD Bridge Forward Delay - $result&#34; $fd
    }

    <span class="comment-line"># --- Set STPD port priority and port path cost</span>
    if { $ports != &#34;&#34; } {
       if { $portpriority != &#34;&#34; } { 
          set result [snmpSet -session $session \
                              -oid dot1dStpPortPriority.$ports \
                              -type i -val $portpriority] 
          <a name="::snmpDebug(37)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet port priority - $result&#34; $fd
        }
       if { $portpathcost != &#34;&#34; } { 
          set result [snmpSet -session $session \
                              -oid dot1dStpPortPathCost.$ports \
                              -type i -val $portpathcost] 
          <a name="::snmpDebug(38)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet port path cost - $result&#34; $fd
        }
    }

    <a name="::snmpDebug(39)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
}

<span class="comment-line">################################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetStpFlagOnVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure enables STP protocol on a vlan with the specified </span>
<span class="comment-line">#  vlan name in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session  - Session identifier which identifies the connection</span>
<span class="comment-line">#               with the DUT</span>
<span class="comment-line">#    name     - Name of the VLAN on which STP is to be enabled</span>
<span class="comment-line">#    status   - Enable/Disable, default set to enable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd       - File descriptor for logging the command outputs</span>
<span class="comment-line">#    comment  - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetStpFlagOnVlan -session $sessionid -vlanid &#34;vl&#34; -status &#34;enable&#34; </span>
<span class="comment-line">################################################################################</span>
<strong><a name="::::snmpSetStpFlagOnVlan_731">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpSetStpFlagOnVlan">::::snmpSetStpFlagOnVlan</a></a></strong> {args} {

    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetStpFlagOnVlan $args {
       session &#34;&#34;
       vlanid  &#34;0&#34;
       status  &#34;enable&#34;
       fd      &#34;NULL&#34;
       comment &#34;snmpSetStpFlagOnVlan&#34;
    }

    set func &#34;snmpSetStpFlagOnVlan:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $vlanid == 0} {
       error &#34;$func session and vlanid must be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(40)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session vlanid-$vlanid - Start&#34; $fd
    <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Enabling STP protocol for this VLAN interface--&#34;

    set value 0
    if {$status == &#34;enable&#34;} {
       set value 1
    } elseif {$status == &#34;disable&#34; } {
       set value 2
    } else {
       <a name="::result_error(28)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;The status should be either enable/disable&#34;
       return $retVal
    }

    set result [snmpSet -session $session \
                        -oid extremeVlanIfIgnoreStpFlag.$vlanid -type i \
                        -val $value]
    set retVal 1

    <a name="::snmpDebug(41)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result - End\n&#34; $fd

    <a name="::snmpDebug(42)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd

    return $retVal
}

<span class="comment-line">################################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetBpduFlagOnVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure enables Bpdu flag on a vlan with the specified</span>
<span class="comment-line">#  vlan name in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session  - Session identifier which identifies the connection</span>
<span class="comment-line">#               with the DUT</span>
<span class="comment-line">#    name     - Name of the VLAN on which BPDU's to be ignored by </span>
<span class="comment-line">#               Spanning Tree process</span>
<span class="comment-line">#    status   - Enable/Disable, default set to enable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd       - File descriptor for logging the command outputs</span>
<span class="comment-line">#    comment  - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetBpduFlagOnVlan -session $sessionid -vlanid &#34;v1&#34; -status &#34;enable&#34;</span>
<span class="comment-line">################################################################################</span>
<strong><a name="::::snmpSetBpduFlagOnVlan_801">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpSetBpduFlagOnVlan">::::snmpSetBpduFlagOnVlan</a></a></strong> {args} {

    <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetBpduFlagOnVlan $args {
       session &#34;&#34;
       vlanid  &#34;0&#34;
       status  &#34;enable&#34;
       fd      &#34;NULL&#34;
       comment &#34;snmpSetBpduFlagOnVlan&#34;
    }

    set func &#34;snmpSetBpduFlagOnVlan:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $vlanid == 0} {
       error &#34;$func session and vlanid must be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(43)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session vlanid-$vlanid - Start&#34; $fd
    <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Enabling VLAN's BPDU's to be ignored by the STP --&#34;

    set value 0
    if {$status == &#34;enable&#34;} {
       set value 1
    } elseif {$status == &#34;disable&#34;} {
       set value 2
    } else {
       <a name="::result_error(29)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;The status should be either enable/disable&#34;
       return $retVal
    }

    set result [snmpSet -session $session \
                        -oid extremeVlanIfIgnoreBpduFlag.$vlanid -type i \
                        -val $value]
    set retVal 1

    <a name="::snmpDebug(44)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result - End\n&#34; $fd

    <a name="::snmpDebug(45)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd

    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDefaultStpdParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the stpd parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session            - Session identifier which identifies the connection</span>
<span class="comment-line">#                         with the DUT</span>
<span class="comment-line">#    name               - Stp domain name </span>
<span class="comment-line">#    protocol           - protocol specification dot1d, dot1w </span>
<span class="comment-line">#    priority           - Bridge priority </span>
<span class="comment-line">#    designatedroot     - Stpd Domain Designated Root</span>
<span class="comment-line">#    rootcost           - Root Path Cost </span>
<span class="comment-line">#    maxage             - STP MaxAge </span>
<span class="comment-line">#    hellotime          - STP Hello Time </span>
<span class="comment-line">#    forwarddelay       - STP Forward Delay </span>
<span class="comment-line">#    bridgemaxage       - Bridge MaxAge </span>
<span class="comment-line">#    bridgehellotime    - Bridge Hello Time </span>
<span class="comment-line">#    bridgeforwarddelay - Bridge Forward Delay </span>
<span class="comment-line">#    holdtime           - Stpd Domain Hold Time</span>
<span class="comment-line">#    topchanges         - Total number of topology changes detected by this </span>
<span class="comment-line">#                         bridge</span>
<span class="comment-line">#    timesincetop       - The time since a topology changes was last</span>
<span class="comment-line">#                         detected by this bridge</span>
<span class="comment-line">#    ports              - Physical port for which entry contains STP info.</span>
<span class="comment-line">#    portpriority       - Port priority of this port number in this STPD</span>
<span class="comment-line">#    portstate          - Port state of this port number in this STPD</span>
<span class="comment-line">#    portstatus         - Port status enable/disable of this port number in </span>
<span class="comment-line">#                         this STPD</span>
<span class="comment-line">#    portpathcost       - Port path cost of this port number in this STPD</span>
<span class="comment-line">#    portdroot          - Port designated root of this port number in this STPD</span>
<span class="comment-line">#    portdcost          - Port designated cost of this port number in this STPD</span>
<span class="comment-line">#    portdbridge        - Port designated bridge of this port number in </span>
<span class="comment-line">#                         this STPD</span>
<span class="comment-line">#    portftransitions   - Number of times the port has transitioned from </span>
<span class="comment-line">#                         learning to forwarding state</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                 - File descriptor of open log file   </span>
<span class="comment-line">#    comment            - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDefaultStpdParameters -session $sessionid -name &#34;s0&#34;</span>
<span class="comment-line">#                                   -priority 4 -maxage 20 -topchanges 1</span>
<span class="comment-line">#                                   -port 2:4 -portstate &#34;listening&#34; </span>
<span class="comment-line">################################################################################</span>

<strong><a name="::::snmpCheckDefaultStpdParameters_900">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDefaultStpdParameters">::::snmpCheckDefaultStpdParameters</a></a></strong> { args } {
    <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDefaultStpdParameters $args {
       session             &#34;&#34;
       name                &#34;&#34;
       <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a>            &#34;&#34;
       priority            &#34;&#34;
       designatedroot      &#34;&#34;
       rootcost            &#34;&#34;
       rootport            &#34;&#34;
       maxage              &#34;&#34;
       hellotime           &#34;&#34;
       forwarddelay        &#34;&#34;
       bridgemaxage        &#34;&#34;
       bridgehellotime     &#34;&#34;
       bridgeforwarddelay  &#34;&#34;
       holdtime            &#34;&#34;
       topchanges          &#34;&#34;
       timesincetop        &#34;&#34;
       ports               &#34;&#34;
       portpriority        &#34;&#34;
       portstate           &#34;&#34;
       portstatus          &#34;&#34;
       portpathcost        &#34;&#34;
       portdroot           &#34;&#34;
       portdcost           &#34;&#34;
       portdbridge         &#34;&#34;
       portftransitions    &#34;&#34;
       fd                  &#34;NULL&#34;
       comment             &#34;snmpCheckDefaultStpdParameters&#34;
    }
 
    set func &#34;snmpCheckDefaultStpdParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $name != &#34;s0&#34; } {
       error &#34;$func SNMP session id, STP Domain name (s0) must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(46)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, STP Domain name is $name&#34; $fd
    <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking STP Domain s0 parameters --&#34;

    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;
    
    <span class="comment-line"># --- Check for the STPD s0 protocol</span>
    if { $protocol != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1dStpProtocolSpecification.0]
        <a name="::snmpDebug(47)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set protoVal [<a name="::snmpUtilGetVal(29)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $protoVal] \
                           [string tolower $protocol]] == 0 } {
           <a name="::result_ok(28)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Protocol is $protocol exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(30)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Protocol \
                        expected $protocol but got $protoVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the STPD s0 since topology changes</span>
    if { $timesincetop != &#34;&#34; } {
        set result [snmpGet -session $session \
                        -oid dot1dStpTimeSinceTopologyChange.0]
        <a name="::snmpDebug(48)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set topCVal [expr [<a name="::snmpUtilGetVal(30)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> timetick $result]/ 100]
        set val1 [expr $timesincetop + 4]
        if {$timesincetop &lt;= $val1} {
           <a name="::result_ok(29)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Topology changes since $timesincetop \
                      exists.PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(31)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Topology changes since \
                         expected $timesincetop but got $topCVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 no. of topology changes</span>
    if { $topchanges != &#34;&#34; } {
         set result [snmpGet -session $session -oid dot1dStpTopChanges.0]
         <a name="::snmpDebug(49)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
         set topVal [<a name="::snmpUtilGetVal(31)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
         if {$topchanges == $topVal} {
            <a name="::result_ok(30)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Topology changes $topchanges \
                       exists. PASS&#34;
            set retVal 1
         } else {
            <a name="::result_error(32)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Topology \
                          changes expected $topchanges but got $topVal. FAIL&#34;
         }
     }

    <span class="comment-line"># --- Check for the STPD s0 priority</span>
    if { $priority != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpPriority.0]
        <a name="::snmpDebug(50)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set priVal [<a name="::snmpUtilGetVal(32)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$priority == $priVal} {
           <a name="::result_ok(31)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Priority $priority exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(33)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Priority expected $priority \
                         but got $priVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 designated root</span>
    if { $designatedroot != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpDesignatedRoot.0]
        <a name="::snmpDebug(51)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set designatedVal [<a name="::snmpUtilGetVal(33)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
        set delim &#34;:&#34;
        regsub -all { } $designatedVal $delim designatedValue
        set designatedValue [string trimright $designatedValue ':']
        if { $designatedroot == $designatedValue } {
           <a name="::result_ok(32)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Designated Root \
                      $designatedroot exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(34)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Designated Root expected \
                         $designatedroot but got $designatedValue. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 root cost</span>
    if { $rootcost != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpRootCost.0]
        <a name="::snmpDebug(52)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set costVal [<a name="::snmpUtilGetVal(34)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$rootcost == $costVal} {
           <a name="::result_ok(33)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Root cost $rootcost exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(35)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Root cost expected $rootcost \
                         but got $costVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 root port</span>
    if { $rootport != &#34;&#34; } {
        set rootport [<a name="::snmpUtilParsePortList(4)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $rootport &#34;Index&#34;]
        set result [snmpGet -session $session -oid dot1dStpRootPort.0]
        <a name="::snmpDebug(53)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set rootVal [<a name="::snmpUtilGetVal(35)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$rootport == $rootVal} {
           <a name="::result_ok(34)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Root port $rootport exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(36)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Root port expected $rootport \
                         but got $rootVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 maxage</span>
    if { $maxage != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpMaxAge.0]
        <a name="::snmpDebug(54)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set ageVal [expr [<a name="::snmpUtilGetVal(36)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result] / 100]
        if {$maxage == $ageVal} {
           <a name="::result_ok(35)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: MaxAge $maxage exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(37)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: MaxAge expected $maxage \
                         but got $ageVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 hello time</span>
    if { $hellotime != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpHelloTime.0]
        <a name="::snmpDebug(55)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set helloVal [expr [<a name="::snmpUtilGetVal(37)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result] / 100]
        if {$hellotime == $helloVal} {
           <a name="::result_ok(36)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: HelloTime $hellotime exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(38)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: HelloTime expected $hellotime \
                         but got $helloVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 forwarddelay</span>
    if { $forwarddelay != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpForwardDelay.0]
        <a name="::snmpDebug(56)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set delayVal [expr [<a name="::snmpUtilGetVal(38)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result] / 100]
        if {$forwarddelay == $delayVal} {
           <a name="::result_ok(37)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Forward Delay $forwarddelay \
                      exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(39)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Forward Delay expected \
                         $forwarddelay but got $delayVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 hold time</span>
    if { $holdtime != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1dStpHoldTime.0]
        <a name="::snmpDebug(57)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set holdTimeVal [expr [<a name="::snmpUtilGetVal(39)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result] / 100]
        if {$holdtime == $holdTimeVal} {
           <a name="::result_ok(38)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: HoldTime $holdtime exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(40)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: HoldTime expected $holdtime \
                         but got $holdTimeVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 bridge maxage</span>
    if { $bridgemaxage != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpBridgeMaxAge.0]
        <a name="::snmpDebug(58)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set ageVal [expr [<a name="::snmpUtilGetVal(40)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/100]
        if {$bridgemaxage == $ageVal} {
           <a name="::result_ok(39)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Bridge MaxAge $maxage exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(41)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Bridge MaxAge expected $maxage \
                         but got $ageVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 bridge hello time</span>
    if { $bridgehellotime != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpBridgeHelloTime.0]
        <a name="::snmpDebug(59)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set helloVal [expr [<a name="::snmpUtilGetVal(41)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/100]
        if {$bridgehellotime == $helloVal} {
           <a name="::result_ok(40)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Bridge HelloTime $hellotime exists. \
                      PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(42)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Bridge HelloTime expected \
                         $hellotime but got $helloVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the STPD s0 bridge forwarddelay</span>
    if { $bridgeforwarddelay != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dStpBridgeForwardDelay.0]
        <a name="::snmpDebug(60)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set delayVal [expr [<a name="::snmpUtilGetVal(42)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]/100]
        if {$bridgeforwarddelay == $delayVal} {
           <a name="::result_ok(41)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Parameter: Bridge Forward Delay $forwarddelay \
                      exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(43)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Parameter: Bridge Forward Delay expected \
                         $forwarddelay but got $delayVal. FAIL&#34;
        }
    }

    if { $ports != &#34;&#34; } {
       set ports [<a name="::snmpUtilParsePortList(5)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $ports &#34;Index&#34;]
 
       <span class="comment-line"># --- Check for the STPD s0 port priority</span>
       if {$portpriority != &#34;&#34;} {
          set result [snmpGet -session $session \
                              -oid dot1dStpPortPriority.$ports]
          <a name="::snmpDebug(61)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
          set portPriVal [<a name="::snmpUtilGetVal(43)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
          if {$portpriority == $portPriVal} {
             <a name="::result_ok(42)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STP s0 Port Parameter: Priority $portpriority exists. \
                        PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(44)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: Priority expected \
                           $portpriority but got $portPriVal. FAIL&#34;
          }
       }
       
       <span class="comment-line"># --- Check for the STPD s0 port state</span>
       if {$portstate != &#34;&#34;} {
          set result [snmpGet -session $session \
                              -oid dot1dStpPortState.$ports]
          <a name="::snmpDebug(62)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

          set portVal [<a name="::snmpUtilGetVal(44)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
          if { [string compare [string tolower $portVal] \
                             [string tolower $portstate]] == 0 } {
             <a name="::result_ok(43)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Port Parameter: Port state for port#$ports \
                        is $portstate exists. PASS&#34;
          } else {
             <a name="::result_error(45)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: Port state for port#$ports \
                          expected $portstate but got $portVal. FAIL&#34;
          }
       }

       <span class="comment-line"># --- Check for the STPD s0 port status</span>
       if { $portstatus != &#34;&#34; } {
          set result [snmpGet -session $session \
                              -oid dot1dStpPortEnable.$ports]
          <a name="::snmpDebug(63)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
  
          set typeVal [<a name="::snmpUtilGetVal(45)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
          if { [string compare [string tolower $typeVal] \
                             [string tolower $portstatus]] == 0 } {
             <a name="::result_ok(44)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Port Parameter: Port status for port#$ports \
                        is $portstatus exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(46)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: Port status for port#$ports \
                          expected $portstatus but got $typeVal. FAIL&#34;
          }
       }

       <span class="comment-line"># --- Check for the STPD s0 port path cost</span>
       if { $portpathcost != &#34;&#34; } {
           set result [snmpGet -session $session \
                               -oid dot1dStpPortPathCost.$ports]
           <a name="::snmpDebug(64)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
           set costVal [<a name="::snmpUtilGetVal(46)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
           if {$portpathcost == $costVal} {
              <a name="::result_ok(45)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 port Parameter: Port path cost \
                         $portpathcost exists. PASS&#34;
              set retVal 1
           } else {
              <a name="::result_error(47)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 port Parameter: Port path \
                            cost expected $portpathcost but got $costVal. FAIL&#34;
           }
       }

       <span class="comment-line"># --- Check for the STPD s0 port designated root</span>
       if { $portdroot != &#34;&#34; } {
           set result [snmpGet -session $session \
                               -oid dot1dStpPortDesignatedRoot.$ports]
           <a name="::snmpDebug(65)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
           set designatedVal [<a name="::snmpUtilGetVal(47)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
           set delim &#34;:&#34;
           regsub -all { } $designatedVal $delim designatedValue
           set designatedValue [string trimright $designatedValue ':']
           if { $portdroot == $designatedValue } {
              <a name="::result_ok(46)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Port Parameter: Designated Root $portdroot \
                         exists. PASS&#34;
              set retVal 1
           } else {
              <a name="::result_error(48)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: Designated Root \
                            expected $portdroot but got $designatedVal. FAIL&#34;
           }
       }

       <span class="comment-line"># --- Check for the STPD s0 port designated cost</span>
       if { $portdcost != &#34;&#34; } {
           set result [snmpGet -session $session \
                               -oid dot1dStpPortDesignatedCost.$ports]
           <a name="::snmpDebug(66)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
           set costVal [<a name="::snmpUtilGetVal(48)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
           if {$portdcost == $costVal} {
              <a name="::result_ok(47)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 port Parameter: Port designated path cost \
                         $portdcost exists. PASS&#34;
              set retVal 1
           } else {
              <a name="::result_error(49)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 port Parameter: Port designated path cost \
                            expected $portdcost but got $costVal. FAIL&#34;
           }
       }

       <span class="comment-line"># --- Check for the STPD s0 port designated bridge</span>
       if { $portdbridge != &#34;&#34; } {
           set result [snmpGet -session $session \
                               -oid dot1dStpPortDesignatedBridge.$ports]
           <a name="::snmpDebug(67)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
           set designatedVal [<a name="::snmpUtilGetVal(49)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
           set delim &#34;:&#34;
           regsub -all { } $designatedVal $delim designatedValue
           set designatedValue [string trimright $designatedValue ':']
           if { $portdbridge == $designatedValue } {
              <a name="::result_ok(48)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Port Parameter: Designated \
                         Bridge $portdbridge exists. PASS&#34;
              set retVal 1
           } else {
              <a name="::result_error(50)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: Designated Bridge \
                            $portdbridge not found. FAIL&#34;
           }
       }

       <span class="comment-line"># --- Check for the STPD s0 no. of forward transitions</span>
       if { $portftransitions != &#34;&#34; } {
            set result [snmpGet -session $session \
                                -oid dot1dStpPortForwardTransitions.0]
            <a name="::snmpDebug(68)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
            set forwardTVal [<a name="::snmpUtilGetVal(50)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
            if {$portftransitions == $forwardTVal} {
               <a name="::result_ok(49)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;STPD s0 Port Parameter: No. of forward transitions \
                          $portftransitions exists. PASS&#34;
               set retVal 1
            } else {
               <a name="::result_error(51)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;STPD s0 Port Parameter: No. of forward \
                             transitions expected $portftransitions but got \
                             $forwardtVal. FAIL&#34;
            }
        }
    }

    <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(69)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1qParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the Dot1q parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session            - Session identifier which identifies the connection</span>
<span class="comment-line">#                         with the DUT</span>
<span class="comment-line">#    name               - Stp domain name </span>
<span class="comment-line">#    versionno          - Version number of IEEE 802.1Q that device supports </span>
<span class="comment-line">#    maxvlanid          - Max no. IEEE 802.1Q VLAN ID that device supports  </span>
<span class="comment-line">#    maxsupportedvlans  - Max no. IEEE 802.1Q VLANs that device supports  </span>
<span class="comment-line">#    numvlans           - Current no. of IEEE 802.1Q VLANs that </span>
<span class="comment-line">#                         are configured in this device </span>
<span class="comment-line">#    gvrpstatus         - Gvrp status enable/disable for the device</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                 - File descriptor of open log file   </span>
<span class="comment-line">#    comment            - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1qParameters -session $sessionid -versionno 1</span>
<span class="comment-line">#                             -maxvlanid 4095 -numvlans 3</span>
<span class="comment-line">##############################################################################</span>

<strong><a name="::::snmpCheckDot1qParameters_1336">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1qParameters">::::snmpCheckDot1qParameters</a></a></strong> { args } {
    <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1qParameters $args {
       session           &#34;&#34;
       versionno         &#34;&#34;
       maxvlanid         &#34;&#34;
       maxsupportedvlans &#34;&#34;
       numvlans          &#34;&#34;
       gvrpstatus        &#34;&#34;
       fd                &#34;NULL&#34;
       comment           &#34;snmpCheckDot1qParameters&#34;
    }
 
    set func &#34;snmpCheckDot1qParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; } {
       error &#34;$func SNMP session id must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(70)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd
    <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking Dot1q Base group parameters --&#34;

    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    <span class="comment-line"># --- Check for the dot1q version number</span>
    if { $versionno != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qVlanVersionNumber.0]
        <a name="::snmpDebug(71)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set typeVal [<a name="::snmpUtilGetVal(51)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $versionno]] == 0 } {
           <a name="::result_ok(50)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Parameter: Version no. $versionno exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(52)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Parameter: Version no. expected $versionno \
                         but got $typeVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the dot1q maximum vlan id</span>
    if { $maxvlanid != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1qMaxVlanId.0]
        <a name="::snmpDebug(72)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set maxVal [<a name="::snmpUtilGetVal(52)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$maxvlanid == $maxVal} {
           <a name="::result_ok(51)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Parameter: MaxVlanId $maxvlanid exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(53)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Parameter: MaxVlanId expected $maxvlanid but \
                         got $maxVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the dot1q maximum supported vlans</span>
    if { $maxsupportedvlans != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1qMaxSupportedVlans.0]
        <a name="::snmpDebug(73)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set maxsVal [<a name="::snmpUtilGetVal(53)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
        if {$maxsupportedvlans == $maxsVal} {
           <a name="::result_ok(52)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Parameter: Max supported Vlans \
                      $maxsupportedvlans exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(54)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Parameter: Max supported Vlans \
                         expected $maxsupportedvlans but got $maxsVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the dot1q number of vlans</span>
    if { $numvlans != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1qNumVlans.0]
        <a name="::snmpDebug(74)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set numVal [<a name="::snmpUtilGetVal(54)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
        if {$numvlans == $numVal} {
           <a name="::result_ok(53)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Parameter: No. of Vlans \
                      $numvlans exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(55)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Parameter: No. of Vlans \
                        expected $numvlans but got $numVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the dot1q GVRP status</span>
    if { $gvrpstatus != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1qGvrpStatus.0]
        <a name="::snmpDebug(75)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(55)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $gvrpstatus]] == 0 } {
           <a name="::result_ok(54)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Parameter: Gvrp status $gvrpstatus exists. PASS&#34;
        } else {
           <a name="::result_error(56)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Parameter: Gvrp status expected $gvrpstatus \
                         but got $typeVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(76)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">#############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1qTpFdbTable</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the Dot1qTpFdb Table.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session            - Session identifier which identifies the connection</span>
<span class="comment-line">#                         with the DUT</span>
<span class="comment-line">#    fdbid              - Identity of this filtering database </span>
<span class="comment-line">#    tpfdbaddress       - Unicast MAC address for which the device has</span>
<span class="comment-line">#                         forwarding /filtering information </span>
<span class="comment-line">#    tpfdbport          - Port number of the port on which frame having</span>
<span class="comment-line">#                         src address equal to corresponding tpfdbaddress  </span>
<span class="comment-line">#    tpfdbstatus        - Status of entry </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                 - File descriptor of open log file   </span>
<span class="comment-line">#    comment            - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1qTpFdbTable -session $sessionid -fdbid 4094 -tpfdbport 3:4</span>
<span class="comment-line">#                             -tpfdbstatus &#34;learned&#34; </span>
<span class="comment-line">#                             -tpfdbaddress &#34;01:80:C0:12:21:12&#34;</span>
<span class="comment-line">##############################################################################</span>

<strong><a name="::::snmpCheckDot1qTpFdbTable_1474">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1qTpFdbTable">::::snmpCheckDot1qTpFdbTable</a></a></strong> { args } {
    <a name="::parse_args(7)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1qTpFdbTable $args {
       session           &#34;&#34;
       fdbid             &#34;&#34;
       tpfdbaddress      &#34;&#34;
       tpfdbport         &#34;&#34;
       tpfdbstatus       &#34;&#34;
       fd                &#34;NULL&#34;
       comment           &#34;snmpCheckDot1qTpFdbTable&#34;
    }
 
    set func &#34;snmpCheckDot1qTpFdbTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $fdbid == &#34;&#34; || $tpfdbaddress == &#34;&#34;} {
       error &#34;$func SNMP session id, fdb id, fdb mac address must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(77)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, id $fdbid, address $tpfdbaddress&#34; $fd
    <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking Dot1q TpFdbTable entries--&#34;

    <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;
    
    if { $tpfdbport != &#34;&#34; } {
      set tpfdbport [<a name="::snmpUtilParsePortList(6)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $tpfdbport]

      <span class="comment-line"># --- Check for the dot1qTpFdbTable port number</span>
      set result [snmpGet -session $session \
                          -oid dot1qTpFdbPort.$fdbid.$tpfdbaddress]
      <a name="::snmpDebug(78)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
      set portVal [<a name="::snmpUtilGetVal(56)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
      if {$tpfdbport == $portVal} {
         <a name="::result_ok(55)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Tp Fdb Port no: $tpfdbport exists. PASS&#34;
         set retVal 1
      } else {
         <a name="::result_error(57)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Tp Fdb Port no: expected $tpfdbport but \
                       got $portVal. FAIL&#34;
      }
   }

   <span class="comment-line"># --- Check for the dot1qTpFdbTable fdb status</span>
   if { $tpfdbstatus != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid dot1qTpFdbStatus.$fdbid.$tpfdbaddress]
       <a name="::snmpDebug(79)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(57)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $tpfdbstatus]] == 0 } {
           <a name="::result_ok(56)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Tp Fdb Port Status: $tpfdbstatus exists. PASS&#34;
        } else {
           <a name="::result_error(58)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Tp Fdb Port Status: expected $tpfdbstatus \
                         but got $typeVal. FAIL&#34;
        }
   }

   <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   <a name="::snmpDebug(80)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
   return $retVal
}

<span class="comment-line">#############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1qPortVlanTable</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the per port control and status information</span>
<span class="comment-line">#  for VLAN configuration in the device.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session                 - Session identifier which identifies the </span>
<span class="comment-line">#                              connection with the DUT</span>
<span class="comment-line">#    portno                  - Port no. on which to check the status </span>
<span class="comment-line">#    pvid                    - The VLAN ID assigned to untagged </span>
<span class="comment-line">#                              frames received on this portno.</span>
<span class="comment-line">#    acceptableframetype     - To accept/discard untagged frames</span>
<span class="comment-line">#                              for this portno.</span>
<span class="comment-line">#    ingressfiltering        - True/False, whether to accept/discard </span>
<span class="comment-line">#                              incoming frames on this portno.</span>
<span class="comment-line">#    gvrpstatus              - Gvrp status enable/disable on this portno.</span>
<span class="comment-line">#    gvrpfailedregistrations - Total no. of failed Gvrp registrations on this </span>
<span class="comment-line">#                              portno.</span>
<span class="comment-line">#    gvrplastpduorigin       - Src MAC address of the last GVRP message </span>
<span class="comment-line">#                              received on this portno.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                      - File descriptor of open log file   </span>
<span class="comment-line">#    comment                 - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1qPortVlanTable -session $sessionid -portno 4:3 -pvid 4093</span>
<span class="comment-line">#                                -acceptableframetype &#34;admitall&#34;</span>
<span class="comment-line">##############################################################################</span>

<strong><a name="::::snmpCheckDot1qPortVlanTable_1575">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1qPortVlanTable">::::snmpCheckDot1qPortVlanTable</a></a></strong> { args } {
    <a name="::parse_args(8)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1qPortVlanTable $args {
       session                  &#34;&#34;
       portno                   &#34;&#34;
       pvid                     &#34;&#34;
       acceptableframetype      &#34;&#34;
       ingressfiltering         &#34;&#34;
       gvrpstatus               &#34;&#34;
       gvrpfailedregistrations  &#34;&#34;
       gvrplastpduorigin        &#34;&#34;
       fd                       &#34;NULL&#34;
       comment                  &#34;snmpCheckDot1qPortVlanTable&#34;
    }
 
    set func &#34;snmpCheckDot1qPortVlanTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $portno == &#34;&#34;} {
       error &#34;$func SNMP session id, port no must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(81)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd
    <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking Dot1q Port Vlan Table Entry Parameters--&#34;

    <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    set portno [<a name="::snmpUtilParsePortList(7)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $portno]

    <span class="comment-line"># --- Check for the dot1qPortVlanTable Pvid</span>
    if { $pvid != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qPvid.$portno]
        <a name="::snmpDebug(82)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set portVal [<a name="::snmpUtilGetVal(58)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
        if {$pvid == $portVal} {
           <a name="::result_ok(57)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Pvid $pvid exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(59)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Vlan Table: Pvid expected $pvid \
                         but got $portVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the dot1qPortVlanTable acceptable frames type</span>
    if { $acceptableframetype != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qPortAcceptableFrameTypes.$portno]
        <a name="::snmpDebug(83)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(59)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $acceptableframetype]] == 0 } {
           <a name="::result_ok(58)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Accept Frame type is \
                      $acceptableframetype exists. PASS&#34;
        } else {
           <a name="::result_error(60)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Vlan Table: Accept Frame type \
                         expected $acceptableframetype but got $typeVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the dot1qPortVlanTable ingress filtering</span>
    if { $ingressfiltering != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qPortIngressFiltering.$portno]
        <a name="::snmpDebug(84)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(60)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $ingressfiltering]] == 0 } {
           <a name="::result_ok(59)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Ingress filtering is \
                      $ingressfiltering exists. PASS&#34;
        } else {
           <a name="::result_error(61)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Vlan Table: Ingress filtering \
                         expected $ingressfiltering but got $typeVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the dot1qPortVlanTable GVRP status</span>
    if { $gvrpstatus != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1qPortGvrpStatus.$portno]
        <a name="::snmpDebug(85)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(61)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $gvrpstatus]] == 0 } {
           <a name="::result_ok(60)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Gvrp status is \
                      $gvrpstatus exists. PASS&#34;
        } else {
           <a name="::result_error(62)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Vlan Table: Gvrp status is \
                         expected $gvrpstatus but got $typeVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the dot1qPortVlanTable GVRP failed registrations</span>
    if { $gvrpfailedregistrations != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qPortGvrpFailedRegistrations.$portno]
        <a name="::snmpDebug(86)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set failVal [<a name="::snmpUtilGetVal(62)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
        if {$gvrpfailedregistrations == $failVal} {
           <a name="::result_ok(61)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: No. of failed GVRP registrations \
                      $gvrpfailedregistrations exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(63)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Vlan Table: No. of failed GVRP \
                        registrations expected $gvrpfailedregistrations \
                        but got $failVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check for the dot1qPortVlanTable GVRP last pdu origin</span>
    if { $gvrplastpduorigin != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1qPortGvrpLastPduOrigin.$portno]
        <a name="::snmpDebug(87)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set lastVal [<a name="::snmpUtilGetVal(63)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> mac $result]
        if {$gvrplastpduorigin == $lastVal} {
           <a name="::result_ok(62)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Src MAC address of the last GVRP \
                      message $gvrplastpduorigin exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_ok(63)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Vlan Table: Src MAC address of the last GVRP \
                      message expected $gvrplastpduorigin but \
                      got $lastVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(88)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1dPortPriorityTable</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the per port control and status information</span>
<span class="comment-line">#  associated with this transparent bridge.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session            - Session identifier which identifies the connection</span>
<span class="comment-line">#                         with the DUT</span>
<span class="comment-line">#    setoption          - Set to true to set defaultuserpriority object value</span>
<span class="comment-line">#    portno             - Port no. on which to check the status </span>
<span class="comment-line">#    defaultuserpriority- The default ingress User Priority for this portno.</span>
<span class="comment-line">#    numtrafficclasses  - The no. of egress traffic classes supported on</span>
<span class="comment-line">#                         this portno.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                 - File descriptor of open log file   </span>
<span class="comment-line">#    comment            - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1qPortPriorityTable -session $sessionid -portno 4</span>
<span class="comment-line">#                                    -defaultuserpriority 6</span>
<span class="comment-line">#############################################################################</span>

<strong><a name="::::snmpCheckDot1qPortPriorityTable_1740">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1qPortPriorityTable">::::snmpCheckDot1qPortPriorityTable</a></a></strong> { args } {
    <a name="::parse_args(9)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1qPortPriorityTable $args {
       session                  &#34;&#34;
       setoption                &#34;false&#34;
       portno                   &#34;&#34;
       defaultuserpriority      &#34;&#34;
       numtrafficclasses        &#34;&#34;
       fd                       &#34;NULL&#34;
       comment                  &#34;snmpCheckDot1qPortPriorityTable&#34;
    }
 
    set func &#34;snmpCheckDot1qPortPriorityTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $portno == &#34;&#34;} {
       error &#34;$func SNMP session id, port no must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(89)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd

    <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    set portno [<a name="::snmpUtilParsePortList(8)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $portno]

    <span class="comment-line"># --- Set dot1qPortPriorityTable default user priority</span>
    if { $setoption != &#34;false&#34; } {
       if { $defaultuserpriority &lt;= 7 } {
          <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setting Dot1q Port Priority Table Parameters--&#34;
          set result [snmpSet -session $session \
                              -oid dot1dPortDefaultUserPriority.$portno \
                              -type i -val $defaultuserpriority]

          <a name="::snmpDebug(90)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpSet-$result \n&#34; $fd
          set retVal 1
       } else {
          <a name="::result_error(64)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;The value of default user priority should be less \
                        the 7&#34;
       }
       <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
       <a name="::snmpDebug(91)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
       return $retVal
    }

    <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking Dot1q Port Priority Table Parameters--&#34;

    <span class="comment-line"># --- Check for the dot1qPortPriorityTable default user priority</span>
    if { $defaultuserpriority != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1dPortDefaultUserPriority.$portno]
        <a name="::snmpDebug(92)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set userVal [<a name="::snmpUtilGetVal(64)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$defaultuserpriority == $userVal} {
           <a name="::result_ok(64)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Priority Table: Ingress User priority \
                      $defaultuserpriority exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(65)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Priority Table: Ingress User priority \
                      expected $defaultuserpriority but got $userVal. FAIL&#34;
        }
    }
    
    <span class="comment-line"># --- Check for the dot1qPortPriorityTable no. of traffic classes</span>
    if { $numtrafficclasses != &#34;&#34; } {
        set result [snmpGet -session $session \
                            -oid dot1dPortNumTrafficClasses.$portno]
        <a name="::snmpDebug(93)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set trafficVal [<a name="::snmpUtilGetVal(65)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$numtrafficclasses == $trafficVal} {
           <a name="::result_ok(65)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1q Port Priority Table: No. of egress traffic \
                      $numtrafficclasses exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(66)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1q Port Priority Table: No. of egress traffic \
                      expected $numtrafficclasses but got $trafficVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(94)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}
<span class="comment-line">#############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCreateDot1qVlanStaticTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates a vlan with the specified vlan name</span>
<span class="comment-line">#  in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session              - Session identifier which identifies the connection</span>
<span class="comment-line">#                           with the DUT</span>
<span class="comment-line">#    staticname           - Name of the VLAN to be created</span>
<span class="comment-line">#    egressports          - Set of the ports which are permanently assigned to</span>
<span class="comment-line">#                           egress list for this VLAN</span>
<span class="comment-line">#    forbiddenegressports - Set of the ports which are prohibited by mgmt</span>
<span class="comment-line">#                           from being included in egress list for this VLAN </span>
<span class="comment-line">#    untaggedports        - Set of the ports which should transmit </span>
<span class="comment-line">#                           egress packets for this VLAN</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                   - File descriptor for logging the command outputs</span>
<span class="comment-line">#    comment              - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure</span>
<span class="comment-line">#    vlan identifier - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCreateDot1qVlanStaticTable -session $sessionid -name &#34;vlanStatic&#34;</span>
<span class="comment-line">#############################################################################</span>

<strong><a name="::::snmpCreateDot1qVlanStaticTable_1855">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCreateDot1qVlanStaticTable">::::snmpCreateDot1qVlanStaticTable</a></a></strong> { args } {
    <a name="::parse_args(10)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCreateDot1qVlanStaticTable $args {
       session              &#34;&#34;
       staticname           &#34;&#34;
       egressports          &#34;&#34;
       forbiddenegressports &#34;&#34;
       untaggedports        &#34;&#34;
       fd                   &#34;NULL&#34;
       comment              &#34;snmpCreateDot1qVlanStaticTable&#34;
    }

    set func &#34;snmpCreateDot1qVlanStaticTable:&#34;

    if { $session == &#34;&#34; || $staticname == &#34;&#34; } {
       error &#34;$func session and static vlan name must be specified&#34;
       return
    }

    <a name="::snmpDebug(95)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func sess-$session vlanname-$staticname fd-$fd -Start&#34; $fd

    <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Creating Static VLAN $staticname using \
                       Dot1qVlanStaticTable--&#34;

    set vlanIfIndex [snmpGet -session $session \
                             -oid extremeNextAvailableVirtIfIndex.0]

    <a name="::snmpDebug(96)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet-$vlanIfIndex&#34; $fd

    set res [<a name="::snmpUtilGetVal(66)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $vlanIfIndex]

    <span class="comment-line"># --- Create dot1qVlanStaticTable entry</span>
    set result [snmpSet -session $session \
                -oid dot1qVlanStaticName.$res -type s -val $staticname \
                -oid dot1qVlanStaticEgressPorts.$res -type d \
                -val &#34;$egressports&#34; \
                -oid dot1qVlanForbiddenEgressPorts.$res -type d \
                -val &#34;$forbiddenegressports&#34; \
                -oid dot1qVlanStaticUntaggedPorts.$res -type d \
                -val &#34;$untaggedports&#34; \
                -oid dot1qVlanStaticRowStatus.$res -type i -val &#34;4&#34;]

    <a name="::snmpDebug(97)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result&#34; $fd

    <a name="::snmpDebug(98)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func result-$res -End\n&#34; $fd
    return $res
}

<span class="comment-line">##########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpDeleteDot1qVlanStaticTableEntry</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure deletes a vlan with the specified vlan name</span>
<span class="comment-line">#  in the given DUT created using snmpCreateDot1qVlanStaticTableEntry.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session - Session identifier which identifies the connection</span>
<span class="comment-line">#              with the DUT</span>
<span class="comment-line">#    vlanid  - VlanIdIndex of the VLAN to be deleted</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd      - File descriptor for logging the command outputs</span>
<span class="comment-line">#    comment - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpDeleteDot1qVlanStaticTableEntry -session $sessionid -vlanid 123</span>
<span class="comment-line">###########################################################################</span>
<strong><a name="::::snmpDeleteDot1qVlanStaticTableEntry_1927">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpDeleteDot1qVlanStaticTableEntry">::::snmpDeleteDot1qVlanStaticTableEntry</a></a></strong> {args} {

    <a name="::parse_args(11)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpDeleteDot1qVlanStaticTableEntry $args {
       session  &#34;&#34;
       vlanid   &#34;0&#34;
       fd       &#34;NULL&#34;
       comment  &#34;snmpDeleteDot1qVlanStaticTableEntry&#34;
    }

    set func &#34;snmpDeleteDot1qVlanStaticTableEntry:&#34;

    if { $session == &#34;&#34; || $vlanid == 0} {
       error &#34;$func session and vlanid must be specified&#34;
       return 0
    }

    <a name="::snmpDebug(99)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session vlanid-$vlanid - Start&#34; $fd

    <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Deleting VLAN created using \
                       snmpCreateDot1qVlanStaticTable --&#34;

    <span class="comment-line"># --- Delete dot1qVlanStaticTable entry</span>
    set result [snmpSet -session $session \
                        -oid dot1qVlanStaticRowStatus.$vlanid -type i -val 6]

    <a name="::snmpDebug(100)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result&#34; $fd

    <a name="::snmpDebug(101)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpSet-$result - End\n&#34; $fd

    return 1
}

<span class="comment-line">########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1dBaseGroupParameters </span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks for dot1dBase group parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session        - Session identifier which identifies the connection</span>
<span class="comment-line">#                     with the DUT</span>
<span class="comment-line">#    baddress       - MAC address used by this bridge</span>
<span class="comment-line">#    baseports      - Number of ports controlled by this bridge</span>
<span class="comment-line">#    basetype       - Type of bridging this bridge can perform</span>
<span class="comment-line">#                     unknown</span>
<span class="comment-line">#                     transparent-only</span>
<span class="comment-line">#                     sourceroute-only</span>
<span class="comment-line">#                     srt </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd             - File descriptor of open log file   </span>
<span class="comment-line">#    comment        - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1dBaseGroupParameters -session $sessionid -baseports 2</span>
<span class="comment-line">#                                      -basetype &#34;transparent&#34;</span>
<span class="comment-line">##########################################################################</span>

<strong><a name="::::snmpCheckDot1dBaseGroupParameters_1992">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1dBaseGroupParameters">::::snmpCheckDot1dBaseGroupParameters</a></a></strong> { args } {
    <a name="::parse_args(12)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1dBaseGroupParameters $args {
       session        &#34;&#34;
       baddress       &#34;&#34;
       baseports      &#34;&#34;
       basetype       &#34;&#34;
       fd             &#34;NULL&#34;
       comment        &#34;snmpCheckDot1dBaseGroupParameters&#34;
    }
 
    set func &#34;snmpCheckDot1dBaseGroupParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; } {
       error &#34;$func SNMP session id must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(102)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd
    <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking dot1dBase group parameters --&#34;

    <a name="::report_start_test(7)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    <span class="comment-line"># --- Check dot1dBase group bridge address</span>
    if { $baddress != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid dot1dBaseBridgeAddress.0]

        <a name="::snmpDebug(103)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set macVal [<a name="::snmpUtilGetVal(67)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
        set delim &#34;:&#34;
        regsub -all { } $macVal $delim macValue
        set macValue [string trimright $macValue ':']
        if { $baddress == $macValue } {
           <a name="::result_ok(66)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dBase Group Parameter: Bridge \
                         Address $baddress exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(67)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dBase Group Parameter: Bridge \
                         Address expected $baddress but got $macValue. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check dot1dBase group no. of ports</span>
    if { $baseports != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dBaseNumPorts.0]
        <a name="::snmpDebug(104)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
        set baseVal [<a name="::snmpUtilGetVal(68)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
        if {$baseports == $baseVal} {
           <a name="::result_ok(67)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dBase Group Parameter: Number of ports \
                      $baseports exists. PASS&#34;
           set retVal 1
        } else {
           <a name="::result_error(68)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dBase Group Parameter: Number of ports \
                         expected $baseports but got $baseVal. FAIL&#34;
        }
    }

    <span class="comment-line"># --- Check dot1dBase group type of bridging</span>
    if { $basetype != &#34;&#34; } {
        set result [snmpGet -session $session -oid dot1dBaseType.0]
        <a name="::snmpDebug(105)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

        set typeVal [<a name="::snmpUtilGetVal(69)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
        if { [string compare [string tolower $typeVal] \
                           [string tolower $basetype]] == 0 } {
           <a name="::result_ok(68)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dBase Group Parameter: Bridging type \
                      is $basetype exists. PASS&#34;
        } else {
           <a name="::result_error(69)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dBase Group Parameter: Bridging type \
                         expected $basetype but got $typeVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(8)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(106)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
}


<span class="comment-line">################################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetFdbAgingTime</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure sets time for aging out dynamically learnt forwarding</span>
<span class="comment-line">#  information in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session  - Session identifier which identifies the connection</span>
<span class="comment-line">#               with the DUT</span>
<span class="comment-line">#    agetime  - Aging time interval</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd       - File descriptor for logging the command outputs</span>
<span class="comment-line">#    comment  - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetFdbAgingTime -session $sessionid -agetime 50</span>
<span class="comment-line">################################################################################</span>
<strong><a name="::::snmpSetFdbAgingTime_2096">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpSetFdbAgingTime">::::snmpSetFdbAgingTime</a></a></strong> {args} {

    <a name="::parse_args(13)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetFdbAgingTime $args {
       session &#34;&#34;
       agetime &#34;&#34;
       fd      &#34;NULL&#34;
       comment &#34;snmpSetFdbAgingTime&#34;
    }

    set func &#34;snmpSetFdbAgingTime:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $agetime == 0} {
       error &#34;$func session and aging time must be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(107)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session aging time-$agetime - Start&#34; $fd
    <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setting Fdb Aging time  --&#34;

    set result [snmpSet -session $session \
                        -oid dot1dTpAgingTime.0 -type i -val $agetime]
    set retVal 1

    <a name="::snmpDebug(108)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result - End\n&#34; $fd

    <a name="::snmpDebug(109)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd

    return $retVal
}
<span class="comment-line">#############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckDot1dTpPortTable</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the Dot1dTpPort Table.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session            - Session identifier which identifies the connection</span>
<span class="comment-line">#                         with the DUT</span>
<span class="comment-line">#    port               - Port no. of the port for which the entry contains</span>
<span class="comment-line">#                         transparent bridging </span>
<span class="comment-line">#    portmaxinfo        - Maximum size of the INFO field that this port will </span>
<span class="comment-line">#                         receive and transmit</span>
<span class="comment-line">#    portinframes       - No. of frames received by this port </span>
<span class="comment-line">#    portoutframes      - No. of frames transmitted by this port</span>
<span class="comment-line">#    portindiscards     - No. of valid frames received which were discarded by </span>
<span class="comment-line">#                         Forwarding process </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd                 - File descriptor of open log file   </span>
<span class="comment-line">#    comment            - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckDot1dTpPortTable -session $sessionid -port 2:3 -portmaxinfo 1500</span>
<span class="comment-line">#                              -portinframes 500 -fd fd</span>
<span class="comment-line">##############################################################################</span>

<strong><a name="::::snmpCheckDot1dTpPortTable_2160">proc <a href="snmpSTPLib.tcl-annot.html#::::snmpCheckDot1dTpPortTable">::::snmpCheckDot1dTpPortTable</a></a></strong> { args } {
    <a name="::parse_args(14)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckDot1dTpPortTable $args {
       session           &#34;&#34;
       <a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a>              &#34;&#34;
       portmaxinfo       &#34;&#34;
       portinframes      &#34;&#34;
       portoutframes     &#34;&#34;
       portindiscards    &#34;&#34;
       fd                &#34;NULL&#34;
       comment           &#34;snmpCheckDot1dTpPortTable&#34;
    }
 
    set func &#34;snmpCheckDot1dTpPortTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; &amp;&amp; $port == &#34;&#34;} {
       error &#34;$func SNMP session id, port number must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(110)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, port number $port&#34; $fd
    <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking Dot1d TpPortTable entries--&#34;

    <a name="::report_start_test(8)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;
    
    if { $port != &#34;&#34; } {
       set port [<a name="::snmpUtilParsePortList(9)"><a href="./snmplib.tcl.html#::snmpUtilParsePortList_1988">::snmpUtilParsePortList</a></a> $port]

       <span class="comment-line"># --- Check for the dot1dTpPortTable port max info</span>
       if { $portmaxinfo != &#34;&#34; } {
          set result [snmpGet -session $session \
                              -oid dot1dTpPortMaxInfo.$port]
          <a name="::snmpDebug(111)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
          set maxInfoVal [<a name="::snmpUtilGetVal(70)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
          if {$portmaxinfo == $maxInfoVal} {
             <a name="::result_ok(69)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dTpPortTable Port max info: $portmaxinfo \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(70)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dTpPortTable Port max info: expected \
                           $portmaxinfo but got $maxInfoVal. FAIL&#34;
          }
       }

       <span class="comment-line"># --- Check for the dot1dTpPortTable port in frames</span>
       if { $portinframes != &#34;&#34; } {
          set result [snmpGet -session $session \
                              -oid dot1dTpPortInFrames.$port]
          <a name="::snmpDebug(112)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
          set inFrameVal [<a name="::snmpUtilGetVal(71)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
          if {$portinframes == $inFrameVal} {
             <a name="::result_ok(70)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dTpPortTable Port Inframes: $portinframes \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(71)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dTpPortTable Port Inframes: expected \
                           $portinframes but got $inFrameVal. FAIL&#34;
          }
       }

       <span class="comment-line"># --- Check for the dot1dTpPortTable port out frames</span>
       if { $portoutframes != &#34;&#34; } {
          set result [snmpGet -session $session \
                              -oid dot1dTpPortOutFrames.$port]
          <a name="::snmpDebug(113)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
          set outFrameVal [<a name="::snmpUtilGetVal(72)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
          if {$portoutframes == $outFrameVal} {
             <a name="::result_ok(71)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dTpPortTable Port Outframes: $portoutframes \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(72)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dTpPortTable Port Outframes: expected \
                           $portoutframes but got $outFrameVal. FAIL&#34;
          }
       }

       <span class="comment-line"># --- Check for the dot1dTpPortTable port in discards</span>
       if { $portindiscards != &#34;&#34; } {
          set result [snmpGet -session $session \
                              -oid dot1dTpPortInDiscards.$port]
          <a name="::snmpDebug(114)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
          set inDiscardsVal [<a name="::snmpUtilGetVal(73)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
          if {$portindiscards == $inDiscardsVal} {
             <a name="::result_ok(72)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Dot1dTpPortTable Port InDiscards: $portindiscards \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(73)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Dot1dTpPortTable Port InDiscards: expected \
                           $portindiscards but got $inDiscardsVal. FAIL&#34;
          }
       }
    }

    <a name="::report_end_test(9)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(115)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
