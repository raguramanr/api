<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ePTswConf.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ePTswConf.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ePTswConf.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ePTswConf.tcl-annot.html">annotations</a> | <a href="ePTswConf.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#################################################################</span>
<span class="comment-line"># $RCSfile: swConf.tcl,v $ - SQA Library</span>
<span class="comment-line">#</span>
<span class="comment-line"># Copyright (c) 1999 by Extreme Networks Inc.</span>
<span class="comment-line"># </span>
<span class="comment-line"># Revision control history</span>
<span class="comment-line"># ------------------------</span>
<span class="comment-line"># $Header: /export/cvsroot/automation/Lib/swConf.tcl,v 2.51.2.4.4.87.2.3 2010/10/07 08:46:42 umani Exp $</span>
<span class="comment-line">#</span>
<span class="comment-line"># Extreme Networks modification history</span>
<span class="comment-line"># -------------------------------------</span>
<span class="comment-line"># $Log: swConf.tcl,v $</span>
<span class="comment-line"># Revision 2.51.2.4.4.87.2.3  2010/10/07 08:46:42  umani</span>
<span class="comment-line"># proc get_DUTs_info modified for Stack</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.87.2.3  2010/10/07 08:46:42  umani</span>
<span class="comment-line"># proc get_DUTs_info modified for Stack</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.87.2.2  2010/09/29 11:50:10  umani</span>
<span class="comment-line"># Changed platform information to system type</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.87.2.1  2010/09/23 09:52:21  umani</span>
<span class="comment-line"># Modified proc get_DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.87  2010/01/11 10:22:31  nellinivasu</span>
<span class="comment-line"># Merged From Branch 'branch-dev_v12-4-rel1'</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.86  2009/12/16 21:51:29  eyoung</span>
<span class="comment-line"># Fixed typo in GetPortIdInfoStd.</span>
<span class="comment-line"># Cleaned up indentation in GetPortIdInfoStd.</span>
<span class="comment-line"># Removed extra whitespace from file.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.85  2009/10/09 01:01:16  ghundertmark</span>
<span class="comment-line"># merge from branch add sysType</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.84  2009/08/26 06:19:21  ghundertmark</span>
<span class="comment-line"># Merge from dev4-rel1 branch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.2  2009/08/26 06:16:44  ghundertmark</span>
<span class="comment-line"># init duts_info memorycard</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.1  2009/07/07 22:37:09  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.4  2009/10/08 04:19:12  ghundertmark</span>
<span class="comment-line"># Add sysType variable to DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.3  2009/10/05 18:33:55  jramarao</span>
<span class="comment-line"># GetPortIdInfoStd fixed for no ixia platform like bcm netlogin web</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.2  2009/08/26 06:16:44  ghundertmark</span>
<span class="comment-line"># init duts_info memorycard</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.1  2009/07/07 22:37:09  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.5  2009/12/16 21:57:14  eyoung</span>
<span class="comment-line"># Merge in changes from trunk-exos.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.86  2009/12/16 21:51:29  eyoung</span>
<span class="comment-line"># Fixed typo in GetPortIdInfoStd.</span>
<span class="comment-line"># Cleaned up indentation in GetPortIdInfoStd.</span>
<span class="comment-line"># Removed extra whitespace from file.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.85  2009/10/09 01:01:16  ghundertmark</span>
<span class="comment-line"># merge from branch add sysType</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.84  2009/08/26 06:19:21  ghundertmark</span>
<span class="comment-line"># Merge from dev4-rel1 branch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.2  2009/08/26 06:16:44  ghundertmark</span>
<span class="comment-line"># init duts_info memorycard</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.1  2009/07/07 22:37:09  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.4  2009/10/08 04:19:12  ghundertmark</span>
<span class="comment-line"># Add sysType variable to DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.3  2009/10/05 18:33:55  jramarao</span>
<span class="comment-line"># GetPortIdInfoStd fixed for no ixia platform like bcm netlogin web</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.2  2009/08/26 06:16:44  ghundertmark</span>
<span class="comment-line"># init duts_info memorycard</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82.2.1  2009/07/07 22:37:09  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.82  2009/07/01 10:55:48  nellinivasu</span>
<span class="comment-line"># Merged From Branch 'branch-dev_v12-1-rel4'</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.81  2009/05/01 18:06:22  lagrawal</span>
<span class="comment-line"># merge from dev</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.80  2009/04/14 00:42:52  lagrawal</span>
<span class="comment-line"># fixed merge issue clear fdb delay was twice</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.79  2009/03/18 21:48:32  jramarao</span>
<span class="comment-line"># From branch-dev_v12-1-rel4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.78  2008/10/30 03:16:31  ghundertmark</span>
<span class="comment-line"># Add delay for fdb completion on pioneer</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.2.3  2009/03/05 03:54:30  lagrawal</span>
<span class="comment-line"># added show version images</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.2.2  2009/02/25 22:45:58  lagrawal</span>
<span class="comment-line"># added show fans detail</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.2.1  2009/01/30 15:12:01  autotest-sc</span>
<span class="comment-line"># merge from branch-pioneer2_dev-v12-1-rel4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.6.4  2009/01/21 10:57:38  nellinivasu</span>
<span class="comment-line"># Pioneer global delays reduced.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.6.3  2009/01/13 20:34:15  ghundertmark</span>
<span class="comment-line"># Add MM check verse MSM check</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.6.2  2009/01/07 22:50:19  jramarao</span>
<span class="comment-line"># show version detail added</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.6.1  2008/11/28 05:10:34  jramarao</span>
<span class="comment-line"># merge from branch-pioneer_dev-v12-1-rel4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.2.5  2009/04/03 09:29:31  lagrawal</span>
<span class="comment-line"># merge from branch-pioneer2_dev-v12-1-rel4 to branch-dev_v12-1-rel4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77.2.4  2009/03/31 23:36:18  lagrawal</span>
<span class="comment-line"># merge from branch-pioneer_dev-v12-1-rel4</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.77  2008/08/05 03:44:10  lagrawal</span>
<span class="comment-line"># merge from branch-fixes_v12-1-rel0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.76.4.1  2008/07/25 23:02:01  lagrawal</span>
<span class="comment-line"># merged changes from branch-dev_v12-1-rel2 and trunk-exos. cmd cvs update -dj branch-dev_v12-1-rel2 automation</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.76.8.1  2008/07/02 17:36:29  msubramanian</span>
<span class="comment-line"># Change for option to not reset ixia by setting ixiaNoReset in .cfg file.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.76  2008/05/15 20:21:23  eyoung</span>
<span class="comment-line"># Clear out parameterList after getting license level in get_DUTs_info.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.75  2008/04/15 05:09:55  djain</span>
<span class="comment-line"># code added for core with test case number</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.74  2008/03/12 08:50:10  nellinivasu</span>
<span class="comment-line"># Added global forceSerialReboot in proc RunSetupScript</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.73  2008/01/17 23:09:11  dsuk</span>
<span class="comment-line"># efence modifications</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.72  2008/01/11 21:16:29  dsuk</span>
<span class="comment-line"># using SendACmd for efence</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.71  2008/01/09 13:57:33  skumar</span>
<span class="comment-line"># Info exists efence</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.70  2008/01/08 23:32:12  dsuk</span>
<span class="comment-line"># corrected handling of efence parameter</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.69  2008/01/08 21:58:26  dsuk</span>
<span class="comment-line"># added support for ELECTRIC FENCE</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.68  2008/01/07 02:04:28  ghundertmark</span>
<span class="comment-line"># Alter getPortIdInfo to use portmapping lists</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.67  2007/12/19 20:09:26  ghundertmark</span>
<span class="comment-line"># Change OID discovery for slots.  Add force Serial reboot</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.66  2007/12/10 18:39:41  ghundertmark</span>
<span class="comment-line"># Add double check for save mode for getbcominfostd.  For calls not made from main.tcl</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.65  2007/12/07 02:33:34  skumar</span>
<span class="comment-line"># Do not first login if downloadimage to avoid issues w/ corrupted images</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.64  2007/12/04 18:03:58  ghundertmark</span>
<span class="comment-line"># Correct close quote in the fast file</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.63  2007/12/04 15:57:07  ghundertmark</span>
<span class="comment-line"># Add code to save bcom globals to fast</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.62  2007/11/09 21:01:28  jramarao</span>
<span class="comment-line"># changes merged from branch to trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.59.4.2  2007/10/26 12:22:47  pananthasubramanian</span>
<span class="comment-line"># adapted proc get_DUTs_info and added new proc get_DUTs_info_eware to support</span>
<span class="comment-line"># eware duts in the automation infrastructure</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.59.4.1  2007/08/20 22:58:54  djain</span>
<span class="comment-line"># Merged changes from trunk-exos Lib</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.61  2007/07/11 10:43:50  gramkumar</span>
<span class="comment-line"># License information is added to System information</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.60  2007/06/26 03:59:55  pananthasubramanian</span>
<span class="comment-line"># updated proc RunSetupScript to support generic DUT topology</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.59  2007/05/03 17:07:03  ghundertmark</span>
<span class="comment-line"># fix GetPortIdInfoStd to avoid setting none existent portIds</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.58  2007/04/30 19:12:08  ghundertmark</span>
<span class="comment-line"># GetPortIdInfoStd - Adjust rates to ensure randomSize rates can be handled.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.57  2007/04/30 11:38:10  ghundertmark</span>
<span class="comment-line"># Add GetBcomPortInfoStd to setup PortID_Info global variables</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.56  2007/04/28 00:48:39  igokhale</span>
<span class="comment-line"># added disable clipaging at start of get_DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.55  2007/04/12 01:17:07  schawla</span>
<span class="comment-line"># Modified func DutSlotNumPorts to take the ports usinf show slot for stacking testbed.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.54  2007/03/30 19:26:09  igokhale</span>
<span class="comment-line"># removed keyword MSM from some checks/messages</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.53  2007/03/29 00:29:18  djain</span>
<span class="comment-line"># Changes made in get_DUTs_info for stacking show version</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.52  2007/03/15 22:10:38  jramarao</span>
<span class="comment-line"># &#34;unconfig sw all&#34; changed to &#34;unconfig sw&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.51  2007/03/01 18:25:37  igokhale</span>
<span class="comment-line"># removed word MSM from &#34;Error: This command can only be executed on Master MSM&#34; error message</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.50  2007/02/21 01:42:47  achilukuri</span>
<span class="comment-line"># Merging  Q3FY07-11.6-Phase-2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.49  2007/01/03 22:02:47  skumar</span>
<span class="comment-line"># flock ixTclHal to avoid race condition w/ multiple package req</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.48.2.1  2007/02/15 19:32:56  djain</span>
<span class="comment-line"># Changes made for optimising get_DUTs_info procedure</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.48  2006/12/05 22:51:11  igokhale</span>
<span class="comment-line"># added EnableRegRouterMgmtLinks regardless of whether or not unconfig switch all was done</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.47  2006/11/20 19:17:26  skumar</span>
<span class="comment-line"># Fix generic filename as conflicts when multiple instances running</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.46  2006/11/17 22:49:25  skumar</span>
<span class="comment-line"># Fix the return status of child from parent to stop in case of error</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.45  2006/11/11 00:06:22  skumar</span>
<span class="comment-line"># Stacking testbed support</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.44  2006/10/13 18:05:44  skumar</span>
<span class="comment-line"># Added -nocase for y/N</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.43  2006/06/30 22:35:36  ghundertmark</span>
<span class="comment-line"># Q4FY06 Release commit</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.42  2006/06/15 15:14:32  eyoung</span>
<span class="comment-line"># Added support to get_DUTs_info for new &#34;ExtremeXOS&#34; software name.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.41  2006/06/09 17:36:22  igokhale</span>
<span class="comment-line"># replaced sleep 2 with puts after logging out of regrouter</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.40  2006/06/09 00:23:25  igokhale</span>
<span class="comment-line"># Corrected login to regrouter errorchecking; added 2s delay when logging out from regrouter; added login to all dut's verification before the disable port on regrouter</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.39  2006/06/06 23:59:07  igokhale</span>
<span class="comment-line"># dont disable regrouter links if not needed (Called from LoadImage or unconfig switch all is not part of setup)</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.38  2006/06/06 21:51:57  igokhale</span>
<span class="comment-line"># renamed all functions to Parallel/Serial(RunSetup), added verify for ports re-enabled</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.37  2006/06/02 01:44:18  igokhale</span>
<span class="comment-line"># Corrections for CLI support</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.36  2006/05/31 20:35:55  igokhale</span>
<span class="comment-line"># simplified 2/5 node setup determination</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.35  2006/05/31 17:58:30  igokhale</span>
<span class="comment-line"># more correction</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.34  2006/05/31 17:56:15  igokhale</span>
<span class="comment-line"># fixed problem with numDUT</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.33  2006/05/31 01:46:58  igokhale</span>
<span class="comment-line"># merged from branch: changes to support parallel unconfig and also CLI, Scalability, IxiaScriptmate regtypes in mysql</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.32.4.3  2006/05/24 18:41:51  igokhale</span>
<span class="comment-line"># changes for cli, scalability, ixia tests</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.32.4.1  2006/05/01 19:20:03  igokhale</span>
<span class="comment-line"># changes for parallel unconfig sw</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.32.4.3  2006/05/24 18:41:51  igokhale</span>
<span class="comment-line"># changes for cli, scalability, ixia tests</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.32.4.1  2006/05/01 19:20:03  igokhale</span>
<span class="comment-line"># changes for parallel unconfig sw</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.32  2005/12/21 22:24:18  smohanty</span>
<span class="comment-line"># Commit for Release 12</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.31  2005/10/08 00:56:46  skumar</span>
<span class="comment-line"># CheckOperational in auto even if no &#34;unc.* sw.* a.*&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.30.4.2  2005/10/14 01:29:40  agoyal</span>
<span class="comment-line"># added i386Chassis to get the blade number</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.30.4.1  2005/10/05 00:41:34  igokhale</span>
<span class="comment-line"># corrected spacing</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.30  2005/09/09 00:38:59  skumar</span>
<span class="comment-line"># Put condition not to run show slot in stackable</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.29  2005/08/30 03:57:44  ghundertmark</span>
<span class="comment-line"># Fix numSlots. Add DUTSlot funcions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.28  2005/06/16 01:40:03  skumar</span>
<span class="comment-line"># New product defs at Rel10</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.27  2005/05/04 19:17:23  skumar</span>
<span class="comment-line"># Dump imageSel into init for DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.26  2005/05/02 20:07:37  alim</span>
<span class="comment-line"># Login changes</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.25  2005/03/30 20:32:21  skumar</span>
<span class="comment-line"># Aspen name changes as merged from exos-br-9</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.24.2.1  2005/03/30 18:37:15  skumar</span>
<span class="comment-line"># Aspen name change specific changes</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.24  2005/02/16 01:30:04  skumar</span>
<span class="comment-line"># Added Slot qualifier for slot hw type</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.23  2005/02/14 17:38:46  eyoung</span>
<span class="comment-line"># Fixed references to gloabl variables in clearFdb function.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.22  2005/02/14 17:36:38  eyoung</span>
<span class="comment-line"># Fixed reference to unkown variable in clearFdb function.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.21  2005/02/14 17:26:30  eyoung</span>
<span class="comment-line"># Updated &#34;clear fdb&#34; delay checking for SummitX450 platform.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.20  2005/01/18 21:23:53  skumar</span>
<span class="comment-line"># Commited severe 1 issue after o/p changed on cougar in sh version</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.19  2004/12/20 19:25:14  skumar</span>
<span class="comment-line"># Bootrom based bootup for loadimage</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.18  2004/12/10 00:05:31  skumar</span>
<span class="comment-line"># Check for summit for summitx450</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.17  2004/12/06 21:43:42  skumar</span>
<span class="comment-line"># Added in global, imageBooted in DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.16  2004/11/13 00:03:31  skumar</span>
<span class="comment-line"># Cleanup &#34;show default&#34; and rerundant &#34;show slot&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.15  2004/10/19 23:21:22  mverma</span>
<span class="comment-line"># Added snmp support</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.14  2004/10/15 18:32:12  skumar</span>
<span class="comment-line"># Put non-default vlan code for checkConnection</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.13  2004/10/15 02:33:43  skumar</span>
<span class="comment-line"># Core file capture, ixiaVlan in checkConnection</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.12.2.1  2004/10/15 00:54:43  skumar</span>
<span class="comment-line"># coredump on memorycard starting 11.1.0.21</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.12  2004/09/01 01:22:20  skumar</span>
<span class="comment-line"># Changes to support patch builds in exos</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.11  2004/05/22 01:13:36  skumar</span>
<span class="comment-line"># Call Login with no CheckOperational in RunSetupScript</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.10  2004/04/26 22:19:32  skumar</span>
<span class="comment-line"># Fix code for MSM issue w.r.t PC</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.9  2004/04/25 20:52:55  skumar</span>
<span class="comment-line"># Fix backup msm issue based on at in RunSetupScript</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.8  2004/04/16 17:56:45  skumar</span>
<span class="comment-line"># Check for master msm or else return error in RunSetupScript</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.7  2004/04/01 21:57:03  skumar</span>
<span class="comment-line"># Commit as part of release5</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.6  2004/03/16 21:00:46  cshaw</span>
<span class="comment-line"># primary version: to primary ver:, same for secondary</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.5  2004/03/11 20:03:19  dchan</span>
<span class="comment-line"># add unconfig switch all support</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.4.2.2  2004/03/15 20:59:52  skumar</span>
<span class="comment-line"># Power cycle the DUT in case of error on unc sw al</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.4.2.1  2004/03/09 06:50:12  vkanagasabapathy</span>
<span class="comment-line"># Support for Unconfig Switch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.4  2003/12/03 03:48:02  skumar</span>
<span class="comment-line"># Get the correct version, use Login after RunSetupScript.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.3  2003/11/24 06:02:13  dchan</span>
<span class="comment-line"># trunk-exos release 3</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.2.2.4  2003/11/14 22:37:13  skumar</span>
<span class="comment-line"># Change the relMaster as of b86 to be index 7</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.2.2.3  2003/11/13 21:57:46  skumar</span>
<span class="comment-line"># Add verTime into fast file for dev option in main.tcl</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.2.2.2  2003/11/10 18:40:34  skumar</span>
<span class="comment-line"># Get the correct builtBy info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.2.2.1  2003/10/28 17:57:31  skumar</span>
<span class="comment-line"># Fill in arrays properly as of b79</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.2  2003/10/06 17:16:20  dchan</span>
<span class="comment-line"># trunk-exos release 2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.4.1.2.1  2003/09/24 18:39:22  skumar</span>
<span class="comment-line"># Fixes to support correct reporting for exos versions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.51.2.4.2.1  2003/06/23 21:28:46  cshaw</span>
<span class="comment-line"># Merged in EW trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.67  2003/05/19 21:32:41  eyoung</span>
<span class="comment-line"># Added support for ASMGM2X NP card.  Fixed CVS log macro.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.45  2002/05/10 16:25:34  skumar</span>
<span class="comment-line"># Put no merge str for no merge image.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.44  2002/05/08 01:04:49  skumar</span>
<span class="comment-line"># Hardware Type check for BT,GZ as well apart from BD, alpine.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.43  2002/04/30 19:24:28  skumar</span>
<span class="comment-line"># Avoid cleanup for tcl8.5 discrepency, closes all file handles.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.42  2002/04/26 19:55:51  skumar</span>
<span class="comment-line"># Remove MSM from version string, put _ in merge str in DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.41  2002/04/22 18:00:09  skumar</span>
<span class="comment-line"># Change get_dut_info to include RTP related branch etc. info.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.40  2002/04/17 20:54:31  ecooper</span>
<span class="comment-line"># smallIxiaInit:  added IxiaPortsInit and took out a variable not being called.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.39  2002/04/11 00:24:07  skumar</span>
<span class="comment-line"># Check slot PXM for sleep 100 secs on bd/bt after unconfig.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.38  2002/03/29 20:00:08  skumar</span>
<span class="comment-line"># Put check for ixiaCh1 for cli like modules.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.37  2002/03/28 22:40:02  skumar</span>
<span class="comment-line"># Add bladeType into fastInit file in DUTs_info, portMappingList too.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.36  2002/03/28 18:20:07  skumar</span>
<span class="comment-line"># Remove EXTREME_PLATFORM, add fast global var.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.35  2002/03/27 00:23:28  Autotest</span>
<span class="comment-line"># Put sleep to help BT on &#34;unconf sw all&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.34  2002/03/22 20:20:46  tquach</span>
<span class="comment-line"># Change for new cli</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.33  2002/03/08 00:15:44  aleu</span>
<span class="comment-line"># fix hardwareType checking on Summit48si (should be new_gen)</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.32  2002/03/07 02:24:00  aleu</span>
<span class="comment-line"># change info.txt filename to be a variable $infoFilename</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.31  2002/03/05 18:23:05  skumar</span>
<span class="comment-line"># Add BT support, write report dir with BT keyword.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.30  2002/02/12 19:03:40  skumar</span>
<span class="comment-line"># Put platform in DUTs_info diff for Gz and BD after same name MSM64.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.29  2002/01/17 17:56:18  Autotest</span>
<span class="comment-line"># Account for Non-bd systems</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.28  2002/01/10 03:22:04  tquach</span>
<span class="comment-line"># New CLI change from Thanh</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.27  2001/12/27 02:10:03  tquach</span>
<span class="comment-line"># Add blade type</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.26  2001/07/22 21:22:46  tquach</span>
<span class="comment-line"># Add Alpine platform</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.25  2001/07/06 01:07:10  aleu</span>
<span class="comment-line"># add priImage &amp; secImage</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.24  2001/06/15 19:32:16  aleu</span>
<span class="comment-line"># add DUTs_info(DUT$i, RelMaster)</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.23  2001/04/18 00:55:17  Autotest</span>
<span class="comment-line"># Add godzilla platform</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.22  2001/03/03 22:20:40  sphomsakha</span>
<span class="comment-line"># Change summit back to 20 second</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.21  2001/02/16 18:57:57  sphomsakha</span>
<span class="comment-line"># Add Ericsson switch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.20  2001/01/12 00:37:19  tnguyen</span>
<span class="comment-line"># Fix so it can detect old and new hardward properly</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.19  2000/12/07 20:22:36  tnguyen</span>
<span class="comment-line"># Add some wait time for summit platform</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.18  2000/11/03 20:05:57  tnguyen</span>
<span class="comment-line"># Convert mac to upper case</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.17  2000/09/12 22:52:28  tnguyen</span>
<span class="comment-line"># Add logic to detect hardware type</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.16  2000/08/04 22:25:35  tnguyen</span>
<span class="comment-line"># Global change of commonly used funtions to conform with new conventions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.15  2000/08/04 15:58:53  tnguyen</span>
<span class="comment-line"># Replace exit with error function so we can catch the errors</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.14  2000/07/26 18:45:02  tnguyen</span>
<span class="comment-line"># Move open result file so it can save all the interation, instead just the last one</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.13  2000/06/29 23:04:36  tnguyen</span>
<span class="comment-line"># Just sleep for 60 seconds</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.12  2000/06/21 16:26:44  tnguyen</span>
<span class="comment-line"># Add 2 minutes delay for BD after reboot to wait for ports</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11  2000/05/09 18:43:50  jlequang</span>
<span class="comment-line"># Inc Thanh correction to read image version when MSM-A or B is</span>
<span class="comment-line"># selected</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.9  2000/04/07 20:47:53  tnguyen</span>
<span class="comment-line"># Remove sleep 20 command after reboot</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.8  2000/04/07 00:23:49  tnguyen</span>
<span class="comment-line"># Various modifications to the whole project in Lib, L2 and L3.  Commit changes for all these folders at the same time.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.7  2000/03/07 17:50:20  jlequang</span>
<span class="comment-line"># Added proc DUT_BootROM_version {} to</span>
<span class="comment-line"># extract BootROM ver. and added it to find_all_DUT_version</span>
<span class="comment-line"># to be printed on the report.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.6  2000/02/07 23:52:21  jfan</span>
<span class="comment-line"># Add for global variable &#34;version&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.5  2000/01/07 00:03:08  jfan</span>
<span class="comment-line"># Add for report file</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.4  1999/10/27 21:59:54  jfan</span>
<span class="comment-line"># Replace &#34;Input&#34; dir to &#34;Exp&#34; dir.  Replace &#34;Tmp\in_xxx&#34; to &#34;Tmp_tmp_xxx&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.3  1999/09/27 22:31:44  jfan</span>
<span class="comment-line"># Use result_debug, result_ok &amp; result_error for messages</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.2  1999/08/10 18:18:44  jfan</span>
<span class="comment-line"># Added procedure findDutMac</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.1  1999/07/23 14:50:32  aedem</span>
<span class="comment-line"># Merge for 2.0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1.2.2  1999/07/23 18:40:15  aedem</span>
<span class="comment-line"># Updated to use the new result formatting functions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1.2.1  1999/06/30 15:16:12  aedem</span>
<span class="comment-line"># Updated for Linux and Ixia 2.0 Beta</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1  1999/06/25 17:53:46  jfan</span>
<span class="comment-line"># Initial import.</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">##################################################################</span>

<span class="comment-line">#load {expect52.dll}</span>
set auto_path [linsert $auto_path 0 . ]

<strong><a name="::::RunSetupScript_576">proc <a href="ePTswConf.tcl-annot.html#::::RunSetupScript">::::RunSetupScript</a></a></strong> {{connectList &#34;0.0.0.0&#34;} {setupScriptList &#34;&#34;} {args} } {

    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> RunSetupScript $args {
	at &#34;main&#34;  ;<span class="comment-line"># location of script run &#34;download&#34; for download file section </span>
	dut 1     ;<span class="comment-line"># dut supplied when called from download</span>
    }

    global spawn_id
    global in
    global POWERCYCLE_DUT
    global forceSerialReboot
    global numDUT
    for {set i 1} {$i&lt;=$numDUT} {incr i} {
       global DUT($i)_CONNECT
    }
    global switchPort2DefaultRouter
    global defaultRouter
    global regRouterIPAddr

    set in $at
    for {set i 1} {$i&lt;= $numDUT} {incr i} {
       lappend dutList $i
    }

    if { [info exists forceSerialReboot] &amp;&amp; $forceSerialReboot == 1} {
        <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Force serial set in cfg file; Do Serial Setup Script&#34;
        set runSetupRetVal [<a name="::::DoSerialRunSetup(1)"><a href="./swConf.tcl.html#::::DoSerialRunSetup_604">::::DoSerialRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
        return $runSetupRetVal
    }

    if { ([regexp -nocase &#34;mgmt&#34; $switchPort2DefaultRouter]) } {
	<a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;network port is mgmt; run setup script parallely&#34;
	set runSetupRetVal [<a name="::::DoParallelRunSetup(1)"><a href="./swConf.tcl.html#::::DoParallelRunSetup_555">::::DoParallelRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
	return $runSetupRetVal
    }

    if { ![info exists regRouterIPAddr] } {
	<a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;regRouterIPAddr not defined; Do Serial Setup Script&#34;
	set runSetupRetVal [<a name="::::DoSerialRunSetup(2)"><a href="./swConf.tcl.html#::::DoSerialRunSetup_604">::::DoSerialRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
	return $runSetupRetVal
    } else {

	<span class="comment-line"># First try to login to each DUT to make sure that its even possible</span>
	<span class="comment-line"># If not possible, no need to proceed further</span>
	<span class="comment-line"># Only &#34;need&#34; this here because this is where we do the disable port on regrouter...</span>
	<span class="comment-line"># We dont want situation where regrouter ports are disabled and scripts abort on login,</span>
	<span class="comment-line"># leaving the ports in disabled state...</span>
	if { [info exists regRouterIPAddr] } {
	    foreach dutnumber $dutList {
		set DUTName [format %s%d DUT $dutnumber]
		global ${DUTName}_CONNECT
		
		if { [<a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set ${DUTName}_CONNECT] -CheckOperational 0 -masterCheck 0] != 1 } {
		    <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Could not login to DUT$dutnumber [set ${DUTName}_CONNECT]&#34;
		    return &#34;Error&#34;
		}
	    }
	}

	<a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;network port is on I/O blade; try to disable switchPort2DefaultRouter links&#34;

	if { $regRouterIPAddr == $defaultRouter } {
	    <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;FATAL ERROR: regRouterIPAddr cannot be same as defaultRouter IP ($defaultRouter). Check cfg file.&#34;
	    return &#34;REGROUTER_FAILED&#34;
	}

	set unconfigSwAllFound 0
	if { [string tolower $at] != &#34;download&#34; } {
	    <span class="comment-line"># Not called from LoadImage</span>
	    <span class="comment-line"># (if it was, there is no need to disable mgmt links, because that does not do unconfig sw all anyway)</span>
	    foreach setupScript $setupScriptList {
		foreach command $setupScript {
		    if  { [string match &#34;unc* sw*&#34; $command] == 1 } {
			<span class="comment-line"># Do the disable/enable port and parallel SetupScript</span>
			set unconfigSwAllFound 1
			break
		    }
		}
		if { $unconfigSwAllFound } {
		    <span class="comment-line"># No need to check any further... disable/enable regRouter ports required.</span>
		    break
		}
	    }
	}
	if { $unconfigSwAllFound } {
	    set portList [<a name="::::DisableRegRouterMgmtLinks(1)"><a href="./swConf.tcl.html#::::DisableRegRouterMgmtLinks_357">::::DisableRegRouterMgmtLinks</a></a>]
	} else {
	    set portList &#34;NotNeeded&#34;
	}

	if { $portList == &#34;Error&#34; } {
	    <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Could not disable ports on regRouter; run SetupScript serially&#34;
	    set runSetupRetVal [<a name="::::DoSerialRunSetup(3)"><a href="./swConf.tcl.html#::::DoSerialRunSetup_604">::::DoSerialRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
	} elseif { $portList == &#34;NotNeeded&#34; } {
	    <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Disabling regRouter ports not required; run SetupScript parallely&#34;
	    set runSetupRetVal [<a name="::::DoParallelRunSetup(2)"><a href="./swConf.tcl.html#::::DoParallelRunSetup_555">::::DoParallelRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
	} else {
	    <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;regRouter ports disabled successfully; run SetupScript parallely&#34;
	    set runSetupRetVal [<a name="::::DoParallelRunSetup(3)"><a href="./swConf.tcl.html#::::DoParallelRunSetup_555">::::DoParallelRunSetup</a></a> $dutList $connectList $setupScriptList $at $dut]
	}

	if {0} {
	    if { $unconfigSwAllFound } {
		set retVal [<a name="::::EnableRegRouterMgmtLinks(1)"><a href="./swConf.tcl.html#::::EnableRegRouterMgmtLinks_396">::::EnableRegRouterMgmtLinks</a></a> $portList]
	    } else {
		set retVal &#34;NotNeeded&#34;
	    }
	}
	if { $portList == &#34;NotNeeded&#34; } {
	    global regRouterMGMTPorts
	    set portList [join $regRouterMGMTPorts &#34;,&#34;]
	}
	set retVal [<a name="::::EnableRegRouterMgmtLinks(2)"><a href="./swConf.tcl.html#::::EnableRegRouterMgmtLinks_396">::::EnableRegRouterMgmtLinks</a></a> $portList]

	if { ($portList != &#34;Error&#34;) &amp;&amp; ($portList != &#34;NotNeeded&#34;) &amp;&amp; ($retVal == &#34;Error&#34;) } {
	    <span class="comment-line"># If disable port was successful and enable port was not successful</span>
	    
	    <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;FATAL ERROR: Could not re-enable the ports on the RegRouter.&#34;
	    return &#34;REGROUTER_FAILED&#34;
	}
    }
    return $runSetupRetVal
}

<strong><a name="::::DisableRegRouterMgmtLinks_700">proc <a href="ePTswConf.tcl-annot.html#::::DisableRegRouterMgmtLinks">::::DisableRegRouterMgmtLinks</a></a></strong> { } {
    global regRouterIPAddr
    global regRouterMGMTPorts
    global regRouterLogin
    global regRouterPassword

    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Disable links on Reg Router before unconfig all DUT's&#34;

    if { [<a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $regRouterIPAddr -userid $regRouterLogin -passwd $regRouterPassword -CheckOperational 0] != 1 } {
	<a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Could not login to regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return &#34;Error&#34;
    }

    <span class="comment-line">#In case of any extra whitespace between the portnumbers....</span>
    set portList [split $regRouterMGMTPorts]
    foreach portnum $portList {
	if { $portnum == &#34;&#34; } {
	    continue
	}
	lappend pList $portnum
    }
    set portList [join $pList &#34;,&#34;]

    if { [regexp -nocase &#34;illegal&#34; [<a name="::CheckCmdLegal(1)"><a href="./checkCmdLegality.tcl.html#::CheckCmdLegal_58">::CheckCmdLegal</a></a> &#34;disable port $portList&#34;]] } {
	<a name="::logout(1)"><a href="./logout.tcl.html#::logout_21">::logout</a></a>
	<span class="comment-line"># --- use it for delay without using sleep</span>
	puts &#34;Logged out of regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return &#34;Error&#34;
    } else {
	<a name="::logout(2)"><a href="./logout.tcl.html#::logout_21">::logout</a></a>
	<span class="comment-line"># --- use it for delay without using sleep</span>
	puts &#34;Logged out of regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return $portList
    }
}

<strong><a name="::::EnableRegRouterMgmtLinks_739">proc <a href="ePTswConf.tcl-annot.html#::::EnableRegRouterMgmtLinks">::::EnableRegRouterMgmtLinks</a></a></strong> { portList } {
    global regRouterIPAddr
    global regRouterLogin
    global regRouterPassword

    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Re-enable links on Reg Router after unconfig all DUT's&#34;

    if { [<a name="::Login(3)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $regRouterIPAddr -userid $regRouterLogin -passwd $regRouterPassword -CheckOperational 0] != 1 } {
	<a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Could not login to regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return &#34;Error&#34;
    }

    if { [regexp -nocase &#34;illegal&#34; [<a name="::CheckCmdLegal(2)"><a href="./checkCmdLegality.tcl.html#::CheckCmdLegal_58">::CheckCmdLegal</a></a> &#34;enable port $portList&#34;]] } {
	<a name="::logout(3)"><a href="./logout.tcl.html#::logout_21">::logout</a></a>
	<span class="comment-line"># --- use it for delay without using sleep</span>
	puts &#34;Logged out of regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return &#34;Error&#34;
    } else {
	<span class="comment-line"># Verify ports are now in enabled state</span>
	foreach portNum [split $portList &#34;,&#34;] {
	    lappend parameterList &#34;{^ *$portNum .*E } exist&#34;
	}
	if { [<a name="::CheckKeyValue(1)"><a href="./OptionCheck.tcl.html#::CheckKeyValue_47">::CheckKeyValue</a></a> &#34;show port $portList info&#34; $parameterList \
		-comment &#34;Verifying all ports re-enabled on regRouter $regRouterIPAddr&#34;] == &#34;error&#34; } {

	    <span class="comment-line"># Disable port was successful and enable port was not successful</span>
	    
	    <a name="::logout(4)"><a href="./logout.tcl.html#::logout_21">::logout</a></a>
	    <span class="comment-line"># --- use it for delay without using sleep</span>
	    puts &#34;Logged out of regrouter $regRouterIPAddr&#34;
	    <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	    <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;FATAL ERROR: Could not re-enable the ports on the RegRouter.&#34;
	    return &#34;Error&#34;
	}
	<a name="::logout(5)"><a href="./logout.tcl.html#::logout_21">::logout</a></a>
	<span class="comment-line"># --- use it for delay without using sleep</span>
	puts &#34;Logged out of regrouter $regRouterIPAddr&#34;
	<a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
	return $portList
    }
}

<strong><a name="::::DoParallelRunSetup_783">proc <a href="ePTswConf.tcl-annot.html#::::DoParallelRunSetup">::::DoParallelRunSetup</a></a></strong> { dutList connectList setupScriptList at dut } {

    set pid [pid]


    package require Tclx

    foreach dutnumber $dutList {
	
	<span class="comment-line"># Need to login once before the child processes are forked, </span>
	<span class="comment-line"># because spawn_id from parent is used later in get_DUTs_info</span>
	set DUTName [format %s%d DUT $dutnumber]
	global ${DUTName}_CONNECT
	if {![regexp -nocase &#34;download&#34; $at] } {
	   <a name="::Login(4)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set ${DUTName}_CONNECT] -CheckOperational 0
        }
	set sec [clock seconds]
	lappend childPids [fork]
	after 1000 ;<span class="comment-line"># required to avoid children getting the same tmp file sometimes being too fast</span>
	if {[lindex $childPids [expr $dutnumber-1]]} {
	    if {$dutnumber==[llength $dutList]} {
		set co 1
		foreach childPid $childPids {
		    <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Parent now waiting for child # $co with pid $childPid&#34;
                    set childRetCode  [wait $childPid]
		    if {![regexp -nocase &#34;EXIT 0&#34; $childRetCode]} {    ;<span class="comment-line"># parent waits here for child to complete</span>
                       <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Now child returned with pid $childPid with $childRetCode status&#34;
                       return -1
                    } else {
                       <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Now child returned with pid $childPid&#34;
                       incr co
                    }
		}
	    }
	} else {
	    <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;child # $dutnumber enters with pid [pid]&#34;
	    set connect [lindex $connectList [expr $dutnumber-1]]
	    set setupScript [lindex $setupScriptList [expr $dutnumber-1]]
	    
	    if {[<a name="::::RunSetupScript_Single(1)"><a href="./swConf.tcl.html#::::RunSetupScript_Single_620">::::RunSetupScript_Single</a></a> $connect $setupScript -at $at -dut $dutnumber]==-1} {
		return -1
	    }
	    exit   ;<span class="comment-line"># Child exits here, returns back to the waiting parent</span>
	    <span class="comment-line"># end of fork construct</span>
	}
    }
            <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2 ;<span class="comment-line"># needed to avoid race condition in consoles</span>
}

<strong><a name="::::DoSerialRunSetup_832">proc <a href="ePTswConf.tcl-annot.html#::::DoSerialRunSetup">::::DoSerialRunSetup</a></a></strong>  { dutList connectList setupScriptList at dut } {
    <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Could not disable ports on regRouter; run unconfig sequentially&#34;
    foreach dutnumber $dutList {
	set connect [lindex $connectList [expr $dutnumber-1]]
	set setupScript [lindex $setupScriptList [expr $dutnumber-1]]	
	if {[<a name="::::RunSetupScript_Single(2)"><a href="./swConf.tcl.html#::::RunSetupScript_Single_620">::::RunSetupScript_Single</a></a> $connect $setupScript -at $at -dut $dutnumber]==-1} {
	    if { [regexp -nocase &#34;download&#34; $at] } {
		<span class="comment-line"># called from LoadImage; return dutnum</span>
		return &#34;$dutnumber-1&#34;
	    } else {
		return -1
	    }
	}
    }
}

<strong><a name="::::RunSetupScript_Single_848">proc <a href="ePTswConf.tcl-annot.html#::::RunSetupScript_Single">::::RunSetupScript_Single</a></a></strong> {{connect &#34;0.0.0.0&#34;} {setupScript &#34;&#34;} {args} } {
    global spawn_id

    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> RunSetupScript $args {
	at &#34;main&#34;  ;<span class="comment-line"># location of script run &#34;download&#34; for download file section </span>
	dut 1     ;<span class="comment-line"># dut supplied when called from download</span>
    }
    global in
    global POWERCYCLE_DUT
    set in $at
    if {$in==&#34;download&#34;} {
	if {[info exists POWERCYCLE_DUT($dut)]} {
	    global DUT${dut}_TYPE
	    if {([info exists DUT${dut}_TYPE] &amp;&amp; [set DUT${dut}_TYPE]!=&#34;PC&#34;) || ![info exists DUT${dut}_TYPE]} {
		
		if {[<a name="::powerCycleToBootRom(1)"><a href="./bootRomLib.tcl.html#::powerCycleToBootRom_912">::powerCycleToBootRom</a></a> $dut]==&#34;ok&#34;} {
		    <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Wait for 60 secs for rebooted DUT to come up...&#34;
		    <a name="::exSleep(2)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 60
		    <a name="::Login(5)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $connect
		    set output [<a name="::CheckOperational(1)"><a href="./login.tcl.html#::CheckOperational_653">::CheckOperational</a></a>]
		    if { $output == 0 } {
			<a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Some slots not operational&#34;
			error &#34;Some slots not operational&#34;
		    }
		}
	    }
	}
    }

    <span class="comment-line"># Do not checkOperational as unc first</span>
    if {[<a name="::Login(6)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $connect -CheckOperational 0] != 1} {   
	<a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;login failed &#34; 
	return -1   ;<span class="comment-line"># Error during login</span>
    }

    foreach command $setupScript {
	if { ([string match &#34;unc* sw*&#34; $command] == 1) \
		&amp;&amp; ([string tolower $at] != &#34;download&#34;) } {
	    if {[<a name="::UnconfigSwAll(1)"><a href="./SendSwCmd.tcl.html#::UnconfigSwAll_1628">::UnconfigSwAll</a></a> -initial_unconfig yes] == 0 } {
		<a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unconfig sw all failed&#34; 
		return -1
	    }
	} elseif { ([string match &#34;unc* sw*&#34; $command] == 1) } {
	    puts &#34;Skipping Unconfig Switch for Download&#34; 
	} else {
	    set buf [<a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> $command]
	    set backupStr &#34;Error: This command can only be executed on Master&#34;
	    if {[regexp -nocase $backupStr $buf]} {
		if {[string tolower $at] == &#34;download&#34;} {
		    <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Backup encountered&#34;
		} else {
		    <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Backup encountered, aborting&#34;
		    return -1
		}
	    }
	}
    }
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: SaveAndReboot</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Performs save/reboot to the current DUT</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              SaveAndReboot</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::SaveAndReboot_925">proc <a href="ePTswConf.tcl-annot.html#::::SaveAndReboot">::::SaveAndReboot</a></a></strong> { } {


   <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****Save and reboot.****&#34;
   send &#34;save\r&#34;
   expect &#34;database?&#34;
   send &#34;y\r&#34;
   expect &#34;#&#34;
   send &#34;reboot\n&#34;
   expect -nocase &#34;(y*n*)&#34;
   send &#34;y\r&#34;
   expect &#34;login:&#34;
   send &#34;admin\r&#34;
   expect &#34;password:&#34;
   send &#34;\r&#34;
   expect &#34;#&#34;


}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: clearFdb</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Performs clear fdb on the current DUT, retained for historical reasons</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              clearFdb</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::clearFdb_962">proc <a href="ePTswConf.tcl-annot.html#::::clearFdb">::::clearFdb</a></a></strong> {fd} {
   global DUTs_info;
   global whichDutNow;

   <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;--- clear fdb&#34;;
   send &#34;clear fdb\r&#34;;

   <span class="comment-line"># For Aspen and Cougar platform delay 5 seconds to sync FDB cache on MSM with HW deleted FDBs on IO module.</span>
   global bcmPlatform
   if {[regexp -nocase $bcmPlatform $DUTs_info(DUT$whichDutNow,platform)]} {
      <a name="::result_debug(17)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Sleeping 5s awaiting clear fdb completion&#34;;
      <a name="::exSleep(3)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5;
   }

   expect &#34;#&#34;;

   global pioneerPlatform
   if {[regexp -nocase $pioneerPlatform $DUTs_info(DUT$whichDutNow,platform)]} {
       <a name="::result_print(1)"><a href="./loadConsoles.tcl.html#::result_print_12">::result_print</a></a> &#34;Sleeping 15s awaiting PIONEER clear fdb completion....&#34;;
       <a name="::exSleep(4)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 15
   } 
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: get_DUTs_info</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: creates a DUTs_info array after discovering all DUTs information in the testbed.</span>
<span class="comment-line">#              fills in all elements of DUTs_info array with relevant information.</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              get_DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::get_DUTs_info_1004">proc <a href="ePTswConf.tcl-annot.html#::::get_DUTs_info">::::get_DUTs_info</a></a></strong> {{infoFilename &#34;info&#34;} {tmpdir &#34;Tmp&#34;}} {
puts &#34;---Enter into get_DUTs_info&#34;
global spawn_id
global numDUT
global fast
global DUT
global exos

<span class="comment-line">#variable to store all the DUTs interested information</span>
global DUTs_info
global DUTs_Slot_info
global chassis

set pid [pid]

set fd_res [<a name="::open_result_file(1)"><a href="./result.tcl.html#::open_result_file_276">::open_result_file</a></a> &#34;$infoFilename&#34;]
set slotDump 0   
for {set i 1} {$i &lt;= $numDUT} {incr i 1} { 
global eware_dut
   if {([info exists eware_dut]) &amp;&amp; ([lsearch $eware_dut $i] &gt; -1 )} {
             global DUT[set i]_CONNECT
             <a name="::Login(7)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT[set i]_CONNECT]
            <a name="::::get_DUTs_info_eware(1)"><a href="./swConf.tcl.html#::::get_DUTs_info_eware_2409">::::get_DUTs_info_eware</a></a>
   } else {
   global DUT[set i]_CONNECT
   <a name="::Login(8)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT[set i]_CONNECT]

   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Get Slot info dump if Platform Type is BD or BT or Godzilla etc</span>
   <span class="comment-line">################################################################</span>
   set fd_in [open &#34;$tmpdir/tmp_info_DUT$i$pid&#34; &#34;w&#34;]

   <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable clipaging&#34;
   <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show version detail&#34;
   <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show version images&#34;
   <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show fans detail&#34;
   <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show switch&#34; $fd_res $fd_in
   <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;show version&#34; $fd_res $fd_in
   close $fd_in

   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Initiallize variables to be gathered.</span>
   <span class="comment-line">################################################################</span>
   set imageSel &#34;NONE&#34;
   set imageBooted &#34;NONE&#34;
   set priImage &#34;INVALID&#34;
   set secImage &#34;INVALID&#34;
   set version &#34;INVALID&#34;
   set platform &#34;INVALID&#34;
   set sysMAC &#34;INVALID&#34;
   set bootROM &#34;INVALID&#34;
   set relMaster &#34;INVALID&#34;
   set hwList 0
   set numSlots  &#34;0&#34;   
   set verTime   &#34;INVALID&#34;
   set memoryCard &#34;INVALID&#34;
   set dlReqD    &#34;0&#34;
   set showVerVersion &#34;&#34;
   set snmpVersion &#34;2&#34;
   set sysN &#34;INVALID&#34;
   set sysT &#34;INVALID&#34;
   set license &#34;INVALID&#34;

   set DUTs_info(DUT$i,imageSel) $imageSel
   set DUTs_info(DUT$i,imageBooted) $imageBooted
   set DUTs_info(DUT$i,priImage) $priImage
   set DUTs_info(DUT$i,secImage) $secImage
   set DUTs_info(DUT$i,version) $version
   set DUTs_info(DUT$i,verTime)   $verTime   
   set DUTs_info(DUT$i,platform) $platform
   set DUTs_info(DUT$i,sysMAC) $sysMAC
   set DUTs_info(DUT$i,bootROM) $bootROM
   set DUTs_info(DUT$i,numSlots)  $numSlots   
   set DUTs_info(DUT$i,relMaster) $relMaster
   set DUTs_info(DUT$i,hwList) $hwList
   set DUTs_info(DUT$i,dlReqD)   $dlReqD
   set DUTs_info(DUT$i,sysName) $sysN
   set DUTs_info(DUT$i,sysType) $sysT
   set DUTs_info(debugFlag) 1
   set DUTs_info(DUT$i,sVVersion) $showVerVersion
   set DUTs_info(DUT$i,snmpVersion) $snmpVersion
   set DUTs_info(DUT$i,license) $license
   set DUTs_info(DUT$i,memoryCard) NULL

   set bList &#34;NULL&#34;
   set location &#34;NULL&#34;

   set fd_in [open &#34;$tmpdir/tmp_info_DUT$i$pid&#34; &#34;r&#34;]
   while {[gets $fd_in line] != -1} {
      set cookedLine [<a name="::cookString(1)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]


<span class="comment-line">#result_debug &#34;----- cookedLine=$cookedLine&#34;</span>
      set aList [split $cookedLine]

      if {$bList != &#34;NULL&#34;} {

<span class="comment-line"># Determine location in file search &#34;show switch, slot or version&#34;</span>
      if { ([lindex $bList 0] == &#34;sysName:&#34;) || ([lindex $bList 0] == &#34;SysName:&#34;) } {
         set location &#34;switch&#34;
         }

      if { ([lindex $bList 0] == &#34;Chassis:&#34;)  || \
           ([lindex $bList 0] == &#34;Chassis&#34;)   || \
           ([lindex $bList 0] == &#34;Slot-1&#34;)   || \
           ([lindex $bList 0] == &#34;Switch&#34;)   || \
           ([lindex $bList 0] == &#34;CPU&#34;)   || \
           ([lindex $bList 0] == &#34;Daughtercard:&#34;) || \
           ([lindex $bList 0] == &#34;Baseboard:&#34;)  } {
         set location &#34;version&#34;
      }

<span class="comment-line">###########   Find image version selected to boot###########################</span>

      if { ([lindex $bList 0] == &#34;Image&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Selected:&#34;) &amp;&amp;      \
           ( $location == &#34;switch&#34;        )  &amp;&amp; [lindex $aList 2]!=&#34;&#34;} {
         set imageSel [lindex $aList 2]
         set imageSel [string tolower $imageSel]
      }
      <span class="comment-line">#for 6.2.1</span>
      if { ([lindex $aList 0] == &#34;Image&#34;) &amp;&amp;     \
           ([lindex $aList 1] == &#34;Booted:&#34;) &amp;&amp; [lindex $aList 2]!=&#34;&#34; } {
         set imageBooted [lindex $aList 2]
         set imageBooted [string tolower $imageBooted]
      }


<span class="comment-line">############ Find the names of the images load in the 2 MSM spaces.. ###</span>


      <span class="comment-line">#find primary image</span>
      if { ( $location == &#34;switch&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $bList 1]] == &#34;ver:&#34;) } {
         set priImage [lindex $bList 2]
      }
      <span class="comment-line">#find second image</span>
      if { ( $location == &#34;switch&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;secondary&#34;) &amp;&amp;   \
           ([string tolower [lindex $bList 1]] == &#34;ver:&#34;) } {
         set secImage [lindex $bList 2]
      }
      <span class="comment-line">#find System Name</span>
      if { ([string tolower [lindex $bList 0]] == &#34;sysname:&#34;) } {
         <span class="comment-line">#set platform [computeSysName [lindex $bList 1]]</span>
         set sysN [lindex $bList 1]
      }
      <span class="comment-line">#find System Type</span>
      if { ( $location == &#34;switch&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;system&#34;) &amp;&amp;   \
           ([string tolower [lindex $bList 1]] == &#34;type:&#34;) } {
               set sysT [lindex $bList 2]

               if {[regexp -nocase stack $bList match]} {
                   set platform $match
                }  else {
                   set platform $sysT
                }
       
         }

                      
      
      <span class="comment-line">#find system MAC</span>
      if { ([lindex $bList 0] == &#34;System&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;MAC:&#34;) } {
         set sysMAC [lindex $bList 2]

      }
      <span class="comment-line">#find release master, time of the build, and the release master</span>
      <span class="comment-line"># EY-06-15-2006: Added elseif clause to handle new &#34;ExtremeXOS&#34;</span>
      <span class="comment-line"># software name.</span>
      if { ( $location == &#34;version&#34; )     &amp;&amp; \
           ([lindex $bList 0] == &#34;Image&#34;) &amp;&amp; \
           ([lindex $bList 3] == &#34;XOS&#34;)   &amp;&amp; \
           ([lindex $bList 4] == &#34;version&#34;)} {

         set version [lindex $bList 5];
         set showVerVersion [lindex $bList 6];
         <span class="comment-line"># Compute the version for patch builds in EXOS</span>
         if {[regexp -nocase &#34;\\-&#34; $showVerVersion]} {
            set patchList [split $showVerVersion &#34;-&#34;];
            foreach str [lrange $patchList 1 end] {
               set version [format %s-%s $version $str];
            }
         }
         set relMaster [lindex $bList 8];
      } elseif { ( $location == &#34;version&#34; )          &amp;&amp; \
                 ([lindex $bList 0] == &#34;Image&#34;)      &amp;&amp; \
                 ([lindex $bList 2] == &#34;ExtremeXOS&#34;) &amp;&amp; \
                 ([lindex $bList 3] == &#34;version&#34;)} {

          set version [lindex $bList 4];
          set showVerVersion [lindex $bList 5];
          <span class="comment-line"># Compute the version for patch builds in EXOS</span>
          if {[regexp -nocase &#34;\\-&#34; $showVerVersion]} {
             set patchList [split $showVerVersion &#34;-&#34;];
             foreach str [lrange $patchList 0 end] {
                set version [format %s-%s $version $str];
             }
          }
          set relMaster [lindex $bList 7];
      }
      if { ( $location == &#34;version&#34; ) &amp;&amp;     \
           ([lindex $bList 0] == &#34;on&#34;)} {
         set verTime [lrange $bList 1 6]
      }



      <span class="comment-line">#find BootROM</span>
      if { ([lindex $bList 0] == &#34;BootROM&#34;) } {
         set bootROM [lindex $bList 2]

      }      

   }
   set bList $aList;<span class="comment-line"># This sets bList equal to the PREVIOUS line aList</span>
   }  ;<span class="comment-line"># end of file while</span>


   <span class="comment-line">#get slot info to figure out hardware type</span>
   set hardwareType &#34;NEW_GEN&#34;
   set bladeType &#34;NONE&#34;
   global chassis
   global i386Chassis
   if {[regexp -nocase &#34;$chassis|$i386Chassis&#34; $platform]} {
      lappend parameterList &#34;{^Slot-\[0-9\]+} 1&#34;
      set HardwareList [<a name="::GetKeyValue(1)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show slot&#34; $parameterList]
      unset parameterList
      <a name="::result_debug(18)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;HardwareList: $HardwareList&#34;
      set hwList $HardwareList;
      set k 0;
      foreach hardware $HardwareList {
         if {[lsearch -regexp $bladeType $hardware]==-1} {
            if {$bladeType==&#34;NONE&#34;} {set bladeType &#34;&#34;}
            if {![regexp -nocase &#34;none|Empty&#34; $hardware]} {
               set bladeType &#34;$bladeType$hardware&#34;
            }
         }
         incr k 1;
      }
      <span class="comment-line"># Use foreach loop count to set numSlots</span>
      set numSlots $k;
   } else {
      global stackable i386Stackable
      if { [regexp -nocase &#34;$stackable|$i386Stackable&#34; $platform]} {
         set hardwareType &#34;NEW_GEN&#34;
      }
   }

   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Determine whether memorycard present, fill in memoryCard in DUTs_info</span>
   <span class="comment-line">################################################################</span>
   global chassis stacking
   if {[regexp -nocase $chassis $platform] &amp;&amp; ![regexp -nocase $stacking $platform]} {
      set memBuf [<a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;ls memorycard&#34;]
      if {![regexp -nocase &#34;Error: Memorycard is not present&#34; $memBuf]} {
         set memoryCard &#34;present&#34;
      }
   }

   set parameterList &#34;&#34;
   lappend parameterList &#34;{Enabled License Level:} 0 1&#34;
   lappend parameterList &#34;{Enabled License Level:} 1 1&#34;
   set getLicense [<a name="::GetKeyValue(2)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show license&#34; $parameterList];
   <span class="comment-line"># EY-05-15-2008: Cleared out parameterList before end of loop.</span>
   <span class="comment-line"># This fixes a problem when retrieving slot info on a test bed with</span>
   <span class="comment-line"># more than one chassis or stack DUT.</span>
   unset parameterList;
   if {[lindex [lindex $getLicense 0] 1] != &#34;&#34;} {
      set temp [split [lindex $getLicense 0] &#34; &#34;]
      set currentLicense [concat [lindex $temp 0][lindex $temp 1]]
   } else {
      set temp [split [lindex $getLicense 0] &#34; &#34;]
      set currentLicense [lindex $temp 0]
   }
   set license $currentLicense



   <span class="comment-line">################################################################</span>

   global _VERSION
   global VERSION
   set _VERSION $version
   set VERSION [string range $_VERSION 0 0]
   set DUTs_info(DUT$i,VERSION) $VERSION
   <span class="comment-line">################################################################</span>

   puts &#34;####### version $version  ###########################&#34;
   set DUTs_info(DUT$i,imageSel) $imageSel
   set DUTs_info(DUT$i,imageBooted) $imageBooted
   set DUTs_info(DUT$i,priImage) $priImage
   set DUTs_info(DUT$i,secImage) $secImage
   set DUTs_info(DUT$i,version) $version
   set DUTs_info(DUT$i,verTime) $verTime   
   set DUTs_info(DUT$i,platform) $platform
   set DUTs_info(DUT$i,sysName) $sysN
   set DUTs_info(DUT$i,sysType) $sysT
   set DUTs_info(DUT$i,sysMAC) [string toupper $sysMAC]
   set DUTs_info(DUT$i,relMaster) $relMaster
   set DUTs_info(DUT$i,bootROM) $bootROM
   set DUTs_info(DUT$i,numSlots) $numSlots
   set DUTs_info(DUT$i,hwList) $hwList
   set DUTs_info(DUT$i,HardwareType) $hardwareType
   set DUTs_info(DUT$i,bladeType) $bladeType
   set DUTs_info(DUT$i,dlReqD)   $dlReqD
   set DUTs_info(DUT$i,sVVersion) $showVerVersion
   set DUTs_info(DUT$i,memoryCard) $memoryCard
   set DUTs_info(DUT$i,snmpVersion) $snmpVersion
   set DUTs_info(DUT$i,license) [string tolower $license]

   <a name="::result_debug(19)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** DUT$i Info ********&#34;
   <a name="::result_debug(20)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Selected = $DUTs_info(DUT$i,imageSel)&#34;
   <a name="::result_debug(21)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Booted = $DUTs_info(DUT$i,imageBooted)&#34;
   <a name="::result_debug(22)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Version = $DUTs_info(DUT$i,version)&#34;
   <a name="::result_debug(23)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Connect type= $DUTs_info(DUT$i,connectType)&#34;
   <a name="::result_debug(24)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Running Image Built on $DUTs_info(DUT$i,verTime)&#34;   
   <a name="::result_debug(25)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Primary Image = $DUTs_info(DUT$i,priImage)&#34;
   <a name="::result_debug(26)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Secondary Image = $DUTs_info(DUT$i,secImage)&#34;
   <a name="::result_debug(27)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Platform = $DUTs_info(DUT$i,platform)&#34;
   <a name="::result_debug(28)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;System MAC = $DUTs_info(DUT$i,sysMAC)&#34;
   <a name="::result_debug(29)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;System Type = $DUTs_info(DUT$i,sysType)&#34;
   <a name="::result_debug(30)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;BootROM = $DUTs_info(DUT$i,bootROM)&#34;
   <a name="::result_debug(31)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Release Master = $DUTs_info(DUT$i,relMaster)&#34;
   <a name="::result_debug(32)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Slot Card List = $DUTs_info(DUT$i,hwList)&#34;
   <a name="::result_debug(33)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Number of Slots = $DUTs_info(DUT$i,numSlots)&#34;   
   <a name="::result_debug(34)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hardware Type = $DUTs_info(DUT$i,HardwareType)&#34;
   <a name="::result_debug(35)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Blade Type = $DUTs_info(DUT$i,bladeType)&#34;
   <a name="::result_debug(36)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Download Flag Init    = $DUTs_info(DUT$i,dlReqD)&#34;
   <a name="::result_debug(37)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Version from Show Version = $DUTs_info(DUT$i,sVVersion)&#34;
   <a name="::result_debug(38)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;memoryCard status = $DUTs_info(DUT$i,memoryCard)&#34;
   <a name="::result_debug(39)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;SNMP version = $DUTs_info(DUT$i,snmpVersion)&#34;
   <a name="::result_debug(40)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;License = $DUTs_info(DUT$i,license)&#34;
   close $fd_in
   catch {file delete &#34;$tmpdir/tmp_info_DUT$i$pid&#34;}

   if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
       puts $fast &#34;set DUTs_info(DUT$i,imageSel) \&#34;$DUTs_info(DUT$i,imageSel)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,imageBooted) \&#34;$DUTs_info(DUT$i,imageBooted)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,version) \&#34;$DUTs_info(DUT$i,version)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,connectType) \&#34;$DUTs_info(DUT$i,connectType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,VERSION) \&#34;$DUTs_info(DUT$i,VERSION)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,priImage) \&#34;$DUTs_info(DUT$i,priImage)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,secImage) \&#34;$DUTs_info(DUT$i,secImage)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,platform) \&#34;$DUTs_info(DUT$i,platform)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sysMAC) \&#34;$DUTs_info(DUT$i,sysMAC)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,bootROM) \&#34;$DUTs_info(DUT$i,bootROM)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,relMaster) \&#34;$DUTs_info(DUT$i,relMaster)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,verTime) \&#34;$DUTs_info(DUT$i,verTime)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,hwList) \&#34;$DUTs_info(DUT$i,hwList)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,numSlots) \&#34;$DUTs_info(DUT$i,numSlots)\&#34;&#34;       
       puts $fast &#34;set DUTs_info(DUT$i,HardwareType) \&#34;$DUTs_info(DUT$i,HardwareType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,bladeType) \&#34;$DUTs_info(DUT$i,bladeType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,dlReqD) \&#34;$DUTs_info(DUT$i,dlReqD)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sysName) \&#34;$DUTs_info(DUT$i,sysName)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sysType) \&#34;$DUTs_info(DUT$i,sysType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sVVersion) \&#34;$DUTs_info(DUT$i,sVVersion)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,snmpVersion) \&#34;$DUTs_info(DUT$i,snmpVersion)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,license) \&#34;$DUTs_info(DUT$i,license)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,memoryCard) \&#34;$DUTs_info(DUT$i,memoryCard)\&#34;&#34;
       puts $fast &#34;set DUTs_info(debugFlag) \&#34;$DUTs_info(debugFlag)\&#34;&#34;
       if {[info exists DUTs_info(current_module)]} {
       puts $fast &#34;set DUTs_info(current_module) \&#34;$DUTs_info(current_module)\&#34;&#34;
       }
   }
}
}
<a name="::close_result_file(1)"><a href="./result.tcl.html#::close_result_file_363">::close_result_file</a></a>  
<span class="comment-line"># Now get the info from the individual slots if platform matches</span>
     if {$slotDump} {
         <a name="::::get_DUTs_Slot_info(1)"><a href="./swConf.tcl.html#::::get_DUTs_Slot_info_2096">::::get_DUTs_Slot_info</a></a> $tmpdir
     }
puts &#34;---------------------------- 7 -------------------&#34;
     if {![info exists DUT(LoadImage)]} { ;<span class="comment-line"># Need to turn of when run LoadImage</span>
puts &#34;---------------------------- 8 -------------------&#34;
<span class="comment-line">#         getTECardSpeed</span>
puts &#34;---------------------------- 9 -------------------&#34;
     }
puts &#34;---------------------------- 10 -------------------&#34;
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DutSlotType</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Return the slot name of a specified DUT and Slot</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: DUT number, Slot Number</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: Return the slot name of a specified DUT and Slot</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              DutSlotType 1 1</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: GetSwitchInfo</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::DutSlotType_1404">proc <a href="ePTswConf.tcl-annot.html#::::DutSlotType">::::DutSlotType</a></a></strong> {{dut &#34;&#34;} {slot &#34;&#34;}} {
   global DUTs_info
   if {$DUTs_info(DUT$dut,bladeType) != &#34;NONE&#34;} {
       set cardType [lindex $DUTs_info(DUT${dut},hwList) [expr $slot -1]]
   } else {
       set cardType &#34;NONE&#34;
   }

   return $cardType
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DutSlotNumPorts</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Return the number of ports on a slot</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: DUT number, Slot Number</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: Return the number of slots on a port</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              DutSlotNumPorts 1 1</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: GetSwitchInfo</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::DutSlotNumPorts_1431">proc <a href="ePTswConf.tcl-annot.html#::::DutSlotNumPorts">::::DutSlotNumPorts</a></a></strong> {{dut &#34;&#34;} {slot &#34;&#34;}} {
   global DUTs_info

   if {$DUTs_info(DUT$dut,bladeType) != &#34;NONE&#34;} {
       set cardType [lindex $DUTs_info(DUT${dut},hwList) [expr $slot -1]]
   } else {
       set cardType &#34;0&#34;
   }

   if {0} {
      if {[regexp -nocase &#34;(\[0-9\]+)&#34; $cardType str]} {
         set numPort $str
      } else {
         set numPort &#34;0&#34;
      }
   } else {
      if {[regexp -nocase &#34;(\[0-9\]+)&#34; $cardType str]} {
          <a name="::Login(9)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUTs_info(DUT${dut},connect)
          lappend parameterList &#34;available: 1&#34;
          set numPort [<a name="::GetKeyValue(3)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show slot $slot&#34; $parameterList]
          unset parameterList
      } else {
         set numPort &#34;0&#34;
      }
   }

   return $numPort
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: DutSlotStateRT</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: Return the state of a slot from a real time show slot x</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: DUT number, Slot Number</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: Return the state of the card</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              DutSlotStateRT 1 1</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: GetSwitchInfo</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::DutSlotStateRT_1476">proc <a href="ePTswConf.tcl-annot.html#::::DutSlotStateRT">::::DutSlotStateRT</a></a></strong> {{dut &#34;&#34;} {slot &#34;&#34;}} {
    global DUTs_info

    <a name="::Login(10)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $DUTs_info(DUT${dut},connect)

    if {$DUTs_info(DUT$dut,bladeType) != &#34;NONE&#34;} {
        lappend parameterList &#34;State: 1&#34;
        set slotState [<a name="::GetKeyValue(4)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show slot $slot&#34; $parameterList]
        unset parameterList
    } else {
        set slotState NONE
    }
    return $slotState
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: computeSysName</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: determines the platform system name. Run a sh ver and determines platform based on</span>
<span class="comment-line">#              number of slots i.e. whether 16,8 or 4 for GZ, BD or BT respectively.</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: Returns the system name either BD, BT, GODZILLA or Sysname</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              computeSysName</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::computeSysName_1511">proc <a href="ePTswConf.tcl-annot.html#::::computeSysName">::::computeSysName</a></a></strong> {{<a name="::sysName(1)"><a href="./LLDPLib.tcl.html#::sysName_863">::sysName</a></a> &#34;&#34;}} {

   if {[regexp -nocase &#34;MSM&#34; $sysName]} {
      lappend parameterList &#34;{SLOT *16 :} 1&#34;
      set slot16Value [<a name="::GetKeyValue(5)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show ver&#34; $parameterList]
      unset parameterList
      <a name="::result_debug(41)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;slot16Value: $slot16Value&#34;
      if {[regexp -nocase &#34;KEY_NOT_FOUND&#34; $slot16Value]} {   ;<span class="comment-line"># BD or BT</span>
         lappend parameterList &#34;{SLOT *5 :} 1&#34;
         set slot5Value [<a name="::GetKeyValue(6)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show ver&#34; $parameterList]
         unset parameterList
         <a name="::result_debug(42)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;slot5Value: $slot5Value&#34;
         if {[regexp -nocase &#34;KEY_NOT_FOUND&#34; $slot5Value]} {   ;<span class="comment-line"># BT</span>
            set platform BT
         } else {
             <span class="comment-line"># no more set BD to MSM64 after ridding of EXTREME_PLATFORM</span>
             <span class="comment-line">#set platform $sysName ;# BD</span>
             set platform BD
         }
      } else {    ;<span class="comment-line"># Godzilla</span>
         set platform GODZILLA
      }
   } else {
      set platform $sysName
   }
   return $platform
}


<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: getTECardSpeed</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: determines the test equipment card's speed i.e. 10/100 or 1G</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              getTECardSpeed</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::getTECardSpeed_1557">proc <a href="ePTswConf.tcl-annot.html#::::getTECardSpeed">::::getTECardSpeed</a></a></strong> {} {
   global ixiaCh1
   global startCardNum
   global fast

   global cardSpeed
   set cardSpeed 0
  if {[info exists ixiaCh1]} {   
     global env
     if {[set fd_out [<a name="::FileOpen(1)"><a href="./queueLib.tcl.html#::FileOpen_58">::FileOpen</a></a> [file join $env(IXIA_HOME) &#34;lib/ixTcl1.0/ixTclHal.tcl&#34;] r+]]==-1} {
         return $fd_out 
      }
<span class="comment-line">#      package require IxTclHal</span>
      funlock $fd_out 
<span class="comment-line">#      package require Tclx</span>
      package require Tclx
<span class="comment-line">#      package require Mpexpr</span>
      package require Mpexpr
      <span class="comment-line">#clean up any previous mess</span>
   <span class="comment-line">#   cleanUp</span>
<span class="comment-line">#      ixInitialize $ixiaCh1</span>
<span class="comment-line">#      port get 1 $startCardNum 1</span>
<span class="comment-line">#      set cardSpeed [port cget -speed]</span>
      if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
<span class="comment-line">#         puts $fast &#34;set cardSpeed $cardSpeed&#34;</span>
      }
   }
   return
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: smallIxiaInit</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: This performs a faster ixia init in case of dev mode run.</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              smallIxiaInit</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::smallIxiaInit_1604">proc <a href="ePTswConf.tcl-annot.html#::::smallIxiaInit">::::smallIxiaInit</a></a></strong> {} {
      <span class="comment-line"># ----- Ixia initialization</span>
  global ixiaCh1
if { 0 } {
puts &#34;enter smallIxiaInit----&#34;
  global ixiaCh1
  global ixiaNoReset
  if {[info exists ixiaCh1]} {
     global env
     if {[set fd_out [<a name="::FileOpen(2)"><a href="./queueLib.tcl.html#::FileOpen_58">::FileOpen</a></a> [file join $env(IXIA_HOME) &#34;lib/ixTcl1.0/ixTclHal.tcl&#34;] r+]]==-1} {
         return $fd_out 
      }
puts &#34;enter smallIxiaInit1----&#34;
<span class="comment-line">#      package require IxTclHal</span>
puts &#34;enter smallIxiaInit2----&#34;
      funlock $fd_out 
puts &#34;enter smallIxiaInit3----&#34;
     package require Tclx
puts &#34;enter smallIxiaInit4----&#34;
     package require Mpexpr
     <span class="comment-line">#clean up any previous mess</span>
<span class="comment-line">#     cleanUp</span>
puts &#34;enter into ixInitialize--&#34;
<span class="comment-line">#     ixInitialize $ixiaCh1</span>
     if {![info exists ixiaNoReset]} {
         <a name="::IxiaPortsInit(1)"><a href="./ePTTx.tcl.html#::IxiaPortsInit_331">::IxiaPortsInit</a></a>
     }
  }
}
     package require Tclx
     package require Mpexpr
     <a name="::ixInitialize(1)"><a href="./mapping.tcl.html#::ixInitialize_55">::ixInitialize</a></a> $ixiaCh1
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: RunUnCon</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: This performs a uncon sw a at a slower speed making sure evey char typed is </span>
<span class="comment-line">#              is accepted by DUT</span>
<span class="comment-line">#</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              RunUnCon</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::RunUnCon_1655">proc <a href="ePTswConf.tcl-annot.html#::::RunUnCon">::::RunUnCon</a></a></strong> {{connect &#34;0.0.0.0&#34;}      
               {setupScript &#34;&#34;}
               {fd &#34;NULL&#34;}} {
   global spawn_id
   <a name="::Login(11)"><a href="./login.tcl.html#::Login_24">::Login</a></a> $connect
   set timeout 120

   foreach command $setupScript {
      if { [string match &#34;unc* sw*&#34; $command] == 1 } {
         <a name="::result_debug(43)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Make sure that this is not a direct telnet connection&#34;
         <a name="::result_debug(44)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Reseting to factory defaults...&#34;
         foreach letter {u n c o n &#34; &#34; s w &#34; &#34; a} {
            send $letter
             expect {
                &#34;$letter&#34; {
                    after 10
                }
                timeout {
                   for {set c 0} {$c&lt;10} {incr c} {
                      send $letter
                      expect {
                         &#34;$letter&#34; {
                            break
                         }
                         timeout {
                            after 10
                         }
                      }
                   }
                }
             }
         }
         send &#34;\r&#34;
         expect -nocase &#34;(y*n*)&#34;
         send &#34;y\r&#34;
         log_user 1
      }     
   }        
<span class="comment-line">#   logout  </span>
}           
<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetBcomPortInfoStd</span>
<span class="comment-line"># Description: Init Globals for PortId_Info and Trunk_Info </span>
<span class="comment-line"># portId and Trunk port on a standard regression bed.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Sets globals: </span>
<span class="comment-line">#</span>
<span class="comment-line">#       PortID_Info($i,portSpeed) $portSpeed</span>
<span class="comment-line">#       PortID_Info($i,showSpeed) 100Mbps|1Gbps|10Gbps - how it is display on show port info det</span>
<span class="comment-line">#       PortID_Info($i,normTxPerc) (lowest portId speed / portSpeed) * 100</span>
<span class="comment-line">#       PortID_Info($j,normTxPercBy100) (lowest portId speed / portSpeed)</span>
<span class="comment-line">#</span>
<span class="comment-line">#       -- These variables are used in test cases where sw forwarding may or may not be used</span>
<span class="comment-line">#          depending on the platform or the port ID</span>
<span class="comment-line">#       PortID_Info($i,txSwHwPercHigh) sw or hw tx perc - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwPercLow) sw or hw tx perc - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwPerc) sw or hw tx perc - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwRateHigh) sw or hw tx frame rate - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwRateLow) sw or hw tx frame rate - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwRate) sw or hw tx frame rate - applicatin specific;</span>
<span class="comment-line">#       PortID_Info($i,txSwHwNumFrames) 64k for sw 3M for hw</span>
<span class="comment-line">#       PortID_Info($i,txPath) sw|hw;</span>
<span class="comment-line">#</span>
<span class="comment-line">#       Main_Info(stdIdCount) 8|12</span>
<span class="comment-line">#       Main_Info(portSpeedList) list of all 8|12 speeds &#34;100 100 1000 100 10000 ....&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#       GetPortIdInfoStd;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetPortIdInfoStd_1728">proc <a href="ePTswConf.tcl-annot.html#::::GetPortIdInfoStd">::::GetPortIdInfoStd</a></a></strong> {{saveMode 0}} {
    global Trunk_Info;
    global DUTs_info;
    global PortID_Info;
    global Main_Info;
    global chassis;
    global DUT1_CONNECT;
    global DUT2_CONNECT;
    global chassis;
    global whichDutNow;
    global bcmPlatform;
    global bcmJaguar;
    global napaBlade;
    global bcmChassis;
    global stacking;
    global fast;
    global portIDsUsed;

    set saveGlobals 0;
    if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;) &amp;&amp; ($saveMode != &#34;0&#34;)} {
        <a name="::_getPortIdTypeInfo(1)"><a href="./broadcom.tcl.html#::_getPortIdTypeInfo_985">::_getPortIdTypeInfo</a></a> 1;
    } else {
        <a name="::_getPortIdTypeInfo(2)"><a href="./broadcom.tcl.html#::_getPortIdTypeInfo_985">::_getPortIdTypeInfo</a></a>;
        set saveMode 0;
    }
puts &#34;-------------------------- 7 ------------------------------&#34;
    set portSpeedList &#34;&#34;;
    <span class="comment-line"># EY-12-16-2009: Fixed typo and cleaned up indentation.</span>
    if {[info exists portIDsUsed]} {
        foreach portId $portIDsUsed {
            set portSpeed [<a name="::GetPortIdSpeed(1)"><a href="./ePTMisc.tcl.html#::GetPortIdSpeed_451">::GetPortIdSpeed</a></a> $portId];
            lappend portSpeedList $portSpeed;
            set portSpeedArray(portID${portId},speed) $portSpeed;
            set PortID_Info($portId,portSpeed) $portSpeed;
            if {$saveMode} {puts $fast &#34;set PortID_Info($portId,portSpeed) $portSpeed&#34;;}
            switch $portSpeed {
                &#34;100&#34;   {set PortID_Info($portId,showSpeed) 100Mbps;}
                &#34;1000&#34;  {set PortID_Info($portId,showSpeed) 1Gbps;}
                &#34;10000&#34; {set PortID_Info($portId,showSpeed) 10Gbps;}
            }
        }
        set Main_Info(portSpeedList) $portSpeedList;
        if {$saveMode} {puts $fast &#34;set Main_Info(portSpeedList) \&#34;$portSpeedList\&#34;&#34;;}

        <span class="comment-line"># Sort the port speeds from lowest to highest</span>
        set portSpeedList [lsort -integer $portSpeedList];
        set Main_Info(sortPortSpeedList) $portSpeedList;
        if {$saveMode} {puts $fast &#34;set Main_Info(sortPortSpeedList) \&#34;$portSpeedList\&#34;&#34;;}
        set lowestPortSpeed [lindex $portSpeedList 0];
        foreach portUsed $portIDsUsed {
            set PortID_Info($portUsed,normTxPerc) [expr int(double($lowestPortSpeed) / double($PortID_Info($portUsed,portSpeed)) * 100)];
            if {$saveMode} {
                puts $fast &#34;set PortID_Info($portUsed,normTxPerc) [expr int(double($lowestPortSpeed) / double($PortID_Info($portUsed,portSpeed)) * 100)]&#34;;
            }      
            set PortID_Info($portUsed,normTxPercBy100) [expr double($lowestPortSpeed) / double($PortID_Info($portUsed,portSpeed))];
            if {$saveMode} {
                puts $fast &#34;set PortID_Info($portUsed,normTxPercBy100) [expr double($lowestPortSpeed) / double($PortID_Info($portUsed,portSpeed))]&#34;;
            }

            set i $portUsed;
            if {$PortID_Info($i,BcomGen) == &#34;NewGen&#34; || $PortID_Info($i,BcomGen) == &#34;Default&#34;} {
                switch [<a name="::GetPortIdSpeed(2)"><a href="./ePTMisc.tcl.html#::GetPortIdSpeed_451">::GetPortIdSpeed</a></a> $i] {
                    &#34;10000&#34; {set PortID_Info($i,txSwHwPercHigh) 100;
                             set PortID_Info($i,txSwHwPercLow) 10;
                             set PortID_Info($i,txSwHwPerc) 100;
                             set PortID_Info($i,txSwHwRateHigh) 14800000;
                             set PortID_Info($i,txSwHwRateLow) 148000;
                             set PortID_Info($i,txSwHwRate) 148000}
                    &#34;1000&#34;  {set PortID_Info($i,txSwHwPercHigh) 100;
                             set PortID_Info($i,txSwHwPercLow) 10;
                             set PortID_Info($i,txSwHwPerc) 100;
                             set PortID_Info($i,txSwHwRateHigh) 1480000;
                             set PortID_Info($i,txSwHwRateLow) 14800;
                             set PortID_Info($i,txSwHwRate) 148000}
                    &#34;100&#34;   {set PortID_Info($i,txSwHwPercHigh) 100;
                             set PortID_Info($i,txSwHwPercLow) 10;
                             set PortID_Info($i,txSwHwPerc) 100;
                             set PortID_Info($i,txSwHwRateHigh) 148000;
                             set PortID_Info($i,txSwHwRateLow) 1480;
                             set PortID_Info($i,txSwHwRate) 14800;}
                    default {set PortID_Info($i,txSwHwPercHigh) 100;
                             set PortID_Info($i,txSwHwPercLow) 10;
                             set PortID_Info($i,txSwHwPerc) 100;
                             set PortID_Info($i,txSwHwRateHigh) 148000;
                             set PortID_Info($i,txSwHwRateLow) 1480;
                             set PortID_Info($i,txSwHwRate) 14800}
                }; <span class="comment-line"># switch [GetPortIdSpeed $i]</span>
                <span class="comment-line">#result_debug &#34;PortID $i is on a NewGen Broadcom OR Genesis Chassis Blade&#34;</span>
                set PortID_Info($i,txSwHwNumFrames) 3000000;
                set PortID_Info($i,txPath) hw;
            } else {
                switch [<a name="::GetPortIdSpeed(3)"><a href="./ePTMisc.tcl.html#::GetPortIdSpeed_451">::GetPortIdSpeed</a></a> $i] {
                    &#34;10000&#34; {set PortID_Info($i,txSwHwPercHigh) .003;
                             set PortID_Info($i,txSwHwPercLow) .001;
                             set PortID_Info($i,txSwHwPerc) .003;
                             set PortID_Info($i,txSwHwRateHigh) 200;
                             set PortID_Info($i,txSwHwRateLow) 100;
                             set PortID_Info($i,txSwHwRate) 200}
                    &#34;1000&#34;  {set PortID_Info($i,txSwHwPercHigh) .02;
                             set PortID_Info($i,txSwHwPercLow) .01;
                             set PortID_Info($i,txSwHwPerc) .02;
                             set PortID_Info($i,txSwHwRateHigh) 200;
                             set PortID_Info($i,txSwHwRateLow) 100;
                             set PortID_Info($i,txSwHwRate) 200}
                    &#34;100&#34;   {set PortID_Info($i,txSwHwPercHigh) .25;
                             set PortID_Info($i,txSwHwPercLow) .10;
                             set PortID_Info($i,txSwHwPerc) .25;
                             set PortID_Info($i,txSwHwRateHigh) 200;
                             set PortID_Info($i,txSwHwRateLow) 100;
                             set PortID_Info($i,txSwHwRate) 200}
                    default {set PortID_Info($i,txSwHwPercHigh) .25;
                             set PortID_Info($i,txSwHwPercLow) .10;
                             set PortID_Info($i,txSwHwPerc) .25;
                             set PortID_Info($i,txSwHwRateHigh) 200;
                             set PortID_Info($i,txSwHwRateLow) 100;
                             set PortID_Info($i,txSwHwRate) 200}
                }; <span class="comment-line"># switch [GetPortIdSpeed $i]</span>
                <span class="comment-line">#result_debug &#34;PortID $i is OldGen Broadcom Stackable&#34;</span>
                set PortID_Info($i,txSwHwNumFrames) 64000;
                set PortID_Info($i,txPath) sw;
            }; <span class="comment-line"># else</span>
        }; <span class="comment-line"># foreach portUsed $portIDsUsed</span>
    }; <span class="comment-line"># if {[info exists portIDsUsed]}</span>
}; <span class="comment-line"># proc GetPortIdInfoStd</span>

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: get_DUTs_Slot_info</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: This creates and fills in the array  DUTs_Slot_info with the help of DUTs_info</span>
<span class="comment-line">#              All slot specific necessary information may be obtained from this array. This array</span>
<span class="comment-line">#              may be referred with known information of DUT and slot number</span>
<span class="comment-line">#</span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: tmpdir</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              get_DUTs_Slot_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::get_DUTs_Slot_info_1871">proc <a href="ePTswConf.tcl-annot.html#::::get_DUTs_Slot_info">::::get_DUTs_Slot_info</a></a></strong> {{tmpdir &#34;Tmp&#34;}} {
global spawn_id
global numDUT
global fast 

set numSlots 8

<span class="comment-line">#variable to store all the DUTs interested information</span>
global DUTs_info
global DUTs_Slot_info

set fd_res [<a name="::open_result_file(2)"><a href="./result.tcl.html#::open_result_file_276">::open_result_file</a></a> &#34;slotinfo&#34;]

for {set i 1} {$i &lt;= $numDUT} {incr i 1} {

   global DUT${i}_CONNECT
   set numSlots $DUTs_info(DUT$i,numSlots)
   set hwModType &#34;NULL&#34;
   set confType  &#34;NULL&#34;
   set state     &#34;NULL&#34;
   set npRev     &#34;NULL&#34;
   set npProc1   &#34;NULL&#34;
   set npProc2   &#34;NULL&#34;
   set imageSel  &#34;NULL&#34;
   set priImage  &#34;NULL&#34;
   set secImage  &#34;NULL&#34;
   set version   &#34;NULL&#34;
   set verTime   &#34;NULL&#34;
   set dlReqD    &#34;0&#34;
   set category  &#34;NULL&#34;

   for {set j 1} {$j &lt;= $numSlots} {incr j} {
   <span class="comment-line"># Hardware module type</span>
   set DUTs_Slot_info(DUT$i,slot$j,hwModType) $hwModType
   <span class="comment-line"># Module type set in the configuration</span>
   set DUTs_Slot_info(DUT$i,slot$j,confType)  $confType
   <span class="comment-line"># State of the card (Operational or not)</span>
   set DUTs_Slot_info(DUT$i,slot$j,state)     $state
   <span class="comment-line"># Revision of the C5 Network Processor</span>
   set DUTs_Slot_info(DUT$i,slot$j,npRev)     $npRev
   <span class="comment-line"># Status of each NP on the slot</span>
   set DUTs_Slot_info(DUT$i,slot$j,npProc1)   $npProc1
   <span class="comment-line"># Status of each NP on the slot</span>
   set DUTs_Slot_info(DUT$i,slot$j,npProc2)   $npProc2
   <span class="comment-line"># Image selected to boot from</span>
   set DUTs_Slot_info(DUT$i,slot$j,imageSel)  $imageSel
   <span class="comment-line"># Image in the primary slot</span>
   set DUTs_Slot_info(DUT$i,slot$j,priImage)  $priImage
   <span class="comment-line"># Image in the secondary slot</span>
   set DUTs_Slot_info(DUT$i,slot$j,secImage)  $secImage
   <span class="comment-line"># Image in the slot that is chosen to boot from ASSUMED RUNNING IMAGE</span>
   set DUTs_Slot_info(DUT$i,slot$j,version)   $version
   <span class="comment-line"># Date and Time that the running image was made</span>
   set DUTs_Slot_info(DUT$i,slot$j,verTime)   $verTime
   <span class="comment-line"># For use to determine downloads</span>
   set DUTs_Slot_info(DUT$i,slot$j,dlReqD)    $dlReqD
   <span class="comment-line"># Set category OldGen NewGen NP</span>
   set DUTs_Slot_info(DUT$i,slot$j,category)  $category

   }


   <span class="comment-line">#For the NP Cards we need more than 1 line captured</span>

   set bList &#34;NULL&#34;
   set location &#34;NULL&#34;

   set fd_in [open &#34;$tmpdir/tmp_info_DUT$i&#34; &#34;r&#34;]
   while {[gets $fd_in line] != -1} {
      set cookedLine [<a name="::cookString(2)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]


<span class="comment-line">#result_debug &#34;----- cookedLine=$cookedLine&#34;</span>
      set aList [split $cookedLine]

      if {$bList != &#34;NULL&#34;} {

<span class="comment-line"># Determine location in file search &#34;show switch, slot or version&#34;</span>
      if { ([lindex $bList 0] == &#34;sysName:&#34;)} {
         set location &#34;switch&#34;
         }
      if { ([lindex $bList 0] == &#34;Chassis:&#34;)} {
         set location &#34;version&#34;
         }

<span class="comment-line">######## Loop through slots #########################################</span>
  for {set j 1} {$j &lt;= $numSlots} {incr j} {

        if { ([lindex $bList 0] == &#34;Slot&#34;) &amp;&amp;    \
           ([lindex $bList 1] == &#34;$j&#34;) &amp;&amp;       \
           ([lindex $bList 2] == &#34;information:&#34;) } {
            set location &#34;slot$j&#34;
        }


<span class="comment-line">###########   Find image version selected to boot###########################</span>

      <span class="comment-line">#find image version selected on an NP Card</span>


        if {    ([lindex $bList 0] == &#34;Software&#34;) &amp;&amp;     \
                ([lindex $bList 1] == &#34;image&#34;) &amp;&amp;        \
                ([lindex $bList 2] == &#34;booted:&#34;) &amp;&amp;      \
                ( $location == &#34;slot$j&#34;        )  } {
            set DUTs_Slot_info(DUT$i,slot$j,imageSel) [lindex $bList 3]
            set npImageSel $DUTs_Slot_info(DUT$i,slot$j,imageSel)
            set DUTs_Slot_info(DUT$i,slot$j,imageSel) \
                   [string tolower $DUTs_Slot_info(DUT$i,slot$j,imageSel)]

        }


<span class="comment-line">###########  Find name of image version booted #############################</span>
      <span class="comment-line">#find image version booted name on an NP Card</span>
      set tmp [lindex $bList 0]
      set tmp [string tolower $tmp]

        if {   ($tmp == $DUTs_Slot_info(DUT$i,slot$j,imageSel)) &amp;&amp; \
               ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;        \
               ([string tolower [lindex $bList 2]] == &#34;version:&#34;) &amp;&amp;    \
               ($location == &#34;slot$j&#34;) } {
            set DUTs_Slot_info(DUT$i,slot$j,version) &#34;[lindex $aList 1] [string trimleft \
                              [lindex $aList 2] &#34;(&#34;] [string trimright [lindex $aList 3] &#34;)&#34;] \
                              [lindex $aList 6]&#34;
            if {[lindex $aList 4] == &#34;Prj&#34;} {
                set DUTs_Slot_info(DUT$i,slot$j,verTime) &#34;[lindex $aList 12] [lindex $aList 13] \
                                 [lindex $aList 14] [lindex $aList 15] [lindex $aList 16]&#34;
            }
            if {[lindex $aList 4] == &#34;(Type:&#34;} {
                set DUTs_Slot_info(DUT$i,slot$j,verTime) &#34;[lindex $aList 9] [lindex $aList 10] \
                                 [lindex $aList 11] [lindex $aList 12] [lindex $aList 13]&#34;
            }
            if { ([lindex $aList 0] == &#34;6.2.1&#34;)  &amp;&amp; \
                 ([lindex $aList 4] == &#34;by&#34;)   } {
                set DUTs_Slot_info(DUT$i,slot$j,verTime) &#34;[lindex $aList 7] [lindex $aList 8] \
                                 [lindex $aList 9]&#34;
                set DUTs_Slot_info(DUT$i,slot$j,version) &#34;[lindex $aList 0] [string trimleft \
                              [lindex $aList 1] &#34;(&#34;] [string trimright [lindex $aList 2] &#34;)&#34;]&#34;
            }                  
            if { ([lindex $aList 0] &gt;= &#34;7.0.0&#34;)  &amp;&amp; \
                 ([lindex $aList 5] == &#34;by&#34;)   } {
                set DUTs_Slot_info(DUT$i,slot$j,verTime) &#34;[lindex $aList 8] [lindex $aList 9] \
                                 [lindex $aList 10]&#34;
                set DUTs_Slot_info(DUT$i,slot$j,version) &#34;[lindex $aList 0] [lindex $aList 3]&#34;
            }
            if { ([lindex $aList 0] &gt;= &#34;7.0.0&#34;)  &amp;&amp; \
                 ([lindex $aList 4] == &#34;by&#34;)   } {
                set DUTs_Slot_info(DUT$i,slot$j,verTime) &#34;[lindex $aList 7] [lindex $aList 8] \
                                 [lindex $aList 9]&#34;
                set DUTs_Slot_info(DUT$i,slot$j,version) &#34;[lindex $aList 0] b[string trimright \
                                 [lindex $aList 2] &#34;)&#34;]&#34;
            }
        }



<span class="comment-line">############ Find the names of the images load in the 2 spaces.. NP cards###</span>
      <span class="comment-line">#find primary image</span>
      if { ( $location == &#34;slot$j&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 2]] == &#34;version:&#34;) } {
         set DUTs_Slot_info(DUT$i,slot$j,priImage) &#34;[lindex $aList 1] [string trimleft \
                            [lindex $aList 2] &#34;(&#34;] [string trimright [lindex $aList 3] &#34;)&#34;] \
                            [lindex $aList 6]&#34;
         if {[lindex $aList 0] == &#34;6.2.1&#34;} {
             set DUTs_Slot_info(DUT$i,slot$j,priImage) &#34;[lindex $aList 0] [string trimleft \
                           [lindex $aList 1] &#34;(&#34;] [string trimright [lindex $aList 2] &#34;)&#34;]&#34;
         }
      }
      <span class="comment-line">#find second image</span>
      if { ( $location == &#34;slot$j&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;secondary&#34;) &amp;&amp;   \
           ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 2]] == &#34;version:&#34;) } {
         set DUTs_Slot_info(DUT$i,slot$j,secImage) &#34;[lindex $aList 1] [string trimleft \
                            [lindex $aList 2] &#34;(&#34;] [string trimright [lindex $aList 3] &#34;)&#34;] \
                            [lindex $aList 6]&#34;
         if {[lindex $aList 0] == &#34;6.2.1&#34;} {
             set DUTs_Slot_info(DUT$i,slot$j,secImage) &#34;[lindex $aList 0] [string trimleft \
                           [lindex $aList 1] &#34;(&#34;] [string trimright [lindex $aList 2] &#34;)&#34;]&#34;
         }
      }
      <span class="comment-line">#find Hardware module type</span>
      if { ([lindex $bList 0] == &#34;HW&#34;) &amp;&amp;     \
           ([lindex $bList 2] == &#34;Type:&#34;) &amp;&amp; \
            ( $location == &#34;slot$j&#34; )   } {
         set DUTs_Slot_info(DUT$i,slot$j,hwModType) [lindex $bList 3]

      }

      <span class="comment-line">#find Slot s/w Configured setting</span>
      if { ([lindex $bList 0] == &#34;Configured&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Type:&#34;) &amp;&amp; \
            ( $location == &#34;slot$j&#34; )   } {
         set DUTs_Slot_info(DUT$i,slot$j,confType) [lindex $bList 2]

      }
      <span class="comment-line">#find find operational state</span>
      if { ([lindex $bList 0] == &#34;State:&#34;) &amp;&amp;  \
            ( $location == &#34;slot$j&#34; ) } {
         set DUTs_Slot_info(DUT$i,slot$j,state) [lindex $bList 1]

      }
      <span class="comment-line">#find NP Revision</span>
      if { ([lindex $bList 0] == &#34;NP&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;1:&#34;) &amp;&amp; \
           ([lindex $bList 2] == &#34;Rev&#34;) &amp;&amp; \
            ( $location == &#34;slot$j&#34; )   } {
         set DUTs_Slot_info(DUT$i,slot$j,npRev) [lindex $bList 3]
      }
      <span class="comment-line">#find NP 1 Proc State</span>
      if { ([lindex $bList 0] == &#34;Network&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Processor&#34;) &amp;&amp; \
           ([lindex $bList 2] == &#34;1&#34;) &amp;&amp; \
            ( $location == &#34;slot$j&#34; )   } {
         set DUTs_Slot_info(DUT$i,slot$j,npProc1) [lindex $bList 4]
      }
      <span class="comment-line">#find NP 2 Proc State</span>
      if { ([lindex $bList 0] == &#34;Network&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Processor&#34;) &amp;&amp; \
           ([lindex $bList 2] == &#34;2&#34;) &amp;&amp; \
            ( $location == &#34;slot$j&#34; )   } {
         set DUTs_Slot_info(DUT$i,slot$j,npProc2) [lindex $bList 4]
      }

   }
   }
   set bList $aList

}



for {set j 1} {$j &lt;= $numSlots} {incr j} {

    switch $DUTs_Slot_info(DUT$i,slot$j,hwModType) {
        &#34;A3ci&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;P3ci&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;P12ci&#34;   {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;ARM&#34;     {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;ASMGM2X&#34; {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;MPLS&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;SMA&#34;     {set DUTs_Slot_info(DUT$i,slot$j,category) NP}
        &#34;G8Xi&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) NEW_GEN}
        &#34;F48Ti&#34;   {set DUTs_Slot_info(DUT$i,slot$j,category) NEW_GEN}
        &#34;G12Xi&#34;   {set DUTs_Slot_info(DUT$i,slot$j,category) NEW_GEN}
        &#34;F32T&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) OLD_GEN}
        &#34;F24T&#34;    {set DUTs_Slot_info(DUT$i,slot$j,category) OLD_GEN}
    }

   <a name="::result_debug(45)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;*** DUT$i *** Slot$j Info ********&#34;
   <a name="::result_debug(46)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hardware Module Type = $DUTs_Slot_info(DUT$i,slot$j,hwModType)&#34;
   <a name="::result_debug(47)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Module Configured = $DUTs_Slot_info(DUT$i,slot$j,confType)&#34;
   <a name="::result_debug(48)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Slot State = $DUTs_Slot_info(DUT$i,slot$j,state)&#34;
   <a name="::result_debug(49)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Network Processor Rev = $DUTs_Slot_info(DUT$i,slot$j,npRev)&#34;
   <a name="::result_debug(50)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Network Processor 1 Status = $DUTs_Slot_info(DUT$i,slot$j,npProc1)&#34;
   <a name="::result_debug(51)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Network Processor 2 Status = $DUTs_Slot_info(DUT$i,slot$j,npProc2)&#34;
   <a name="::result_debug(52)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Selected = $DUTs_Slot_info(DUT$i,slot$j,imageSel)&#34;
   <a name="::result_debug(53)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Booted Version Name = $DUTs_Slot_info(DUT$i,slot$j,version)&#34;
   <a name="::result_debug(54)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Build Date = $DUTs_Slot_info(DUT$i,slot$j,verTime)&#34;
   <a name="::result_debug(55)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Primary Image = $DUTs_Slot_info(DUT$i,slot$j,priImage)&#34;
   <a name="::result_debug(56)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Secondary Image = $DUTs_Slot_info(DUT$i,slot$j,secImage)&#34;
   <a name="::result_debug(57)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Card Category = $DUTs_Slot_info(DUT$i,slot$j,category)&#34;


      if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,hwModType) \&#34;$DUTs_Slot_info(DUT$i,slot$j,hwModType)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,confType) \&#34;$DUTs_Slot_info(DUT$i,slot$j,confType)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,state) \&#34;$DUTs_Slot_info(DUT$i,slot$j,state)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,npRev) \&#34;$DUTs_Slot_info(DUT$i,slot$j,npRev)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,npProc1) \&#34;$DUTs_Slot_info(DUT$i,slot$j,npProc1)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,npProc2) \&#34;$DUTs_Slot_info(DUT$i,slot$j,npProc2)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,imageSel) \&#34;$DUTs_Slot_info(DUT$i,slot$j,imageSel)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,version) \&#34;$DUTs_Slot_info(DUT$i,slot$j,version)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,verTime) \&#34;$DUTs_Slot_info(DUT$i,slot$j,verTime)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,priImage) \&#34;$DUTs_Slot_info(DUT$i,slot$j,priImage)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,secImage) \&#34;$DUTs_Slot_info(DUT$i,slot$j,secImage)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,category) \&#34;$DUTs_Slot_info(DUT$i,slot$j,category)\&#34;&#34;
       puts $fast &#34;set DUTs_Slot_info(DUT$i,slot$j,dlReqD)   \&#34;$DUTs_Slot_info(DUT$i,slot$j,dlReqD)\&#34;&#34;       
      }

}

   close $fd_in                          


}
<a name="::close_result_file(2)"><a href="./result.tcl.html#::close_result_file_363">::close_result_file</a></a>

}



<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: get_DUTs_info_eware</span>
<span class="comment-line">#   </span>
<span class="comment-line"># Description: creates a DUTs_info array after discovering all DUTs information in the testbed.</span>
<span class="comment-line">#              fills in all elements of DUTs_info array with relevant information.</span>
<span class="comment-line">#</span>
<span class="comment-line">#              </span>
<span class="comment-line">#     </span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: none</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#              get_DUTs_info</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: Setup</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::get_DUTs_info_eware_2183">proc <a href="ePTswConf.tcl-annot.html#::::get_DUTs_info_eware">::::get_DUTs_info_eware</a></a></strong> {{infoFilename &#34;info&#34;} {tmpdir &#34;Tmp&#34;}} {
global spawn_id
global numDUT
global fast
global DUT

<span class="comment-line">#variable to store all the DUTs interested information</span>
global DUTs_info
global DUTs_Slot_info
global branch
global pioneerPlatform
global DUTs_info
global whichDutNow

global tmpPath
if [info exists tmpPath] {
    set tmpdir $tmpPath
}

set fd_res [<a name="::open_result_file(3)"><a href="./result.tcl.html#::open_result_file_276">::open_result_file</a></a> &#34;$infoFilename&#34;]
set slotDump 0   
<span class="comment-line">#for {set i 1} {$i &lt;= $numDUT} {incr i 1} {</span>

<span class="comment-line">#   global eware_dut</span>
<span class="comment-line">#   if {[info exists eware_dut]} {</span>
<span class="comment-line">#      if {[lsearch $eware_dut $i] &gt; -1 } {</span>
<span class="comment-line">#         set loopVar 1</span>
 <span class="comment-line">#     } else {</span>
 <span class="comment-line">#        set loopVar 0</span>
 <span class="comment-line">#     }</span>
 <span class="comment-line">#  } else {</span>
 <span class="comment-line">#     set loopVar 0</span>
 <span class="comment-line">#  }</span>

  <span class="comment-line"># if {$loopVar} {</span>
   global whichDutNow
   set i $whichDutNow
   global DUT[set i]_CONNECT
   <a name="::Login(12)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT[set i]_CONNECT]

   lappend parameterList &#34;{SysName:}   1&#34;
   set sysN [<a name="::GetKeyValue(7)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show switch&#34; $parameterList]
   unset parameterList

   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Determine Platform Type as BD or BT or Godzilla etc</span>
   <span class="comment-line">################################################################</span>
   set platFType [<a name="::::computeSysName(1)"><a href="./swConf.tcl.html#::::computeSysName_1616">::::computeSysName</a></a> $sysN]
   set platFType [string tolower $platFType]
   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Get Slot info dump if Platform Type is BD or BT or Godzilla etc</span>
   <span class="comment-line">################################################################</span>
   set fd_in [open &#34;$tmpdir/tmp_info_DUT$i-[pid]&#34; &#34;w&#34;]
   <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;sh sw&#34; $fd_res $fd_in
   <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;sh ver&#34; $fd_res $fd_in
   <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;sh vlan default&#34; $fd_res $fd_in
   if {([regexp -nocase &#34;bd|bt&#34; $platFType])      || \
       ([regexp -nocase &#34;Alpine*&#34; $platFType])    || \
       ([regexp -nocase &#34;godzilla&#34; $platFType])  } {
      <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;sh slot&#34; $fd_res $fd_in
      set slotDump 1
   }      
   close $fd_in
   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Initiallize variables to be gathered.</span>
   <span class="comment-line">################################################################</span>
   set imageSel &#34;NONE&#34;
   set priImage &#34;INVALID&#34;
   set secImage &#34;INVALID&#34;
   set version &#34;INVALID&#34;
   set platform &#34;INVALID&#34;
   set techRel   &#34;INVALID&#34;   
   set sysMAC &#34;INVALID&#34;
   set bootROM &#34;INVALID&#34;
   set relMaster &#34;INVALID&#34;
   set numPorts 0
   set merge     &#34;INVALID&#34;
   set numSlots  &#34;0&#34;   
   set version2  &#34;INVALID&#34;
   set verTime   &#34;INVALID&#34;
   set dlReqD    &#34;0&#34;
   set priVer    &#34;&#34;
   set secVer    &#34;&#34;
   set showVerVersion &#34;&#34;
   set snmpVersion &#34;2&#34;

   set DUTs_info(DUT$i,imageSel) $imageSel
   set DUTs_info(DUT$i,priImage) $priImage
   set DUTs_info(DUT$i,secImage) $secImage
   set DUTs_info(DUT$i,version) $version
   set DUTs_info(DUT$i,verTime)   $verTime   
   set DUTs_info(DUT$i,platform) $platform
   set DUTs_info(DUT$i,sysMAC) $sysMAC
   set DUTs_info(DUT$i,bootROM) $bootROM
   set DUTs_info(DUT$i,numSlots)  $numSlots   
   set DUTs_info(DUT$i,relMaster) $relMaster
   set DUTs_info(DUT$i,numPorts) $numPorts
   set DUTs_info(DUT$i,techRel)   $techRel
   set DUTs_info(DUT$i,merge)    $merge
   set DUTs_info(DUT$i,dlReqD)   $dlReqD
   set DUTs_info(DUT$i,sysName) $sysN
   set DUTs_info(debugFlag) 1
   set DUTs_info(DUT$i,sVVersion) $showVerVersion
   set DUTs_info(DUT$i,snmpVersion) $showVerVersion

   set masterOfsset &#34;17&#34;
   set masterEnd &#34;28&#34;
   set isMSM &#34;FALSE&#34;
   set bList &#34;NULL&#34;
   set location &#34;NULL&#34;
   set msmLocation &#34;NULL&#34;
   set msmMaster   &#34;MSM-B&#34;

   set fd_in [open &#34;$tmpdir/tmp_info_DUT$i-[pid]&#34; &#34;r&#34;]
   while {[gets $fd_in line] != -1} {
      set cookedLine [<a name="::cookString(3)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]


<span class="comment-line">#result_debug &#34;----- cookedLine=$cookedLine&#34;</span>
      set aList [split $cookedLine]

      if {$bList != &#34;NULL&#34;} {

<span class="comment-line"># Determine location in file search &#34;show switch, slot or version&#34;</span>
      if { ([lindex $bList 0] == &#34;sysName:&#34;) || ([lindex $bList 0] == &#34;SysName:&#34;) } {
         set location &#34;switch&#34;
         }
    <span class="comment-line">#Determine if you are in an msm image section</span>
      set msmType [string toupper  [lindex $bList 0]]
      switch -exact -- $msmType {
        &#34;MSM-A&#34; { set msmLocation &#34;MSM-A&#34; }    
        &#34;MSM-B&#34; { set msmLocation &#34;MSM-B&#34; }    
        &#34;MSM-C&#34; { set msmLocation &#34;MSM-C&#34; }    
        &#34;MSM-D&#34; { set msmLocation &#34;MSM-D&#34; }   
      }  
      if { ([lindex $bList 0] == &#34;Chassis:&#34;)  || \
           ([lindex $bList 0] == &#34;Chassis&#34;)   || \
           ([lindex $bList 0] == &#34;CPU&#34;)   || \
           ([lindex $bList 0] == &#34;Daughtercard:&#34;) || \
           ([lindex $bList 0] == &#34;Baseboard:&#34;)  } {
         set location &#34;version&#34;
      }

      if { ([lindex $bList 0] == &#34;Slot&#34;) &amp;&amp;    \
           ([lindex $bList 1] == &#34;1&#34;) &amp;&amp;       \
           ([lindex $bList 2] == &#34;information:&#34;) } {
         set location &#34;slot&#34;
      }
      <span class="comment-line">#6.2.1b10</span>
      if { ([lindex $aList 0] == &#34;Current&#34;) &amp;&amp;     \
           ([lindex $aList 1] == &#34;State:&#34;) } {

         set masterOffset &#34;29&#34;
         set masterEnd &#34;40&#34;
         set isMSM &#34;TRUE&#34;
         if {[regexp -nocase $pioneerPlatform $DUTs_info(DUT$whichDutNow,platform)]} {
             set msmMaster MM-B
         } else {
             set msmMaster MSM-B
         }
         if {[string tolower [lindex $aList 2]] == &#34;master&#34; } {
             set masterOfsset &#34;17&#34;
             set masterEnd &#34;28&#34;
             set msmMaster MSM-A
             if {[regexp -nocase $pioneerPlatform $DUTs_info(DUT$whichDutNow,platform)]} {
                 set msmMaster MM-A
             } else {
                 set msmMaster MSM-A
             }
         }
      }

  <span class="comment-line">###########   Find both image versions Fix for 700b37 new Show switch #########</span>
      if { ([string tolower [lindex $aList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $aList 1]] == &#34;ew&#34;) &amp;&amp;        \
           ([string tolower [lindex $aList 2]] == &#34;ver:&#34;) } {
      set priVer [string tolower [lindex $aList 3]]
      }
          if { ([string tolower [lindex $aList 0]] == &#34;secondary&#34;) &amp;&amp;     \
               ([string tolower [lindex $aList 1]] == &#34;ew&#34;) &amp;&amp;        \
               ([string tolower [lindex $aList 2]] == &#34;ver:&#34;) } {
          set secVer [string tolower [lindex $aList 3]]
          }

  <span class="comment-line">################   Find image version selected to boot IMAGE RUNNING NOW  #####</span>

      <span class="comment-line">#find image version selected on switch</span>

      if { ([lindex $bList 0] == &#34;Software&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;image&#34;) &amp;&amp;        \
           ([lindex $bList 2] == &#34;booted:&#34;) &amp;&amp;      \
           ( $location == &#34;switch&#34;        )  } {
         set imageSel [lindex $bList 3]
         set imageSel [string tolower $imageSel]
           puts &#34;**$imageSel***from the wrong place 618 code########&#34;
      }
      <span class="comment-line">###### Fix for ABU new Show Switch 700b44##################################</span>
      if { ([lindex $bList 0] == &#34;Module&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Image&#34;) &amp;&amp;        \
           ([lindex $bList 4] == &#34;Booted&#34;) &amp;&amp;      \
           ( $location == &#34;switch&#34;        )  } {
         set imageSel [lindex $aList 2]
         set imageSel [string tolower $imageSel]
         if {$imageSel == &#34;primary&#34;} {
             set version $priVer
         } elseif {$imageSel == &#34;secondary&#34;} {
             set version $secVer
         }
      }
      <span class="comment-line">###### Fix for ABU new Show Switch 700b45 and above##################################</span>
      if { ([lindex $bList 0] == &#34;------&#34;) &amp;&amp;     \
           ( $location == &#34;switch&#34;        )  } {
         set imageSel [lindex $aList 2]
         set imageSel [string tolower $imageSel]
         if {$imageSel == &#34;primary&#34;} {
             set version $priVer
         } elseif {$imageSel == &#34;secondary&#34;} {
             set version $secVer
         }
      }
      if { ([lindex $bList 0] == &#34;Image&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;Selected:&#34;) &amp;&amp;      \
           ( $location == &#34;switch&#34;        )  } {
         set imageSel [lindex $aList 2]
         set imageSel [string tolower $imageSel]
         if {$imageSel == &#34;primary&#34;} {
             set version $priVer
         } elseif {$imageSel == &#34;secondary&#34;} {
             set version $secVer
         }
      puts &#34;** 700 changes for Alpine  ########&#34;
      }
      <span class="comment-line">#for 6.2.1</span>
      if { ([lindex $aList 0] == &#34;Image&#34;) &amp;&amp;     \
           ([lindex $aList 1] == &#34;Booted:&#34;) } {
         set imageSel [lindex [string range $line $masterOfsset $masterEnd] 0]
         set imageSel [string tolower $imageSel]
 puts &#34;**$imageSel***from 621 code########&#34;
      }


      <span class="comment-line"># Find image version booted name on MSM</span>
      <span class="comment-line">#</span>

      set tmp [lindex $bList 0]
      set tmp [string tolower $tmp]
      if { ($tmp == $imageSel) &amp;&amp; ($location == &#34;switch&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;        \
           ([string tolower [lindex $bList 2]] == &#34;version:&#34;) } {
         set version [lindex $bList 3]
         set slot [lindex $bList 5]
         if { $slot == &#34;MSM-A&#34; || $slot == &#34;MM-A&#34;} {
            if {$version == &#34;empty&#34;} {
               set version [string tolower &#34;[lindex $bList 6]&#34;]
            } else {
               set version [string tolower &#34;[lindex $bList 3]&#34;]
            }
         }
      }

      <span class="comment-line">#6.2.1b10</span>
      set tmp [lindex $aList 0]
      set tmp [string tolower $tmp]      
      if { ($tmp == $imageSel) &amp;&amp;     \
           ([string tolower [lindex $aList 1]] == &#34;ew&#34;) &amp;&amp;        \
           ([string tolower [lindex $aList 2]] == &#34;ver:&#34;) &amp;&amp;  \
           ($msmLocation == &#34;NULL&#34;)     } {
      set version [string tolower [lindex $aList 3]]
         if { $isMSM == &#34;TRUE&#34; } {
            if {$masterOfsset == &#34;17&#34;} {
               set version [string tolower &#34;[lindex [string range $line $masterOfsset $masterEnd] 0]&#34;]
            } else {
               set version [string tolower &#34;[lindex [string range $line $masterOfsset $masterEnd] 0]&#34;]
            }
         }
      }
      <span class="comment-line">#7.0.0b39 RTPFixes5</span>
      <span class="comment-line"># Primary   EW Ver:   7.3.0.22 branch-4digit_v730b22 [non-ssh] [base] </span>
      <span class="comment-line"># Secondary EW Ver:   7.1.1b11 branch.PA-0311-01-r2 [non-ssh]      </span>
      set tmp [lindex $bList 0]
      set tmp [string tolower $tmp]      
      if { ($tmp == $imageSel) &amp;&amp;     \
           ([string tolower [lindex $bList 1]] == &#34;ew&#34;) &amp;&amp;        \
           ([string tolower [lindex $bList 2]] == &#34;ver:&#34;) &amp;&amp;      \
           ($msmMaster == $msmLocation)    } {
         set version [string tolower [lindex $bList 3]]
      }
      set version1 $version

<span class="comment-line">#############################################################################</span>
<span class="comment-line">###               Find the names of the images load in the 2 MSM spaces.. ###</span>
<span class="comment-line">###              SHOW SWITCH                                              ###</span>
<span class="comment-line">#############################################################################</span>

      <span class="comment-line">#find primary image</span>
      if { ( $location == &#34;switch&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 2]] == &#34;version:&#34;) } {
         set priImage [lindex $bList 3]
      }
      <span class="comment-line">#for 6.2.1</span>
      if { ([string tolower [lindex $aList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $aList 1]] == &#34;ew&#34;) &amp;&amp;    \
           ([string tolower [lindex $aList 2]] == &#34;ver:&#34;) &amp;&amp; \
           ($msmLocation == &#34;NULL&#34;)    } {
         set priImage [lindex [string range $line $masterOfsset $masterEnd] 0]
      }
      <span class="comment-line">#for 700b39 rtpfixes on</span>
      if { ([string tolower [lindex $bList 0]] == &#34;primary&#34;) &amp;&amp;     \
           ([string tolower [lindex $bList 1]] == &#34;ew&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 2]] == &#34;ver:&#34;) &amp;&amp; \
           ($msmMaster == $msmLocation)    } {
           <span class="comment-line">#fix for 701b4</span>
           if {[regexp -nocase &#34;ssh&#34; [lindex $bList 4]]} {
               set priImage &#34;[lindex $bList 3]&#34;
           } else {
               set priImage &#34;[lindex $bList 3] [lindex $bList 4]&#34;
           }

      }
      <span class="comment-line">#find second image</span>
      if { ( $location == &#34;switch&#34; ) &amp;&amp;     \
           ([string tolower [lindex $bList 0]] == &#34;secondary&#34;) &amp;&amp;   \
           ([string tolower [lindex $bList 1]] == &#34;software&#34;) &amp;&amp;    \
           ([string tolower [lindex $bList 2]] == &#34;version:&#34;) } {
         set secImage [lindex $bList 3]
      }
        <span class="comment-line">#for 6.2.1</span>
        if { ([string tolower [lindex $aList 0]] == &#34;secondary&#34;) &amp;&amp;   \
             ([string tolower [lindex $aList 1]] == &#34;ew&#34;) &amp;&amp;    \
             ([string tolower [lindex $aList 2]] == &#34;ver:&#34;) &amp;&amp;  \
             ($msmLocation == &#34;NULL&#34;)    } {
           set secImage [lindex [string range $line $masterOfsset $masterEnd] 0]
        }
        <span class="comment-line">#for 700b39 rtpfixes5 and on</span>
        if { ([string tolower [lindex $bList 0]] == &#34;secondary&#34;) &amp;&amp;   \
             ([string tolower [lindex $bList 1]] == &#34;ew&#34;) &amp;&amp;    \
             ([string tolower [lindex $bList 2]] == &#34;ver:&#34;) &amp;&amp;  \
             ($msmMaster == $msmLocation)    } {

           <span class="comment-line">#fix for 701b4</span>
           if {[regexp -nocase &#34;ssh&#34; [lindex $bList 4]]} {
               set secImage &#34;[lindex $bList 3]&#34;
           } else {
               set secImage &#34;[lindex $bList 3] [lindex $bList 4]&#34;
           }
        }
      <span class="comment-line">#find System Name</span>
      if { ([string tolower [lindex $bList 0]] == &#34;sysname:&#34;) } {
         set platform [<a name="::::computeSysName(2)"><a href="./swConf.tcl.html#::::computeSysName_1616">::::computeSysName</a></a> [lindex $bList 1]]
      }
      <span class="comment-line">#find system MAC</span>
      if { ([lindex $bList 0] == &#34;System&#34;) &amp;&amp;     \
           ([lindex $bList 1] == &#34;MAC:&#34;) } {
         set sysMAC [lindex $bList 2]

      }
<span class="comment-line">######################################################################################</span>
<span class="comment-line">#    Show version portion of the file </span>
<span class="comment-line">#</span>
<span class="comment-line">######## find release master, time of the build ######################################</span>
      if { ( $location == &#34;version&#34; ) &amp;&amp;     \
           ([lindex $bList 0] == &#34;Image&#34;) &amp;&amp;     \
           ([lindex $bList 2] == &#34;Extremeware&#34;) &amp;&amp;  \
           ([lindex $bList 3] == &#34;Version&#34;)} {

         <span class="comment-line">#should be able to handle 4 and 3 digit version like:</span>
         <span class="comment-line">#Image : Extremeware  Version 7.3.0.30 [non-ssh] [wlan] by </span>
         <span class="comment-line">#Build_Master on 05/17/04 17:23:30                 </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image  :  Extremeware Version 6.2.2 (Build 156)  by </span>
         <span class="comment-line">#Release_Master 02/13/04 18:33:39 </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#extract the version </span>
         regexp -nocase {Version +([^ ]+)} $bList dummy showVerVersion
         <span class="comment-line">#extract the build number if exist</span>
         if [regexp -nocase {Build +([0-9]+)} $bList dummy matchb] {
            set showVerVersion &#34;${showVerVersion}b$matchb&#34;
         }

         <span class="comment-line"># Santa Clara base, Tech Release Code, or branch build??????</span>
         <span class="comment-line"># First Case is for IPSERV code. Adjust build # and BuildMaster</span>
         if {[lindex $bList 8] == &#34;IP_SERV_TECH_REL&#34;} {
            set version2 [lindex $bList 9]
            set relMaster [lindex $bList 11]
            <span class="comment-line">### Set the build time for this Version of Code </span>
            <span class="comment-line">### (for download comparison##</span>
            set verTime \
               &#34;[lindex $bList 12] [lindex $bList 13] [lindex $bList 14]&#34;
         }


         <span class="comment-line"># Second Case is for Santa Clara built  </span>
         if {[lindex $bList 8] != &#34;IP_SERV_TECH_REL&#34;} {
             set relMaster [lindex $bList 8]
             set verTime \
                &#34;[lindex $bList 9] [lindex $bList 10] [lindex $bList 11]&#34;
         }


         <span class="comment-line">### fix for 6.2.1 build 17 (sandbox)</span>
         if {([lindex $bList 4] == &#34;6.2.1&#34;) 
            &amp;&amp; ([lindex $bList 10] == &#34;on&#34;)} {
             set verTime &#34;[lindex $bList 11] [lindex $bList 12]&#34;
             set relMaster [lindex $bList 9]
             set merge [lindex $bList 7]
             regsub -all {\.} $merge &#34;_&#34; merge
         }

         <span class="comment-line">### fix for 6.2.1 build 10 (new linux buildmaster)</span>
         if {([lindex $bList 4] == &#34;6.2.1&#34;) 
            &amp;&amp; ([lindex $bList 10] != &#34;on&#34;)} {
             set verTime &#34;[lindex $bList 10] [lindex $bList 11]&#34;
         }



         <span class="comment-line">###### fix for 7.0.0 on ncbuild1 FINAL BUILD MASTER?</span>
         <span class="comment-line">#should handle the following syntax for various builds:</span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.3.0.25 [non-ssh] [base] by </span>
         <span class="comment-line">#Build_Master on 04/01/04 14:06:55                       </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.3.0.30 [non-ssh] [wlan] by </span>
         <span class="comment-line">#Build_Master on 05/17/04 17:23:30                 </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.2.0 (Build 25) </span>
         <span class="comment-line">#branch.PA-720-0404-01-r1 [non-ssh] by Patch_Master on 05/06/04 </span>
         <span class="comment-line">#22:07:46       </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.2.0 (Build 24) [non-ssh] by </span>
         <span class="comment-line">#Release_Master on 03/18/04 00:55:14            </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.1.1 (Build 15) </span>
         <span class="comment-line">#branch.PA-711-0405-1-r1 [non-ssh] by Patch_Master on 05/05/04 </span>
         <span class="comment-line">#18:51:38   </span>
         <span class="comment-line"># </span>
         <span class="comment-line">#Image : Extremeware  Version 7.1.1 (Build 13) [non-ssh] by </span>
         <span class="comment-line">#Release_Master on 01/16/04 18:21:29 </span>
         <span class="comment-line">#</span>
         <span class="comment-line">#Image : Extremeware  Version 7.3.0.22 br-4dig_v730b22 [non-ssh] </span>
         <span class="comment-line">#[wlan] by Build_Master on 03/19/04 19:54:59</span>
         <span class="comment-line">#</span>
         if {[lindex $bList 4] &gt;= &#34;7.0.0&#34;} {
            <span class="comment-line">#extract relMaster and verTime</span>
            regexp -nocase {by +([^ ]+) +.+ +([0-9]+:[0-9]+:[0-9]+)} \
               $bList dummy relMaster verTime
            <span class="comment-line">#extract merge string</span>
            <span class="comment-line">#for 4 digit version the merge string is any non space char </span>
            <span class="comment-line">#in between version number and a open square bracket, but </span>
            <span class="comment-line">#don't match anything in bracket like &#34;[non-ssh]&#34;</span>
            <span class="comment-line">#note that in bList any square bracket is preceded by a brace </span>
            if ![regexp -nocase \
               {\.[0-9a-z]+ +([^ \[]+) +\{?\[} $bList dummy merge] {
               <span class="comment-line">#if not 4 digit version, the merge string is in between</span>
               <span class="comment-line"># &#34;)&#34; and &#34;[&#34;. if this doesn't match there is no</span>
               <span class="comment-line">#branch information to extract</span>
               regexp {\) +([^ \[]+) +\{?\[} $bList dummy merge
            }
            regsub -all {\.} $merge &#34;_&#34; merge
         }
      }

<span class="comment-line">#    End Show Version</span>
<span class="comment-line">######################################################################################</span>

      <span class="comment-line">#find BootROM</span>
      if { ([lindex $bList 0] == &#34;BootROM&#34;) } {
         set bootROM [lindex $bList 2]

      }      
      if { ([lindex $bList 0] == &#34;snmpVersion&#34;) } {
         set snmpVersion [lindex $bList 2]

      }       
      <span class="comment-line">#find total ports</span>
      if { ([lindex $bList 0] == &#34;Ports:&#34;) } {
         set numPorts [lindex $bList 1]

      } 
   }
   set bList $aList
   }  ;<span class="comment-line"># end while</span>

   <span class="comment-line"># Add the Technology Release or Merge info to the version</span>
   if {$version2 == &#34;INVALID&#34;} {
       set version &#34;$version1&#34;
   } else {
       set version &#34;$version1 $version2&#34;
   }

   <span class="comment-line">#get slot info to figure out hardware type</span>
   set hardwareType &#34;NEW_GEN&#34;
   set bladeType &#34;NONE&#34;
   if {[regexp -nocase &#34;bd|bt|godzilla|alpine*&#34; $platform]} {
      lappend parameterList &#34;{HW Module Type:} 1&#34;
      set HardwareList [<a name="::GetKeyValue(8)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show slot&#34; $parameterList]
      unset parameterList
      <a name="::result_debug(58)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;HardwareList: $HardwareList&#34;
      foreach hardware $HardwareList {
         if {[lsearch -regexp $bladeType $hardware]==-1} {
            if {$bladeType==&#34;NONE&#34;} {set bladeType &#34;&#34;}
            if {![regexp -nocase &#34;none|Empty&#34; $hardware]} {
               set bladeType &#34;$bladeType$hardware&#34;
            }
         }
         switch $hardware {
      	   F32T -
      	   F24T {
               	   set hardwareType &#34;OLD_GEN&#34;     		   
      		} 
         }
      }
   } else {
       if {([regexp -nocase {[0-9|s]i} $platform] == 0) &amp;&amp; 
             ([regexp -nocase summit\[2-4\]00 $platform] == 0)} {
           set hardwareType &#34;OLD_GEN&#34;
       }
   }
   <span class="comment-line">################################################################</span>
   <span class="comment-line">##  Determine number of slots in the chassis</span>
   <span class="comment-line">################################################################</span>
   switch $platFType {
       bd         {set numSlots 8}
       bt         {set numSlots 4}
       godzilla   {set numSlots 16}
       alpine3808 {set numSlots 8}
       alpine3804 {set numSlots 4}
       alpine3802 {set numSlots 2}
       default    {set numSlots 0}
   }
   puts &#34;####### version $version  ###########################&#34;
   set DUTs_info(DUT$i,imageSel) $imageSel
   set DUTs_info(DUT$i,priImage) $priImage
   set DUTs_info(DUT$i,secImage) $secImage
   set DUTs_info(DUT$i,version) $version
   set DUTs_info(DUT$i,verTime) $verTime   
   set DUTs_info(DUT$i,platform) $platform
   set DUTs_info(DUT$i,sysMAC) [string toupper $sysMAC]
   set DUTs_info(DUT$i,relMaster) $relMaster
   set DUTs_info(DUT$i,bootROM) $bootROM
   set DUTs_info(DUT$i,numSlots)     $numSlots
   set DUTs_info(DUT$i,numPorts) $numPorts
   set DUTs_info(DUT$i,HardwareType) $hardwareType
   set DUTs_info(DUT$i,bladeType) $bladeType
   set DUTs_info(DUT$i,techRel) $version2
   set DUTs_info(DUT$i,merge)   [string tolower $merge]
   set DUTs_info(DUT$i,dlReqD)   $dlReqD
   set DUTs_info(DUT$i,sVVersion) $showVerVersion
   set DUTs_info(DUT$i,snmpVersion) $snmpVersion
 <span class="comment-line">#  global SNMPv3</span>
 <span class="comment-line">#  global SNMPv2</span>

<span class="comment-line">#   #Determine the SNMP version depending upon the version</span>
<span class="comment-line">#   if { [CompareVersion_eware &#34;6.2.2.&#34; DUT$i] &lt;= 0 } {</span>
<span class="comment-line">#      set DUTs_info(DUT$i,snmpVersion) $SNMPv3</span>
<span class="comment-line">#   } else {</span>
<span class="comment-line">#      set DUTs_info(DUT$i,snmpVersion) $SNMPv2</span>
<span class="comment-line">#   }</span>

   if { $version2 != &#34;INVALID&#34; } {
       set buildList [split $version2 &#34;.&#34;]
       set bNum [lindex $buildList 0]
       set branch &#34;$version1 ipserv[string trimleft $bNum &#34;v&#34;]&#34;
   }  else {
       set branch &#34;$version1&#34;
   }

   global _VERSION
   global VERSION
   set _VERSION $version
   set VERSION [string range $_VERSION 0 0]
   set DUTs_info(DUT$i,VERSION) $VERSION

   <a name="::result_debug(59)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;****** DUT$i Info ********&#34;
   <a name="::result_debug(60)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Selected = $DUTs_info(DUT$i,imageSel)&#34;
   <a name="::result_debug(61)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Image Version = $DUTs_info(DUT$i,version)&#34;
   <a name="::result_debug(62)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Running Image Built on $DUTs_info(DUT$i,verTime)&#34;   
   <a name="::result_debug(63)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Primary Image = $DUTs_info(DUT$i,priImage)&#34;
   <a name="::result_debug(64)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Secondary Image = $DUTs_info(DUT$i,secImage)&#34;
   <a name="::result_debug(65)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Platform = $DUTs_info(DUT$i,platform)&#34;
   <a name="::result_debug(66)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;System MAC = $DUTs_info(DUT$i,sysMAC)&#34;
   <a name="::result_debug(67)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;BootROM = $DUTs_info(DUT$i,bootROM)&#34;
   <a name="::result_debug(68)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Release Master = $DUTs_info(DUT$i,relMaster)&#34;
   <a name="::result_debug(69)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Total Ports = $DUTs_info(DUT$i,numPorts)&#34;
   <a name="::result_debug(70)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Number of Slots = $DUTs_info(DUT$i,numSlots)&#34;   
   <a name="::result_debug(71)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Hardware Type = $DUTs_info(DUT$i,HardwareType)&#34;
   <a name="::result_debug(72)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Blade Type = $DUTs_info(DUT$i,bladeType)&#34;
   <a name="::result_debug(73)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Tech Release version = $DUTs_info(DUT$i,techRel)&#34;
   <a name="::result_debug(74)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Merge Release version = $DUTs_info(DUT$i,merge)&#34;
   <a name="::result_debug(75)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Download Flag Init    = $DUTs_info(DUT$i,dlReqD)&#34;
   <a name="::result_debug(76)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Version from Show Version = $DUTs_info(DUT$i,sVVersion)&#34;
 <span class="comment-line">#  result_debug &#34;SNMP version = $DUTs_info(DUT$i,snmpVersion)&#34;</span>
   close $fd_in

   if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
       puts $fast &#34;set DUTs_info(DUT$i,imageSel) \&#34;$DUTs_info(DUT$i,imageSel)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,version) \&#34;$DUTs_info(DUT$i,version)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,VERSION) \&#34;$DUTs_info(DUT$i,VERSION)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,priImage) \&#34;$DUTs_info(DUT$i,priImage)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,secImage) \&#34;$DUTs_info(DUT$i,secImage)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,platform) \&#34;$DUTs_info(DUT$i,platform)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sysMAC) \&#34;$DUTs_info(DUT$i,sysMAC)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,bootROM) \&#34;$DUTs_info(DUT$i,bootROM)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,relMaster) \&#34;$DUTs_info(DUT$i,relMaster)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,numPorts) \&#34;$DUTs_info(DUT$i,numPorts)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,numSlots) \&#34;$DUTs_info(DUT$i,numSlots)\&#34;&#34;       
       puts $fast &#34;set DUTs_info(DUT$i,HardwareType) \&#34;$DUTs_info(DUT$i,HardwareType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,bladeType) \&#34;$DUTs_info(DUT$i,bladeType)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,techRel) \&#34;$DUTs_info(DUT$i,techRel)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,merge) \&#34;$DUTs_info(DUT$i,merge)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,dlReqD) \&#34;$DUTs_info(DUT$i,dlReqD)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sysName) \&#34;$DUTs_info(DUT$i,sysName)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,sVVersion) \&#34;$DUTs_info(DUT$i,sVVersion)\&#34;&#34;
       puts $fast &#34;set DUTs_info(DUT$i,snmpVersion) \&#34;$DUTs_info(DUT$i,snmpVersion)\&#34;&#34;
       puts $fast &#34;set DUTs_info(debugFlag) \&#34;$DUTs_info(debugFlag)\&#34;&#34;
       puts $fast &#34;set branch \&#34;$branch\&#34;&#34;
   }
<span class="comment-line">#}</span>
<span class="comment-line">#}</span>

<a name="::close_result_file(3)"><a href="./result.tcl.html#::close_result_file_363">::close_result_file</a></a>  
<span class="comment-line"># Now get the info from the individual slots if platform matches</span>
<span class="comment-line">#     if {$slotDump} {</span>
<span class="comment-line">#         get_DUTs_Slot_info $tmpdir</span>
<span class="comment-line">#     }</span>
<span class="comment-line">#     if {![info exists DUT(LoadImage)]} { ;# Need to turn of when run LoadImage</span>
<span class="comment-line">#         getTECardSpeed</span>
<span class="comment-line">#     }</span>

<span class="comment-line">#     for {set i 1} {$i &lt;= $numDUT} {incr i 1} {</span>
<span class="comment-line">#	 file delete &#34;$tmpdir/tmp_info_DUT$i-[pid]&#34;</span>
<span class="comment-line">#     }</span>
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
