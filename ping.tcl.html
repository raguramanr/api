<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ping.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ping.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ping.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ping.tcl-annot.html">annotations</a> | <a href="ping.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: check_ping    </span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This proc is a wrapper function of CheckPing{}.  Some arguments in</span>
<span class="comment-line">#	CheckPing{} like gsIpAddr, frameSize are bypassed as defaults in this proc.</span>
<span class="comment-line"># Input args: {pingIP}{myIP}{portId}{pingStatus}{fd}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#	check_ping $pingIP $sourceIp $portId &#34;pingable&#34; $fd_res</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################  </span>
<strong><a name="::::check_ping_13">proc <a href="ping.tcl-annot.html#::::check_ping">::::check_ping</a></a></strong> {{pingIP &#34;0.0.0.0&#34;}           
                 {<a name="::myIP(1)"><a href="./mysqlRunall_monitor.tcl.html#::myIP_529">::myIP</a></a> &#34;0.0.0.0&#34;}             
                 {portId &#34;1&#34;} 	            
                 {pingStatus &#34;pingable&#34; }      
                 {fd &#34;NULL&#34;}
		 {sourceMac  &#34;default&#34; }
		 {destMac  &#34;default&#34; }} {
              
<a name="::CheckPing(1)"><a href="./ping.tcl.html#::CheckPing_39">::CheckPing</a></a> -txPortId $portId -sIpAddr $myIP -dIpAddr $pingIP -sourceMac $sourceMac -destMac $destMac\
               -gsIpAddr 0.0.0.0 -pingStatus $pingStatus -filePt $fd

}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: CheckPing    </span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Send ICMP echo request (i.e. ping) packet from an ixia port to</span>
<span class="comment-line">#	the specified destination ip and verify if echo reply is received.  </span>
<span class="comment-line"># Input args: args</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#	CheckPing  -txPortId 1 -rxPortId 2 \</span>
<span class="comment-line">#            -sIpAddr $clientIP1 -dIpAddr $clientIP2 \</span>
<span class="comment-line">#            -pingStatus &#34;pingable&#34;</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::CheckPing_39">proc <a href="ping.tcl-annot.html#::::CheckPing">::::CheckPing</a></a></strong> {args} {
   <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CheckPing $args {
     txPortId &#34;1&#34;
     rxPortId &#34;0&#34;    
     tag      &#34;none&#34;
     sourceMac &#34;default&#34;
     destMac   &#34;default&#34;
     sIpAddr &#34;127.0.0.1&#34;
     dIpAddr &#34;127.0.0.1&#34;
     gsIpAddr &#34;0.0.0.0&#34;
     psvrGwIpAddr &#34;0.0.0.0&#34;
     pingStatus &#34;pingable&#34;
     frameSize &#34;64&#34;
     filePt &#34;NULL&#34;
   }
   global TrafficGen
   set pPattern &#34;abcd&#34;   
   
   if { $gsIpAddr == &#34;0.0.0.0&#34; } {
      <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Pinging from $sIpAddr to $dIpAddr&#34;
      set gsIpAddr $dIpAddr 
   } else { 
      <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Pinging from $sIpAddr to $dIpAddr via $gsIpAddr&#34;
   }   
   if {$rxPortId == $txPortId} {
      <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Invalid port specification: txPortId=rxPortId&#34;
      return
   }

   if {$destMac == &#34;default&#34;} {

       <span class="comment-line">#enable protocol server for the Rx port, to reponse to ARP request</span>
       if {$rxPortId &gt; 0} {
	if {$TrafficGen != &#34;ept&#34;} {
	   <a name="::SaveAndSetProtocolServer(1)"><a href="./ixiaProtSrv.tcl.html#::SaveAndSetProtocolServer_1235">::SaveAndSetProtocolServer</a></a> $rxPortId $dIpAddr $psvrGwIpAddr ixInfo \
		   -arpService true -pingService true -tag $tag
	}
       }
       <span class="comment-line">#request mac to send ip packet</span>
       set destMacAddrTx [<a name="::SendArpRequest(1)"><a href="./ePTSendPacket.tcl.html#::SendArpRequest_1127">::SendArpRequest</a></a> $txPortId $sIpAddr $gsIpAddr $tag]
       <span class="comment-line">#need to set this to some invalid mac, otherwise ixia send function won't return</span>
       if {$destMacAddrTx == &#34;NO_ARP_REPLY&#34; } {
	   set destMacAddrTx &#34;00 00 00 00 00 00&#34;
       }
   } else {
       ;<span class="comment-line"># User specified</span>
       set destMacAddrTx $destMac
   }
   <span class="comment-line">#turn on capturing function on all the monitor ports</span>
   
   <a name="::StartPortsCapture(1)"><a href="./ePTRx.tcl.html#::StartPortsCapture_820">::StartPortsCapture</a></a> $txPortId
   
    <span class="comment-line">#MM 05-10-2011: Added sleep for 40G Ixia ports</span>
    sleep 5

   <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Sending IP Packet to $dIpAddr from $sIpAddr.  SrcMac:$sourceMac DstMac:$destMacAddrTx&#34;
   
   <span class="comment-line">#send icmp packets</span>
   set frameSent [<a name="::SendIpFrame(1)"><a href="./ePTSendPacket.tcl.html#::SendIpFrame_587">::SendIpFrame</a></a> -txPortId $txPortId -protocol &#34;icmp&#34; \
                  -tag $tag -dataPattern $pPattern -frameSize $frameSize \
                  -sourceMac $sourceMac -destMac $destMacAddrTx -sourceIp $sIpAddr  -destIp $dIpAddr \
                  -type 8 -code 0 -id 1234 -sequence 5678 ]
   <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Frame (icmp) sent on portId $txPortId:&#34;
   <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$frameSent&#34;
  
   <span class="comment-line">#retrieve data from ixia</span>
   <span class="comment-line">#find how many expected packets was received</span>

   set frReceived 0      
   set rawPortData [<a name="::GetCapturedFrames(1)"><a href="./ePTRx.tcl.html#::GetCapturedFrames_982">::GetCapturedFrames</a></a> $txPortId]
   foreach frame $rawPortData {
      puts &#34;Raw: $frame&#34;
      set messageType [ <a name="::GetMessageType(1)"><a href="./MessageDecoding.tcl.html#::GetMessageType_992">::GetMessageType</a></a> $frame]
      switch --  $messageType \
         &#34;IP_ICMP&#34; {
         set TTLSent [<a name="::GetTTL(1)"><a href="./MessageDecoding.tcl.html#::GetTTL_192">::GetTTL</a></a> $frameSent]
         set TTLReceived [<a name="::GetTTL(2)"><a href="./MessageDecoding.tcl.html#::GetTTL_192">::GetTTL</a></a> $frame]
         <span class="comment-line"># check ttl               </span>
          <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;SourceMac: [<a name="::GetSourceMacAddress(1)"><a href="./MessageDecoding.tcl.html#::GetSourceMacAddress_40">::GetSourceMacAddress</a></a> $frame] DestMac: [<a name="::GetDestMacAddress(1)"><a href="./MessageDecoding.tcl.html#::GetDestMacAddress_19">::GetDestMacAddress</a></a> $frame]&#34;
          <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;SourceIp: [<a name="::GetSourceIPAddress(1)"><a href="./MessageDecoding.tcl.html#::GetSourceIPAddress_411">::GetSourceIPAddress</a></a> $frame] DestIp: [<a name="::GetDestIPAddress(1)"><a href="./MessageDecoding.tcl.html#::GetDestIPAddress_447">::GetDestIPAddress</a></a> $frame]&#34;
         puts &#34;TTLSent=$TTLSent TTLReceived=$TTLReceived&#34;
         if {([<a name="::GetSourceIPAddress(2)"><a href="./MessageDecoding.tcl.html#::GetSourceIPAddress_411">::GetSourceIPAddress</a></a> $frame] == [<a name="::GetDestIPAddress(2)"><a href="./MessageDecoding.tcl.html#::GetDestIPAddress_447">::GetDestIPAddress</a></a> $frameSent]) } {
            set type [<a name="::GetICMPType(1)"><a href="./MessageDecoding.tcl.html#::GetICMPType_224">::GetICMPType</a></a> $frame] 
            set code [<a name="::GetICMPCode(1)"><a href="./MessageDecoding.tcl.html#::GetICMPCode_255">::GetICMPCode</a></a> $frame] 
            set id [<a name="::GetICMPId(1)"><a href="./MessageDecoding.tcl.html#::GetICMPId_286">::GetICMPId</a></a> $frame]
            set sequence [<a name="::GetICMPSequence(1)"><a href="./MessageDecoding.tcl.html#::GetICMPSequence_317">::GetICMPSequence</a></a> $frame]
            <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;type$type code$code id$id sequence$sequence&#34;
            if {$type != 0} {
               <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted type = 0 but got type = $type&#34;
            } elseif {$code != 0 } {
               <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted code = 0 but got code = $code&#34;
            } elseif {$id != 1234 } {
               <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted id = 1234 but got id = $id&#34;
            } elseif {$sequence != 5678 } {
               <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted sequence = 1234 but got sequence = $sequence&#34;
            } else {
               incr frReceived  1
            }
         }
      }
      puts &#34;$messageType&#34;
   }
   puts &#34;numPacketReceived= $frReceived&#34;   

   <span class="comment-line">#reset protocol server, since it won't be reset when init</span>
   if {$rxPortId &gt; 0} {
    if {$TrafficGen != &#34;ept&#34;} {
      <a name="::RestoreSavedProtocolServer(1)"><a href="./ixiaProtSrv.tcl.html#::RestoreSavedProtocolServer_1346">::RestoreSavedProtocolServer</a></a> ixInfo
	}
   }

   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Pinging $dIpAddr on port $txPortId. Should be $pingStatus&#34;

   if { ($frReceived &gt;= 1 &amp;&amp; $frReceived &lt;= 3) &amp;&amp; ($pingStatus == &#34;pingable&#34;) } {
      <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Pinging sucessful as expected&#34;
   } elseif { ($frReceived == 0) &amp;&amp; ($pingStatus == &#34;notPingable&#34;) } {
      <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Pinging failed as expected.&#34;
   } elseif { ($frReceived == 0) &amp;&amp; ($pingStatus == &#34;pingable&#34;) } {
      <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Should be pingable, but receive no response.&#34;
   } elseif { ($frReceived &gt; 0) &amp;&amp; ($pingStatus == &#34;notPingable&#34;) } {
      <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Should not be pingable but receive reply message.&#34;
   }  else {
      <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Failed pinging check. Unknown reason&#34;
   }
   <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>  
    
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: CheckCLIPing    </span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Send a CLI ping command from the DUT and check if ping response</span>
<span class="comment-line">#	is well received on DUT.  </span>
<span class="comment-line"># Input args: command {flag} {comment} </span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#	CheckCLIPing &#34;ping 30.0.0.30 from 10.0.0.1&#34; &#34;Pingable&#34;</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::CheckCLIPing_178">proc <a href="ping.tcl-annot.html#::::CheckCLIPing">::::CheckCLIPing</a></a></strong> {command {flag &#34;pingable&#34;} {comment &#34;&#34;} {sleepTime 7}} {

;<span class="comment-line"># Acceptable ping packet loss tolerance</span>
set tolerance 50
global whichDutNow DUTs_info

set tmpTime [clock seconds]
set fd_in [open &#34;Tmp/tmp_${tmpTime}_[pid].cfg&#34; &#34;w&#34;]
set ret 1
<span class="comment-line">#Adding sleep for 5 seconds for timing issue</span>
sleep 5
send &#34;$command\r&#34;
<a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$command\r&#34;
sleep $sleepTime

if [regexp &#34;cont.*&#34; $command] {
    <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Sending Ctrl-C&#34;
    ;<span class="comment-line"># Send Ctrl-C</span>
    send &#34;\x03&#34;
}

send &#34;\r&#34;
expect &#34;$command&#34;
expect &#34;# &#34;
<a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;&#34;


set exp_out_buf &#34;&#34;
regsub -all &#34;\n\r&#34; $expect_out(buffer) &#34;\n&#34; exp_out_buf
regsub -all &#34;\t&#34; $exp_out_buf &#34; &#34; exp_out_buf
if {$fd_in != &#34;NULL&#34; } { puts -nonewline $fd_in $exp_out_buf }
<a name="::result_pre(1)"><a href="./loadConsoles.tcl.html#::result_pre_15">::result_pre</a></a> $exp_out_buf      
close $fd_in

lappend parameterList &#34;{loss} -1&#34;
set value [<a name="::GetKeyValue(1)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;Tmp/tmp_${tmpTime}_[pid].cfg&#34; $parameterList]
unset parameterList

if {[<a name="::CompareRelease(1)"><a href="./misc.tcl.html#::CompareRelease_891">::CompareRelease</a></a> [<a name="::GetVersion(1)"><a href="./misc.tcl.html#::GetVersion_303">::GetVersion</a></a> DUT${whichDutNow}] 12.2.0.3]&gt;=0} {
   lappend parameterList &#34;{received} -2&#34;
} else {
   lappend parameterList &#34;{received} -1&#34;
}

set packetReceived [<a name="::GetKeyValue(2)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;Tmp/tmp_${tmpTime}_[pid].cfg&#34; $parameterList]
unset parameterList

<span class="comment-line">#puts &#34;value: $value&#34;</span>
set packetLoss &#34;Not Found&#34;
scan $value &#34;%d&#34; packetLoss
puts &#34;packetLoss: $packetLoss&#34;

<a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Checking &lt;$command&gt; with flag $flag $comment&#34;
   if {$flag == &#34;pingable&#34; } {
      if {$packetLoss &gt; $tolerance || $packetReceived == 0} {    ;<span class="comment-line"># Increased tolerance for exos</span>
         set ret 0
         <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted pingable with packet loss of 0%, but got $packetLoss %&#34;
      } else {
         set ret 1
         <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Got acceptable $packetLoss % packet loss - pingable (Tolerance $tolerance %)&#34;
      }
   } elseif {$flag == &#34;notPingable&#34; } {
      if {$packetLoss != 100 &amp;&amp; $packetReceived != 0} {
         set ret 0
         <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted notPingable with packet loss of 100%, but got $packetLoss %&#34;
      } else {
         set ret 1
         <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Got 100% packet loss as wanted - not pingable&#34;
      }
   } else { <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unknown flag: $flag&#34; }
<a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

file delete &#34;Tmp/tmp_${tmpTime}_[pid].cfg&#34;
return $ret
}

<strong><a name="::::CheckCLIPing6_254">proc <a href="ping.tcl-annot.html#::::CheckCLIPing6">::::CheckCLIPing6</a></a></strong> {command {flag &#34;pingable&#34;} {comment &#34;&#34;} } {

set packetLoss [cliPing $command]
if { $flag == &#34;pingable&#34; &amp;&amp; $packetLoss &gt; 25 } {
   <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;*** Retry : $command with flag $flag&#34;
   set packetLoss [cliPing $command]
}

if  { $flag == &#34;pingable&#34; &amp;&amp; $packetLoss &gt; 25 } {
   if  { [string compare [lindex $command 1]  &#34;ipv6&#34;] == 0 } {
     <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;rtlookup ipv6 [lindex $command 2]&#34;
   }
}

<a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Checking &lt;$command&gt; with flag $flag $comment&#34;
   if {$flag == &#34;pingable&#34; } {
      if {$packetLoss &gt; 25 } {
         <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted pingable with packet loss of  &lt;= 25%, but got $packetLoss %&#34;
      } else {
         <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Got $packetLoss% packet loss as wanted - pingable&#34;
      }
   } elseif {$flag == &#34;notPingable&#34; } {
      if {$packetLoss != 100 } {
         <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Wanted notPingable with packet loss of 100%, but got $packetLoss %&#34;
      } else {
         <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Got 100% packet loss as wanted - not pingable&#34;
      }
   } else { <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Unknown flag: $flag&#34; }
<a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: ixCheckPing</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Send a ping request command from ixia to DUT and awaits ping</span>
<span class="comment-line">#        response, this proc is similar to CheckPing. But </span>
<span class="comment-line">#        could be used if the port is  part of any protocol control vlan </span>
<span class="comment-line">#        (where flooding of control packets happen).  </span>
<span class="comment-line"># Input args: portId,sourceIp, destIp, tag </span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: ixCheckPing  &#34;1&#34; &#34;10.0.0.5&#34; &#34;10.0.0.1&#34; </span>
<span class="comment-line">#       </span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>

<strong><a name="::::ixCheckPing_300">proc <a href="ping.tcl-annot.html#::::ixCheckPing">::::ixCheckPing</a></a></strong> {{portId 1} sourceIp destIp {tag &#34;&#34;}} {
<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
if ![<a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> isValidFeature $chas $card $port portFeatureIxRouter] {
   <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;the card doesn't support linux operation&#34;
   return -1
}
set command &#34;/bin/ping -c 6 -I $sourceIp $destIp&#34;

if {$tag == &#34;&#34;} {
   set tag none
}
<a name="::EnableProtocolServer(1)"><a href="./CheckArp.tcl.html#::EnableProtocolServer_207">::EnableProtocolServer</a></a> $portId $sourceIp $tag true

if [pcpuCommandService add $chas $card $port $command] {
   <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;command could not be added to the port&#34;
   return -1
}

<a name="::ClearPortsStats(1)"><a href="./ePTRx.tcl.html#::ClearPortsStats_951">::ClearPortsStats</a></a> $portId

if [pcpuCommandService execute] {
   <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;command could not be executed for the port&#34;
   return -1
}

set getVal [pcpuCommandService getFirst]
if !$getVal {
   set Command [pcpuCommandService cget -command]
   set output [pcpuCommandService cget -output]
   <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;the command given is $Command&#34;
   <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;the output for the given command is $output&#34;
}
<a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 2
<a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;verify the ping response&#34;
<a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statAllStats $chas $card $port
set PingResponse [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -rxPingReply]
<a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Number of ping response packets are $PingResponse&#34;
if {$PingResponse &gt;= 3} {
   <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;received ping response for sent requests&#34;
} else {
   <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;problems with ping from port&#34;
}
<a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
<a name="::DisableProtocolServer(1)"><a href="./CheckArp.tcl.html#::DisableProtocolServer_371">::DisableProtocolServer</a></a> $portId $sourceIp
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
