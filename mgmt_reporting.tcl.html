<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>mgmt_reporting.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#mgmt_reporting.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>mgmt_reporting.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="mgmt_reporting.tcl-annot.html">annotations</a> | <a href="mgmt_reporting.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::_CreateInvFile_1">proc <a href="mgmt_reporting.tcl-annot.html#::::_CreateInvFile">::::_CreateInvFile</a></a></strong> { tclFile } {
    global DEBUGON

    set tcInvFile &#34;${tclFile}.inv&#34;
    <span class="comment-line"># open inv file</span>
    set inv_in [open &#34;$tcInvFile&#34; &#34;w&#34;]
    set hitTitle 0
    set inTitle 0
    set hitNum 0
    set fd_in [open &#34;$tclFile&#34; &#34;r&#34;]
    while {[gets $fd_in line] != -1} {
        set line [string trim $line &#34;;&#34;]
        set cookedLine [<a name="::cookString(1)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]
        set cookedLine [split $cookedLine]
        if {[llength $cookedLine] == 0} {
            continue;
        }
        set myLine [string trim $line]
        
        if {[regexp -nocase {^proc} $myLine]} {
            set tempNum &#34;[lindex $cookedLine 1]&#34;
        }
        if {[lindex $cookedLine 0]==&#34;set&#34; &amp;&amp; [lindex $cookedLine 1]==&#34;testNo&#34;} {
            if {[regexp -nocase &#34;procname&#34; $line]} {
                set line &#34;set testNo $tempNum&#34;
            }
            if {[regexp -nocase &#34;info level&#34; $line]} {
                set line &#34;set testNo $tempNum&#34;
            }
            regsub -all {\\$} $line &#34;&#34; line
            set hitNum 1
            puts $inv_in $line
        } elseif {!$hitNum} {
            set myLine [string trim $line]
            if {[regexp -nocase {^set} $myLine]} {
                puts $inv_in &#34;#$line&#34;
            } else {
                continue
            }
        }
        set cookedLine [<a name="::cookString(2)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]
        set cookedLine [split $cookedLine]
        if {[lindex $cookedLine 0]==&#34;set&#34; &amp;&amp; ([lindex $cookedLine 1]==&#34;title&#34; || [lindex $cookedLine 1]==&#34;title1&#34;)} {
            if {$DEBUGON} {puts $line}
            set myLine [string trim $line]
            if {[regexp -nocase {\\$} $myLine]} {
                set inTitle 1
            }
            regsub -all {\$testNo } $line &#34;&#34; line
            regsub -all {\$} $line &#34;&#34; line
            if {$DEBUGON} {puts &#34;POST $line&#34;}
            puts $inv_in $line
            set hitTitle 1
            if {$hitTitle} {
                set gotEnd 0
                set catchLoop 0
                set catchString &#34;&#34;
                while {!$gotEnd} {
                    gets $fd_in line
                    set cookedLine [<a name="::cookString(3)"><a href="./misc.tcl.html#::cookString_22">::cookString</a></a> $line]
                    set cookedLine [split $cookedLine]
                    if {[llength $cookedLine] == 0} {
                        if {$DEBUGON} {puts &#34;Hit zero&#34;}
                        close $inv_in
                        close $fd_in
                        set gotEnd 1
                        set inTitle 0
                    }
                    set myLine [string trim $line]
                    if {[regexp -nocase {^#} $myLine]} {
                        if {$DEBUGON} {puts &#34;#?? $line&#34;}
                        close $inv_in
                        close $fd_in
                        set gotEnd 1
                        set inTitle 0
                    }
                    if {[regexp -nocase {^set} $myLine] &amp;&amp; !$inTitle} {
                        if {$DEBUGON} {puts &#34;set?? $line&#34;}
                        close $inv_in
                        close $fd_in
                        set gotEnd 1
                        set inTitle 0
                    }
                    if {[regexp -nocase {^\}} $myLine]} {
                        if {$DEBUGON} {puts &#34;right curly?? $line&#34;}
                        close $inv_in
                        close $fd_in
                        set gotEnd 1
                        set inTitle 0
                    }
                    if {[regexp -nocase {^else} $myLine]} {
                        if {$DEBUGON} {puts &#34;right curly?? $line&#34;}
                        close $inv_in
                        close $fd_in
                        set gotEnd 1
                        set inTitle 0
                    }
                    if {$DEBUGON} {puts &#34;pre $line&#34;}
                    if {!$gotEnd} {
                        regsub -all {\$testNo } $line &#34;&#34; line
                        regsub -all {\$} $line &#34;&#34; line
                        regsub -all &#34;       &#34; $line &#34; &#34; line
                        regsub -all &#34;      &#34; $line &#34; &#34; line
                        regsub -all &#34;     &#34; $line &#34; &#34; line
                        regsub -all &#34;    &#34; $line &#34; &#34; line
                        regsub -all &#34;   &#34; $line &#34; &#34; line
                        regsub -all &#34;  &#34; $line &#34; &#34; line
                        puts $inv_in $line
                    }
                    if {$DEBUGON} {puts &#34;post $line&#34;}
                    incr catchLoop
                    append catchString &#34;\\n$line&#34;;
                    if {$catchLoop &gt; 10} {
                        puts $catchString
                        close $inv_in
                        close $fd_in
                        exit;
                    }
                }
                break
            }
        }
    }
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetFeatureAreasFromDb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetFeatureAreasFromDb_134">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetFeatureAreasFromDb">::::_GetFeatureAreasFromDb</a></a></strong> {} {
    global DBNAME2
    global DBIPADDRESS2
    global DBHANDLE2
    global DEBUGON
    global EXISTINGFEATURENAMESByArea
    global DBUSERNAME2; <span class="comment-line"># autoweb</span>
    global DBPASSWORD2; <span class="comment-line"># autoweb</span>

    set featureTypesList &#34;&#34;

    set dbconnectstatus [<a name="::_conn_to_db2(1)"><a href="./mgmt_reporting.tcl.html#::_conn_to_db2_186">::_conn_to_db2</a></a> -host $DBIPADDRESS2 \
                                     -db $DBNAME2 \
                                     -user $DBUSERNAME2 \
                                     -password $DBPASSWORD2 \
                                     -status  &#34;&#34; \
                                     -handler $DBHANDLE2]
    set DBHANDLE2 [lindex $dbconnectstatus 0]
    set connectStatus [lindex $dbconnectstatus 1]
    <span class="comment-line">#puts &#34;-----\nStatus $connectStatus handler $DBHANDLE2\n-----&#34;</span>

    <span class="comment-line"># -----------------------------------------------------------------</span>
    <span class="comment-line">#  Get the real execution time for this module on this hardware.</span>
    <span class="comment-line"># -----------------------------------------------------------------</span>
    set allFeatures [mysqlsel $DBHANDLE2 &#34;SELECT feature_type \
        FROM feature_table WHERE feature_id &gt;= '0'&#34; -list]
    if {$allFeatures == &#34;&#34;} {
        puts &#34;NO FEATURES RETURNED&#34;
    	return 0
    }
    if {$DEBUGON} {puts &#34;==== FOUND Features.  Populate this platform ====&#34;; flush stdout; after 50;}
    
    foreach fList $allFeatures {
        set fType [lindex $fList 0]
        if {$fType != &#34;&#34;} {
            if {[lsearch $featureTypesList $fType] &lt; 0} {
                lappend featureTypesList $fType
                if {$DEBUGON} {puts &#34;Adding type $fType&#34;; flush stdout; after 50;}
            }
        } else {
            if {$DEBUGON} {
                puts &#34;====  Feature Name or Feature Type is missing. \
                     Type $fType Name $fName  ======&#34;; flush stdout; after 50;
            }
        }
    }
    return $featureTypesList;
}
<span class="comment-line"># --------------------------------------------------------------------</span>
<span class="comment-line"># Connect to database with user set handles</span>
<span class="comment-line">#</span>
<span class="comment-line"># --------------------------------------------------------------------</span>
<strong><a name="::::_conn_to_db2_186">proc <a href="mgmt_reporting.tcl-annot.html#::::_conn_to_db2">::::_conn_to_db2</a></a></strong> { args } {
    global mysqlstatus mysql_handler this_db 

    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> _conn_to_db2 $args {
        host &#34;&#34;
        db &#34;$this_db&#34;
        user &#34;&#34;
        password &#34;&#34;
        status &#34;$mysqlstatus&#34;
        handler &#34;&#34;
    }
    <span class="comment-line">#if {[mysqlstatus $handler -numeric] == 2} {</span>
    <span class="comment-line">#    return [list &#34;$handler&#34; &#34;connected&#34;]</span>
    <span class="comment-line">#}</span>
    set mysql_handler $handler
    set this_db $db
    if {[info exists mysql_handler] &amp;&amp; $mysql_handler != &#34;&#34;} {
        catch {mysqlclose $mysql_handler} result
    }
    
    catch {mysqlconnect -host $host -user $user -password $password -db $db} mysql_handler
    if {$mysqlstatus(code) !=0} {
        puts stderr $mysqlstatus(message)
        return [list &#34;$mysql_handler&#34; &#34;$mysqlstatus(code)&#34;]
    }
    return [list &#34;$mysql_handler&#34; &#34;$mysqlstatus(code)&#34;]
}

<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetAllFeatureInfoByAreaFromDb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetAllFeatureInfoByAreaFromDb_223">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetAllFeatureInfoByAreaFromDb">::::_GetAllFeatureInfoByAreaFromDb</a></a></strong> {} {
    global DBNAME2
    global DBIPADDRESS2
    global DBHANDLE2
    global DEBUGON
    global EXISTINGFEATURENAMESByAreaLists
    global EXISTINGFEATUREDIRSByAreaLists
    global EXISTINGFEATUREDIRSByName
    global EXISTINGFEATUREOTPSModule
    global SUBTYPESBYAREAFEATUREDIR
    global ACTIVEBYAREAFEATUREDIR
    global ENDRELEASEBYAREAFEATUREDIR
    global STARTRELEASEBYAREAFEATUREDIR
    global FEATURETYPEEXISTS
    global AutoAreasByDBTypes
    global DBUSERNAME2; <span class="comment-line"># autoweb</span>
    global DBPASSWORD2; <span class="comment-line"># autoweb</span>

    set dbconnectstatus [<a name="::_conn_to_db2(2)"><a href="./mgmt_reporting.tcl.html#::_conn_to_db2_186">::_conn_to_db2</a></a> -host $DBIPADDRESS2 \
                                     -db $DBNAME2 \
                                     -user $DBUSERNAME2 \
                                     -password $DBPASSWORD2 \
                                     -status  &#34;&#34; \
                                     -handler $DBHANDLE2]
    set DBHANDLE2 [lindex $dbconnectstatus 0]
    set connectStatus [lindex $dbconnectstatus 1]
    <span class="comment-line">#puts &#34;-----\nStatus $connectStatus handler $DBHANDLE2\n-----&#34;</span>

    <span class="comment-line"># -----------------------------------------------------------------</span>
    <span class="comment-line"># Get the areaList so area lists can be created</span>
    <span class="comment-line"># -----------------------------------------------------------------</span>
    set areaList [<a name="::_GetFeatureAreasFromDb(1)"><a href="./mgmt_reporting.tcl.html#::_GetFeatureAreasFromDb_134">::_GetFeatureAreasFromDb</a></a>]
    foreach myArea $areaList {
        set EXISTINGFEATURENAMESByAreaLists($myArea) &#34;&#34;
        set EXISTINGFEATUREDIRSByAreaLists($myArea) &#34;&#34;
    }
    <span class="comment-line"># -----------------------------------------------------------------</span>
    <span class="comment-line">#  Get the real execution time for this module on this hardware.</span>
    <span class="comment-line"># -----------------------------------------------------------------</span>
    set allFeatures [mysqlsel $DBHANDLE2 &#34;SELECT feature_id, feature_directory, \
        feature_type, feature_sub_type, feature_name, otps_module, status, end_release_id, start_release_id \
        FROM feature_table WHERE feature_id &gt;= '0' ORDER BY feature_directory&#34; -list]
    if {$allFeatures == &#34;&#34;} {
        puts &#34;NO FEATURES RETURNED&#34;
    	return 0
    }
    if {$DEBUGON} {puts &#34;==== FOUND Features.  Populate this platform ====&#34;; flush stdout; after 50;}
    foreach fList $allFeatures {
        set fId   [lindex $fList 0]
        set fDir [lindex $fList 1]
        set fType [lindex $fList 2]
        set fSType [lindex $fList 3]
        set fName [lindex $fList 4]
        set fOTPS [lindex $fList 5]
        set fActive [lindex $fList 6]
        set fEndRel [lindex $fList 7]
        set fStartRel [lindex $fList 8]
        if {$fType != &#34;&#34; &amp;&amp; $fName != &#34;&#34;} {
            <span class="comment-line">#EXISTINGFEATURENAMESByAreaLists</span>
            <span class="comment-line">#EXISTINGFEATUREDIRSByAreaLists</span>
            <span class="comment-line">#EXISTINGFEATUREDIRSByName</span>
            lappend EXISTINGFEATURENAMESByAreaLists($fType) $fName
            lappend EXISTINGFEATUREDIRSByAreaLists($fType) $fDir
            set SUBTYPESBYAREAFEATUREDIR($fType,$fDir) $fSType
            set ACTIVEBYAREAFEATUREDIR($fType,$fDir) $fActive
            set ENDRELEASEBYAREAFEATUREDIR($fType,$fDir) $fEndRel
            set STARTRELEASEBYAREAFEATUREDIR($fType,$fDir) $fStartRel
            set EXISTINGFEATURENameByDir($fDir) $fName
            set EXISTINGFEATUREOTPSModule($AutoAreasByDBTypes($fType),$fDir) $fOTPS
            set FEATURETYPEEXISTS($AutoAreasByDBTypes($fType),$fDir) 1
            if {$DEBUGON} {
                puts &#34;====\n  Add EXISTINGFEATURENAMESByAreaLists($fType) : $fName \n\
                            Add EXISTINGFEATUREDIRSByAreaLists($fType) : $fDir \n\
                            EXISTINGFEATURENameByDir($fDir) $fName\n\
                            SUBTYPESBYAREAFEATUREDIR($fType,$fDir) $fSType ======&#34;; flush stdout; after 50;
            }
        } else {
            if {$DEBUGON} {
                puts &#34;====  Feature Name or Feature Type is missing. \
                     Type $fType Name $fName  ======&#34;; flush stdout; after 50;
            }
        }
    }
    return;
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetAllRegressionAreas</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetAllRegressionAreas_317">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetAllRegressionAreas">::::_GetAllRegressionAreas</a></a></strong> {} {
    global SKIPAREALIST
    global SKIPFEATUREDIRSLIST
    global DEBUGONREGRESSIONAREAS

    if {$DEBUGONREGRESSIONAREAS} {puts &#34;\n*****\n*****\nCurrently in ROOT directory [pwd]\n*****\n*****&#34;}
    
    set AreasMinusSkipList &#34;&#34;
    set AllDirs [glob -type d *]
    foreach dir $AllDirs {
        if {[lsearch $SKIPAREALIST $dir] == -1} {
            if {$dir == &#34;CVS&#34; || $dir == &#34;cvs&#34;} {
                continue;
            }
            lappend AreasMinusSkipList $dir
            if {$dir == &#34;CLItest&#34;} {
                lappend AreasMinusSkipList cli-ew
            }
            if {$DEBUGONREGRESSIONAREAS} {puts &#34;===FOUND Regression Area: $dir ======&#34;; flush stdout; after 50;}
            <span class="comment-line"># The SKIPFEATUREDIRLIST array is initialized in gather_testcase_info</span>
            <span class="comment-line">#    There may not be a skip features for all areas, so we need to init</span>
            <span class="comment-line">#    those array indexes if they have not been defined in gather_testcase_info</span>
            set currentArea [string tolower $dir]
            if {![info exists SKIPFEATUREDIRSLIST($currentArea)]} {
                set SKIPFEATUREDIRSLIST($currentArea) &#34;&#34;;
            }
        }
    }
    return $AreasMinusSkipList
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetAllCurrentDirFeatures</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetAllCurrentDirFeatures_356">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetAllCurrentDirFeatures">::::_GetAllCurrentDirFeatures</a></a></strong> {} {
    

    global SKIPAREALIST
    global SKIPFEATUREDIRSLIST
    global DEBUGONDIRFEATURES

    if {$DEBUGONDIRFEATURES} {puts &#34;\n*****\n*****\nCurrently in directory [pwd]\n*****\n*****&#34;}
    
    set AreasMinusSkipList &#34;&#34;
    set AllDirs [glob -type d *]
    set AllDirs [lsort $AllDirs]
    foreach dir $AllDirs {
        if {[lsearch $SKIPAREALIST $dir] == -1} {
            if {$dir == &#34;CVS&#34; || $dir == &#34;cvs&#34;} {
                continue;
            }
            lappend AreasMinusSkipList $dir
            if {$DEBUGONDIRFEATURES} {puts &#34;===FOUND Regression Directory: $dir ======&#34;; flush stdout; after 50;}
            <span class="comment-line"># The SKIPFEATUREDIRLIST array is initialized in gather_testcase_info</span>
            <span class="comment-line">#    There may not be a skip features for all areas, so we need to init</span>
            <span class="comment-line">#    those array indexes if they have not been defined in gather_testcase_info</span>
            set currentArea [string tolower $dir]
            if {![info exists SKIPFEATUREDIRSLIST($currentArea)]} {
                set SKIPFEATUREDIRSLIST($currentArea) &#34;&#34;;
            }
        }
    }
    return $AreasMinusSkipList
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetAllFeatureTCLFiles</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetAllFeatureTCLFiles_395">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetAllFeatureTCLFiles">::::_GetAllFeatureTCLFiles</a></a></strong> {} {
    global SKIPFEATUREDIRSLIST
    global DEBUGONTCLFILES

    set Files &#34;&#34;
    set currentArea [string tolower [file tail [pwd]]]
    if {$DEBUGONTCLFILES} {puts &#34;\n*****\n*****\nCurrently in Feature directory [pwd]\n*****\n*****&#34;}
    set AllFiles [glob -nocomplain -type f *.tcl]
    foreach aFile $AllFiles {
        if {[regexp -nocase {init} $aFile]} {
            continue;
        }
        if {[regexp -nocase {end} $aFile]} {
            continue;
        }
        set firstIndex [lindex [split $aFile .] 0]
        if {![regexp -nocase {[0-9]+} $firstIndex]} {
            if {$DEBUGONTCLFILES} {puts &#34;$aFile $firstIndex is not an integer&#34;}
            continue;
        }
        lappend Files $aFile
        if {$DEBUGONTCLFILES} {puts &#34;FOUND $currentArea TCL File: $aFile&#34;; flush stdout; after 50;}
    }
    return $Files
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetUniquePlatfromsFromDb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetUniquePlatfromsFromDb_429">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetUniquePlatfromsFromDb">::::_GetUniquePlatfromsFromDb</a></a></strong> {} {
    global DBNAME2
    global DBIPADDRESS2
    global DBHANDLE2
    global DEBUGON

    set uniquePlatformList &#34;&#34;

    <span class="comment-line"># -----------------------------------------------------------------</span>
    <span class="comment-line">#  Get the real execution time for this module on this hardware.</span>
    <span class="comment-line"># -----------------------------------------------------------------</span>
    set allPlatformNames [mysqlsel $DBHANDLE1 &#34;SELECT platform_name  \
        FROM platform_table WHERE platform_id &gt;= '1' &#34; -flatlist]
    set $allPlatformNames &#34;&#34;
    if {$allPlatformNames == &#34;&#34;} {
    	puts &#34;No platform names found&#34;
    	return 0
    } else {
        <span class="comment-line">#if {[catch {mysqlclose $DBHANDLE1} reason]} {</span>
        <span class="comment-line">#    puts &#34;couldn't close mysql connection - reason:\n$reason\n&#34;</span>
        <span class="comment-line">#}</span>
        <span class="comment-line"># -------------------------------------------------------------</span>
        <span class="comment-line"># Pair down the list to only unique platforms</span>
        <span class="comment-line"># -------------------------------------------------------------</span>
        foreach $plat allPlatformNames {
            if {[lsearch $uniquePlatformList $plat] = -1} {
                if {$DEBUGON} {puts &#34;===FOUND Unique Platform: $plat ======&#34;; flush stdout; after 50;}
                lappend $uniquePlatformList $plat
            }
        }
        return $uniquePlatformList;
    }
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _InsertBranchToInvDb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_InsertBranchToInvDb_471">proc <a href="mgmt_reporting.tcl-annot.html#::::_InsertBranchToInvDb">::::_InsertBranchToInvDb</a></a></strong> {} {
    global DEBUGINSERTINV
    global POST_TO_DB
    global SKIPFEATUREDIRSLIST
    global EXISTINGFEATUREOTPSModule
    global DEBUGINSERTINVDBPOST
    global DEBUGONREGRESSIONAREAS
    global DEBUGONDIRFEATURES
    global DEBUGONTCLFILES
    global DEBUGGETINVDB
    global EXISTINGINVBYAREADIRTC
    global DBHANDLE2

    <span class="comment-line"># ----------------------------------------------------------------------------</span>
    <span class="comment-line"># Get all existing inventory in an array set to 1 EXISTINGINVBYAREADIRTC</span>
    <span class="comment-line"># ----------------------------------------------------------------------------</span>
    <a name="::_GetInvInfoFromAutoWeb(1)"><a href="./mgmt_reporting.tcl.html#::_GetInvInfoFromAutoWeb_559">::_GetInvInfoFromAutoWeb</a></a>
    set counter 1
    set AREASLIST [<a name="::_GetAllRegressionAreas(1)"><a href="./mgmt_reporting.tcl.html#::_GetAllRegressionAreas_317">::_GetAllRegressionAreas</a></a>]
    foreach area $AREASLIST {
        cd $area
        if {$area == &#34;CLItest&#34;} {
            continue
        }
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#puts &#34;\n==========================================================================\n\</span>
        <span class="comment-line">#       Gather feature info from area $area in\n\</span>
        <span class="comment-line">#       Dir: [pwd]\n\</span>
        <span class="comment-line">#      ==========================================================================&#34;</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#  Get all of feature names in the area</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        set FEATURESLIST [<a name="::_GetAllCurrentDirFeatures(1)"><a href="./mgmt_reporting.tcl.html#::_GetAllCurrentDirFeatures_356">::_GetAllCurrentDirFeatures</a></a>]
        foreach feature $FEATURESLIST {
            if {[lsearch $SKIPFEATUREDIRSLIST([string tolower $area]) $feature] &gt;= 0} {
                continue;
            }
            cd $feature
            set AllTclFiles [<a name="::_GetAllFeatureTCLFiles(1)"><a href="./mgmt_reporting.tcl.html#::_GetAllFeatureTCLFiles_395">::_GetAllFeatureTCLFiles</a></a>]
            set i 0
            foreach tclFile $AllTclFiles {
                
                if {[info exists EXISTINGINVBYAREADIRTC($area,$feature,$tclFile)] &amp;&amp; $EXISTINGINVBYAREADIRTC($area,$feature,$tclFile)} {
                    if {$DEBUGINSERTINV} {puts &#34;$counter $area $feature $tclFile inventory EXISTS ALREADY&#34;; incr counter; flush stdout; after 150;}
                    continue;
                }
                <span class="comment-line"># ---------------------------------------------------------------</span>
                <span class="comment-line"># Gather the  test case info for inserting to DB</span>
                <span class="comment-line"># ---------------------------------------------------------------</span>
                set insert_clause &#34;&#34;
                set insert_clause [append insert_clause &#34;insert into inventory &#34;]
                set insert_clause [append insert_clause &#34;(a_featurearea, &#34;]
                set insert_clause [append insert_clause &#34;a_featuredir, &#34;]
                set insert_clause [append insert_clause &#34;a_testcase) &#34;]
                
                set insert_clause [append insert_clause &#34;values (\&#34;$area\&#34;, &#34;]
                set insert_clause [append insert_clause &#34;\&#34;$feature\&#34;, &#34;]
                set insert_clause [append insert_clause &#34;\&#34;$tclFile\&#34;) &#34;]
                if {$DEBUGINSERTINVDBPOST} {puts &#34;$insert_clause&#34;; puts &#34;=====&#34;; flush stdout; after 100;}
                if {$POST_TO_DB} {
                    mysqlexec $DBHANDLE2 $insert_clause
                }
                incr i
                if {$i == 30} {
                    after 100;
                    flush stdout;
                    after 50;
                    set i 0
                }
            }
            cd ..
        }
        if {$area == &#34;cli-ew&#34;} {
            cd ..
        }
        cd ..
    }
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetInvInfoFromAutoWeb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetInvInfoFromAutoWeb_559">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetInvInfoFromAutoWeb">::::_GetInvInfoFromAutoWeb</a></a></strong> {} {
    global DBNAME2
    global DBIPADDRESS2
    global DBHANDLE2
    global DBUSERNAME2; <span class="comment-line"># autoweb</span>
    global DBPASSWORD2; <span class="comment-line"># autoweb</span>
    global DEBUGGETINVDB
    global EXISTINGINVBYAREADIRTC


    set dbconnectstatus [<a name="::_conn_to_db2(3)"><a href="./mgmt_reporting.tcl.html#::_conn_to_db2_186">::_conn_to_db2</a></a> -host $DBIPADDRESS2 \
                                     -db $DBNAME2 \
                                     -user $DBUSERNAME2 \
                                     -password $DBPASSWORD2 \
                                     -status  &#34;&#34; \
                                     -handler $DBHANDLE2]
    set DBHANDLE2 [lindex $dbconnectstatus 0]
    set connectStatus [lindex $dbconnectstatus 1]
    <span class="comment-line">#puts &#34;-----\nStatus $connectStatus handler $DBHANDLE2\n-----&#34;</span>

    set allInventory [mysqlsel $DBHANDLE2 &#34;SELECT a_featurearea, a_featuredir, \
        a_testcase \
        FROM inventory&#34; -list]
    if {$allInventory == &#34;&#34;} {
        puts &#34;NO FEATURES RETURNED&#34;
    	return 0
    }
    foreach fList $allInventory {
        set fArea   [lindex $fList 0]
        set fDir [lindex $fList 1]
        set fTC [lindex $fList 2]
        if {$fArea != &#34;&#34; &amp;&amp; $fDir != &#34;&#34; &amp;&amp; $fTC != &#34;&#34;} {
            set EXISTINGINVBYAREADIRTC(${fArea},${fDir},${fTC}) 1
            if {$DEBUGGETINVDB} {
                puts &#34;====  EXISTINGINVBYAREADIRTC(${fArea},${fDir},${fTC}) 1 ======&#34;; 
                flush stdout; after 50;
            }
        } else {
            if {$DEBUGGETINVDB} {
                puts &#34;====  E M P T Y   fArea: $fArea fDir: $fDir fTC: $fTC ======&#34;; 
                flush stdout; after 50;
            }
        }
    }
    return;
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _InsertBranchToInvDb</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_InsertBranchFeaturesIntoAutoweb_614">proc <a href="mgmt_reporting.tcl-annot.html#::::_InsertBranchFeaturesIntoAutoweb">::::_InsertBranchFeaturesIntoAutoweb</a></a></strong> {} {
    global DEBUGINSERTFEATUREAUTOWEB
    global DEBUGINSERTFEATURESPOST
    global EXISTINGINVBYAREADIRTC
    global POST_TO_DB
    global SKIPFEATUREDIRSLIST
    global FEATURETYPEEXISTS
    global DBTypesByAutoArea
    global DBHANDLE2

    set counter 1
    <span class="comment-line"># Populate existing features in autoweb</span>
    <a name="::_GetAllFeatureInfoByAreaFromDb(1)"><a href="./mgmt_reporting.tcl.html#::_GetAllFeatureInfoByAreaFromDb_223">::_GetAllFeatureInfoByAreaFromDb</a></a>

    set AREASLIST [<a name="::_GetAllRegressionAreas(2)"><a href="./mgmt_reporting.tcl.html#::_GetAllRegressionAreas_317">::_GetAllRegressionAreas</a></a>]
    foreach area $AREASLIST {
        cd $area
        if {$area == &#34;CLItest&#34;} {
            continue
        }
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#puts &#34;\n==========================================================================\n\</span>
        <span class="comment-line">#       Gather feature info from area $area in\n\</span>
        <span class="comment-line">#       Dir: [pwd]\n\</span>
        <span class="comment-line">#      ==========================================================================&#34;</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#  Get all of feature names in the area</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        set FEATURESLIST [<a name="::_GetAllCurrentDirFeatures(2)"><a href="./mgmt_reporting.tcl.html#::_GetAllCurrentDirFeatures_356">::_GetAllCurrentDirFeatures</a></a>]
        foreach feature $FEATURESLIST {
            set i 0
            if {[lsearch $SKIPFEATUREDIRSLIST([string tolower $area]) $feature] &gt;= 0} {
                continue;
            }
            cd $feature

            set insert_clause &#34;&#34;
            <span class="comment-line">#FEATURETYPEEXISTS($AutoAreasByDBTypes($fType),$fDir)</span>
            if {[info exists FEATURETYPEEXISTS($area,$feature)] &amp;&amp; $FEATURETYPEEXISTS($area,$feature)} {
                if {$DEBUGINSERTFEATUREAUTOWEB} {puts &#34;$counter $area $feature autoweb EXISTS ALREADY&#34;; incr counter;}
                cd ..
                continue;
            }
            set insert_clause [append insert_clause &#34;insert into feature_table &#34;]
            set insert_clause [append insert_clause &#34;(system_id, &#34;]
            set insert_clause [append insert_clause &#34;feature_type, &#34;]
            set insert_clause [append insert_clause &#34;feature_sub_type, &#34;]
            set insert_clause [append insert_clause &#34;feature_name, &#34;]
            set insert_clause [append insert_clause &#34;feature_directory, &#34;]
            set insert_clause [append insert_clause &#34;feature_rse, &#34;]
            set insert_clause [append insert_clause &#34;feature_rsm, &#34;]
            set insert_clause [append insert_clause &#34;feature_devm, &#34;]
            set insert_clause [append insert_clause &#34;feature_aa, &#34;]
            set insert_clause [append insert_clause &#34;deleted, &#34;]
            set insert_clause [append insert_clause &#34;status) &#34;]
            
            set insert_clause [append insert_clause &#34;values &#34;]
            set insert_clause [append insert_clause &#34;(\&#34;2\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;$DBTypesByAutoArea($area)\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;undefined\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;$feature\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;$feature\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;TBD\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;TBD\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;TBD\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;TBD\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;0\&#34;, &#34;]
            set insert_clause [append insert_clause &#34;\&#34;NotActive\&#34;)&#34;]
            if {$DEBUGINSERTFEATURESPOST} {puts &#34;=====&#34;;puts &#34;$insert_clause&#34;; flush stdout; after 50;}
            if {$POST_TO_DB} {
                mysqlexec $DBHANDLE2 $insert_clause
            }
            incr i
            if {$i == 30} {
                after 50;
                flush stdout;
                after 50;
                set i 0
            }
            cd ..
        }
        if {$area == &#34;cli-ew&#34;} {
            cd ..
        }
        cd ..
    }
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetTreeDirs</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetTreeDirs_711">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetTreeDirs">::::_GetTreeDirs</a></a></strong> {} {
    global SKIPFEATUREDIRSLIST
    global FEATURETYPEEXISTS
    global TREEDIRBYAREA
    global DBTypesByAutoArea

    set counter 1

    set AREASLIST [<a name="::_GetAllRegressionAreas(3)"><a href="./mgmt_reporting.tcl.html#::_GetAllRegressionAreas_317">::_GetAllRegressionAreas</a></a>]
    foreach area $AREASLIST {
        if {![info exists DBTypesByAutoArea($area)]} {
            continue;
        }
        cd $area
        if {$area == &#34;CLItest&#34;} {
            continue
        }
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#puts &#34;\n==========================================================================\n\</span>
        <span class="comment-line">#       Gather feature info from area $area in\n\</span>
        <span class="comment-line">#       Dir: [pwd]\n\</span>
        <span class="comment-line">#      ==========================================================================&#34;</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#  Get all of feature names in the area</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        set FEATURESLIST [<a name="::_GetAllCurrentDirFeatures(3)"><a href="./mgmt_reporting.tcl.html#::_GetAllCurrentDirFeatures_356">::_GetAllCurrentDirFeatures</a></a>]
        foreach feature $FEATURESLIST {
            set i 0
            if {[lsearch $SKIPFEATUREDIRSLIST([string tolower $area]) $feature] &gt;= 0} {
                continue;
            }

            <span class="comment-line">#FEATURETYPEEXISTS($AutoAreasByDBTypes($fType),$fDir)</span>
            set myArea $DBTypesByAutoArea($area)
            if {![info exists TREEDIRBYAREA($myArea)]} {
                <span class="comment-line">#puts &#34;No exist create TREEDIRBYAREA($myArea)&#34;</span>
                set TREEDIRBYAREA($myArea) $feature 
            } else {
                <span class="comment-line">#puts &#34;Exists lappend TREEDIRBYAREA($myArea)&#34;</span>
                lappend TREEDIRBYAREA($myArea) $feature
            }
        }
        cd ..
    }
}
<span class="comment-line">#########################################################################</span>
<span class="comment-line"># proc _GetSVNTreeDirs</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#########################################################################</span>
<strong><a name="::::_GetSVNTreeDirs_766">proc <a href="mgmt_reporting.tcl-annot.html#::::_GetSVNTreeDirs">::::_GetSVNTreeDirs</a></a></strong> {} {
    global SKIPFEATUREDIRSLIST
    global FEATURETYPEEXISTS
    global TREEDIRBYAREA
    global DBTypesByAutoArea

    set counter 1

    set AREASLIST [<a name="::_GetAllRegressionAreas(4)"><a href="./mgmt_reporting.tcl.html#::_GetAllRegressionAreas_317">::_GetAllRegressionAreas</a></a>]
    foreach area $AREASLIST {
        if {![info exists DBTypesByAutoArea($area)]} {
            continue;
        }
        cd $area
        if {$area == &#34;CLItest&#34;} {
            continue
        }
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#puts &#34;\n==========================================================================\n\</span>
        <span class="comment-line">#       Gather feature info from area $area in\n\</span>
        <span class="comment-line">#       Dir: [pwd]\n\</span>
        <span class="comment-line">#      ==========================================================================&#34;</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#  Get all of feature names in the area</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        set FEATURESLIST [<a name="::_GetAllCurrentDirFeatures(4)"><a href="./mgmt_reporting.tcl.html#::_GetAllCurrentDirFeatures_356">::_GetAllCurrentDirFeatures</a></a>]
        foreach feature $FEATURESLIST {
            set i 0
            if {[lsearch $SKIPFEATUREDIRSLIST([string tolower $area]) $feature] &gt;= 0} {
                continue;
            }

            <span class="comment-line">#FEATURETYPEEXISTS($AutoAreasByDBTypes($fType),$fDir)</span>
            set myArea $DBTypesByAutoArea($area)
            if {![info exists TREEDIRBYAREA($myArea)]} {
                <span class="comment-line">#puts &#34;No exist create TREEDIRBYAREA($myArea)&#34;</span>
                set TREEDIRSVNBYAREA($myArea) $feature
            } else {
                <span class="comment-line">#puts &#34;Exists lappend TREEDIRBYAREA($myArea)&#34;</span>
                lappend TREEDIRBYAREA($myArea) $feature
            }
        }
        cd ..
    }
}
<span class="comment-line">#####################################################################################</span>
<span class="comment-line">#</span>
<span class="comment-line"># Create a directory list file for regserver</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#####################################################################################</span>
<strong><a name="::::_CreateBranchModList_818">proc <a href="mgmt_reporting.tcl-annot.html#::::_CreateBranchModList">::::_CreateBranchModList</a></a></strong> {} {
    global SKIPFEATUREDIRSLIST
    global DEBUGONREGRESSIONAREAS
    global DEBUGONDIRFEATURES
    global DEBUGONRUNREG
    global DBTypesByAutoArea
    global EXISTINGFEATURENAMESByAreaLists
    global EXISTINGFEATUREDIRSByAreaLists
    global SUBTYPESBYAREAFEATUREDIR
    global ACTIVEBYAREAFEATUREDIR
    global ENDRELEASEBYAREAFEATUREDIR
    global STARTRELEASEBYAREAFEATUREDIR
    global DISCOVEREDAREA
    global DBHANDLE1
    global theStdMods
    global theRtrMods
    global INRELEASE
    global AREASUSED
    global ISIO

    set counter 1
    set AREASLIST [<a name="::_GetAllRegressionAreas(5)"><a href="./mgmt_reporting.tcl.html#::_GetAllRegressionAreas_317">::_GetAllRegressionAreas</a></a>];  <span class="comment-line"># Get all areas from the file system</span>
    foreach area $AREASLIST {
        cd $area
        if {$area == &#34;CLItest&#34;} {
            continue
        }
        set dbArea $DBTypesByAutoArea($area);
        set theStdMods($dbArea) &#34;&#34;
        set theRtrMods($dbArea) &#34;&#34;
        lappend AREASUSED $dbArea
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#puts &#34;\n==========================================================================\n\</span>
        <span class="comment-line">#       Gather feature info from area $area in\n\</span>
        <span class="comment-line">#       Dir: [pwd]\n\</span>
        <span class="comment-line">#      ==========================================================================&#34;</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line">#  Get all of feature names in the area</span>
        <span class="comment-line"># ------------------------------------------------------------------------</span>
        <span class="comment-line"># stdMods(functional,All)</span>
        <span class="comment-line"># rtrMods(functional,All)</span>
        <span class="comment-line"># stdMods(snmp,All)</span>
        set sub2 &#34;&#34;
        set FEATURESLIST [<a name="::_GetAllCurrentDirFeatures(5)"><a href="./mgmt_reporting.tcl.html#::_GetAllCurrentDirFeatures_356">::_GetAllCurrentDirFeatures</a></a>]; <span class="comment-line"># Get all directories from the file system</span>
        foreach feature $FEATURESLIST {
            if {[lsearch $SKIPFEATUREDIRSLIST([string tolower $area]) $feature] &gt;= 0} {
                continue;
            }
            if {[info exists ACTIVEBYAREAFEATUREDIR($dbArea,$feature)] &amp;&amp; $ACTIVEBYAREAFEATUREDIR($dbArea,$feature) != &#34;Active&#34;} {
                if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;BAIL ($dbArea,$feature) NOTACTIVE&#34;; flush stdout; after 50;}
                <span class="comment-line">#continue;</span>
            }
            if {[info exists ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature)] &amp;&amp; \
                 ($ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature) == &#34;NULL&#34; || \
                 $ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature) == &#34;&#34;)} {
                 set ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature) &#34;30.0.0&#34;
            }
            if {[info exists STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature)] &amp;&amp; \
                 ($STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature) == &#34;NULL&#34; || \
                 $STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature) == &#34;&#34;)} {
                 set STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature) &#34;0.0.0&#34;
            }
            if {$INRELEASE != &#34;ALL&#34; &amp;&amp; [info exists ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature)] &amp;&amp; \
                 $ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature) &lt; &#34;$INRELEASE&#34; } {
                if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;BAIL ($dbArea,$feature) OLDER RELEASE \
                                    $ENDRELEASEBYAREAFEATUREDIR($dbArea,$feature) &lt; $INRELEASE&#34;; flush stdout; after 50;}
                continue;
            }
            if {$INRELEASE != &#34;ALL&#34; &amp;&amp; [info exists STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature)] &amp;&amp; \
                 $STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature) &gt;= &#34;$INRELEASE&#34; } {
                if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;BAIL ($dbArea,$feature) NEWER RELEASE \
                                    $STARTRELEASEBYAREAFEATUREDIR($dbArea,$feature) &gt;= $INRELEASE&#34;; flush stdout; after 50;}
                continue;
            }
            <span class="comment-line"># Check to see if the feature is in the automation feature table</span>
            if {[info exists SUBTYPESBYAREAFEATUREDIR($dbArea,$feature)]} {
                if {$SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) == &#34;standard&#34;} {
                    if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;Adding stdMod theStdMods($dbArea) $feature&#34;; flush stdout; after 50;}
                    lappend theStdMods($dbArea) $feature
                } elseif {$SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) == &#34;routing&#34;} {
                    if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;Adding stdMod theRtrMods($dbArea) $feature&#34;; flush stdout; after 50;}
                    lappend theRtrMods($dbArea) $feature
                }
            } else {
                if {$ISIO == &#34;no&#34;} {
                    continue
                }
                while {1} {
                    set keepChoice Y
                    puts -nonewline &#34;This module $area / $feature is not in the automation database.  Add it locally?(Y/n)\[$keepChoice\]: &#34;;
                    flush stdout;
                    gets stdin keepChoice
                    if {$keepChoice==&#34;&#34;} {
                        set keepChoice Y
                    }
                    if {$keepChoice != &#34;Y&#34; &amp;&amp; $keepChoice != &#34;N&#34; &amp;&amp; $keepChoice != &#34;y&#34; &amp;&amp; $keepChoice != &#34;n&#34;} {
                        puts &#34;Error: Selection must be Y or N&#34;
                    } else {
                        break
                    }
                }
                if {$keepChoice == &#34;N&#34; || $keepChoice == &#34;n&#34;} {continue}
                while {1} {
                    set sub &#34;1&#34;
                    set sub2 &#34;&#34;
                    puts -nonewline &#34;Is it a standard(1) or routing(2)?(1 default)\[$sub\]: &#34;;
                    flush stdout;
                    gets stdin sub
                    if {$sub == &#34;&#34;} {
                        set sub 1
                    }
                    if {$sub == 1} {set sub2 2}
                    if {$sub == 2} {set sub2 5}
                    if {$sub2 != &#34;2&#34; &amp;&amp; $sub2 != &#34;5&#34; } {
                        puts &#34;Error: Selection must be 1 or 2&#34;
                        continue
                    } else {
                        break
                    }
                }
                if {$keepChoice == &#34;Y&#34;} {
       if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;SUB $sub2&#34;; flush stdout; after 50;}
                    if {$sub2 == 2} {set SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) &#34;standard&#34;}
                    if {$sub2 == 5} {set SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) &#34;routing&#34;}
                    if {$SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) == &#34;standard&#34;} {
                        if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;Adding stdMod theStdMods($dbArea) $feature $sub2&#34;; flush stdout; after 50;}
                        lappend theStdMods($area) $feature
                    } elseif {$SUBTYPESBYAREAFEATUREDIR($dbArea,$feature) == &#34;routing&#34;} {
                        if {$DEBUGONRUNREG} {puts &#34;===&#34;;puts &#34;Adding stdMod theStdMods($dbArea) $feature $sub2&#34;; flush stdout; after 50;}
                        lappend theRtrMods($area) $feature
                    }
                }
            }
            <span class="comment-line">#EXISTINGFEATURENAMESByAreaLists($fType) $fName</span>
            <span class="comment-line">#EXISTINGFEATUREDIRSByAreaLists($fType) $fDir</span>
            <span class="comment-line">#SUBTYPESBYAREAFEATUREDIR($fType,$fDir)           </span>
        }
        if {$area == &#34;cli-ew&#34;} {
            cd ..
        }
        cd ..
    }
    <a name="::_CreateTPInvFile(1)"><a href="./mgmt_reporting.tcl.html#::_CreateTPInvFile_968">::_CreateTPInvFile</a></a>
}
<span class="comment-line">###################################################################################</span>
<span class="comment-line">#</span>
<span class="comment-line"># Create the test plan inventory</span>
<span class="comment-line">#</span>
<span class="comment-line">###################################################################################</span>
<strong><a name="::::_CreateTPInvFile_968">proc <a href="mgmt_reporting.tcl-annot.html#::::_CreateTPInvFile">::::_CreateTPInvFile</a></a></strong> {  } {
    global DEBUGON
    global AREASUSED
    global INRELEASE
    global INSVNTAG
    global theStdMods
    global theRtrMods
    global FILEDIR

    set cfgFile &#34;${FILEDIR}/${INSVNTAG}.cfg&#34;
    <span class="comment-line"># open inv file</span>
    set inv_in [open &#34;$cfgFile&#34; &#34;w&#34;]
    foreach area $AREASUSED {
        set line &#34;set stdMods($area,All) \{ \\&#34;;
        puts $inv_in $line
        foreach tp $theStdMods($area) {
            set line &#34;          $tp \\&#34;
            puts $inv_in $line
        }
        }\n\n&#34;;
        puts $inv_in $line
    }
    foreach area $AREASUSED {
        set line &#34;set rtrMods($area,All) \{ \\&#34;;
        puts $inv_in $line
        foreach tp $theRtrMods($area) {
            set line &#34;          $tp \\&#34;
            puts $inv_in $line
        }
        }\n\n&#34;;
        puts $inv_in $line
    }
    close $inv_in
}
<span class="comment-line">########################################################################</span>
<span class="comment-line"># proc designed to compare names in all vital locations for match</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">########################################################################</span>
<strong><a name="::::verify_names_1007">proc <a href="mgmt_reporting.tcl-annot.html#::::verify_names">::::verify_names</a></a></strong> {args} {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> verify_names $args {
        category &#34;FunctionalTest&#34;
        itarPath &#34;/iTest_15.3.1&#34;
        modPath &#34;Enterprise&#34;
    }
    <span class="comment-line">#puts &#34;pwd [pwd]&#34;</span>
    set all_modules [<a name="::get_itest_modules(1)"><a href="./itestrt.tcl.html#::get_itest_modules_197">::get_itest_modules</a></a> -itarPath &#34;$itarPath&#34; -modPath &#34;$modPath&#34;]

    <span class="comment-line">#puts &#34;$all_modules&#34;</span>

    return $all_modules

}
<span class="comment-line">########################################################################</span>
<span class="comment-line">#  Proc to verify a list of modules against</span>
<span class="comment-line">#  iTar, iTest.cfg, database, and auto tree</span>
<span class="comment-line">#</span>
<span class="comment-line">########################################################################</span>
<strong><a name="::::_VerifyModEntries_1026">proc <a href="mgmt_reporting.tcl-annot.html#::::_VerifyModEntries">::::_VerifyModEntries</a></a></strong> {args} {
    global DEBUGON 0
    global DEBUGONREGRESSIONAREAS 0
    global DEBUGONDIRFEATURES 0
    global DEBUGONRUNREG 0

    global DBNAME1
    global DBHANDLE1
    global SKIPAREALIST
    global SKIPFEATUREDIRSLIST
    global EXISTINGFEATURENAMESByAreaLists
    global EXISTINGFEATUREDIRSByName
    global EXISTINGFEATUREDIRSByAreaLists
    global EXISTINGFEATUREOTPSModule
    global EXISTINGINVBYAREADIRTC
    global SUBTYPESBYAREAFEATUREDIR
    global ACTIVEBYAREAFEATUREDIR
    global ENDRELEASEBYAREAFEATUREDIR
    global DBTypesByAutoDirs
    global INRELEASE
    global INSVNTAG
    global FILEDIR
    global ISIO
    global TREEDIRBYAREA
    global DBNAME2
    global DBPASSWORD2
    global DBUSERNAME2
    global DBIPADDRESS2
    global DBHANDLE2
    global AutoAreasByDBTypes
    global DBTypesByAutoArea
    global CATEGORY ITARPATHDEF MODPATHDEF
    set DEBUGON 0
    set DEBUGONREGRESSIONAREAS 0
    set DEBUGONDIRFEATURES 0
    set DEBUGONRUNREG 0
    set FILEDIR [pwd]
    set DBNAME2 devweb_db ;<span class="comment-line"># Automation code repository target for these scripts</span>
    set DBUSERNAME2 regression_user ;<span class="comment-line"># </span>
    set DBPASSWORD2 extreme ;<span class="comment-line"># </span>
    set DBIPADDRESS2 10.69.6.200 ;<span class="comment-line"># Automation code repository target for these scripts</span>
    set DBHANDLE2 &#34;&#34;
    set AREAMAPARRAY &#34;&#34; 
    set TREEDIRBYAREA(NULL) &#34;&#34;
    set SKIPAREALIST {Tmp tmp Autoweb Benchmarktest Doc EPICenter EPICenter-test Lib iTest main Tools \
         users Util PerformanceTest XML_API cli-ew CLItest Stresstest Scalabilitytest}
    set SKIPFEATUREDIRSLIST(functionaltest) {ACL_24e3 ARM cleanup CLI DF EXOS_MPLS IPv6_LPM ipx mpls-ldp \
         MPLS-TLS NAT newmpls PXM QOS-ISQ QOS-PRI utils WAN-MLP WAN-PHY WAN-PPP}
    set SKIPFEATUREDIRSLIST(performancetest) {NAT}
    set SKIPFEATUREDIRSLIST(xml-api) {Lib}
    set SKIPFEATUREDIRSLIST(cli-ew) {&#34;dvmrp&#34; &#34;flow&#34; &#34;ipx&#34; &#34;nat&#34; &#34;slb&#34; &#34;wan-common&#34; &#34;wan-e1&#34; &#34;wan-t1&#34; &#34;wan-t3&#34;}
    <span class="comment-line"># -------- MAP DB Feature Types to auto tree directories ----------</span>
    set AutoAreasByDBTypes(benchmark) Benchmarktest
    set AutoAreasByDBTypes(cli) cli-ew
    set AutoAreasByDBTypes(diagnostics) DiagnosticsTest
    set AutoAreasByDBTypes(epicenter) EPICenter-test
    set AutoAreasByDBTypes(functional) Functionaltest
    set AutoAreasByDBTypes(ixscriptmate) ixScriptMate
    set AutoAreasByDBTypes(performance) PerformanceTest
    set AutoAreasByDBTypes(scalability) Scalabilitytest
    set AutoAreasByDBTypes(snmp) SnmpFunctionaltest
    set AutoAreasByDBTypes(stress) Stresstest
    set AutoAreasByDBTypes(systems) SystemTest
    set AutoAreasByDBTypes(xml) XML_API
    set AutoAreasByDBTypes(fit) FeatureInteraction

    set DBTypesByAutoArea(Benchmarktest) benchmark
    set DBTypesByAutoArea(CLItest) cli
    set DBTypesByAutoArea(cli-ew) cli
    set DBTypesByAutoArea(uploadanddownload) cli
    set DBTypesByAutoArea(DiagnosticsTest) diagnostics
    set DBTypesByAutoArea(EPICenter) epicenter
    set DBTypesByAutoArea(EPICenter-test) epicenter 
    set DBTypesByAutoArea(Functionaltest) functional
    set DBTypesByAutoArea(ixScriptMate) ixscriptmate
    set DBTypesByAutoArea(PerformanceTest) performance
    set DBTypesByAutoArea(Scalabilitytest) scalability
    set DBTypesByAutoArea(SnmpFunctionaltest) snmp
    set DBTypesByAutoArea(Stresstest) stress
    set DBTypesByAutoArea(SystemTest) systems
    set DBTypesByAutoArea(XML_API) xml
    set DBTypesByAutoArea(FeatureInteraction) fit
    <span class="comment-line"># -----------------------------------------------------------------</span>
    set counter 1
    <span class="comment-line">#puts &#34;[pwd]&#34;</span>
    source /auto/automation/Lib/parse_args.tcl
    source /auto/automation/Lib/mainLib.tcl
    source /auto/automation/Lib/mysqlLib.tcl
    source /auto/automation/Lib/mgmt_reporting.tcl
    source /auto/automation/Lib/itestrt.tcl
    global mysqlIP
    global my_db
    global autoPath
    <span class="comment-line">##################################################################################</span>
    <span class="comment-line">#  Parse Args</span>
    <span class="comment-line">##################################################################################</span>
    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> _VerifyModEntries $args {
        svntag      &#34;NULL&#34;
        modList     &#34;NULL&#34;
        regType     &#34;functional&#34;
        io          &#34;no&#34;
        svnCheck    &#34;0&#34;
    }

    if {$svntag == &#34;NULL&#34; || $modList == &#34;NULL&#34;} {
        return;
    }
    <span class="comment-line">##################################################################################</span>
    <span class="comment-line">#  Source the config files</span>
    <span class="comment-line">##################################################################################</span>
    set INSVNTAG $svntag
    set ISIO $io
    <span class="comment-line">############################################################</span>
    <span class="comment-line"># ----------------------------------------------------------</span>
    <span class="comment-line">#  Connect to the databases</span>
    <span class="comment-line"># ----------------------------------------------------------</span>
    set dbconnectstatus [<a name="::_conn_to_db2(4)"><a href="./mgmt_reporting.tcl.html#::_conn_to_db2_186">::_conn_to_db2</a></a> -host $DBIPADDRESS2 \
                                 -db $DBNAME2 \
                                 -user $DBUSERNAME2 \
                                 -password $DBPASSWORD2 \
                                 -status  &#34;&#34; \
                                 -handler $DBHANDLE2]
    set DBHANDLE2 [lindex $dbconnectstatus 0]
    set connectStatus [lindex $dbconnectstatus 1]
    <span class="comment-line">#puts &#34;\n\n=== Connected to $DBIPADDRESS2 $DBNAME2 Handle $DBHANDLE2 Status $connectStatus ===&#34;</span>
    <span class="comment-line">############################################################</span>
    cd /${svntag}/automation/
    <span class="comment-line"># ==========================================================</span>
    <span class="comment-line"># Get All Feature Info from autoweb_db</span>
    <span class="comment-line"># ==========================================================</span>
    global istdMods irtrMods
    global stdMods rtrMods

    <a name="::_GetAllFeatureInfoByAreaFromDb(2)"><a href="./mgmt_reporting.tcl.html#::_GetAllFeatureInfoByAreaFromDb_223">::_GetAllFeatureInfoByAreaFromDb</a></a>;
    <span class="comment-line">#puts &#34;DB list: $EXISTINGFEATUREDIRSByAreaLists($regType)&#34;</span>
    set iTarMods [<a name="::verify_names(1)"><a href="./mgmt_reporting.tcl.html#::verify_names_1007">::verify_names</a></a> -category &#34;FunctionalTest&#34; -itarPath &#34;$ITARPATHDEF&#34; -modPath &#34;$MODPATHDEF&#34;]
    <span class="comment-line">#puts &#34;\niTarModules: $iTarMods\n\n&#34;</span>

    <span class="comment-line"># iTest.cfg modules</span>
    set iTestCfgList [concat $istdMods($regType,All) $irtrMods($regType,All)];
    <span class="comment-line">#puts &#34;iTest List: \n$iTestCfgList\n&#34;</span>
    <span class="comment-line"># regular runReg.cfg modules</span>
    set runCfgList [concat $stdMods($regType,All) $rtrMods($regType,All)];
    <span class="comment-line">#puts &#34;runReg List:\n$runCfgList&#34;</span>
    <span class="comment-line"># Dir Tree Features</span>
    <a name="::_GetTreeDirs(1)"><a href="./mgmt_reporting.tcl.html#::_GetTreeDirs_711">::_GetTreeDirs</a></a>
    foreach myMod $modList {
       <span class="comment-line">#puts &#34;lsearch $myMod in itestcfglsit [lsearch $iTestCfgList $myMod]&#34;</span>
       if {[lsearch $iTestCfgList $myMod] &gt;= 0} {
           if {[lsearch $TREEDIRBYAREA($regType) $myMod] == -1} {
               puts &#34;Module $myMod in iTestCfg but not exit Automation Tree&#34;
           }
           if {[lsearch $iTarMods $myMod] == -1} {
               puts &#34;Module $myMod in iTestCfg but does not exist in iTar&#34;
           }
           if {[lsearch $EXISTINGFEATUREDIRSByAreaLists($regType) $myMod] == -1} {
               puts &#34;Module $myMod in iTestCfg but does exist not database&#34;
           }           
       }
       if {[lsearch $runCfgList $myMod] &gt;= 0} {
           if {[lsearch $TREEDIRBYAREA($regType) $myMod] == -1} {
               puts &#34;Module $myMod in runReg.cfg but not exit Automation Tree: pwd [pwd]&#34;
           }
           if {[lsearch $EXISTINGFEATUREDIRSByAreaLists($regType) $myMod] == -1} {
               puts &#34;Module $myMod in runReg.cfg but does exist not database: pwd [pwd]&#34;
           }
           if {$svnCheck} {
               if [catch {exec /usr/bin/svn info [pwd]/$AutoAreasByDBTypes($regType)/$myMod}  catch_msg] {
                   puts &#34;Please Verfiy that $regType $myMod has been added&#34;
               } else {
                   <span class="comment-line">#puts &#34;I got $catch_msg&#34;</span>
               }
           }
       }


  <span class="comment-line">#     if {[lsearch $iTestCfgList $myMod] &gt;= 0 &amp;&amp; } {</span>
  <span class="comment-line">#         puts &#34;Error: !!! Module $myMod is in iTest.cfg, no match in iTar&#34;</span>
  <span class="comment-line">#     }</span>
  <span class="comment-line">#     if {[lsearch $TREEDIRBYAREA($regType) $myMod] == -1} {</span>
  <span class="comment-line">#         puts &#34;Module $myMod does not exists in Automation Tree&#34;</span>
  <span class="comment-line">#     }</span>
  <span class="comment-line">#     #puts &#34;iTestCfg Check&#34;</span>
  <span class="comment-line">#     if {[lsearch $iTestCfgList $myMod] == -1} {</span>
  <span class="comment-line">#         puts &#34;Module $myMod does not exist in iTest.cfg&#34;</span>
  <span class="comment-line">#     }</span>
  <span class="comment-line">#    #puts &#34;iTar Check&#34;</span>
  <span class="comment-line">#     if {[lsearch $iTarMods $myMod] == -1} {</span>
  <span class="comment-line">#         puts &#34;Module $myMod does not exist in iTar&#34;</span>
  <span class="comment-line">#     }</span>
  <span class="comment-line">#     #puts &#34;Database Check&#34;</span>
  <span class="comment-line">#     if {[lsearch $EXISTINGFEATUREDIRSByAreaLists($regType) $myMod] == -1} {</span>
  <span class="comment-line">#         puts &#34;Module $myMod does not database&#34;</span>
  <span class="comment-line">#     }</span>
    }
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
