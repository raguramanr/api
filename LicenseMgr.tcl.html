<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>LicenseMgr.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#LicenseMgr.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>LicenseMgr.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="LicenseMgr.tcl-annot.html">annotations</a> | <a href="LicenseMgr.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<span class="comment-line">##################################################################</span>
<span class="comment-line">#</span>
<span class="comment-line">#  This function will enable the license of the switch.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#      - &lt;currentLicense&gt; - current license level of the switch</span>
<span class="comment-line">#        It may have the following values edge, advancededge</span>
<span class="comment-line">#      - &lt;desiredLicense&gt; - desired license level of the switch</span>
<span class="comment-line">#        It may have the following values advancededge, core</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#      - none</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Value:</span>
<span class="comment-line">#      - returns &#34;ok&#34; if success &#34;error&#34; if failure</span>
<span class="comment-line">#</span>
<span class="comment-line">#  [Examples]</span>
<span class="comment-line">#  1. Enable the license from edge to advancededge</span>
<span class="comment-line">#     EnableLicense edge advancededge</span>
<span class="comment-line">#</span>
<span class="comment-line">#####################################################################</span>
<strong><a name="::::EnableLicense_23">proc <a href="LicenseMgr.tcl-annot.html#::::EnableLicense">::::EnableLicense</a></a></strong> { currentLicense desiredLicense } {
  global DUTs_info 
  global whichDutNow
  set status &#34;error&#34; 

  set parameterList &#34;&#34;
  lappend parameterList &#34;{Enabled license successfully} exist&#34;
  if {[<a name="::GetVersion(1)"><a href="./misc.tcl.html#::GetVersion_303">::GetVersion</a></a> DUT$whichDutNow 1]&lt;&#34;11.6.0.19&#34;} {
     if [info exists DUTs_info(DUT${whichDutNow},pre_${currentLicense}_${desiredLicense})] {   
        set status [<a name="::CheckKeyValue(1)"><a href="./OptionCheck.tcl.html#::CheckKeyValue_47">::CheckKeyValue</a></a> &#34;enable license [set DUTs_info(DUT${whichDutNow},pre_${currentLicense}_${desiredLicense})]&#34; $parameterList]
     } else {
        <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Error enable license&#34;
        <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34; DUTs_info(DUT${whichDutNow},pre_${currentLicense}_${desiredLicense}) Variable not found in cfg file&#34;
        <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
     }
  } else {
     if [info exists DUTs_info(DUT${whichDutNow},${currentLicense}_${desiredLicense})] {   
       set status [<a name="::CheckKeyValue(2)"><a href="./OptionCheck.tcl.html#::CheckKeyValue_47">::CheckKeyValue</a></a> &#34;enable license [set DUTs_info(DUT${whichDutNow},${currentLicense}_${desiredLicense})]&#34; $parameterList]
     } else {
        <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Error enable license&#34;
        <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34; DUTs_info(DUT${whichDutNow},${currentLicense}_${desiredLicense}) Variable not found in cfg file&#34;
        <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
     }

     set ver [<a name="::GetVersion(2)"><a href="./misc.tcl.html#::GetVersion_303">::GetVersion</a></a> DUT${whichDutNow}]
     set platform [<a name="::GetPlatform(1)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${whichDutNow}]
     if { ([<a name="::CompareRelease(1)"><a href="./misc.tcl.html#::CompareRelease_891">::CompareRelease</a></a> $ver 12.1.0.0] &gt; 0) &amp;&amp; ([regexp -nocase &#34;X250e|X450e&#34; $platform] ==  1) } {
        if [info exists DUTs_info(DUT${whichDutNow},bgp)] {   
           set checkList &#34;&#34;
           lappend checkList &#34;{ServiceProviderEdge} exist&#34;
           set status [<a name="::CheckKeyValue(3)"><a href="./OptionCheck.tcl.html#::CheckKeyValue_47">::CheckKeyValue</a></a> &#34;show license&#34; $checkList -reportResults 0]
           if {$status != &#34;ok&#34;} {
              set status [<a name="::CheckKeyValue(4)"><a href="./OptionCheck.tcl.html#::CheckKeyValue_47">::CheckKeyValue</a></a> &#34;enable license [set DUTs_info(DUT${whichDutNow},bgp)]&#34; $parameterList]
           }
           unset checkList
        } else {
           <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34; DUTs_info(DUT${whichDutNow},bgp) Variable not found in cfg file&#34;
        }
     }
  }
  unset parameterList
  return $status
} 
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
