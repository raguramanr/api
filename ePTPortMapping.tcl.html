<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ePTPortMapping.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ePTPortMapping.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ePTPortMapping.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ePTPortMapping.tcl-annot.html">annotations</a> | <a href="ePTPortMapping.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: MapIxiaPortId</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Map user-defined ixis portId to the ixia scheme of </span>
<span class="comment-line">#	&#34;chassisNo cardNo portNo&#34;</span>
<span class="comment-line"># Input args: {portId}</span>
<span class="comment-line"># Output args: {chasisIdName} {cardName} {portName} </span>
<span class="comment-line"># Return value: integer</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	MapIxiaPortId $txPortId txChasisId txCard txPort</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::MapIxiaPortId_14">proc <a href="ePTPortMapping.tcl-annot.html#::::MapIxiaPortId">::::MapIxiaPortId</a></a></strong> {  {portId 1} 
                      {chasisIdName  1}
                      {cardName  1}
                      {portName  1} } {
			  upvar $chasisIdName chasisId $cardName card $portName port

   global ixiaPortMappingArray
   global startPortNum
   global startCardNum

   if {$portId &lt;=0 } {
      <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;GetIxiaPortMapping: Invalid portId $portId&#34;
      error &#34;GetIxiaPortMapping: Invalid portId $portId&#34;
   }

   if { ![info exist startCardNum] } {
       <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;startCardNum not defined &#34; 
       return -1
   } 
   if { [llength [split $startCardNum :]] == 2 }  {
          set startPortNum [lindex [split $startCardNum :] 1]
          set startCardNum [lindex [split $startCardNum :] 0]
	  if { ($startPortNum &lt; 1) || ($startCardNum &lt; 1) } {
              <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;startCardNum not defined properly $startCardNum&#34; 
              return -1
          }        
   } elseif { [llength [split $startCardNum :]] == 1 }  {
	if { ![info exist startPortNum] } {
	     set startPortNum 1
	}
   } else {
       <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;startCardNum not defined properly $startCardNum&#34; 
       return -1
   } 

   if {[info exists ixiaPortMappingArray($portId)] == 1 } {
      set portMap $ixiaPortMappingArray($portId)
      set port [lindex $portMap 2]
      set card [lindex $portMap 1]
      set chasisId [lindex $portMap 0]
<span class="comment-line">#      card get $chasisId $card</span>
<span class="comment-line">#      set portNum [card cget -portCount]</span>
      set portNum 1024
      <span class="comment-line">#return this annoying pair receive port</span>
      if {($port == 1) &amp;&amp; ($portNum &gt; 1)} {set rxPort 2} else {set rxPort 1}
      return $rxPort
   } else {
      <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;GetIxiaPortMapping: Invalid portId $portId - no mapping found&#34;
      error &#34;GetIxiaPortMapping: Invalid portId $portId&#34;
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: GetDUTPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This function returns the DUT port number by the given ixia</span>
<span class="comment-line">#	portId and DUT no.</span>
<span class="comment-line"># Input args: {portId} {DUTId}</span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: integer or : separated integer values</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	SendACmd &#34;enable port [GetDUTPort $switchPort2DefaultRouter 2]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetDUTPort_78">proc <a href="ePTPortMapping.tcl-annot.html#::::GetDUTPort">::::GetDUTPort</a></a></strong> { {portId 1}
                  {DUTId  1} } {
   global DUTs_info

      if {[regexp -nocase &#34;mgmt&#34; $portId]} {
         return $portId
      }

      switch -regexp $DUTs_info(DUT$DUTId,platform) {
	   NG -
	   BD\* -
           Stack\* -
	   Aspen\* {
              global DUT${DUTId}_DefaultBlade
              set dutBlade [set DUT${DUTId}_DefaultBlade]
              if {$dutBlade==&#34;&#34;} {
                 return &#34;$portId&#34; 
      	      } else {
      	         return &#34;$dutBlade:$portId&#34; 
              }
      } Summit\* {
			return $portId
      } ENET\* {
			return $portId
      } default {
			return $portId
		}
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: MapDUTPortId</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This function converts the specified list of ixia portIds to</span>
<span class="comment-line">#	to the list of corresponding DUT port numbers.</span>
<span class="comment-line"># Input args: {portIdString} {DUTId}</span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: integer or : separated list of integers</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	SendACmd  &#34;config vlan1 add port [MapDUTPortId 1,3-5 1]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::MapDUTPortId_120">proc <a href="ePTPortMapping.tcl-annot.html#::::MapDUTPortId">::::MapDUTPortId</a></a></strong> { {portIdString 1}
                  {DUTId  1} } {
   
   set portString &#34;&#34;
   global DUTs_info
   global ixiaPortMappingArray
   <span class="comment-line">#first filter the comma</span>
	regsub -all {,} $portIdString { } portRangeList
	foreach portRange $portRangeList {
	   if { [regexp {[0-9]-[0-9]} $portRange] == 1} {
	      <span class="comment-line">#if in range format</span>
	      <span class="comment-line">#puts &#34;Range: $portRange&#34;</span>
	      set temp [split $portRange &#34;-&#34;]
	      set startRange [lindex $temp 0]
	      set endRange [lindex $temp 1]
	      <span class="comment-line">#puts &#34;RangeProcessed: |$temp|$startRange|$endRange|&#34;</span>
	      for {set i $startRange} {$i &lt;= $endRange} {incr i} {
	         set DUTPort [<a name="::GetDUTPortMapping(1)"><a href="./ePTPortMapping.tcl.html#::GetDUTPortMapping_187">::GetDUTPortMapping</a></a> $DUTId $i]
                  if {[info exists DUTs_info(debugFlag)]} {
                    if {$DUTs_info(debugFlag)==1} {
                       if {[info exists ixiaPortMappingArray($i)] == 1} {
                          <a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $i chas card port
                          <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: DUT$DUTId $DUTPort goes to portId $i -&gt; \[$chas, $card, $port\]&#34;
                       } else {
                          <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: DUT$DUTId $DUTPort goes to portId $i&#34;
                       }  
                    }
                 }
	         append portString &#34;, $DUTPort&#34;
	      }
	   } elseif {[regexp {[0-9]} $portRange] == 1 } {
	      <span class="comment-line">#or just a single number</span>
	      <span class="comment-line">#puts &#34;Single: $portRange DUTId:$DUTId&#34;</span>
	      set DUTPort [<a name="::GetDUTPortMapping(2)"><a href="./ePTPortMapping.tcl.html#::GetDUTPortMapping_187">::GetDUTPortMapping</a></a> $DUTId $portRange]
              if {[info exists DUTs_info(debugFlag)]} {
                 if {$DUTs_info(debugFlag)==1} {
                    if {[info exists ixiaPortMappingArray($portRange)] == 1} {
                        <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portRange chas card port
                        <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: DUT$DUTId $DUTPort goes to portId $portRange -&gt; \[$chas, $card, $port\]&#34;
                    } else {                 
                        <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;INFO: DUT$DUTId $DUTPort goes to portId $portRange&#34;
                    }
                 }
              }
	      append portString &#34;, $DUTPort&#34;
	   } else {
	      <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;MapDUTPortId: Unknown portId format $portRange&#34;
	      error &#34;MapDUTPortId: Unknown portId format $portRange&#34;
	   }
	}
	<span class="comment-line">#remove the first comma</span>
	regsub {, } $portString {} newString
   return $newString
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: GetDUTPortMapping</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Similar with GetDUTPort, this function returns the DUT port </span>
<span class="comment-line">#	number by the given ixia portId and DUT no.</span>
<span class="comment-line"># Input args: {DUT} {portId} </span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: list of port mapping array</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	 set DUTPort [GetDUTPortMapping $dutNo $portId]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetDUTPortMapping_187">proc <a href="ePTPortMapping.tcl-annot.html#::::GetDUTPortMapping">::::GetDUTPortMapping</a></a></strong> {{DUT 1} {portId 1}} {
   global DUTPortMappingArray


   if {$portId &lt;=0 } {
      <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;GetDUTPortMapping: Invalid portId $portId&#34;
      error &#34;GetDUTPortMapping: Invalid portId $portId&#34;
   }
<span class="comment-line">#   return $DUTPortMappingArray($DUT,$portId)</span>
   
   if {[info exists DUTPortMappingArray($DUT,$portId)] == 1 } {
      return $DUTPortMappingArray($DUT,$portId)
   } else {
      <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;wrong port mapping called&#34;
      return [<a name="::GetDUTPort(1)"><a href="./ePTPortMapping.tcl.html#::GetDUTPort_78">::GetDUTPort</a></a> $portId $DUT]
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: GenerateDUTPortMapping</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This function will generate an array to map portId to DUT port;</span>
<span class="comment-line">#	only physical connection between Ixia and DUT will be mapped here.</span>
<span class="comment-line"># Input args: none </span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	 GenerateDUTPortMapping</span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GenerateDUTPortMapping_217">proc <a href="ePTPortMapping.tcl-annot.html#::::GenerateDUTPortMapping">::::GenerateDUTPortMapping</a></a></strong> { } {
   global DUTPortMappingArray
   global portMappingList
   global fast
   
   foreach portMap $portMappingList {
      set portId [lindex $portMap 0]
      set portDUT [lindex $portMap 1]
      set DUT [lindex $portMap 2]
      if {$DUT == &#34;&#34;} {set DUT 1}
      if {[regexp -nocase {[5-8]} $portId]&amp;&amp;$DUT==2} {
          <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\
                STANDARD Regression Test Beds Required PortId 9-12 as DUT2 Connections\n\
                You Are Configured for a Non-Standard Modified Test Bed\n\
                !!!!!!!!!!!!!!!!!!!!!!!!!!!&#34;
      }
      lappend tmpPMList &#34;$portId $portDUT $DUT&#34;
   }
   set portMappingList $tmpPMList
   foreach portMap $portMappingList {
      set portId [lindex $portMap 0]
      set portDUT [lindex $portMap 1]
      set DUT [lindex $portMap 2]
      if {$DUT == &#34;&#34;} {set DUT 1}
      <span class="comment-line">#puts &#34;GenerateDUTPortMapping: $portId $portDUT $DUT&#34;</span>
      if {[regexp -nocase {[5-8]} $portId]&amp;&amp;$DUT==2} {
          <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\
                STANDARD Regression Test Beds Required PortId 9-12 as DUT2 Connections\n\
                You Are Configured for a Non-Standard Modified Test Bed\n\
                !!!!!!!!!!!!!!!!!!!!!!!!!!!&#34;
      }
      set DUTPortMappingArray($DUT,$portId) $portDUT
      <span class="comment-line">#RTP-SQA added for fast test init file</span>
      if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
          puts $fast &#34;set DUTPortMappingArray($DUT,$portId) $portDUT&#34;
      }
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: GenerateIxiaPortMapping</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This function will generate an array to map every portId to </span>
<span class="comment-line">#	ixia port scheme &#34;chassis card port&#34;.</span>
<span class="comment-line"># Input args: none </span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	 GenerateIxiaPortMapping</span>
<span class="comment-line"># Category: SetupSwitch</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GenerateIxiaPortMapping_268">proc <a href="ePTPortMapping.tcl-annot.html#::::GenerateIxiaPortMapping">::::GenerateIxiaPortMapping</a></a></strong> { } {
   global ixiaPortMappingArray
   global ixiaMappingList
   global fast
   
   foreach portMap $ixiaMappingList {
      set portId [lindex $portMap 0]
      set card [lindex $portMap 1]
      set port [lindex $portMap 2]
      set ixiaPortMappingArray($portId) &#34;1 $card $port&#34; 
      <span class="comment-line">#RTP-SQA added for fast test init file</span>
      if {[info exist fast] &amp;&amp; ($fast != &#34;NULL&#34;)} {
          puts $fast &#34;set ixiaPortMappingArray($portId) \&#34;1 $card $port\&#34;&#34;
      }
      
   }
}

<strong><a name="::::GetExpDir_286">proc <a href="ePTPortMapping.tcl-annot.html#::::GetExpDir">::::GetExpDir</a></a></strong> {} {

   return &#34;Exp&#34;
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: CheckPortId5Thru8</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Check the existence of logical portId5 thru 8 in case using optimized 2-node topology</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line"># Output args:</span>
<span class="comment-line"># Return value: integer (0 or 1)</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	CheckPortId5Thru8</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################    </span>
<strong><a name="::::CheckPortId5Thru8_302">proc <a href="ePTPortMapping.tcl-annot.html#::::CheckPortId5Thru8">::::CheckPortId5Thru8</a></a></strong> { } {
   global portMappingList
   set returnFlag 0
   if {[info exists portMappingList]==0} {
      return $returnFlag
   }

   foreach portMap $portMappingList {
      set portId [lindex $portMap 0]
      if {[lsearch &#34;5 6 7 8&#34; $portId]!=-1} {
         set returnFlag 1
         break
      }
   }
   return $returnFlag
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: MapIxiaCardnPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Map ixia scheme of &#34;chassisNo cardNo portNo&#34; to </span>
<span class="comment-line">#       user-defined ixis portId</span>
<span class="comment-line"># Input args: {chasisIdName} {cardName} {portName} </span>
<span class="comment-line"># Output args: {portId}</span>
<span class="comment-line"># Return value: integer</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	MapIxiaPortId $txPortId txChasisId txCard txPort</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::MapIxiaCardnPort_331">proc <a href="ePTPortMapping.tcl-annot.html#::::MapIxiaCardnPort">::::MapIxiaCardnPort</a></a></strong> { {chasisIdName  1}
                      {cardName  1}
                      {portName  1} } {

   global ixiaPortMappingArray
   global startPortNum
		  
   if {! [info exist startPortNum]} {
       set startPortNum 1
   }
   
   set portInfo &#34;$chasisIdName $cardName $portName&#34;

   foreach {key value} [array get ixiaPortMappingArray] {
      if {$value == $portInfo} {
         set portId $key
         break
      }
   }

   if {[info exists portId] != 1 } {
      <span class="comment-line">#result_error &#34;GetIxiaPortMapping: Invalid chasis $chasisIdName card \</span>
      <span class="comment-line">#              $cardName and port $portName - no mapping found&#34;</span>
      return 0
   }
   return $portId
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetIxiaDUTPortList</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Return the list of all ixia port numbers on DUT </span>
<span class="comment-line"># Input args: dut </span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: list of integers or list of : separated integer set</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#         set portList [GetIxiaDUTPortList 1]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetIxiaDUTPortList_371">proc <a href="ePTPortMapping.tcl-annot.html#::::GetIxiaDUTPortList">::::GetIxiaDUTPortList</a></a></strong> {DUTId} {
    global portMappingList
    set portList &#34;&#34;
    
    if {![info exists portMappingList]} {
        return $portList
    }
    foreach portPair $portMappingList {
           if {$DUTId == [lindex $portPair 2]} {
               if {$portList != &#34;&#34;} {
                   append portList &#34;,&#34;
               }
               append portList [lindex $portPair 1]
           }
     }
     return $portList
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetAIxiaDUTPort</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Return the index-th port number on DUTId that links to ixia.</span>
<span class="comment-line"># Input args: DUTId {index}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: integer or a : separated integer set</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#         SendACmd  &#34;conf ebgp add port [GetAIxiaDUTPort 1 3]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetAIxiaDUTPort_400">proc <a href="ePTPortMapping.tcl-annot.html#::::GetAIxiaDUTPort">::::GetAIxiaDUTPort</a></a></strong> {DUTId {index 1} } {

    set portList [<a name="::GetIxiaDUTPortList(1)"><a href="./ePTPortMapping.tcl.html#::GetIxiaDUTPortList_371">::GetIxiaDUTPortList</a></a> $DUTId]
    <span class="comment-line">#use the first switch id to get the default blade</span>
    if {$index &gt; [llength [split $portList &#34;,&#34;] ]} { return &#34;PORT_NOT_FOUND&#34; }
    if {$index &lt; 1} { return &#34;PORT_NOT_FOUND&#34; }
    return [lindex [split $portList &#34;,&#34;] [expr $index -1]]
}
<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetAIxiaPortId</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Return the real Ixia Id for the ixia port which connects to DUTId's index'th port to ixia </span>
<span class="comment-line"># Input args: DUTId {index}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Return value: integer or a : separated integer set</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#         SendACmd  &#34;conf ebgp add port [GetAIxiaDUTPort 1 3]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetAIxiaPortId_419">proc <a href="ePTPortMapping.tcl-annot.html#::::GetAIxiaPortId">::::GetAIxiaPortId</a></a></strong> {DUTId {index 1} } {

    global portMappingList
    global numDUT
    set ixiaPortIdList &#34;&#34;

    if { $DUTId == 0 } { 
         set numPortIdNeeded [<a name="::::GetHighestPortId(1)"><a href="./SystemSetup.tcl.html#::::GetHighestPortId_580">::::GetHighestPortId</a></a>]
         if {($numPortIdNeeded &gt;= 11) &amp;&amp; ( $numDUT &gt; 2 )} {
           return 9 ;
         }
    }
    
    if {![info exists portMappingList]} {
        return $ixiaPortIdList
    }
    foreach portPair $portMappingList {
           if {$DUTId == [lindex $portPair 2]} {
               if {$ixiaPortIdList != &#34;&#34;} {
                   append ixiaPortIdList &#34;,&#34;
               }
               append ixiaPortIdList [lindex $portPair 0]
           }
     }
    if {$index &gt; [llength [split $ixiaPortIdList &#34;,&#34;] ]} { return &#34;PORT_NOT_FOUND&#34; }
    if {$index &lt; 1} { return &#34;PORT_NOT_FOUND&#34; }
    return [lindex [split $ixiaPortIdList &#34;,&#34;] [expr $index -1]]
 
}
<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: GetDUT_FP_Port</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	This function returns the DUT port number by the given FP</span>
<span class="comment-line">#	    DUT no.</span>
<span class="comment-line"># Input args: {port} {DUTId}</span>
<span class="comment-line"># Output args: none </span>
<span class="comment-line"># Return value: integer or : separated integer values</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	SendACmd &#34;enable port [GetDUT_FP_Port $switchPort2DefaultRouter 2]&#34;</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetDUT_FP_Port_460">proc <a href="ePTPortMapping.tcl-annot.html#::::GetDUT_FP_Port">::::GetDUT_FP_Port</a></a></strong> { {<a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> 1}
                  {DUTId  1} } {
    global DUTs_info
    
    switch -regexp $DUTs_info(DUT$DUTId,platform) {
        NG -
        BD\* -
        Stack\* -
        Aspen\* {
            global DUT${DUTId}_DefaultBlade_FP
            set dutBlade [set DUT${DUTId}_DefaultBlade_FP]
            if {$dutBlade==&#34;&#34;} {
                return &#34;$port&#34; 
            } else {
                return &#34;$dutBlade:$portId&#34; 
            }
        } Summit\* {
            return $port
        } ENET\* {
            return $port
        } default {
            return $port
        }
    }
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
