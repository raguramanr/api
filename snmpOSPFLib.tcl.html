<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpOSPFLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpOSPFLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpOSPFLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpOSPFLib.tcl-annot.html">annotations</a> | <a href="snmpOSPFLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>

<span class="comment-line">###############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfInterfaceParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the ospf parameters on particular interface.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session           - Session identifier which identifies the connection</span>
<span class="comment-line">#                        with the DUT</span>
<span class="comment-line">#    ipaddr            - Interface IP address </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#</span>
<span class="comment-line">#    areaid            - AreaId </span>
<span class="comment-line">#    iftype            - Interface Type </span>
<span class="comment-line">#                        broadcast</span>
<span class="comment-line">#                        nbma</span>
<span class="comment-line">#                        pointToPoint</span>
<span class="comment-line">#                        pointToMultipoint</span>
<span class="comment-line">#    ospfstate         - OSPF State </span>
<span class="comment-line">#                        enabled/disabled</span>
<span class="comment-line">#    rtrpriority       - Interface Router Priority </span>
<span class="comment-line">#    transitdelay      - Interface TransitDelay</span>
<span class="comment-line">#    hellointerval     - Interface HelloInterval </span>
<span class="comment-line">#    rtrdeadinterval   - Interface Router DeadInterval</span>
<span class="comment-line">#    authtype          - Interface Authentication Type </span>
<span class="comment-line">#    authkey           - Interface Authentication Key value </span>
<span class="comment-line">#    state             - Interface State</span>
<span class="comment-line">#                        down</span>
<span class="comment-line">#                        loopback</span>
<span class="comment-line">#                        waiting</span>
<span class="comment-line">#                        pointToPoint</span>
<span class="comment-line">#                        designatedRouter</span>
<span class="comment-line">#                        backupDesignatedRouter</span>
<span class="comment-line">#                        otherDesignatedRouter</span>
<span class="comment-line">#    retransinterval   - No. of seconds between lsa retransmissions</span>
<span class="comment-line">#    pollinterval      - Time interval between hello pkts sent to an inactive</span>
<span class="comment-line">#                        nbma neighbor</span>
<span class="comment-line">#    ifevents          - No. of times this OSPF interface has changed its state</span>
<span class="comment-line">#    multicastforward  - Multicast should be forwarded on this interface</span>
<span class="comment-line">#                        blocked</span>
<span class="comment-line">#                        multicast</span>
<span class="comment-line">#                        unicast</span>
<span class="comment-line">#    ifdemand          - Demand OSPF procedures should be performed on this </span>
<span class="comment-line">#                        interface</span>
<span class="comment-line">#                        true</span>
<span class="comment-line">#                        false</span>
<span class="comment-line">#    dripaddr          - Interface DesignatedRouter IP Address</span>
<span class="comment-line">#    bdripaddr         - Interface Backup DesignatedRouter IP Address</span>
<span class="comment-line">#    status            - Whether DR/BDR ipaddress exist or not exist</span>
<span class="comment-line">#    fd                - File descriptor of open log file   </span>
<span class="comment-line">#    comment           - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfInterfaceParameters -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                                     -iftype &#34;broadcast&#34; -rtrpriority 10</span>
<span class="comment-line">#                                     -state &#34;down&#34; -dripaddr 10.2.1.1</span>
<span class="comment-line">#                                     -status &#34;exist&#34;</span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfInterfaceParameters_69">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfInterfaceParameters">::::snmpCheckOspfInterfaceParameters</a></a></strong> { args } {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfInterfaceParameters $args {
       session         &#34;&#34;
       ipaddr          &#34;&#34;
       areaid          &#34;&#34;
       iftype          &#34;&#34;
       ospfstate       &#34;&#34;
       rtrpriority     &#34;&#34;
       transitdelay    &#34;&#34;
       hellointerval   &#34;&#34;
       rtrdeadinterval &#34;&#34;
       retransinterval &#34;&#34;
       pollinterval    &#34;&#34;
       ifstate         &#34;&#34;
       ifevents        &#34;&#34;
       dripaddr        &#34;&#34;
       bdripaddr       &#34;&#34;
       status          &#34;&#34;
       authtype        &#34;&#34;
       authkey         &#34;&#34;
       multicastforward &#34;&#34;
       ifdemand        &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfInterfaceParameters&#34;
    }
 
    set func &#34;snmpCheckOspfInterfaceParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $ipaddr == &#34;&#34; } {
       error &#34;$func SNMP session id, interface address must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(1)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, interface address is $ipaddr&#34; $fd
    <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Interface parameters on $ipaddr --&#34;

    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $areaid != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfAreaId.$ipaddr.0]
       <a name="::snmpDebug(2)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set areaId [<a name="::snmpUtilGetVal(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(3)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AreaId for interface $ipaddr is $areaId&#34; $fd

       if {$areaid == $areaId} {
          <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Area Id $areaid exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Area Id expected $areaid \
                        but found $areaId. FAIL&#34;
        }
    }

    if { $iftype != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfType.$ipaddr.0]
       <a name="::snmpDebug(4)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set typeVal [<a name="::snmpUtilGetVal(2)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(5)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func InterfaceType for interface $ipaddr is $typeVal&#34; $fd

       if { [string compare [string tolower $typeVal] \
                          [string tolower $iftype]] == 0 } {
          <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: OSPF interface type is $iftype \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: OSPF interface type expected is \
                        $iftype but got $typeVal. FAIL&#34;
       }
    }

    if { $ospfstate != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfAdminStat.$ipaddr.0]
       <a name="::snmpDebug(6)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stateVal [<a name="::snmpUtilGetVal(3)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(7)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func OSPF state for interface $ipaddr is $stateVal&#34; $fd

       if { [string compare [string tolower $stateVal] \
                          [string tolower $ospfstate]] == 0 } {
          <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: OSPF state is $ospfstate \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: OSPF state expected is \
                        $ospfstate but got $stateVal. FAIL&#34;
       }
    }

    if { $transitdelay != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfTransitDelay.$ipaddr.0]
       <a name="::snmpDebug(8)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set delay [<a name="::snmpUtilGetVal(4)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(9)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Transit Delay for interface $ipaddr is $delay&#34; $fd

       if {$delay == $transitdelay} {
          <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Transit delay $transitdelay \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Transit delay expected \
                        $transitdelay but got $delay. FAIL&#34;
        }
    }

    if { $hellointerval != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfHelloInterval.$ipaddr.0]
       <a name="::snmpDebug(10)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set hello [<a name="::snmpUtilGetVal(5)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(11)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func HelloInterval for interface $ipaddr is $hello&#34; $fd

       if {$hello == $hellointerval} {
          <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: HelloInterval $hellointerval exists.\
                     PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: HelloInterval expected \
                        $hellointerval but got $hello. FAIL&#34;
        }
    }

    if { $rtrdeadinterval != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfIfRtrDeadInterval.$ipaddr.0]
       <a name="::snmpDebug(12)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set deadinterval [<a name="::snmpUtilGetVal(6)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(13)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Router DeadInterval for interface $ipaddr \
                      is $deadinterval&#34; $fd

       if {$deadinterval == $rtrdeadinterval} {
          <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Rtrdeadinterval $rtrdeadinterval \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Rtrdeadinterval expected \
                        $rtrdeadinterval but got $deadinterval. FAIL&#34;
        }
    }

    if { $retransinterval != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfIfRetransInterval.$ipaddr.0]
       <a name="::snmpDebug(14)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set retransInterval [<a name="::snmpUtilGetVal(7)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(15)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func ReTransmit Interval for interface $ipaddr \
                      is $retransInterval&#34; $fd

       if {$retransInterval == $retransinterval} {
          <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Retransmit Interval \
                     $retransinterval exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Retransmit Interval expected \
                        $retransinterval but got $retransInterval.FAIL&#34;
        }
    }

    if { $authtype != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfAuthType.$ipaddr.0]
       <a name="::snmpDebug(16)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set AuthType [<a name="::snmpUtilGetVal(8)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(17)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AuthType for interface $ipaddr is $AuthType&#34; $fd

       if {[string compare [string tolower $authtype] &#34;none&#34;] == 0 } {
          set type 0
       } elseif {[string compare [string tolower $authtype] &#34;simple&#34;] == 0 } {
          set type 1
       } elseif {[string compare [string tolower $authtype] &#34;md5&#34;] == 0 } {
          set type 2
       } else {
          <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;AuthType should be either none/simple/md5&#34;
       }

       if {$type == $AuthType} {
          <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Authentication Type $authtype \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Authentication Type expected \
                        $authtype but got $AuthType. FAIL&#34;
        }
    }

    if { $authkey != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfAuthKey.$ipaddr.0]
       <a name="::snmpDebug(18)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set AuthKeyValue [<a name="::snmpUtilGetVal(9)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       <a name="::snmpDebug(19)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AuthKey for interface $ipaddr is $AuthKeyValue&#34; $fd

       if {$AuthKeyValue == $authkey} {
          <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Authentication key value $authkey \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Authentication key value expected \
                        $authkey but got $AuthKeyValue. FAIL&#34;
       }
    }

    if { $rtrpriority != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfRtrPriority.$ipaddr.0]
       <a name="::snmpDebug(20)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set routerPriority [<a name="::snmpUtilGetVal(10)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(21)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Router Priority for interface $ipaddr \
                      is $routerPriority&#34; $fd

       if {$routerPriority == $rtrpriority} {
          <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Router Priority $rtrpriority \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Router Priority expected \
                        $rtrpriority but got $routerPriority. FAIL&#34;
        }
    }

    if { $ifstate != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfState.$ipaddr.0]
       <a name="::snmpDebug(22)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stateVal [<a name="::snmpUtilGetVal(11)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(23)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Interface State for interface $ipaddr \
                      is $stateVal&#34; $fd

       if { [string compare [string tolower $stateVal] \
                          [string tolower $ifstate]] == 0 } {
          <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Interface state is $ifstate \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Interface state expected is \
                        $ifstate but got $stateVal. FAIL&#34;
       }
    }

    if { $dripaddr != &#34;&#34; } {
       if { $status != &#34;&#34; } {
          set status [string tolower $status]
          if { !([string compare &#34;exist&#34; $status] == 0  ||
               [string compare &#34;notexist&#34; $status] == 0) } {
                error &#34;$func $result is invalid argument should be \
                       either exist or notexist&#34;
                return $retVal
          }
       }
       set result [snmpGet -session $session \
                           -oid ospfIfDesignatedRouter.$ipaddr.0]
       <a name="::snmpDebug(24)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set drIpAddress [<a name="::snmpUtilGetVal(12)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(25)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func DR Ipaddress for interface $ipaddr \
                      is $drIpAddress&#34; $fd

       if { $drIpAddress != $dripaddr } {
           if { $status == &#34;exist&#34; } {
              <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: DR ip address $dripaddr \
                            does not exist. FAIL&#34;
           } else {
              <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: DR ip address $dripaddr \
                         does not exist result $status. PASS&#34;
              set retVal 1
           }
       } else {
           if { $status == &#34;notexist&#34; } {
              <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: DR ip address $dripaddr exist \
                            result $status. FAIL&#34;
           } else {
              <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: DR ip address $dripaddr exist \
                            result $status. PASS&#34;
              set retVal 1
           }
       }
    }

    if { $bdripaddr != &#34;&#34; } {
       if { $status != &#34;&#34; } {
          set status [string tolower $status]
          if { !([string compare &#34;exist&#34; $status] == 0  ||
               [string compare &#34;notexist&#34; $status] == 0) } {
                error &#34;$func $result is invalid argument should be \
                       either exist or notexist&#34;
                return $retVal
           }
       }
       set result [snmpGet -session $session \
                           -oid ospfIfBackupDesignatedRouter.$ipaddr.0]
       <a name="::snmpDebug(26)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set bdrIpAddress [<a name="::snmpUtilGetVal(13)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(27)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func BDR Ipaddress for interface $ipaddr \
                      is $bdrIpAddress&#34; $fd

       if { $bdrIpAddress != $bdripaddr } {
           if { $status == &#34;exist&#34; } {
              <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: BDR ip address $dripaddr \
                            does not exist. FAIL&#34;
           } else {
              <a name="::result_ok(14)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: BDR ip address $dripaddr \
                         does not exist result $status. PASS&#34;
              set retVal 1
           }
       } else {
           if { $status == &#34;notexist&#34; } {
              <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: BDR ip address $dripaddr \
                            exist result $status. FAIL&#34;
           } else {
              <a name="::result_ok(15)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: BDR ip address $dripaddr \
                            exist result $status. PASS&#34;
              set retVal 1
           }
       }
    }

    if { $pollinterval != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfPollInterval.$ipaddr.0]
       <a name="::snmpDebug(28)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set pollInt [<a name="::snmpUtilGetVal(14)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(29)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func PollInterval for interface $ipaddr is $pollInt&#34; $fd

       if {$pollInt == $pollinterval} {
          <a name="::result_ok(16)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: PollInterval $pollinterval \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: PollInterval expected \
                        $pollinterval but got $pollInt. FAIL&#34;
        }
    }

    if { $ifevents != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfEvents.$ipaddr.0]
       <a name="::snmpDebug(30)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set eventInt [<a name="::snmpUtilGetVal(15)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(31)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func IfEvents for interface $ipaddr is $eventInt&#34; $fd

       if {$eventInt == $ifevents} {
          <a name="::result_ok(17)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Events $ifevents \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Events expected \
                        $ifevents but got $eventInt. FAIL&#34;
        }
    }

    if { $multicastforward != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfIfMulticastForwarding.$ipaddr.0]
       <a name="::snmpDebug(32)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set typeVal [<a name="::snmpUtilGetVal(16)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(33)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Multicast capability for interface $ipaddr \
                      is $typeVal&#34; $fd

       if { [string compare [string tolower $typeVal] \
                          [string tolower $multicastforward]] == 0 } {
          <a name="::result_ok(18)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Multicasts are $multicastforward \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(19)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Multicasts expected is \
                        $multicastforward but got $typeVal. FAIL&#34;
       }
    }

    if { $ifdemand != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfDemand.$ipaddr.0]
       <a name="::snmpDebug(34)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set typeVal [<a name="::snmpUtilGetVal(17)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(35)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Interface Demand extensions for interface $ipaddr \
                      is $typeVal&#34; $fd

       if { [string compare [string tolower $typeVal] \
                          [string tolower $ifdemand]] == 0 } {
          <a name="::result_ok(19)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Parameter: Demand OSPF is $ifdemand \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(20)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Parameter: Demand OSPF expected is \
                        $ifdemand but got $typeVal. FAIL&#34;
       }
    }

    <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(36)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfInterfaceMetricValues</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure checks the ospf cost parameters on particular interface.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    ipaddr      - Interface IP address </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    cost        - Interface Cost </span>
<span class="comment-line">#    tos         - Type of service metric being referenced  </span>
<span class="comment-line">#    fd          - File descriptor of open log file   </span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfInterfaceMetricValues -session $sessionid </span>
<span class="comment-line">#                                       -ipaddr 100.1.1.1 -cost 10</span>
<span class="comment-line">##########################################################################</span>
<strong><a name="::::snmpCheckOspfInterfaceMetricValues_497">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfInterfaceMetricValues">::::snmpCheckOspfInterfaceMetricValues</a></a></strong> { args } {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfInterfaceMetricValues $args {
       session  &#34;&#34;
       ipaddr   &#34;&#34;
       cost     &#34;&#34;
       tos      &#34;&#34;
       fd       &#34;NULL&#34;
       comment  &#34;snmpCheckOspfInterfaceMetricValues&#34;
    }
 
    set func &#34;snmpCheckOspfInterfaceMetricValues:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $ipaddr == &#34;&#34; } {
       error &#34;$func SNMP session id, interface address must be specified&#34;
       return $retVal
    }   

    <a name="::snmpDebug(37)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, interface address is $ipaddr&#34; $fd
    <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Interface Metric Parameter: on $ipaddr --&#34;

    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $cost != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfMetricValue.$ipaddr.0.0]
       <a name="::snmpDebug(38)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
   
       set metric [<a name="::snmpUtilGetVal(18)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(39)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Cost for interface $ipaddr is $metric&#34; $fd

       if {$cost == $metric} {
          <a name="::result_ok(20)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Metric Parameter: Cost $cost exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(21)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Metric Parameter: Cost expected $cost but \
                        got $metric. FAIL&#34;
        }
    }

    if { $tos != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfIfMetricTOS.$ipaddr.0.0]
       <a name="::snmpDebug(40)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set tosVal [<a name="::snmpUtilGetVal(19)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(41)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func TOS for interface $ipaddr is $tosVal&#34; $fd

       if {$tos == $tosVal} {
          <a name="::result_ok(21)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Interface Metric Parameter: TOS $tos exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(22)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Interface Metric Parameter: TOS expected $tos but \
                        got $tosVal. FAIL&#34;
        }
    }

     <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
     <a name="::snmpDebug(42)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
     return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfNeighborParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description: This procedure checks the ospf parameters on </span>
<span class="comment-line">#               particular interface.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session             - Session identifier which identifies the connection</span>
<span class="comment-line">#                          with the DUT</span>
<span class="comment-line">#    ipaddr              - Neighbor ip address </span>
<span class="comment-line">#    status              - If the value is &#34;exist&#34;, the neighbor parameter </span>
<span class="comment-line">#                          must be exist. If &#34;notexist&#34;, the neighbor </span>
<span class="comment-line">#                          parameters should notexist.</span>
<span class="comment-line">#                          Default is &#34;exist&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    nbrstate            - Neighbor interface state </span>
<span class="comment-line">#                          down</span>
<span class="comment-line">#                          attempt</span>
<span class="comment-line">#                          init</span>
<span class="comment-line">#                          twoWay</span>
<span class="comment-line">#                          exchangeStart</span>
<span class="comment-line">#                          exchange</span>
<span class="comment-line">#                          loading</span>
<span class="comment-line">#                          full</span>
<span class="comment-line">#    routerid            - Neighbor router id </span>
<span class="comment-line">#    nbrpriority         - Priority of the neighbor in DR election algorithm  </span>
<span class="comment-line">#    nbroptions          - Neighbor options field  </span>
<span class="comment-line">#    nbrevents           - No. of times Neighbor relationship has changed state </span>
<span class="comment-line">#    nbrqueuelen         - Length of the retransmission queue </span>
<span class="comment-line">#    nbmanbrpermanence   - Status of the neighbor entry</span>
<span class="comment-line">#                          dynamic</span>
<span class="comment-line">#                          permanent </span>
<span class="comment-line">#    nbrhellosuppressed  - Hellos are being suppressed to the neighbor </span>
<span class="comment-line">#    fd                  - File descriptor of open log file   </span>
<span class="comment-line">#    comment             - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfNeighborParameters -session $sessionid -ipaddr 11.11.11.1 </span>
<span class="comment-line">#                                    -nbrstate &#34;loading&#34; -routerid 22.22.22.1</span>
<span class="comment-line">#                                    -nbmanbrpermanence &#34;dynamic&#34; </span>
<span class="comment-line">#                                    -nbrhellosuppressed &#34;false&#34;</span>
<span class="comment-line">##############################################################################</span>
<strong><a name="::::snmpCheckOspfNeighborParameters_607">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfNeighborParameters">::::snmpCheckOspfNeighborParameters</a></a></strong> { args } {
    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfNeighborParameters $args {
       session            &#34;&#34;
       ipaddr             &#34;&#34;
       nbrstate           &#34;&#34;
       status             &#34;&#34;
       routerid           &#34;&#34;
       nbrpriority        &#34;&#34;
       nbrevents          &#34;&#34;
       nbroptions         &#34;&#34;
       nbrqueuelen        &#34;&#34;
       nbmanbrpermanence  &#34;&#34;
       nbrhellosuppressed &#34;&#34;
       fd                 &#34;NULL&#34;
       comment            &#34;snmpCheckOspfNeighborParameters&#34;
    }
 
    set func &#34;snmpCheckOspfNeighborParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $ipaddr == &#34;&#34; } {
       error &#34;$func SNMP session id, interface address must be specified&#34;
       return $retVal 
    }   

    if { $status != &#34;&#34; } {
       set status [string tolower $status]
       if { !([string compare &#34;exist&#34; $status] == 0  ||
            [string compare &#34;notexist&#34; $status] == 0) } {
          error &#34;$func invalid argument should be either exist or notexist&#34;
          return $retVal
       }
    }

    <a name="::snmpDebug(43)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, neighbor interface address \
                     is $ipaddr&#34; $fd
    <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Neighbor Parameters on $ipaddr --&#34;

    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $nbrstate != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfNbrState.$ipaddr.0]
       <a name="::snmpDebug(44)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       if {[regexp -nocase &#34;.*No Such Instance.*&#34; $result]} {
          if { $status == &#34;exist&#34; } {
             <a name="::result_error(23)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface state $ipaddr doesn't \
                           exist in the ospfNbrTable result. FAIL&#34;
          } else {
             <a name="::result_ok(22)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr interface state $ipaddr exist in the \
                        ospfNbrTable result $status. PASS&#34;
             set retval 1
          }
       } else {
          if { $status == &#34;notexist&#34; } {
             <a name="::result_error(24)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface state $ipaddr doesn't \
                           exist in the ospfNbrTable. FAIL&#34;
          } 

          set stateVal [<a name="::snmpUtilGetVal(20)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
          <a name="::snmpDebug(45)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Interface state for neighbor $ipaddr \
                         is $stateVal&#34; $fd

          if { [string compare [string tolower $stateVal] \
                             [string tolower $nbrstate]] == 0 } {
             <a name="::result_ok(23)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Interface state is $nbrstate \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(25)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Interface state expected \
                           is $nbrstate but got $stateVal. FAIL&#34;
          }
       }
    }

    if { $routerid != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfNbrRtrId.$ipaddr.0]
       <a name="::snmpDebug(46)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
   
       set routerId [<a name="::snmpUtilGetVal(21)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(47)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func RouterId for neighbor $ipaddr is $routerId&#34; $fd

       if { $routerId == $routerid } {
          <a name="::result_ok(24)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: RouterId $routerid exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(26)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: RouterId expected is \
                        $routerid, but got $routerId. FAIL&#34;
       }
    }

    if { $nbrpriority != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfNbrPriority.$ipaddr.0]
       <a name="::snmpDebug(48)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbrPri [<a name="::snmpUtilGetVal(22)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(49)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Priority for neighbor $ipaddr is $nbrPri&#34; $fd

       if { $nbrPri == $nbrpriority } {
          <a name="::result_ok(25)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Priority $nbrpriority \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(27)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Priority expected is \
                        $nbrpriority, but got $nbrPri. FAIL&#34;
       }
    }

    if { $nbroptions != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfNbrOptions.$ipaddr.0]
       <a name="::snmpDebug(50)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbrOpt [<a name="::snmpUtilGetVal(23)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(51)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Options for neighbor $ipaddr is $nbrOpt&#34; $fd

       if { $nbrOpt == $nbroptions } {
          <a name="::result_ok(26)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Options $nbroptions \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(28)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Options expected is \
                        $nbroptions, but got $nbrOpt. FAIL&#34;
       }
    }

    if { $nbrevents != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfNbrEvents.$ipaddr.0]
       <a name="::snmpDebug(52)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbrEvent [<a name="::snmpUtilGetVal(24)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(53)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Events for neighbor $ipaddr is $nbrEvent&#34; $fd

       if { $nbrEvent == $nbrevents } {
          <a name="::result_ok(27)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Events $nbrevents \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(29)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Events expected is \
                        $nbrevents, but got $nbrEvent. FAIL&#34;
       }
    }

    if { $nbrqueuelen != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfNbrLsRetransQLen.$ipaddr.0]
       <a name="::snmpDebug(54)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbrLen [<a name="::snmpUtilGetVal(25)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(55)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func LsReTransQLen for neighbor $ipaddr is $nbrLen&#34; $fd

       if { $nbrLen == $nbrqueuelen } {
          <a name="::result_ok(28)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Retransmission queue\
                     $nbrqueuelen exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(30)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Retransmission queue \
                        expected is $nbrqueuelen, but got $nbrLen. FAIL&#34;
       }
    }

    if { $nbmanbrpermanence != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfNbmaNbrPermanence.$ipaddr.0]
       <a name="::snmpDebug(56)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbmaVal [<a name="::snmpUtilGetVal(26)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(57)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Nbr Permanence for neighbor $ipaddr is $nbmaVal&#34; $fd

       if { [string compare [string tolower $nbmaVal] \
                          [string tolower $nbmanbrpermanence]] == 0 } {
          <a name="::result_ok(29)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Status of the entry \
                     is $nbmanbrpermanence exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(31)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Status of the entry expected \
                        $nbmanbrpermanence but got $nbmaVal. FAIL&#34;
       }
    }

    if { $nbrhellosuppressed != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfNbrHelloSuppressed.$ipaddr.0]
       <a name="::snmpDebug(58)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set nbrVal [<a name="::snmpUtilGetVal(27)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(59)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Hello Suppression for neighbor $ipaddr \
                      is $nbrVal&#34; $fd

       if { [string compare [string tolower $nbrVal] \
                          [string tolower $nbrhellosuppressed]] == 0 } {
          <a name="::result_ok(30)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Nbr Interface Parameter: Hellos are suppressed to \
                     neighbor $nbrhellosuppressed exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(32)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Nbr Interface Parameter: Hellos are suppressed to \
                        neighbor expected $nbrhellosuppressed but \
                        got $nbrVal. FAIL&#34;
       }
    }

    <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(60)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">####################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetOspfTrap</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#    This procedure enables or disables specific OSPF traps</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    trapno      - Trap number to enable or disable</span>
<span class="comment-line"># </span>
<span class="comment-line">#                  Trap name (defined in OSPF MIB)   No</span>
<span class="comment-line">#                  -------------------------------   --</span>
<span class="comment-line">#                  All the below traps               0</span>
<span class="comment-line">#                  ospfVirtIfStateChange             1</span>
<span class="comment-line">#                  ospfNbrStateChange                2</span>
<span class="comment-line">#                  ospfVirtNbrStateChange            3</span>
<span class="comment-line">#                  ospfIfConfigError                 4</span>
<span class="comment-line">#                  ospfVirtIfConfigError             5</span>
<span class="comment-line">#                  ospfIfAuthFailure                 6</span>
<span class="comment-line">#                  ospfVirtIfAuthFailure             7</span>
<span class="comment-line">#                  ospfIfRxBadPacket                 8</span>
<span class="comment-line">#                  ospfVirtIfRxBadPacket             9</span>
<span class="comment-line">#                  ospfTxRetransmit                  10                         </span>
<span class="comment-line">#                  ospfVirtIfTxRetransmit            11</span>
<span class="comment-line">#                  ospfOriginateLsa                  12</span>
<span class="comment-line">#                  ospfMaxAgeLsa                     13</span>
<span class="comment-line">#                  ospfLsdbOverflow                  14</span>
<span class="comment-line">#                  ospfLsdbApproachingOverflow       15</span>
<span class="comment-line">#                  ospfIfStateChange                 16 </span>
<span class="comment-line">#    </span>
<span class="comment-line">#    status     - Enable or disable trap      </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd         - File descriptor of open log file</span>
<span class="comment-line">#    comment    - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetOspfTrap -session $sessionid -trapno 5,7,8-10 \</span>
<span class="comment-line">#                    -status &#34;enable&#34;</span>
<span class="comment-line">######################################################################</span>
<strong><a name="::::snmpSetOspfTrap_860">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpSetOspfTrap">::::snmpSetOspfTrap</a></a></strong> { args } {
    <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetOspfTrap $args {
       session   &#34;&#34;
       trapno    &#34;&#34;
       status    &#34;enable&#34;
       fd        &#34;NULL&#34;
       comment   &#34;snmpSetOspfTrap&#34;
    }

    set func &#34;snmpSetOspfTrap:&#34;

    if { $session == &#34;&#34; || $trapno  == &#34;&#34; } {
       error &#34;$func SNMP session id, trapnumber must be specified&#34;
       return 0
    }

    <a name="::snmpDebug(61)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, trap no is $trapno&#34; $fd
    <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setting OSPF trap no. $trapno --&#34;

    if { $trapno != &#34;0&#34; } {
       foreach args [split $trapno &#34;,&#34;] {
          set args [string trim $args]
          if {[regexp &#34;(.*)-(.*)&#34; $args res1 res2 res3] == 1 } {
             for {set i $res2} { $i &lt;= $res3 } { incr i 1} {
                lappend traps $i
             }
          } else {
             lappend traps $args
          }
       }

       set trapval 0
       foreach trap $traps {
          set trapval [expr $trapval | [expr 1 &lt;&lt; $trap]]
       }

       set trapname [format &#34;%08x&#34; $trapval]
       regexp -nocase {([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])} $trapname a b c d e
       set trapname &#34;$b $c $d $e&#34; 
    } else {
       if { [string compare [string tolower $status] &#34;enable&#34;] == 0 } {
          set trapname &#34;00 01 FF FE&#34;
       } else {
          set trapname &#34;00 00 00 00&#34;
       }
    }

    <a name="::snmpDebug(62)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func trap value is $trapname&#34; $fd

    set result [snmpSet -session $session -oid ospfSetTrap.0 -type x \
                        -val $trapname]


    <a name="::snmpDebug(63)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - $result&#34; $fd 

    <a name="::snmpDebug(64)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return 1
}


<span class="comment-line">#############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfGlobalParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description: This procedure checks the parameters apply globally</span>
<span class="comment-line">#               to the router's OSPF process.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session           - Session identifier which identifies the connection</span>
<span class="comment-line">#                        with the DUT</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    ipaddr            - Router ip interface address </span>
<span class="comment-line">#    status            - If the value is &#34;exist&#34;, the router id must be</span>
<span class="comment-line">#                        exist. If &#34;notexist&#34;, the router id should not exist.</span>
<span class="comment-line">#                        Default is &#34;exist&#34;</span>
<span class="comment-line">#    ospfstate         - OSPF State </span>
<span class="comment-line">#                        enabled/disabled</span>
<span class="comment-line">#    versionno         - OSPF version no. </span>
<span class="comment-line">#    abrstatus         - Router is an area border router</span>
<span class="comment-line">#                        true/false</span>
<span class="comment-line">#    asbrstatus        - Router is an autonomous system border router</span>
<span class="comment-line">#                        true/false</span>
<span class="comment-line">#    externallsacount  - No. of external lsas in Lsdb</span>
<span class="comment-line">#    externallsacksum  - Sum of the LS checksum of external lsas in Lsdb</span>
<span class="comment-line">#    tossupport        - Router's support for TOS routing</span>
<span class="comment-line">#                        true/false</span>
<span class="comment-line">#    originatenewlsas  - No. of new lsas that have been originated</span>
<span class="comment-line">#    receivednewlsas   - No. of lsas received determined to be new instants</span>
<span class="comment-line">#    extlsdblimit      - Max. no of non-default AS-external lsas stored in lsdb</span>
<span class="comment-line">#    multicastextns    - Multicast forwarding is enabled</span>
<span class="comment-line">#    overflowinterval  - No. of seconds after entering OverflowState, a router</span>
<span class="comment-line">#                        will attempt to leave OverflowState</span>
<span class="comment-line">#    demandextensions  - Router's support for demand routing</span>
<span class="comment-line">#                        true/false</span>
<span class="comment-line">#    fd                - File descriptor of open log file   </span>
<span class="comment-line">#    comment           - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfGlobalParameters -session $sessionid -ipaddr 11.11.11.1</span>
<span class="comment-line">#                                  -ospfstate &#34;enabled&#34; -bdrstatus &#34;false&#34;</span>
<span class="comment-line">#                                  -externallsacount 5 -originatenewlsas 6 </span>
<span class="comment-line">##############################################################################</span>
<strong><a name="::::snmpCheckOspfGlobalParameters_969">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfGlobalParameters">::::snmpCheckOspfGlobalParameters</a></a></strong> { args } {
    <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfGlobalParameters $args {
       session           &#34;&#34;
       ipaddr            &#34;&#34;
       status            &#34;&#34;
       ospfstate         &#34;&#34;
       versionno         &#34;&#34;
       abrstatus         &#34;&#34;
       asbrstatus        &#34;&#34;
       externallsacount  &#34;&#34;
       externallsacksum  &#34;&#34;
       tossupport        &#34;&#34;
       originatenewlsas  &#34;&#34;
       receivednewlsas   &#34;&#34;
       extlsdblimit      &#34;&#34;
       multicastextns    &#34;&#34;
       overflowinterval  &#34;&#34;
       demandextensions  &#34;&#34;
       fd                &#34;NULL&#34;
       comment           &#34;snmpCheckOspfGlobalParameters&#34;
    }
 
    set func &#34;snmpCheckOspfGlobalParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; } {
       error &#34;$func SNMP session id must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(65)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session&#34; $fd
    <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF global parameters --&#34;

    <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $ipaddr != &#34;&#34; &amp;&amp; $status != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfRouterId.0]
       <a name="::snmpDebug(66)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd
   
       set routerId [<a name="::snmpUtilGetVal(28)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(67)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func RouterId of the switch is $routerId&#34; $fd

       if { $routerId != $ipaddr } {
           if { [string tolower $status] == &#34;exist&#34; } {
              <a name="::result_error(33)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Router Id expected $ipaddr but got $routerId. FAIL&#34;
           } else {
              <a name="::result_ok(31)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Router Id $ipaddr does not exists. PASS&#34;
              set retVal 1
           }
       } else {
           if { [string tolower $status] == &#34;notexist&#34; } {
              <a name="::result_error(34)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Router Id expected $ipaddr but got $routerId. FAIL&#34;
           } else {
              <a name="::result_ok(32)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a>  &#34;Router Id $ipaddr exists. PASS&#34;
              set retVal 1
           }
       }
    }

    if { $ospfstate != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAdminStat.0]
       <a name="::snmpDebug(68)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stateVal [<a name="::snmpUtilGetVal(29)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(69)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func OSPF state in the switch is $stateVal&#34; $fd

       if { [string compare [string tolower $stateVal] \
                          [string tolower $ospfstate]] == 0 } {
          <a name="::result_ok(33)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;OSPF state is $ospfstate exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(35)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;OSPF state expected is $ospfstate but \
                        got $stateVal. FAIL&#34;
       }
    }

    if { $versionno != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfVersionNumber.0]
       <a name="::snmpDebug(70)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set verVal [<a name="::snmpUtilGetVal(30)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(71)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func OSPF version no. in the switch is $verVal&#34; $fd

       if { [string compare [string tolower $verVal] \
                          [string tolower $versionno]] == 0 } {
          <a name="::result_ok(34)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Version no. is $versionno exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(36)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Version no. expected is $versionno but \
                        got $verVal. FAIL&#34;
       }
    }

    if { $abrstatus != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAreaBdrRtrStatus.0]
       <a name="::snmpDebug(72)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set statusVal [<a name="::snmpUtilGetVal(31)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(73)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func ABR status in the switch is $statusVal&#34; $fd

       if { [string compare [string tolower $statusVal] \
                          [string tolower $abrstatus]] == 0 } {
          <a name="::result_ok(35)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area BDR status is $abrstatus exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(37)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area BDR status expected is $abrstatus but \
                        got $statusVal. FAIL&#34;
       }
    }

    if { $asbrstatus != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfASBdrRtrStatus.0]
       <a name="::snmpDebug(74)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set statusVal [<a name="::snmpUtilGetVal(32)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(75)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func ASBR status in the switch is $statusVal&#34; $fd

       if { [string compare [string tolower $statusVal] \
                          [string tolower $asbrstatus]] == 0 } {
          <a name="::result_ok(36)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;AS BDR status is $asbrstatus exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(38)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;AS BDR status expected is $asbrstatus but \
                        got $statusVal. FAIL&#34;
       }
    }

    if { $externallsacount != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfExternLsaCount.0]
       <a name="::snmpDebug(76)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(33)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(77)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of AS-external lsas in the switch is $count&#34; $fd

       if {$count == $externallsacount} {
          <a name="::result_ok(37)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LSA count is $externallsacount exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(39)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LSA count expected $externallsacount but \
                        got $count. FAIL&#34;
        }
    }

    if { $externallsacksum != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfExternLsaCksumSum.0]
       <a name="::snmpDebug(78)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(34)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(79)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AS-external lsas ChkSum in the switch is $count&#34; $fd

       if {$count == $externallsacksum} {
          <a name="::result_ok(38)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LSA cksum is $externallsacksum exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(40)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LSA cksum expected $externallsacksum but \
                        got $count. FAIL&#34;
        }
    }

    if { $tossupport != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfTOSSupport.0]
       <a name="::snmpDebug(80)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set statusVal [<a name="::snmpUtilGetVal(35)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(81)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func TOS support in the switch is $statusVal&#34; $fd

       if { [string compare [string tolower $statusVal] \
                          [string tolower $tossupport]] == 0 } {
          <a name="::result_ok(39)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;TOS support $tossupport exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(41)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;TOS support expected is $tossupport but \
                        got $statusVal. FAIL&#34;
       }
    }

    if { $originatenewlsas != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfOriginateNewLsas.0]
       <a name="::snmpDebug(82)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(36)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(83)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of newly originated lsas in the switch \
                      is $count&#34; $fd

       if {$count == $originatenewlsas} {
          <a name="::result_ok(40)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;No. of newly originated LSAs $originatenewlsas \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(42)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;No. of newly originated LSAs expected \
                        $originatenewlsas but got $count. FAIL&#34;
        }
    }

    if { $receivednewlsas != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfRxNewLsas.0]
       <a name="::snmpDebug(84)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(37)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(85)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of newly received lsas in the switch \
                      is $count&#34; $fd

       if {$count == $receivednewlsas} {
          <a name="::result_ok(41)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;No. of newly received LSAs $receivednewlsas \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(43)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;No. of newly received LSAs expected \
                        $receivednewlsas but got $count. FAIL&#34;
        }
    }

    if { $extlsdblimit != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfExtLsdbLimit.0]
       <a name="::snmpDebug(86)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(38)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(87)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Max. AS-external lsas limit in Lsdb in the switch \
                      is $count&#34; $fd

       if {$count == $extlsdblimit} {
          <a name="::result_ok(42)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Max. AS-external lsa limit in lsdb $extlsdblimit \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(44)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Max. AS-external lsa limit in lsdb expected \
                        $extlsdblimit but got $count. FAIL&#34;
        }
    }

    if { $multicastextns != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfMulticastExtensions.0]
       <a name="::snmpDebug(88)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(39)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(89)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Multicast extensions in the switch is $count&#34; $fd

       if {$count == $multicastextns} {
          <a name="::result_ok(43)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Multicast extensions $multicastextns exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(45)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Multicast extensions expected $multicastextns but \
                        got $count. FAIL&#34;
        }
    }

    if { $overflowinterval != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfExitOverflowInterval.0]
       <a name="::snmpDebug(90)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set count [<a name="::snmpUtilGetVal(40)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(91)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func OverFlow Interval in the switch is $count&#34; $fd

       if {$count == $overflowinterval} {
          <a name="::result_ok(44)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;OverFlowInterval $overflowinterval exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(46)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;OverFlowInterval expected $overflowinterval but \
                        got $count. FAIL&#34;
        }
    }


    if { $demandextensions != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfDemandExtensions.0]
       <a name="::snmpDebug(92)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set statusVal [<a name="::snmpUtilGetVal(41)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(93)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Demand extensions in the switch is $statusVal&#34; $fd

       if { [string compare [string tolower $statusVal] \
                          [string tolower $demandextensions]] == 0 } {
          <a name="::result_ok(45)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Demand extension is $demandextensions exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(47)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Demand extension expected is $demandextensions but \
                        got $statusVal. FAIL&#34;
       }
    }

    <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(94)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfAreaParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description: This procedure checks the ospf area parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Area id </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    status           - If the value is &#34;exist&#34;, the area id must be</span>
<span class="comment-line">#                       exist. If &#34;notexist&#34;, the area id should not exist.</span>
<span class="comment-line">#    authtype         - Authentication Type for an area</span>
<span class="comment-line">#                       none - 0</span>
<span class="comment-line">#                       simplePassword - 1</span>
<span class="comment-line">#                       md5  - 2</span>
<span class="comment-line">#    importasextern   - Area's support for importing AS external LSAs</span>
<span class="comment-line">#                       importExternal - 1</span>
<span class="comment-line">#                       importNoExternal - 2</span>
<span class="comment-line">#                       importNssa - 3</span>
<span class="comment-line">#    spfruns          - No. of times intra-area route table has been calculated</span>
<span class="comment-line">#    abrcount         - No. of ABRs reachable within this area</span>
<span class="comment-line">#    asbrcount        - No. of ASBRs reachable within this area</span>
<span class="comment-line">#    lsacount         - No. of LSA in area LSDB excluding AS external LSAs</span>
<span class="comment-line">#    lsacksum         - LSA cksum in area LSDB excluding AS external LSAs</span>
<span class="comment-line">#    areasummary      - Importing of summary LSAs into stub areas</span>
<span class="comment-line">#                       noAreaSummary - 1</span>
<span class="comment-line">#                       sendAreaSummary - 2</span>
<span class="comment-line">#    fd               - File descriptor of open log file   </span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfAreaParameters -session $sessionid -ipaddr 0.0.0.1</span>
<span class="comment-line">#                                -authtype 0 -importasextern 1 -spfruns 4 </span>
<span class="comment-line">#                                -areasummary 2</span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfAreaParameters_1298">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfAreaParameters">::::snmpCheckOspfAreaParameters</a></a></strong> { args } {
    <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfAreaParameters $args {
       session         &#34;&#34;
       areaid          &#34;&#34;
       status          &#34;&#34;
       authtype        &#34;&#34;
       importasextern  &#34;&#34;
       spfruns         &#34;&#34;
       abrcount        &#34;&#34;
       asbrcount       &#34;&#34;
       lsacount        &#34;&#34;
       lsacksum        &#34;&#34;
       areasummary     &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfAreaParameters&#34;
    }
 
    set func &#34;snmpCheckOspfAreaParameters:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; } {
       error &#34;$func SNMP session id, area id must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(95)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, area id is $areaid&#34; $fd
    <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Area Parameters with AreaId $areaid --&#34;

    <a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $status != &#34;&#34; } {
       set status [string tolower $status]

       set result [snmpGet -session $session -oid ospfAreaStatus.$areaid]
       <a name="::snmpDebug(96)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet-$result&#34; $fd
   
      if {[regexp -nocase &#34;.*No Such Instance.*&#34; $result]} {
         if { $status == &#34;exist&#34; } {
            <a name="::result_error(48)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Id $areaid doesn't exist in the \
                          ospfAreaTable. FAIL&#34;
         } else {
            <a name="::result_ok(46)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Id $areaid doesn't exist in the ospfAreaTable \
                       result $status. PASS&#34;
            set retVal 1
         }
       } else {
         if { $status == &#34;notexist&#34; } {
            <a name="::result_error(49)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Id $areaid  exist in the ospfAreaTable \
                          result $status. FAIL&#34;
         } else {
           if {[regexp -nocase &#34;.*active(1).*&#34; $result]} {
               <a name="::result_ok(47)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Id $areaid  exist in the ospfAreaTable \
                          result $status. PASS&#34;
               set retVal 1
           }
         }
       }
    }

    if { $authtype != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAuthType.$areaid]
       <a name="::snmpDebug(97)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set AuthType [<a name="::snmpUtilGetVal(42)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(98)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AuthType for area $areaid is $AuthType&#34; $fd

       if {$authtype == $AuthType} {
          <a name="::result_ok(48)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: Authentication Type $authtype \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(50)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: Authentication Type expected \
                        $authtype but got $AuthType. FAIL&#34;
        }
    }

    if { $importasextern != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfImportAsExtern.$areaid]
       <a name="::snmpDebug(99)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set importVal [<a name="::snmpUtilGetVal(43)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(100)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Import AS-External lsas for area $areaid \
                      is $importVal&#34; $fd

       if { [string compare [string tolower $importVal] \
                          [string tolower $importasextern]] == 0 } {
          <a name="::result_ok(49)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: Importing AS-External LSAs \
                     $importasextern exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(51)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: Importing AS-External LSAs expected \
                        $importasextern but got $importVal. FAIL&#34;
        }
    }

    if { $spfruns != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfSpfRuns.$areaid]
       <a name="::snmpDebug(101)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set spfVal [<a name="::snmpUtilGetVal(44)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(102)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of SPF runs for area $areaid is $spfVal&#34; $fd

       if {$spfruns == $spfVal} {
          <a name="::result_ok(50)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: No. of times intra-area router table \
                     calculated $spfruns exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(52)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: No. of times intra-area router table \
                        calculated expected is $spfruns but got $spfVal. FAIL&#34;
        }
    }

    if { $abrcount != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAreaBdrRtrCount.$areaid]
       <a name="::snmpDebug(103)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set abrVal [<a name="::snmpUtilGetVal(45)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(104)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of ABR routers for area $areaid is $abrVal&#34; $fd

       if {$abrcount == $abrVal} {
          <a name="::result_ok(51)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: No. of ABRs $abrcount exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(53)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: No. of ABRs expected is $abrcount \
                        but got $abrVal. FAIL&#34;
        }
    }

    if { $asbrcount != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAsBdrRtrCount.$areaid]
       <a name="::snmpDebug(105)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set asbrVal [<a name="::snmpUtilGetVal(46)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(106)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of ASBR routers for area $areaid is $asbrVal&#34; $fd

       if {$asbrcount == $asbrVal} {
          <a name="::result_ok(52)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: No. of ASBRs $asbrcount exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(54)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: No. of ASBRs expected is $asbrcount \
                        but got $asbrVal. FAIL&#34;
        }
    }

    if { $lsacount != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAreaLsaCount.$areaid]
       <a name="::snmpDebug(107)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set lsaVal [<a name="::snmpUtilGetVal(47)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(108)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func No.of Lsas in area $areaid is $lsaVal&#34; $fd

       if {$lsacount == $lsaVal} {
          <a name="::result_ok(53)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: No. of LSAs $lsacount exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(55)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: No. of LSAs expected is $lsacount \
                        but got $lsaVal. FAIL&#34;
        }
    }

    if { $lsacksum != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAreaLsaCksumSum.$areaid]
       <a name="::snmpDebug(109)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set lsacVal [<a name="::snmpUtilGetVal(48)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(110)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsa ChkSum for area $areaid is $lsacVal&#34; $fd

       if {$lsacksum == $lsacVal} {
          <a name="::result_ok(54)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: LS checksums $lsacksum exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(56)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: LS checksums expected is $lsacksum \
                        but got $lsacVal. FAIL&#34;
        }
    }

    if { $areasummary != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfAreaSummary.$areaid]
       <a name="::snmpDebug(111)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set areaVal [<a name="::snmpUtilGetVal(49)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(112)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Summary lsas for area $areaid is $areaVal&#34; $fd

       if { [string compare [string tolower $areaVal] \
                          [string tolower $areasummary]] == 0 } {
          <a name="::result_ok(55)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Parameter: Import summary LSAs $areasummary \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(57)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Parameter: Import summary LSAs expected \
                        is $areasummary but got $areaVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(113)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfStubAreaParameters</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description: This procedure checks the ospf stub area parameters.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Area id </span>
<span class="comment-line">#    tos              - TOS associated with the metric </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    status           - If the value is &#34;exist&#34;, the area id must be</span>
<span class="comment-line">#                       exist. If &#34;notexist&#34;, the area id should not exist.</span>
<span class="comment-line">#    metric           - Metric value</span>
<span class="comment-line">#    metrictype       - Type of metric </span>
<span class="comment-line">#    fd               - File descriptor of open log file   </span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure </span>
<span class="comment-line">#    1 - On success </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfStubAreaParameters -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                                    -tos 0 -metric 1 -metrictype &#34;ospfMetric&#34; </span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfStubAreaParameters_1527">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfStubAreaParameters">::::snmpCheckOspfStubAreaParameters</a></a></strong> { args } {
    <a name="::parse_args(7)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfStubAreaParameters $args {
       session         &#34;&#34;
       areaid          &#34;&#34;
       tos             &#34;&#34;
       status          &#34;&#34;
       metric          &#34;&#34;
       metrictype      &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfStubAreaParameters&#34;
    }

    set func &#34;snmpCheckOspfStubAreaParameters:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; || $tos == &#34;&#34; } {
       error &#34;$func SNMP session id, area id and tos must be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(114)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, area id $areaid, tos $tos&#34; $fd
    <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Stub Area Parameters for area $areaid --&#34; 

    <a name="::report_start_test(6)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $metric != &#34;&#34; } {
       set result [snmpGet -session $session -oid ospfStubMetric.$areaid.$tos]
       <a name="::snmpDebug(115)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set met [<a name="::snmpUtilGetVal(50)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(116)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Metric for Stub Area $areaid is $metric&#34; $fd

       if {$metric == $met} {
          <a name="::result_ok(56)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Stub Area Parameter: Metric $metric exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(58)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Stub Area Parameter: Metric expected $metric but \
                        got $met. FAIL&#34;
        }
    }

    if { $metrictype != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfStubMetricType.$areaid.$tos]
       <a name="::snmpDebug(117)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set typeVal [<a name="::snmpUtilGetVal(51)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(118)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Metric Type for Stub Area $areaid is $typeVal&#34; $fd

       if { [string compare [string tolower $typeVal] \
                          [string tolower $metrictype]] == 0 } {
          <a name="::result_ok(57)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Stub Area Parameter: Metric type is $metrictype \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(59)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Stub Area Parameter: Metric type expected is \
                        $metrictype but got $typeVal. FAIL&#34;
       }
    }

    if { $status != &#34;&#34; } {
       set status [string tolower $status]

       set result [snmpGet -session $session -oid ospfStubStatus.$areaid.$tos]
       <a name="::snmpDebug(119)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet-$result&#34; $fd

      if {[regexp -nocase &#34;.*No Such Instance.*&#34; $result]} {
         if { $status == &#34;exist&#34; } {
            <a name="::result_error(60)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Stub Area Id $areaid doesn't exist in the \
                          ospfStubAreaTable. FAIL&#34;
         } else {
            <a name="::result_ok(58)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Stub Area Id $areaid doesn't exist in the \
                       ospfStubAreaTable result $status. PASS&#34;
            set retVal 1
         }
       } else {
         if { $status == &#34;notexist&#34; } {
            <a name="::result_error(61)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Stub Area Id $areaid  exist in the ospfStubAreaTable \
                          result $status. FAIL&#34;
         } else {
            if {[regexp -nocase &#34;.*active(1).*&#34; $result]} {
               <a name="::result_ok(59)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Stub Area Id $areaid  exist in the ospfStubAreaTable \
                          result $status. PASS&#34;
               set retVal 1
            }
         }
       }
    }

    <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(120)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfAreaAggregateTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: This procedure checks range of IP address specified by </span>
<span class="comment-line">#               an IP address/IP network mask pair.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Area id in which address aggregate is to be found</span>
<span class="comment-line">#    lsdbtype         - Type of the address aggregate</span>
<span class="comment-line">#                       summaryLink/nssaExternalLink</span>
<span class="comment-line">#    subnet           - IP address of the net or subnet indicated in range</span>
<span class="comment-line">#    mask             - Subnet mast that pertains to the net or subnet</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    status           - If the value is &#34;exist&#34;, the area id must be</span>
<span class="comment-line">#                       exist. If &#34;notexist&#34;, the area id should not exist.</span>
<span class="comment-line">#    effect           - Subnets being advertised/notadvertised at all outside</span>
<span class="comment-line">#                       the area, </span>
<span class="comment-line">#                       advertiseMatching</span>
<span class="comment-line">#                       doNotAdvertiseMatching</span>
<span class="comment-line">#    fd               - File descriptor of open log file</span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfAreaAggregateTable -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                                    -lsdbtype &#34;summaryLink&#34; -subnet 10.1.1.0</span>
<span class="comment-line">#                                    -mask 255.255.255.0 -status &#34;exist&#34;</span>
<span class="comment-line">#                                    -effect &#34;advertiseMatching&#34; </span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfAreaAggregateTable_1659">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfAreaAggregateTable">::::snmpCheckOspfAreaAggregateTable</a></a></strong> { args } {
    <a name="::parse_args(8)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfAreaAggregateTable $args {
       session         &#34;&#34;
       areaid          &#34;&#34;
       lsdbtype        &#34;&#34;
       subnet          &#34;&#34;
       mask            &#34;&#34;
       status          &#34;&#34;
       effect          &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfAreaAggregateTable&#34;
    }

    set func &#34;snmpCheckOspfAreaAggregateTable:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; || $lsdbtype == &#34;&#34; || $subnet == &#34;&#34; \
                        || $mask == &#34;&#34; } {
       error &#34;$func SNMP session id, area id, lsdbtype, subnet and mask \
               must be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(121)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, area id $areaid, lsdbtype $lsdbtype \
                     subnet $subnet, mask $mask&#34; $fd
    <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Area AggregateTable Entries --&#34;

    <a name="::report_start_test(7)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    set status [string tolower $status]

    if { $status == &#34;exist&#34; &amp;&amp; $effect != &#34;&#34; } {
          set result [snmpGet -session $session \
                   -oid ospfAreaAggregateEffect.$areaid.$lsdbtype.$subnet.$mask]
          <a name="::snmpDebug(122)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

          set typeVal [<a name="::snmpUtilGetVal(52)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
          <a name="::snmpDebug(123)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Advertising type for $lsdbtype lsa \
                         is $typeVal&#34; $fd

          if { [string compare [string tolower $typeVal] \
                             [string tolower $effect]] == 0 } {
             <a name="::result_ok(60)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Aggregate Table: Advertising type is $effect \
                        exists. PASS&#34;
             set retVal 1
          } else {
             <a name="::result_error(62)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Aggregate Table: Advertising type expected is \
                           $effect but got $typeVal. FAIL&#34;
          }
    }

    if { $status != &#34;&#34; } {
       set result [snmpGet -session $session \
                   -oid ospfAreaAggregateStatus.$areaid.$lsdbtype.$subnet.$mask]
       <a name="::snmpDebug(124)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet-$result&#34; $fd

      if {[regexp -nocase &#34;.*No Such Instance.*&#34; $result]} {
         if { $status == &#34;exist&#34; } {
            <a name="::result_error(63)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Id $areaid doesn't exist in the \
                          ospfAreaAggregateTable. FAIL&#34;
         } else {
            <a name="::result_ok(61)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Id $areaid doesn't exist in the \
                       ospfAreaAggregateTable result $status. PASS&#34;
            set retVal 1
         }
       } else {
         if { $status == &#34;notexist&#34; } {
            <a name="::result_error(64)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Area Id $areaid  exist in the ospfAreaAggregateTable \
                          result $status. FAIL&#34;
         } else {
            <a name="::result_ok(62)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Area Id $areaid  exist in the ospfAreaAggregateTable \
                       result $status. PASS&#34;
            set retVal 1
          }
       }
    }

    <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(125)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfLsdbTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: This procedure checks the ospf linkstate database.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Area id</span>
<span class="comment-line">#    lstype           - Possible values are</span>
<span class="comment-line">#                       routerLink</span>
<span class="comment-line">#                       networkLink</span>
<span class="comment-line">#                       summaryLink</span>
<span class="comment-line">#                       asSummaryLink</span>
<span class="comment-line">#                       asExternalLink</span>
<span class="comment-line">#                       multicastLink</span>
<span class="comment-line">#                       nssaExternalLink</span>
<span class="comment-line">#    lsid             - Link State ID contains either Router ID/ IP address</span>
<span class="comment-line">#    lsrouterid       - Router ID </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    lsdbsequence     - Sequence number</span>
<span class="comment-line">#    lsage	      - Age of LSA</span>
<span class="comment-line">#    lsdbcksum        - Checksum of the complete contents of LSA, except</span>
<span class="comment-line">#                       the age</span>
<span class="comment-line">#    lsdbadvertise    - Entire LSA, including its header</span>
<span class="comment-line">#    fd               - File descriptor of open log file</span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfLsdbTable -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                           -lstype routerLink -lsid 11.11.11.1 </span>
<span class="comment-line">#                           -lsrouterid 11.11.11.1 -lsage 78 </span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfLsdbTable_1782">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfLsdbTable">::::snmpCheckOspfLsdbTable</a></a></strong> { args } {
    <a name="::parse_args(9)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfLsdbTable $args {
       session         &#34;&#34;
       areaid          &#34;&#34;
       lstype          &#34;&#34;
       lsid            &#34;&#34;
       lsrouterid      &#34;&#34;
       lsdbsequence    &#34;&#34;
       lsage           &#34;&#34;
       lsdbcksum       &#34;&#34;
       lsdbadvertise   &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfLsdbTable&#34;
    }
 
    set func &#34;snmpCheckOspfLsdbTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; || $lstype == &#34;&#34; || $lsid == &#34;&#34; \
                        || $lsrouterid == &#34;&#34;} {
       error &#34;$func SNMP session id, area id, lstype, lsid, router id \
               must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(126)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session id $session, area id $areaid, lstype $lstype \
                     ls id $lsid, router id $lsrouterid&#34; $fd
    <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Lsdbtable Entries--&#34;

    <a name="::report_start_test(8)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $lsdbsequence != &#34;&#34; } {
       set lsdbsequence [format &#34;%d&#34; &#34;$lsdbsequence&#34;]
       set result [snmpGet -session $session \
                        -oid ospfLsdbSequence.$areaid.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(127)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set seqVal [<a name="::snmpUtilGetVal(53)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> negative $result]
       <a name="::snmpDebug(128)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsdb Sequence number for $lstype lsas with \
                      routerid $lsrouterid is $seqVal&#34; $fd

       if {$lsdbsequence == $seqVal} {
          <a name="::result_ok(63)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;LsdbTable Entry: LS Sequence no. $lsdbsequence \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(65)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;LsdbTable Entry: LS Sequence no. expected \
                        is $lsdbsequence but got $seqVal. FAIL&#34;
        }
    }

    if { $lsage != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfLsdbAge.$areaid.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(129)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set ageVal [<a name="::snmpUtilGetVal(54)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(130)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func LsAge for $lstype lsas with \
                      routerid $lsrouterid is $ageVal&#34; $fd

       set val [expr $ageVal + 3]
       if {$ageVal &lt;= $val} {
          <a name="::result_ok(64)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;LsdbTable Entry: LS age $lsage exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(66)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;LsdbTable Entry: LS age expected is $lsage but \
                        got $ageVal. FAIL&#34;
        }
    }

    if { $lsdbcksum != &#34;&#34; } {
       set lsdbcksum [format &#34;%d&#34; &#34;$lsdbcksum&#34;]
       set result [snmpGet -session $session \
                        -oid ospfLsdbChecksum.$areaid.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(131)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set cksumVal [<a name="::snmpUtilGetVal(55)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(132)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func LsCkSum for $lstype lsas with \
                      routerid $lsrouterid is $cksumVal&#34; $fd

       if {$lsdbcksum == $cksumVal} {
          <a name="::result_ok(65)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;LsdbTable Entry: LSA checksum $lsdbcksum exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(67)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;LsdbTable Entry: LSA checksum expected \
                        is $lsdbcksum but got $cksumVal. FAIL&#34;
        }
    }

    if { $lsdbadvertise == &#34;&#34; } {
       set result [snmpGet -session $session \
                   -oid ospfLsdbAdvertisement.$areaid.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(133)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set advVal [<a name="::snmpUtilGetVal(56)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       <a name="::snmpDebug(134)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsdb Advertise for $lstype lsas with \
                      routerid $lsrouterid is $advVal&#34; $fd

       if {$lsdbadvertise == $advVal} {
          <a name="::result_ok(66)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;LsdbTable Entry: LSA $lsdbadvertise exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(68)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;LsdbTable Entry: LSA expected \
                        is $lsdbadvertise but got $advVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(8)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(135)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfExtLsdbTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: This procedure checks the ospf external linkstate database.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    lstype           - Type of LSA, asExternalLink</span>
<span class="comment-line">#    lsid             - Link State ID contains either Router ID/ IP address</span>
<span class="comment-line">#    lsrouterid       - Router ID</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    lsdbsequence     - Sequence number</span>
<span class="comment-line">#    lsage            - Age of LSA</span>
<span class="comment-line">#    lsdbcksum        - Checksum of the complete contents of LSA, except</span>
<span class="comment-line">#                       the age</span>
<span class="comment-line">#    lsdbadvertise    - Entire LSA, including its header</span>
<span class="comment-line">#    fd               - File descriptor of open log file</span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfExtLsdbTable -session $sessionid -lstype asExternalLink</span>
<span class="comment-line">#                              -lsid 11.11.11.1 -lsrouterid 11.22.22.1 </span>
<span class="comment-line">#                              -lsage 89</span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfExtLsdbTable_1927">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfExtLsdbTable">::::snmpCheckOspfExtLsdbTable</a></a></strong> { args } {
    <a name="::parse_args(10)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfExtLsdbTable $args {
       session         &#34;&#34;
       lstype          &#34;&#34;
       lsid            &#34;&#34;
       lsrouterid      &#34;&#34;
       lsdbsequence    &#34;&#34;
       lsage           &#34;&#34;
       lsdbcksum       &#34;&#34;
       lsdbadvertise   &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfExtLsdbTable&#34;
    }
 
    set func &#34;snmpCheckOspfExtLsdbTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $lstype == &#34;&#34; || $lsid == &#34;&#34; || $lsrouterid == &#34;&#34;} {
       error &#34;$func SNMP session id, lstype, lsid, router id must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(136)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session id $session, lstype $lstype lsid $lsid, \
                     routerid $lsrouterid&#34; $fd
    <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF External Lsdbtable Entries--&#34;

    <a name="::report_start_test(9)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $lsdbsequence != &#34;&#34; } {
       set lsdbsequence [format &#34;%d&#34; &#34;$lsdbsequence&#34;]
       set result [snmpGet -session $session \
                           -oid ospfExtLsdbSequence.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(137)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set seqVal [<a name="::snmpUtilGetVal(57)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> negative $result]
       <a name="::snmpDebug(138)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsdb Sequence number for AS-External lsas with \
                      routerid $lsrouterid is $seqVal&#34; $fd

       if {$lsdbsequence == $seqVal} {
          <a name="::result_ok(67)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LsdbTable Entry: LS Sequence no. $lsdbsequence \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(69)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LsdbTable Entry: LS Sequence no. expected \
                        is $lsdbsequence but got $seqVal. FAIL&#34;
        }
    }

    if { $lsage != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfExtLsdbAge.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(139)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set ageVal [<a name="::snmpUtilGetVal(58)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(140)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func LsAge for AS-External lsas with \
                      routerid $lsrouterid is $ageVal&#34; $fd

       set val [expr $ageVal + 3]
       if {$ageVal &lt;= $val} {
          <a name="::result_ok(68)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LsdbTable Entry: LS age $lsage exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(70)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LsdbTable Entry: LS age expected is $lsage \
                        but got $ageVal. FAIL&#34;
        }
    }

    if { $lsdbcksum != &#34;&#34; } {
       set lsdbcksum [format &#34;%d&#34; &#34;$lsdbcksum&#34;]
       set result [snmpGet -session $session \
                           -oid ospfExtLsdbChecksum.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(141)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set cksumVal [<a name="::snmpUtilGetVal(59)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(142)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsdb CheckSum for AS-External lsas with \
                      routerid $lsrouterid is $cksumVal&#34; $fd

       if {$lsdbcksum == $cksumVal} {
          <a name="::result_ok(69)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LsdbTable Entry: LSA checksum $lsdbcksum \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(71)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LsdbTable Entry: LSA checksum expected \
                        is $lsdbcksum but got $cksumVal. FAIL&#34;
        }
    }

    if { $lsdbadvertise == &#34;&#34; } {
       set result [snmpGet -session $session \
                        -oid ospfExtLsdbAdvertisement.$lstype.$lsid.$lsrouterid]
       <a name="::snmpDebug(143)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set advVal [<a name="::snmpUtilGetVal(60)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       <a name="::snmpDebug(144)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Lsdb Advertise type for AS-External lsas with \
                      routerid $lsrouterid is $advVal&#34; $fd

       if {$lsdbadvertise == $advVal} {
          <a name="::result_ok(70)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;External LsdbTable Entry: LSA $lsdbadvertise exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(72)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;External LsdbTable Entry: LSA expected \
                        is $lsdbadvertise but got $advVal. FAIL&#34;
        }
    }

    <a name="::report_end_test(9)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(145)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfVirtualIfTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: This procedure checks the ospf virtual interface parameters</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Transit area that the virtual link traverses</span>
<span class="comment-line">#    nbrid            - RouterId of the virtual neighbor</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    transitdelay     - Time in seconds it takes to transit LSUpdate pkt</span>
<span class="comment-line">#    retransinterval  - No. of seconds between lsa retransmissions</span>
<span class="comment-line">#    hellointerval    - HelloInterval in seconds</span>
<span class="comment-line">#    rtrdeadinterval  - Router DeadInterval in seconds</span>
<span class="comment-line">#    state            - Virtual interface state</span>
<span class="comment-line">#                       down</span>
<span class="comment-line">#                       pointToPoint</span>
<span class="comment-line">#    events           - No. of times state changes on this virtual link</span>
<span class="comment-line">#    authkey          - Authentication key value</span>
<span class="comment-line">#    authtype         - Authentication type</span>
<span class="comment-line">#                       none</span>
<span class="comment-line">#                       simplePassword</span>
<span class="comment-line">#                       md5</span>
<span class="comment-line">#    fd               - File descriptor of open log file</span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfVirtualIfTable -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                                -nbrid 10.0.0.1 -transitdelay 11</span>
<span class="comment-line">#                                -hellointerval 10 -state down </span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfVirtualIfTable_2077">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfVirtualIfTable">::::snmpCheckOspfVirtualIfTable</a></a></strong> { args } {
    <a name="::parse_args(11)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfVirtualIfTable $args {
       session         &#34;&#34;
       areaid          &#34;&#34;
       nbrid           &#34;&#34;
       transitdelay    &#34;&#34;
       retransinterval &#34;&#34;
       hellointerval   &#34;&#34;
       rtrdeadinterval &#34;&#34;
       state           &#34;&#34;
       events          &#34;&#34;
       authkey         &#34;&#34;
       authtype        &#34;&#34;
       fd              &#34;NULL&#34;
       comment         &#34;snmpCheckOspfVirtualIfTable&#34;
    }
 
    set func &#34;snmpCheckOspfVirtualIfTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; || $nbrid == &#34;&#34;} {
       error &#34;$func SNMP sessionid, areaid, nbrid must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(146)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;sessionid $session, areaid $areaid, nbrid $nbrid&#34; $fd
    <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Virtual interface parameters in \
                       area $areaid on neighbor interface $nbrid --&#34;

    <a name="::report_start_test(10)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $transitdelay != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfTransitDelay.$areaid.$nbrid]
       <a name="::snmpDebug(147)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set delay [<a name="::snmpUtilGetVal(61)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(148)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Transit delay on virtual interface $nbrid \
                      is $delay&#34; $fd

       if {$delay == $transitdelay} {
          <a name="::result_ok(71)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Transit delay $transitdelay \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(73)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Transit delay expected \
                        $transitdelay but got $delay. FAIL&#34;
        }
    }
    if { $retransinterval != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfRetransInterval.$areaid.$nbrid]
       <a name="::snmpDebug(149)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set retransInterval [<a name="::snmpUtilGetVal(62)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(150)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func ReTransit delay on virtual interface $nbrid \
                      is $retransInterval&#34; $fd

       if {$retransInterval == $retransinterval} {
          <a name="::result_ok(72)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Retransmit Interval \
                     $retransinterval exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(74)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Retransmit Interval \
                        expected $retransinterval but got $retransInterval.FAIL&#34;
        }
    }

    if { $hellointerval != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfHelloInterval.$areaid.$nbrid]
       <a name="::snmpDebug(151)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set interval [<a name="::snmpUtilGetVal(63)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(152)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Hello Interval on virtual interface $nbrid \
                      is $interval&#34; $fd

       if {$interval == $hellointerval} {
          <a name="::result_ok(73)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: HelloInterval \
                     $hellointerval exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(75)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: HelloInterval expected \
                        $hellointerval but got $interval. FAIL&#34;
        }
    }

    if { $rtrdeadinterval != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfRtrDeadInterval.$areaid.$nbrid]
       <a name="::snmpDebug(153)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set deadInterval [<a name="::snmpUtilGetVal(64)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(154)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func Router DeadInterval on virtual interface $nbrid \
                      is $deadInterval&#34; $fd

       if {$deadInterval == $rtrdeadinterval} {
          <a name="::result_ok(74)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Rtrdeadinterval \
                    $rtrdeadinterval exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(76)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Rtrdeadinterval expected \
                        $rtrdeadinterval but got $deadInterval. FAIL&#34;
        }
    }

    if { $state != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfState.$areaid.$nbrid]
       <a name="::snmpDebug(155)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stateVal [<a name="::snmpUtilGetVal(65)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(156)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func IfState on virtual interface $nbrid \
                      is $stateVal&#34; $fd

       if { [string compare [string tolower $stateVal] \
                          [string tolower $state]] == 0 } {
          <a name="::result_ok(75)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Interface state is $state \
                     exists. PASS&#34;
          set retVal 1
       } else {
          <a name="::result_error(77)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Interface state \
                        expected is $state but got $stateVal. FAIL&#34;
       }
    }

    if { $events != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfEvents.$areaid.$nbrid]
       <a name="::snmpDebug(157)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set eventInt [<a name="::snmpUtilGetVal(66)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(158)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func IfEvents on virtual interface $nbrid \
                      is $eventInt&#34; $fd

       if {$eventInt == $events} {
          <a name="::result_ok(76)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Events $events \
                             exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(78)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Events expected \
                        $events but got $eventInt. FAIL&#34;
        }
    }

    if { $authkey != &#34;&#34; } {
       <span class="comment-line"># always returns NULL string</span>
       set result [snmpGet -session $session \
                           -oid ospfVirtIfAuthKey.$areaid.$nbrid]
       <a name="::snmpDebug(159)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set AuthKeyValue [<a name="::snmpUtilGetVal(67)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> hex $result]
       <a name="::snmpDebug(160)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AuthKey Value on virtual interface $nbrid \
                      is $AuthKeyValue&#34; $fd

       if {$AuthKeyValue == $authkey} {
          <a name="::result_ok(77)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Authentication key \
                     value $authkey exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(79)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Authentication key \
                        value expected $authkey but got $AuthKeyValue. FAIL&#34;
       }
    }

    if { $authtype != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtIfAuthType.$areaid.$nbrid]
       <a name="::snmpDebug(161)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set AuthType [<a name="::snmpUtilGetVal(68)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(162)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func AuthType on virtual interface $nbrid \
                      is $AuthType&#34; $fd

       if {$authtype == $AuthType} {
          <a name="::result_ok(78)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Interface Parameter: Authentication \
                     Type $authtype exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(80)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Interface Parameter: Authentication \
                        Type expected $authtype but got $AuthType. FAIL&#34;
        }
    }

    <a name="::report_end_test(10)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(163)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">##############################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCheckOspfVirtualNbrTable</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: This procedure checks the ospf virtual neighbor parameters</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session          - Session identifier which identifies the connection</span>
<span class="comment-line">#                       with the DUT</span>
<span class="comment-line">#    areaid           - Transit area that the virtual link traverses</span>
<span class="comment-line">#    nbrid            - RouterId of the virtual neighbor</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    nbripaddr        - IP address this virtual neighbor is using</span>
<span class="comment-line">#    nbroptions       - Neighbor options field  </span>
<span class="comment-line">#    nbrstate         - State of virtual neighbor </span>
<span class="comment-line">#                       down</span>
<span class="comment-line">#                       attempt</span>
<span class="comment-line">#                       init</span>
<span class="comment-line">#                       twoWay</span>
<span class="comment-line">#                       exchangeStart</span>
<span class="comment-line">#                       exchange</span>
<span class="comment-line">#                       loading</span>
<span class="comment-line">#                       full</span>
<span class="comment-line">#    nbrevents        - No. of times state changes on this virtual link</span>
<span class="comment-line">#    nbrqueuelen      - Length of the retransmission queue </span>
<span class="comment-line">#    nbrhellosuppress - Hellos are being suppressed to the neighbor </span>
<span class="comment-line">#    fd               - File descriptor of open log file</span>
<span class="comment-line">#    comment          - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCheckOspfVirtualNbrTable -session $sessionid -areaid 0.0.0.1</span>
<span class="comment-line">#                                 -nbrid 10.0.0.1 -nbripaddr 11.11.11.1</span>
<span class="comment-line">#                                 -nbroptions 0 -nbrstate full </span>
<span class="comment-line">###############################################################################</span>
<strong><a name="::::snmpCheckOspfVirtualNbrTable_2307">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCheckOspfVirtualNbrTable">::::snmpCheckOspfVirtualNbrTable</a></a></strong> { args } {
    <a name="::parse_args(12)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCheckOspfVirtualNbrTable $args {
       session          &#34;&#34;
       areaid           &#34;&#34;
       nbrid            &#34;&#34;
       nbripaddr        &#34;&#34;
       nbroptions       &#34;&#34;
       nbrstate         &#34;&#34;
       nbrevents        &#34;&#34;
       nbrqueuelen      &#34;&#34;
       nbrhellosuppress &#34;&#34;
       fd               &#34;NULL&#34;
       comment          &#34;snmpCheckOspfVirtualNbrTable&#34;
    }
 
    set func &#34;snmpCheckOspfVirtualNbrTable:&#34; 
    set retVal 0

    if { $session == &#34;&#34; || $areaid == &#34;&#34; || $nbrid == &#34;&#34;} {
       error &#34;$func SNMP sessionid, areaid, nbrid must be specified&#34;
       return $retVal 
    }   

    <a name="::snmpDebug(164)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;sessionid $session, areaid $areaid, nbrid $nbrid&#34; $fd
    <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Checking OSPF Virtual neighbor parameters for \
                       area $areaid, virtual neighbor ipaddress $nbrid --&#34;

    <a name="::report_start_test(11)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$comment&#34;

    if { $nbripaddr != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrIpAddr.$areaid.$nbrid]
       <a name="::snmpDebug(165)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set ip [<a name="::snmpUtilGetVal(69)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $result]
       <a name="::snmpDebug(166)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor ipaddress for virtual interface $nbrid \
                      is $ip&#34; $fd

       if {$ip == $nbripaddr} {
          <a name="::result_ok(79)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor ipaddress $nbripaddr \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(81)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor ipaddress \
                        expected $nbripaddr but got $ip. FAIL&#34;
        }
    }

    if { $nbroptions != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrOptions.$areaid.$nbrid]
       <a name="::snmpDebug(167)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set options [<a name="::snmpUtilGetVal(70)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(168)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor options for virtual interface $nbrid \
                      is $options&#34; $fd

       if {$options == $nbroptions} {
          <a name="::result_ok(80)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor options $nbroptions \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(82)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor options \
                        expected $nbroptions but got $options. FAIL&#34;
        }
    }

    if { $nbrstate != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrState.$areaid.$nbrid]
       <a name="::snmpDebug(169)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set stateVal [<a name="::snmpUtilGetVal(71)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $result]
       <a name="::snmpDebug(170)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor state for virtual interface $nbrid \
                      is $stateVal&#34; $fd

       if { [string compare [string tolower $stateVal] \
                          [string tolower $nbrstate]] == 0 } {
          <a name="::result_ok(81)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor state $nbrstate \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(83)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor state \
                        expected $nbrstate but got $stateVal. FAIL&#34;
        }
    }

    if { $nbrevents != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrEvents.$areaid.$nbrid]
       <a name="::snmpDebug(171)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set events [<a name="::snmpUtilGetVal(72)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $result]
       <a name="::snmpDebug(172)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor events for virtual interface $nbrid \
                      is $events&#34; $fd

       if {$events == $nbrevents} {
          <a name="::result_ok(82)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor events $nbrevents \
                     exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(84)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor events \
                        expected $nbrevents but got $events. FAIL&#34;
        }
    }

    if { $nbrqueuelen != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrLsRetransQLen.$areaid.$nbrid]
       <a name="::snmpDebug(173)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set queuelen [<a name="::snmpUtilGetVal(73)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> gauge $result]
       <a name="::snmpDebug(174)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor LsRetransQLen for virtual \
                      interface $nbrid is $queuelen&#34; $fd

       if {$queuelen == $nbrqueuelen} {
          <a name="::result_ok(83)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor retransmission \
                     queue len $nbrqueuelen exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(85)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor retransmission \
                        queue len expected $nbrqueuelen but got $queuelen. FAIL&#34;
        }
    }

    if { $nbrhellosuppress != &#34;&#34; } {
       set result [snmpGet -session $session \
                           -oid ospfVirtNbrHelloSuppressed.$areaid.$nbrid]
       <a name="::snmpDebug(175)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;snmpGet- $result\n&#34; $fd

       set hellosuppress [<a name="::snmpUtilGetVal(74)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $result]
       <a name="::snmpDebug(176)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func neigbor hello suppression for virtual \
                      interface $nbrid is $hellosuppress&#34; $fd

       if {$hellosuppress == $nbrhellosuppress} {
          <a name="::result_ok(84)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Virtual Neighbor Parameter: Neighbor hello suppressed \
                    $nbrhellosuppress exists. PASS&#34;
          set retVal 1
        } else {
          <a name="::result_error(86)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Virtual Neighbor Parameter: Neighbor hello suppressed \
                        expected $nbrhellosuppress but got $hellosuppress. FAIL&#34;
        }
    }

    <a name="::report_end_test(11)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    <a name="::snmpDebug(177)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $retVal
}

<span class="comment-line">########################################################################</span>
<span class="comment-line">#  Procedure Name: snmpSetupCommonVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: ospf topology specific proc that is used to setup a</span>
<span class="comment-line">#               common ospf vlan setup</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    vlan1ip     - Vlan1 IP address</span>
<span class="comment-line">#    vlan2ip     - Vlan2 IP address</span>
<span class="comment-line">#    vlanarea    - Vlan Area Id</span>
<span class="comment-line">#    dutid       - Dut ID</span>
<span class="comment-line">#    status      - Enable/Disable ospf</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#     fd         - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     list of vlan ids.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetupCommonVlan -session $sessionid -vlan1ip $DUT1vlan1IP</span>
<span class="comment-line">#                        -vlan2ip $DUT1vlan2IP -vlanarea $vlanArea -dutid 1</span>
<span class="comment-line">############################################################################</span>
<strong><a name="::::snmpSetupCommonVlan_2486">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpSetupCommonVlan">::::snmpSetupCommonVlan</a></a></strong> { args } {
    <a name="::parse_args(13)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetupCommonVlan $args {
       session   &#34;&#34;
       vlan1ip   &#34;&#34;
       vlan2ip   &#34;&#34;
       vlanarea  &#34;&#34;
       dutid     &#34;&#34;
       status    &#34;&#34;
       fd        &#34;NULL&#34;
       comment   &#34;snmpSetupCommonVlan&#34;
    }

    set func &#34;snmpSetupCommonVlan:&#34;

    if { $session == &#34;&#34; || $vlan1ip == &#34;&#34; || $vlan2ip == &#34;&#34; \
         || $vlanarea == &#34;&#34; || $dutid == &#34;&#34; } {
       error &#34;$func SNMP session id, vlan1ip, vlan2ip, vlanarea and \
              dutid must be specified&#34;
       return 0
    }

    <a name="::snmpDebug(178)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;Session is $session, Vlan1IP is $vlan1ip, Vlan2IP \
                    is $vlan2ip, Area is $vlanarea, DutId is $dutid&#34; $fd

    <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setup a common OSPF VLAN configuration \
                   VLAN1 IP: $vlan1ip, VLAN2 IP: $vlan2ip, \
                   VLAN Area: $vlanarea, DUT ID: $dutid --&#34;

    <a name="::snmpChangeIpForwarding(1)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; -fd $fd
    set vlan1_id [<a name="::snmpCreateVlan(1)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session -name &#34;vlan1&#34; -fd $fd]
    <a name="::snmpAssignIPAddrToVlan(1)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session -vlanid $vlan1_id -addr $vlan1ip \
               -mask &#34;255.255.255.0&#34; -fd $fd
    <a name="::snmpChangeIpForwarding(2)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; \
                           -vlanid $vlan1_id -fd $fd
    <a name="::snmpAddPortToVlan(1)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan1_id \
                      -port [<a name="::::GetATrunkPort(1)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> $dutid 0] -fd $fd

    lappend vlanlist &#34;$vlan1_id&#34;

    <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>        &#34;create ospf area $vlanarea&#34;
    set vlan2_id [<a name="::snmpCreateVlan(2)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session -name &#34;vlan2&#34; -fd $fd]
    <a name="::snmpAssignIPAddrToVlan(2)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session -vlanid $vlan2_id -addr $vlan2ip \
               -mask &#34;255.255.255.0&#34; -fd $fd
    <a name="::snmpChangeIpForwarding(3)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; \
                           -vlanid $vlan2_id -fd $fd
    <a name="::snmpAddPortToVlan(2)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan2_id \
                      -port [<a name="::MapDUTPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> [expr $dutid * 2] $dutid] -fd $fd

    lappend vlanlist &#34;$vlan2_id&#34;

    switch [<a name="::GetVersion(1)"><a href="./misc.tcl.html#::GetVersion_303">::GetVersion</a></a> &#34;DUT$dutid&#34; ] {
       4 {
          <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan vlan1&#34;
          <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf vlan vlan1 area $vlanarea&#34;
          <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan vlan2&#34;
          <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf vlan vlan2 area $vlanarea&#34; }
       6 -
       default {
          <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan vlan1 area $vlanarea&#34;
          <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan vlan2 area $vlanarea&#34; }
    }
    if { $status == &#34;enable&#34; } {
       <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable ospf&#34;
    } elseif { $status == &#34;disable&#34; } {
       <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospf&#34;
    } else {
       <a name="::result_error(87)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func SNMP status $status must be specified&#34;
    }

    <a name="::snmpDebug(179)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $vlanlist
}

<span class="comment-line">####################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCleanupCommonVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: ospf topology specific proc that is used to cleanup</span>
<span class="comment-line">#               the configuration performed by snmpSetupCommonVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    vlanid      - List of vlanid's returned from snmpSetupCommonVlan</span>
<span class="comment-line">#    vlanarea    - Vlan Area Id</span>
<span class="comment-line">#    dutid       - Dut ID</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd          - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCleanupCommonVlan -session $sessionid -vlanid $vlanList</span>
<span class="comment-line">#                          -vlanarea $vlanArea -dutid 1</span>
<span class="comment-line">#######################################################################</span>
<strong><a name="::::snmpCleanupCommonVlan_2587">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCleanupCommonVlan">::::snmpCleanupCommonVlan</a></a></strong> { args } {
    <a name="::parse_args(14)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCleanupCommonVlan $args {
       session   &#34;&#34;
       vlanid    &#34;&#34;
       vlanarea  &#34;&#34;
       dutid     &#34;&#34;
       fd        &#34;NULL&#34;
       comment   &#34;snmpCleanupCommonVlan&#34;
    }

    set func &#34;snmpCleanupCommonVlan:&#34;

    if { $session == &#34;&#34; || $vlanid == &#34;&#34; || $vlanarea == &#34;&#34; || $dutid == &#34;&#34;} {
       error &#34;$func SNMP session id, vlanid, vlanarea, dutid must be specified&#34;
    }

    <a name="::snmpDebug(180)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;Session is $session, Area is $vlanarea, \
                     DutId is $dutid&#34; $fd

    <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Cleanup the configuration performed by \
                    snmpSetupCommonVlan procedure --&#34;

    <a name="::snmpDelPortFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session -vlanid [lindex $vlanid 0]\
                     -port [<a name="::::GetATrunkPort(2)"><a href="./SystemSetup.tcl.html#::::GetATrunkPort_601">::::GetATrunkPort</a></a> $dutid 0] -fd $fd
    <a name="::snmpDelPortFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session -vlanid [lindex $vlanid 1]\
                     -port [<a name="::MapDUTPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapDUTPortId_120">::MapDUTPortId</a></a> [expr $dutid * 2] $dutid] -fd $fd

    <a name="::snmpDelIPAddrFromVlan(1)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session -vlanid [lindex $vlanid 0] -fd $fd
    <a name="::snmpDelIPAddrFromVlan(2)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session -vlanid [lindex $vlanid 1] -fd $fd

    <a name="::snmpDeleteVlan(1)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session -vlanid [lindex $vlanid 0] -fd $fd
    <a name="::snmpDeleteVlan(2)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session -vlanid [lindex $vlanid 1] -fd $fd

    <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>        &#34;disable ospf&#34;
    <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>        &#34;delete ospf area $vlanarea&#34;

    <a name="::snmpDebug(181)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
}

<span class="comment-line">##########################################################################</span>
<span class="comment-line"># Procedure Name: snmpSetupSingleOSPFVlan</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Ospf topology specific proc that is used to setup a </span>
<span class="comment-line">#              single ospf vlan for a given area.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    vlanip      - Vlan1 IP address</span>
<span class="comment-line">#    vlanarea    - Vlan Area Id</span>
<span class="comment-line">#    ports       - List of ports</span>
<span class="comment-line">#    dutid       - Dut number</span>
<span class="comment-line">#    vlanname    - Vlan name</span>
<span class="comment-line">#    enableospf  - Enable/Disable OSPF in particular DUT</span>
<span class="comment-line">#    tag         - Tagged vlan </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#     fd         - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     list of vlan ids.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetupSingleOSPFVlan -session $sessionid -vlanip 100.101.10.1 </span>
<span class="comment-line">#                            -vlanarea 0.0.0.0 -ports [MapDUTPortId 1] </span>
<span class="comment-line">#                            -dutid 1 -vlanname &#34;vlan1&#34;</span>
<span class="comment-line">##########################################################################</span>
<strong><a name="::::snmpSetupSingleOSPFVlan_2659">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpSetupSingleOSPFVlan">::::snmpSetupSingleOSPFVlan</a></a></strong> { args } {
    <a name="::parse_args(15)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetupSingleOSPFVlan $args {
       session     &#34;&#34;
       vlanip      &#34;&#34;
       vlanarea    &#34;&#34;
       ports       &#34;&#34;
       dutid       &#34;&#34;
       vlanname    &#34;&#34;
       enableospf  &#34;true&#34;
       tag         &#34;&#34;
       fd          &#34;NULL&#34;
       comment     &#34;snmpSetupSingleOSPFVlan&#34;
    }

    set func &#34;snmpSetupSingleOSPFVlan:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $vlanip == &#34;&#34; || $ports == &#34;&#34; || $dutid == &#34;&#34; \
                        || $vlanarea == &#34;&#34; || $vlanname == &#34;&#34;} {
       error &#34;$func SNMP session id, vlanip, ports, vlanarea and dutid must \
              be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(182)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;Session is $session, VlanIp is $vlanip, Ports \
                    is $ports, Area is $vlanarea, DutId is $dutid&#34; $fd

    <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setup a single OSPF VLAN configuration \
                   VLAN IP: $vlanip, ports : $ports, \
                   VLAN Area: $vlanarea, DUT ID: $dutid --&#34;

    <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospf&#34;
    <a name="::snmpChangeIpForwarding(4)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; -fd $fd
    set vlan_id [<a name="::snmpCreateVlan(3)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session -name $vlanname -fd $fd]
    <a name="::snmpAssignIPAddrToVlan(3)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session -vlanid $vlan_id -addr $vlanip \
                           -mask &#34;255.255.255.0&#34; -fd $fd

    if { $tag == &#34;&#34; } {
       <a name="::snmpAddPortToVlan(3)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan_id -port $ports -fd $fd
    } else {
       set tag_id [<a name="::snmpCreateTag(1)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session -tagid $tag -fd $fd]
       <a name="::snmpAddPortToVlan(4)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan_id \
                         -port $ports -tagid $tag_id -fd $fd
    }

    <a name="::snmpChangeIpForwarding(5)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; \
                           -vlanid $vlan_id -fd $fd

    if { $vlanarea != &#34;0.0.0.0&#34; } { 
       <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create ospf area $vlanarea&#34; 
    }

    switch [<a name="::GetVersion(2)"><a href="./misc.tcl.html#::GetVersion_303">::GetVersion</a></a> &#34;DUT$dutid&#34; ] {
       4 {
          <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan $vlanname&#34;
          <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf vlan $vlanname area $vlanarea&#34; }
       6 -
       default {
          <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan $vlanname area $vlanarea&#34; }
    }

    if { $enableospf == &#34;true&#34; } {
      <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable ospf&#34;
    } elseif { $enableospf == &#34;false&#34; } {
      <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospf&#34;
    }

    <a name="::snmpDebug(183)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $vlan_id
}

<span class="comment-line">####################################################################</span>
<span class="comment-line">#  Procedure Name: snmpCleanupSingleOSPFVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Description: ospf topology specific proc that is used to cleanup </span>
<span class="comment-line">#               single ospf vlan cinfiguration for a given area. </span>
<span class="comment-line">#               opposite of SetupSingleOSPFVlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    vlanid      - Vlanid's returned from snmpSetupSingleOSPFVlan</span>
<span class="comment-line">#    vlanarea    - Vlan Area Id</span>
<span class="comment-line">#    ports       - List of ports</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd          - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     None.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpCleanupSingleOSPFVlan -session $sessionid -vlanid $vlanList</span>
<span class="comment-line">#                              -vlanarea $vlanArea </span>
<span class="comment-line">#######################################################################</span>
<strong><a name="::::snmpCleanupSingleOSPFVlan_2759">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpCleanupSingleOSPFVlan">::::snmpCleanupSingleOSPFVlan</a></a></strong> { args } {
    <a name="::parse_args(16)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpCleanupSingleOSPFVlan $args {
       session   &#34;&#34;
       vlanid    &#34;&#34;
       vlanarea  &#34;&#34;
       ports     &#34;&#34;
       fd        &#34;NULL&#34;
       comment   &#34;snmpCleanupSingleOSPFVlan&#34;
    }

    set func &#34;snmpCleanupSingleOSPFVlan:&#34;

    if { $session == &#34;&#34; || $vlanid == &#34;&#34; || $vlanarea == &#34;&#34; || $ports == &#34;&#34; } {
       error &#34;$func SNMP sessionid,vlanid,vlanarea and ports must be specified&#34;
    }

    <a name="::snmpDebug(184)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;session is $session, area is $vlanarea&#34; $fd
    <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Cleanup the configuration performed by \
                       snmpSetupSingleOSPFVlan procedure --&#34;

    <a name="::snmpDelPortFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelPortFromVlan_1149">::snmpDelPortFromVlan</a></a> -session $session -vlanid $vlanid -port $ports -fd $fd
    <a name="::snmpDelIPAddrFromVlan(3)"><a href="./snmplib.tcl.html#::snmpDelIPAddrFromVlan_1898">::snmpDelIPAddrFromVlan</a></a> -session $session -vlanid $vlanid  -fd $fd

    <a name="::snmpDeleteVlan(3)"><a href="./snmplib.tcl.html#::snmpDeleteVlan_1005">::snmpDeleteVlan</a></a> -session $session -vlanid $vlanid -fd $fd

    <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>        &#34;disable ospf&#34;
    if { $vlanarea != &#34;0.0.0.0&#34; } {
       <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;delete ospf area $vlanarea&#34;
    }

    <a name="::snmpDebug(185)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
}

<span class="comment-line">##########################################################################</span>
<span class="comment-line"># Procedure Name: snmpSetupSingleOSPFVlanP2P</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Ospf pointToPoint topology specific proc that is used to </span>
<span class="comment-line">#              setup a single pointToPoint ospf vlan for a given area.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    vlanip      - Vlan1 IP address</span>
<span class="comment-line">#    vlanarea    - Vlan Area Id</span>
<span class="comment-line">#    ports       - List of ports</span>
<span class="comment-line">#    dutid       - Dut number</span>
<span class="comment-line">#    vlanname    - Vlan name</span>
<span class="comment-line">#    enableospf  - Enable/Disable OSPF in particular DUT</span>
<span class="comment-line">#    tag         - Tagged vlan</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#     fd         - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     list of vlan ids.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpSetupSingleOSPFVlanP2P -session $sessionid -vlanip 100.101.10.1</span>
<span class="comment-line">#                               -vlanarea 0.0.0.0 -ports [MapDUTPortId 1]</span>
<span class="comment-line">#                               -dutid 1 -vlanname &#34;vlan1&#34;</span>
<span class="comment-line">##########################################################################</span>
<strong><a name="::::snmpSetupSingleOSPFVlanP2P_2825">proc <a href="snmpOSPFLib.tcl-annot.html#::::snmpSetupSingleOSPFVlanP2P">::::snmpSetupSingleOSPFVlanP2P</a></a></strong> { args } {
    <a name="::parse_args(17)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpSetupSingleOSPFVlanP2P $args {
       session     &#34;&#34;
       vlanip      &#34;&#34;
       vlanarea    &#34;&#34;
       ports       &#34;&#34;
       dutid       &#34;&#34;
       vlanname    &#34;&#34;
       enableospf  &#34;true&#34;
       tag         &#34;&#34;
       fd          &#34;NULL&#34;
       comment     &#34;snmpSetupSingleOSPFVlanP2P&#34;
    }

    set func &#34;snmpSetupSingleOSPFVlanP2P:&#34;
    set retVal 0

    if { $session == &#34;&#34; || $vlanip == &#34;&#34; || $ports == &#34;&#34; || $dutid == &#34;&#34; \
                        || $vlanarea == &#34;&#34; || $vlanname == &#34;&#34;} {
       error &#34;$func SNMP session id, vlanip, ports, vlanarea and dutid must \
              be specified&#34;
       return $retVal
    }

    <a name="::snmpDebug(186)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;Session is $session, VlanIp is $vlanip, Ports \
                    is $ports, Area is $vlanarea, DutId is $dutid&#34; $fd

    <a name="::result_debug(17)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Setup a single OSPF VLAN P2P configuration \
                       VLAN IP: $vlanip, ports :$ports, VLAN Area: $vlanarea, \
                       DUT ID: $dutid --&#34;

    <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;disable ospf&#34;
    <a name="::snmpChangeIpForwarding(6)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; -fd $fd
    set vlan_id [<a name="::snmpCreateVlan(4)"><a href="./snmplib.tcl.html#::snmpCreateVlan_939">::snmpCreateVlan</a></a> -session $session -name $vlanname -fd $fd]
    <a name="::snmpAssignIPAddrToVlan(4)"><a href="./snmplib.tcl.html#::snmpAssignIPAddrToVlan_1836">::snmpAssignIPAddrToVlan</a></a> -session $session -vlanid $vlan_id -addr $vlanip \
                           -mask &#34;255.255.255.0&#34; -fd $fd

    if { $tag == &#34;&#34; } {
       <a name="::snmpAddPortToVlan(5)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan_id -port $ports -fd $fd
    } else {
       set tag_id [<a name="::snmpCreateTag(2)"><a href="./snmplib.tcl.html#::snmpCreateTag_1223">::snmpCreateTag</a></a> -session $session -tagid $tag -fd $fd]
       <a name="::snmpAddPortToVlan(6)"><a href="./snmplib.tcl.html#::snmpAddPortToVlan_1063">::snmpAddPortToVlan</a></a> -session $session -vlanid $vlan_id \
                         -port $ports -tagid $tag_id -fd $fd
    }

    <a name="::snmpChangeIpForwarding(7)"><a href="./snmpL3Lib.tcl.html#::snmpChangeIpForwarding_480">::snmpChangeIpForwarding</a></a> -session $session -status &#34;enable&#34; \
                           -vlanid $vlan_id -fd $fd

    if { $vlanarea != &#34;0.0.0.0&#34; } {
       <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create ospf area $vlanarea&#34;
    }

    <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a>  &#34;configure ospf add vlan $vlanname area $vlanarea link point&#34;

    if { $enableospf == &#34;true&#34; } {
      <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;enable ospf&#34;
    }

    <a name="::snmpDebug(187)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
    return $vlan_id
}

<span class="comment-line">##########################################################################</span>
<span class="comment-line"># Procedure Name: SendOspfPacket</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Build and Send a malformed OSPF Packet.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    txPortId      - Transmitting port number</span>
<span class="comment-line">#    sourceMac     - Source MAC address</span>
<span class="comment-line">#    destMac       - Destination MAC address</span>
<span class="comment-line">#    sourceIp      - Source IP address</span>
<span class="comment-line">#    destIp        - Destination IP address</span>
<span class="comment-line">#    ttl           - TTL value</span>
<span class="comment-line">#    numFrames     - Number of Frames</span>
<span class="comment-line">#    tag           - Tagged vlan</span>
<span class="comment-line">#    dataPattern   - Data pattern to be sent</span>
<span class="comment-line">#    ipTotalLength - IP total length</span>
<span class="comment-line">#    packetType    - Packet type</span>
<span class="comment-line">#                    01-Hello</span>
<span class="comment-line">#                    02-DD</span>
<span class="comment-line">#                    03-LsUpdate</span>
<span class="comment-line">#                    04-LsReq</span>
<span class="comment-line">#                    05-LsAck</span>
<span class="comment-line">#                 </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#     fd         - File descriptor of open log file</span>
<span class="comment-line">#    comment     - Comments to be logged in log file</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Output Variables:</span>
<span class="comment-line">#     list of vlan ids.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    0 - On failure</span>
<span class="comment-line">#    1 - On success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    SendOspfPacket -txPortId 2 -sourceIp &#34;11.11.11.2&#34; -numFrames 1 \</span>
<span class="comment-line">#                   -ipTotalLength 48 -packettype 02</span>
<span class="comment-line">##########################################################################</span>
<strong><a name="::::SendOspfPacket_2925">proc <a href="snmpOSPFLib.tcl-annot.html#::::SendOspfPacket">::::SendOspfPacket</a></a></strong> {args} {
   <a name="::parse_args(18)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> SendOspfPacket $args {
     txPortId     &#34;1&#34;
     sourceMac    &#34;default&#34;
     destMac      &#34;01 00 5E 00 00 05&#34;
     sourceIp     &#34;127.0.0.1&#34;
     destIp       &#34;224.0.0.5&#34;
     ttl          &#34;255&#34;
     numFrames    &#34;1&#34;
     tag          &#34;none&#34;
     dataPattern  &#34;03 01 00 30 14 24 0B 35 0B 0B 0B 00 AF 28 00 00 00 00 00 00 00 00 00 00 FF FF FF 00 00 0A 02 01 00 00 00 28 0B 0B 0B 02 00 00 00 00 01 01 00 00&#34;
     ipTotalLength 20
     packetType    01
     fd            &#34;NULL&#34;
     comment       &#34;SendOspfPacket&#34;
   }

   set func &#34;SendOspfPacket:&#34;

   <a name="::snmpDebug(188)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;txPort is $txPortId&#34; $fd
   <a name="::result_debug(18)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Sending OSPF Packet from port $txPortId --&#34;

   <a name="::result_debug(19)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Host ($sourceIp) sending a Ospf \
                  message ([lindex $dataPattern 1]) on portId $txPortId&#34;   

   set numIxiaCd [<a name="::::GetNumIxiaCd(1)"><a href="./SystemSetup.tcl.html#::::GetNumIxiaCd_546">::::GetNumIxiaCd</a></a> $txPortId]
   set rxPo [<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId chasisId card port]
   if {$tag != &#34;none&#34; } { set wTag &#34;true&#34; } else {set wTag &#34;false&#34; }
   global startCardNum

   set dataPattern &#34;03 $packetType 00 30 14 24 0B 35 0B 0B 0B 00 AF 28 00 00 00 00 00 00 00 00 00 00 FF FF FF 00 00 0A 02 01 00 00 00 28 0B 0B 0B 02 00 00 00 00 01 01 00 00&#34;

   set frameSize [expr 38 + [llength $dataPattern] ]
   <a name="::result_debug(20)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;FrameSize: $frameSize&#34;
   set frameSent [<a name="::ixiaConf_2Ports_ip(1)"><a href="./ePTL3Tx.tcl.html#::ixiaConf_2Ports_ip_867">::ixiaConf_2Ports_ip</a></a> -numIxiaCd $numIxiaCd -txChas $chasisId \
                                     -txCard $card -txPort $port \
                                     -rxChas $chasisId -rxCard $card \
                                     -rxPort $rxPo -ipProtocol &#34;89&#34; \
                                     -sMacAddr $sourceMac -dMacAddr $destMac \
                                     -sIpAddr $sourceIp -dIpAddr $destIp \
                                     -ttl $ttl -TOS &#34;0xC0&#34; \
                                     -ipTotalLength $ipTotalLength \
	                             -numFrames $numFrames -wTag $wTag \
                                     -tagNo $tag  -dataPattern $dataPattern \
                                     -frameSize $frameSize]  

   <a name="::result_debug(21)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;OspfFrame: $frameSent&#34;
   <a name="::snmpDebug(189)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func - End\n&#34; $fd
   return $frameSent
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
