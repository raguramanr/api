<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>snmpVRRPLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#snmpVRRPLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>snmpVRRPLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="snmpVRRPLib.tcl-annot.html">annotations</a> | <a href="snmpVRRPLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#!/usr/bin/tclsh</span>


<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpConfigVrrpIf</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates a VRRP Interface for a given vlan. </span>
<span class="comment-line">#  Assigns ip address in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    ipa        - IP address of the VLAN on which VRRP interface. </span>
<span class="comment-line">#                 needs to be created.</span>
<span class="comment-line">#    vrId       - Virtual router id of the VRRP domain which needs to be deleted</span>
<span class="comment-line">#    primIpa    - IP address of the Master router for the VRRP domain. </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    adminState - Admin State of the VRRP Interface.</span>
<span class="comment-line">#    priority   - Operational priority of the interface.</span>
<span class="comment-line">#    authType   - Authentication type for the VRRP interface.</span>
<span class="comment-line">#    authKey    - Authentication key for the VRRP interface.</span>
<span class="comment-line">#    interval   - Advertisement interval.</span>
<span class="comment-line">#    mode       - Preemt mode.</span>
<span class="comment-line">#    fd - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpConfigVrrpIf -session $sessionid -ipa &#34;10.0.0.1&#34; -vrId 123 -primIpa </span>
<span class="comment-line">#         10.0.0.1 -priority 155 -adminState 2 -authType 2 -authKey 12345678</span>
<span class="comment-line">#         -interval 5 -mode 1</span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpConfigVrrpIf_40">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpConfigVrrpIf">::::snmpConfigVrrpIf</a></a></strong> { args } {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpConfigVrrpIf $args {
       session    &#34;&#34;
       ipa        &#34;&#34;
       vrId       &#34;&#34;
       primIpa    &#34;&#34;
       adminState &#34;&#34;
       priority   &#34;&#34;
       authType   &#34;&#34;
       authKey    &#34;&#34;
       interval   &#34;&#34;
       mode       &#34;&#34;
       <a name="::protocol(1)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a>   &#34;&#34;
       fd &#34;NULL&#34;
    }
 
    set func &#34;snmpConfigVrrpIf:&#34; 


    if { $session == &#34;&#34; || $ipa == &#34;&#34; || $primIpa == &#34;&#34; || $vrId == &#34;&#34;} {
       error &#34;$func session, ipaddress and Virtual Router Id must be \
                     specified&#34;
       return Error
    }

   if { $ipa == $primIpa &amp;&amp; $priority != 255 } {
       <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func Priority should be set to 255 for VRRP master&#34;
       return Error
   }

    <a name="::snmpDebug(1)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session ipaddress-$ipa fd-$fd -Start&#34; $fd
    <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n-- Enabling VRRP on the interface $ipa --&#34;

    set ifIndex [<a name="::snmpGetIfIndexForIpAddr(1)"><a href="./snmpL3Lib.tcl.html#::snmpGetIfIndexForIpAddr_29">::snmpGetIfIndexForIpAddr</a></a> $session $ipa $fd]

    if {$ifIndex == &#34;&#34;} {
       <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Ip address $ipa is not associated with any vlan&#34;
       return Error
    }

    set var &#34;snmpSet -session $session -oid \
             vrrpOperPrimaryIpAddr.$ifIndex.$vrId -type a -val $primIpa&#34;

    if {$adminState != &#34;&#34;} {
       lappend var -oid vrrpOperAdminState.$ifIndex.$vrId -type i \
                    -val $adminState
    }
 
    if {$priority != &#34;&#34;} {
       lappend var -oid vrrpOperPriority.$ifIndex.$vrId -type i \
                    -val $priority
    }

    if {$authType != &#34;&#34;} {
       lappend var -oid vrrpOperAuthType.$ifIndex.$vrId -type i \
                    -val $authType
    }

    if {$authKey != &#34;&#34;} {
       lappend var -oid vrrpOperAuthKey.$ifIndex.$vrId -type s \
                    -val $authKey
    }

    if {$interval != &#34;&#34;} {
       lappend var -oid vrrpOperAdvertisementInterval.$ifIndex.$vrId -type i \
                    -val $interval
    }

    if {$mode != &#34;&#34;} {
       lappend var -oid vrrpOperPreemptMode.$ifIndex.$vrId -type i \
                    -val $mode
    }

    if {$protocol != &#34;&#34;} {
       lappend var -oid vrrpOperProtocol.$ifIndex.$vrId -type i \
                    -val $protocol
    }

    lappend var -oid vrrpOperRowStatus.$ifIndex.$vrId -type i -val 4

    <span class="comment-line"># ---- Enable rip2IfConfStatus.for this interface</span>
    set result [eval $var]
    <a name="::snmpDebug(2)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpSet-$result&#34; $fd
    <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Configuring VRRP interface $ipa is Successful&#34;
    return $result
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpUnconfigVrrpIf</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure creates a VRRP Interface for a given vlan. </span>
<span class="comment-line">#  ip address in the given DUT.</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    ipa        - IP address of the VLAN on which VRRP should be disabled </span>
<span class="comment-line">#    vrId       - Virtual router id of the VRRP domain which needs to be deleted</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpUnconfigVrrpIf -session $sessionid -ipa &#34;10.0.0.1&#34; -vrId 123 </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpUnconfigVrrpIf_152">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpUnconfigVrrpIf">::::snmpUnconfigVrrpIf</a></a></strong> { args } {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpUnconfigVrrpIf $args {
       session &#34;&#34;
       ipa     &#34;&#34;
       vrId    &#34;&#34;
       fd &#34;NULL&#34;
    }
 
    set func &#34;snmpUnconfigVrrpIf:&#34; 


    if { $session == &#34;&#34; || $ipa == &#34;&#34; || $vrId == &#34;&#34;} {
       error &#34;$func session, ipaddress and Virtual Router Id must be \
                     specified&#34;
       return Error
    }

    <a name="::snmpDebug(3)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func session-$session ipaddress-$ipa \
                      vrId-$vrId fd-$fd -Start&#34; $fd

    set ifIndex [<a name="::snmpGetIfIndexForIpAddr(2)"><a href="./snmpL3Lib.tcl.html#::snmpGetIfIndexForIpAddr_29">::snmpGetIfIndexForIpAddr</a></a> $session $ipa $fd]

    if {$ifIndex == &#34;&#34;} {
       <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func address $ipa is not associated with any vlan&#34;
       return Error
    }

    <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;-- Unconfiguring VRRP interface $ipa --&#34;

    set result [snmpSet -session $session -oid \
                vrrpOperAdminState.$ifIndex.$vrId -type i -val 2 -oid \
                vrrpOperRowStatus.$ifIndex.$vrId -type i -val 6]

    return $result
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVrrpVerifyIf</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies VRRP Interface for the specified . </span>
<span class="comment-line">#  parameters.                 </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session - Session identifier which identifies the connection</span>
<span class="comment-line">#              with the DUT</span>
<span class="comment-line">#    ipa  - IP address of the VLAN for which VRRP parameters needs </span>
<span class="comment-line">#                 to be verified</span>
<span class="comment-line">#    vrId - Virtual router Id for which VRRP parameters needs </span>
<span class="comment-line">#                 to be verified</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    adminState - Admin State of the VRRP Interface to be verified.</span>
<span class="comment-line">#    priority   - Operational priority of the interface to be verified.</span>
<span class="comment-line">#    authType   - Authentication type for the VRRP interface to be verified.</span>
<span class="comment-line">#    authKey    - Authentication key for the VRRP interface to be verified.</span>
<span class="comment-line">#    interval   - Advertisement interval to be verified.</span>
<span class="comment-line">#    mode       - Preemt mode to be verified.</span>
<span class="comment-line">#    macAddr    - Virtual Mac address</span>
<span class="comment-line">#    operState  - oparation state of the VRRP router.</span>
<span class="comment-line">#    addrCount  - Address count for the VRRP domain.</span>
<span class="comment-line">#    masterAddr - IP address of the Master VRRP router</span>
<span class="comment-line">#    rtrUpTime  - Time stamp when the virtual router is transitioned out of</span>
<span class="comment-line">#                 initialised state</span>
<span class="comment-line">#    protocol   - protocol being controlled by this Virtual Router</span>
<span class="comment-line">#    fd         - File descriptor for logging the command outputs   </span>
<span class="comment-line">#    comment    - User comments for purpose of calling this function</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVrrpVerifyIf -session $sessionid -ipa &#34;10.0.0.1&#34; -vrId 123 </span>
<span class="comment-line">#                     -primIpa 10.0.0.1 -priority 255 -operState 3 -adminState 2</span>
<span class="comment-line">#                     -fd $fd_res -comment &#34;verifying VRRP oper status </span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpVrrpVerifyIf_232">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpVrrpVerifyIf">::::snmpVrrpVerifyIf</a></a></strong> { args } {
    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVrrpVerifyIf $args {
       session    &#34;&#34;
       ipa        &#34;&#34;
       vrId       &#34;&#34;
       primIpa    &#34;&#34;
       adminState &#34;&#34;
       priority   &#34;&#34;
       authType   &#34;&#34;
       authKey    &#34;&#34;
       interval   &#34;&#34;
       mode       &#34;&#34;
       macAddr    &#34;&#34;
       operState  &#34;&#34;
       addrCount  &#34;&#34;
       masterAddr &#34;&#34;
       rtrUpTime  &#34;&#34;
       <a name="::protocol(2)"><a href="./ePTClient.tcl.html#::protocol_728">::protocol</a></a>   &#34;&#34;
       fd         &#34;NULL&#34;
       comment    &#34;Verifying VRRP parameters on the interface&#34;
    }
 
    set func &#34;snmpVrrpVerifyIf:&#34; 

    if { $session == &#34;&#34; || $ipa == &#34;&#34; || $vrId == &#34;&#34;} {
       error &#34;$func session, ipaddress and Virtual Router Id must be \
                     specified&#34;
       return Error
    }

    set ifIndex [<a name="::snmpGetIfIndexForIpAddr(3)"><a href="./snmpL3Lib.tcl.html#::snmpGetIfIndexForIpAddr_29">::snmpGetIfIndexForIpAddr</a></a> $session $ipa $fd]

    if {$ifIndex == &#34;&#34;} {
       <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Ip address $ipa is not associated with any vlan&#34;
       return
    }

    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> $comment

    if {$primIpa != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperPrimaryIpAddr.$ifIndex.$vrId]
       <a name="::snmpDebug(4)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       set val [<a name="::snmpUtilGetVal(1)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $var]
       <a name="::snmpDebug(5)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP primary ip address is $val&#34; $fd

       if {$val != $primIpa} {
          <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func Primary Ip address expected $primIpa but got $val&#34;
       } else {
          <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func Primary Ip address expected $primIpa and got $val&#34;
       }
    }

    if {$adminState != &#34;&#34;} {
       if { $adminState == 1 } {
          set adminState up
       } elseif { $adminState == 2 } {
          set adminState down
       }

       set var [snmpGet -session $session -oid \
                          vrrpOperAdminState.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(2)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $var]

       <a name="::snmpDebug(6)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(7)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP admin state is $val&#34; $fd

       if {$val != $adminState} {
          <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func admin state expected $adminState but got $val&#34;
       } else {
          <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func admin state expected $adminState and got $val&#34;
       }

    }
 
    if {$priority != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperPriority.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(3)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $var]

       <a name="::snmpDebug(8)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(9)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP priority is $val&#34; $fd

       if {$val != $priority} {
          <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func priority expected $priority but got $val&#34;
       } else {
          <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func priority expected $priority and got $val&#34;
       }
    }

    if {$authType != &#34;&#34;} {
       if { $authType == 1 } {
          set authType noAuthentication
       } elseif { $authType == 2 } {
          set authType simpleTextPassword
       } elseif { $authType == 3 } {
          set authType ipAuthenticationHeader
       }

       set var [snmpGet -session $session -oid \
                          vrrpOperAuthType.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(4)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $var]

       <a name="::snmpDebug(10)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(11)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP auth type is $val&#34; $fd

       if {$val != $authType} {
          <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth type expected $authType but got $val&#34;
       } else {
          <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth type expected $authType and got $val&#34;
       }
    }

    if {$authKey != &#34;&#34;} {
       set var [snmpGet -session $session -oid vrrpOperAuthKey.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(5)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> str $var]

       <a name="::snmpDebug(12)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(13)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP auth key is $val&#34; $fd

       if {$val != $authKey} {
          <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth key expected $authKey but got $val&#34;
       } else {
          <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth key expected $authKey and got $val&#34;
       }
    }

    if {$interval != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperAdvertisementInterval.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(6)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> intsec $var]

       if {$val != $interval} {
          <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval expected $interval but got $val&#34;
       } else {
          <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval expected $interval and got $val&#34;
       }
    }

    if {$mode != &#34;&#34;} {

       if { $mode == 1 } {
          set mode true
       } elseif { $mode == 2 } {
          set mode false
       }

       set var [snmpGet -session $session -oid \
                          vrrpOperPreemptMode.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(7)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $var]

       <a name="::snmpDebug(14)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(15)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP preempt mode is $val&#34; $fd

       if {$val != $mode} {
          <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func mode expected $mode but got $val&#34;
       } else {
          <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func mode expected $mode and got $val&#34;
       }
    }

    if { $macAddr != &#34;&#34; } {
       set var [snmpGet -session $session -oid \
                          vrrpOperVirtualMacAddr.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(8)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> mac $var]

       <a name="::snmpDebug(16)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(17)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP Mac address is $val&#34; $fd

       if {$val != $macAddr} {
          <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func virtual mac address expected $macAddr but \
                          got $val&#34;
       } else {
          <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func virtual mac address expected $macAddr and \
                          got $val&#34;
       }
    }

    if {$operState != &#34;&#34;} {

       if { $operState == 1 } {
          set operState initialize
       } elseif { $operState == 2 } {
          set operState backup
       } elseif { $operState == 3 } {
          set operState master
       }

       set var [snmpGet -session $session -oid vrrpOperState.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(9)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $var]

       <a name="::snmpDebug(18)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(19)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP oper state is $val&#34; $fd

       if {$val != $operState} {
          <a name="::result_error(10)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func operState expected $operState but got $val&#34;
       } else {
          <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func operState expected $operState and got $val&#34;
       }
    }

    if {$addrCount !=  &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperIpAddrCount.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(10)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> int $var]

       <a name="::snmpDebug(20)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(21)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP ip address count is $val&#34; $fd

       if {$val != $addrCount} {
          <a name="::result_error(11)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ip address count expected $addrCount but got $val&#34;
       } else {
          <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ip address count expected $addrCount and got $val&#34;
       }
    }

    if {$masterAddr != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperMasterIpAddr.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(11)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $var]

       <a name="::snmpDebug(22)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(23)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP master ip address is $val&#34; $fd

       if {$val != $masterAddr} {
          <a name="::result_error(12)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func master Ip address expected $masterAddr but \
           got $val&#34;
       } else {
          <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func master Ip address expected $masterAddr and got $val&#34;
       }
    }

    if {$rtrUpTime != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpOperVirtualRouterUpTime.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(12)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> tick $var]

       <a name="::snmpDebug(24)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(25)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP router up time is $val&#34; $fd

       <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func Router up time is $val&#34;
    }

    if {$protocol != &#34;&#34;} {

       if { $protocol == 1 } {
          set protocol ip
       } elseif {$protocol == 2 } {
          set protocol bridge
       } elseif {$protocol == 3 } {
          set protocol decnet
       } elseif {$protocol == 4 } {
          set protocol other
       }

       set var [snmpGet -session $session -oid vrrpOperProtocol.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(13)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> inttext $var]

       <a name="::snmpDebug(26)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(27)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP protocol is $val&#34; $fd

       if {$val != $protocol} {
          <a name="::result_error(13)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func protocol expected $protocol but got $val&#34;
       } else {
          <a name="::result_ok(13)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func protocol expected $protocol and got $val&#34;
       }
    }
    <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    return success
}


<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVrrpVerifyRtrStats</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies VRRP Interface statistics for the . </span>
<span class="comment-line">#  pspecified arameters</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    checkSumError   - Total number of packets received with checksum error</span>
<span class="comment-line">#                      for VRRP</span>
<span class="comment-line">#    vrIdError       - Total number of packets received with invalid VID</span>
<span class="comment-line">#    versionError    - Total number of packets received with unsupported </span>
<span class="comment-line">#                      VRRP version</span>
<span class="comment-line">#    fd              - File descriptor for logging the command outputs   </span>
<span class="comment-line">#    comment         - User comments for purpose of calling this function</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVrrpVerifyRtrStats -session $sessionid -ipa &#34;10.0.0.1&#34; -vrid 123</span>
<span class="comment-line">#                        -invalidAuthType 3 -pktLenError 4 -zeroPrioPktSent 5</span>
<span class="comment-line">#                        -fd $fd_res -comment &#34;verifying authentication error</span>
<span class="comment-line">#                         statistics&#34;</span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpVrrpVerifyRtrStats_536">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpVrrpVerifyRtrStats">::::snmpVrrpVerifyRtrStats</a></a></strong> { args } {
    <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVrrpVerifyRtrStats $args {
       session         &#34;&#34;
       checkSumError   &#34;&#34;
       vrIdError       &#34;&#34;
       versionError    &#34;&#34;
       status          &#34;eq&#34;
       fd              &#34;NULL&#34;
       comment         &#34;Verifying Router statistic parameters&#34;
    }
 
    set func &#34;snmpVrrpVerifyRtrStats:&#34;

    if { $session == &#34;&#34;} {
       error &#34;$func session Id must be specified&#34;
       return Error
    }

    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> $comment

    set status [string tolower $status]

    if {$checkSumError != &#34;&#34;} {
       set var [snmpGet -session $session -oid vrrpRouterChecksumErrors.0]
       set val [<a name="::snmpUtilGetVal(14)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(28)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(29)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP checksum error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $checkSumError} {
            <a name="::result_error(14)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterChecksumErrors expected \
                          $checkSumError but got $val&#34;
          } else {
            <a name="::result_ok(14)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterChecksumErrors expected \
                          $checkSumError and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $checkSumError} {
            <a name="::result_ok(15)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterChecksumErrors expected more than \
                          $checkSumError and got $val&#34;
          } else {
            <a name="::result_error(15)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterChecksumErrors expected more than \
                          $checkSumError but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $checkSumError} {
            <a name="::result_ok(16)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterChecksumErrors expected less than \
                          $checkSumError and got $val&#34;
          } else {
            <a name="::result_error(16)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterChecksumErrors expected less than \
                          $checkSumError but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt; $checkSumError} {
            <a name="::result_ok(17)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterChecksumErrors expected more than \
                        or equal to $checkSumError and got $val&#34;
          } else {
            <a name="::result_error(17)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterChecksumErrors expected more than \
                          or equal to $checkSumError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $checkSumError} {
            <a name="::result_ok(18)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterChecksumErrors expected less than \
                       or equal to $checkSumError and got $val&#34;
          } else {
            <a name="::result_error(18)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterChecksumErrors expected less than \
                          or equal to $checkSumError but got $val&#34;
          }
       }
    }

    if {$vrIdError != &#34;&#34;} {
       set var [snmpGet -session $session -oid vrrpRouterVrIdErrors.0]
       set val [<a name="::snmpUtilGetVal(15)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(30)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(31)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP VRID is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $vrIdError} {
            <a name="::result_error(19)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVrIdErrors expected \
                          $vrIdError but got $val&#34;
          } else {
            <a name="::result_ok(19)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVrIdErrors expected \
                          $vrIdError and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $vrIdError} {
            <a name="::result_ok(20)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVrIdErrors expected more than \
                          $vrIdError and got $val&#34;
          } else {
            <a name="::result_error(20)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVrIdErrors expected more than \
                          $vrIdError but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $vrIdError} {
            <a name="::result_ok(21)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVrIdErrors expected less than \
                          $vrIdError and got $val&#34;
          } else {
            <a name="::result_error(21)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVrIdErrors expected less than \
                          $vrIdError but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt; $vrIdError} {
            <a name="::result_ok(22)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVrIdErrors expected more than \
                        or equal to $vrIdError and got $val&#34;
          } else {
            <a name="::result_error(22)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVrIdErrors expected more than \
                          or equal to $vrIdError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $vrIdError} {
            <a name="::result_ok(23)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVrIdErrors expected less than \
                       or equal to $vrIdError and got $val&#34;
          } else {
            <a name="::result_error(23)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVrIdErrors expected less than \
                          or equal to $vrIdError but got $val&#34;
          }
       }
    }

    if {$versionError != &#34;&#34;} {
       set var [snmpGet -session $session -oid vrrpRouterVersionErrors.0]
       set val [<a name="::snmpUtilGetVal(16)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(32)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(33)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP version error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $versionError} {
            <a name="::result_error(24)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVersionErrors expected \
                          $versionError but got $val&#34;
          } else {
            <a name="::result_ok(24)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVersionErrors expected \
                          $versionError and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $versionError} {
            <a name="::result_ok(25)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVersionErrors expected more than \
                          $versionError and got $val&#34;
          } else {
            <a name="::result_error(25)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVersionErrors expected more than \
                          $versionError but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $versionError} {
            <a name="::result_ok(26)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVersionErrors expected less than \
                          $versionError and got $val&#34;
          } else {
            <a name="::result_error(26)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVersionErrors expected less than \
                          $versionError but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt; $versionError} {
            <a name="::result_ok(27)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVersionErrors expected more than \
                        or equal to $versionError and got $val&#34;
          } else {
            <a name="::result_error(27)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVersionErrors expected more than \
                          or equal to $versionError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $versionError} {
            <a name="::result_ok(28)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpRouterVersionErrors expected less than \
                       or equal to $versionError and got $val&#34;
          } else {
            <a name="::result_error(28)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpRouterVersionErrors expected less than \
                          or equal to $versionError but got $val&#34;
          }
       }
    }

    <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    return success
}
<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpVrrpVerifyStats</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure verifies VRRP Interface statistics for the . </span>
<span class="comment-line">#  pspecified arameters</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session     - Session identifier which identifies the connection</span>
<span class="comment-line">#                  with the DUT</span>
<span class="comment-line">#    ipa         - IP address of the VLAN for which VRRP parameters needs </span>
<span class="comment-line">#                   to be verified</span>
<span class="comment-line">#    vrId        - Virtual router Id for which VRRP parameters needs </span>
<span class="comment-line">#                  to be verified</span>
<span class="comment-line">#    toMaster    - Total number of times that this virtual router's state</span>
<span class="comment-line">#                  has transitioned to MASTER       </span>
<span class="comment-line">#    advRecv     - Total number of adverisements received.        </span>
<span class="comment-line">#    intvError   - Total number of VRRP advertisement packets received</span>
<span class="comment-line">#                  for which the advertisement interval is different than the</span>
<span class="comment-line">#                  one configured for the local virtual router     </span>
<span class="comment-line">#    authFailure - The total number of VRRP packets received that do not pass</span>
<span class="comment-line">#                  the authentication check   </span>
<span class="comment-line">#    ttlError    - The total number of VRRP packets received by the virtual</span>
<span class="comment-line">#                  router with IP TTL (Time-To-Live) not equal to 255   </span>
<span class="comment-line">#    zeroPrioPktRecv - Total number of VRRP packets received by the virtual</span>
<span class="comment-line">#                      router with a priority of '0'</span>
<span class="comment-line">#    zeroPrioPktSent - Total number of VRRP packets sent by the virtual router</span>
<span class="comment-line">#                      with a priority of '0'</span>
<span class="comment-line">#    invalidPktsRecv - Total number of VRRP packets received by the virtual </span>
<span class="comment-line">#                      router with an invalid value in the 'type' field.</span>
<span class="comment-line">#    addrListError   - Total number of packets received for which the address</span>
<span class="comment-line">#                      list does not match the locally configured list for the</span>
<span class="comment-line">#                      virtual router</span>
<span class="comment-line">#    invalidAuthType - Total number of packets received with an unknown</span>
<span class="comment-line">#    authMismatch    - total number of packets received with 'Auth Type' not</span>
<span class="comment-line">#                      equal to the locally configured authentication method</span>
<span class="comment-line">#    pktLenError     - Total number of packets received with a packet length</span>
<span class="comment-line">#                      less than the length of the VRRP header</span>
<span class="comment-line"># </span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpVrrpVerifyStats -session $sessionid -ipa &#34;10.0.0.1&#34; -vrid 123</span>
<span class="comment-line">#                        -invalidAuthType 3 -pktLenError 4 -zeroPrioPktSent 5</span>
<span class="comment-line">###############################################################</span>

<strong><a name="::::snmpVrrpVerifyStats_764">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpVrrpVerifyStats">::::snmpVrrpVerifyStats</a></a></strong> { args } {
    <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpVrrpVerifyStats $args {
       session         &#34;&#34;
       ipa             &#34;&#34;
       vrId            &#34;&#34;
       toMaster        &#34;&#34;
       advRecv         &#34;&#34;
       intvError       &#34;&#34;
       authFailure     &#34;&#34;
       ttlError        &#34;&#34;
       zeroPrioPktRecv &#34;&#34;
       zeroPrioPktSent &#34;&#34;
       invalidPktsRecv &#34;&#34;
       addrListError   &#34;&#34;
       invalidAuthType &#34;&#34;
       authMismatch    &#34;&#34;
       pktLenError     &#34;&#34;
       status          &#34;eq&#34;
       comment         &#34;Verifying interface statistic parameters&#34;
       fd              &#34;NULL&#34;
    }
 
    set func &#34;snmpVrrpVerifyStats:&#34;

    if { $session == &#34;&#34; || $ipa == &#34;&#34; || $vrId == &#34;&#34;} {
       error &#34;$func session, ipaddress and Virtual Router Id must be \
                     specified&#34;
       return Error
    }

    set ifIndex [<a name="::snmpGetIfIndexForIpAddr(4)"><a href="./snmpL3Lib.tcl.html#::snmpGetIfIndexForIpAddr_29">::snmpGetIfIndexForIpAddr</a></a> $session $ipa $fd]

    if {$ifIndex == &#34;&#34;} {
       <a name="::result_error(29)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Ip address $ipa is not associated with any vlan&#34;
       return
    }

    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> $comment

    set status [string tolower $status]

    if {$toMaster != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                         vrrpStatsBecomeMaster.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(17)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(34)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(35)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP to master is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $toMaster} {
            <a name="::result_error(30)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpStatsBecomeMaster expected $toMaster but \
                           got $val&#34;
          } else {
            <a name="::result_ok(29)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpStatsBecomeMaster expected $toMaster and got \
                       $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $toMaster} {
            <a name="::result_ok(30)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpStatsBecomeMaster expected more than $toMaster\
                       and got $val&#34;
          } else {
            <a name="::result_error(31)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpStatsBecomeMaster expected more than \
                          $toMaster but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $toMaster} {
            <a name="::result_ok(31)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpStatsBecomeMaster expected less than $toMaster\
                       and got $val&#34;
          } else {
            <a name="::result_error(32)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpStatsBecomeMaster expected less than \
                          $toMaster but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $toMaster} {
            <a name="::result_ok(32)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpStatsBecomeMaster expected more than or equal \
                       to $toMaster and got $val&#34;
          } else {
            <a name="::result_error(33)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpStatsBecomeMaster expected more than or \
                          equal to $toMaster but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $toMaster} {
            <a name="::result_ok(33)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func vrrpStatsBecomeMaster expected less than or equal \
                       to $toMaster and got $val&#34;
          } else {
            <a name="::result_error(34)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func vrrpStatsBecomeMaster expected less than or \
                          equal to $toMaster but got $val&#34;
          }
       }
    }

    if {$advRecv != &#34;&#34;} {

       set var [snmpGet -session $session -oid \
                          vrrpStatsAdvertiseRcvd.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(18)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(36)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(37)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP advertisment received is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $advRecv} {
             <a name="::result_error(35)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func advertisement received statistic expected \
                           $advRecv but got $val&#34;
          } else {
             <a name="::result_ok(34)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func advertisement received  statistic expected \
                           $advRecv and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $advRecv} {
             <a name="::result_ok(35)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func advertisement received statistic expected \
                        more than $advRecv and got $val&#34;
          } else {
             <a name="::result_error(36)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func advertisement received statistic expected \
                           more than $advRecv but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $advRecv} {
             <a name="::result_ok(36)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func advertisement received statistic expected \
                        less than $advRecv and got $val&#34;
          } else {
             <a name="::result_error(37)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func advertisement received statistic expected \
                           less than $advRecv but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $advRecv} {
             <a name="::result_ok(37)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func advertisement received statistic expected \
                        more than or equal to $advRecv and got $val&#34;
          } else {
             <a name="::result_error(38)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func advertisement received statistic expected \
                           more than or equal to $advRecv but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $advRecv} {
             <a name="::result_ok(38)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func advertisement received statistic expected \
                        less than or equal to $advRecv and got $val&#34;
          } else {
             <a name="::result_error(39)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func advertisement received statistic expected \
                           less than or equal to $advRecv but got $val&#34;
          }
       }

    }
 
    if {$intvError != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsAdvertiseIntervalErrors.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(19)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(38)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(39)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP interval error is $val&#34; $fd
       
       if {$status == &#34;eq&#34;} {
          if {$val != $intvError} {
             <a name="::result_error(40)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval error  expected $intvError but \
                           got $val&#34;
          } else {
             <a name="::result_ok(39)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval error  expected $intvError and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $intvError} {
             <a name="::result_ok(40)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval error expected more than $intvError \
                        and got $val&#34;
          } else {
             <a name="::result_error(41)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval error expected more than $intvError \
                        but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $intvError} {
             <a name="::result_ok(41)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval error expected less than $intvError \
                        and got $val&#34;
          } else {
             <a name="::result_error(42)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval error expected less than $intvError \
                        but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $intvError} {
             <a name="::result_ok(42)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval error expected more than or equal to \
                        $intvError and got $val&#34;
          } else {
             <a name="::result_error(43)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval error expected more than or eqal to \
                        $intvError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $intvError} {
             <a name="::result_ok(43)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func interval error expected less than or equal to \
                        $intvError and got $val&#34;
          } else {
             <a name="::result_error(44)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func interval error expected less than or eqal to \
                        $intvError but got $val&#34;
          }
       }
    }

    if {$authFailure != &#34;&#34;} {

       set var [snmpGet -session $session -oid \
                          vrrpStatsAuthFailures.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(20)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(40)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(41)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP authentication failure error is $val&#34; $fd
       
       if {$status == &#34;eq&#34;} {
         if {$val != $authFailure} {
            <a name="::result_error(45)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth failure expected $authFailure but got $val&#34;
         } else {
            <a name="::result_ok(44)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth failure expected $authFailure and got $val&#34;
         }
       } elseif {$status == &#34;gt&#34;} {
         if {$val &gt; $authFailure} {
            <a name="::result_ok(45)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth failure expected more than $authFailure \
                       and got $val&#34;
         } else {
            <a name="::result_error(46)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth failure expected more than $authFailure \
                          but got $val&#34;
         }
       } elseif {$status == &#34;lt&#34;} {
         if {$val &lt; $authFailure} {
            <a name="::result_ok(46)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth failure expected less than $authFailure \
                       and got $val&#34;
         } else {
            <a name="::result_error(47)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth failure expected less than $authFailure \
                          but got $val&#34;
         }
       } elseif {$status == &#34;ge&#34;} {
         if {$val &gt;= $authFailure} {
            <a name="::result_ok(47)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth failure expected more than or equal to \
                       $authFailure and got $val&#34;
         } else {
            <a name="::result_error(48)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth failure expected more than or equal to \
                       $authFailure but got $val&#34;
         }
       } elseif {$status == &#34;le&#34;} {
         if {$val &lt;= $authFailure} {
            <a name="::result_ok(48)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func auth failure expected less than or equal to \
                       $authFailure and got $val&#34;
         } else {
            <a name="::result_error(49)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func auth failure expected less than or equal to \
                       $authFailure but got $val&#34;
         }
       }
    }

    if {$ttlError != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsIpTtlErrors.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(21)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]
  
       <a name="::snmpDebug(42)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(43)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP TTL error is $val&#34; $fd
       
       if {$status == &#34;eq&#34;} {
          if {$val != $ttlError} {
             <a name="::result_error(50)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ttl error expected $ttlError but got $val&#34;
          } else {
             <a name="::result_ok(49)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ttl error expected $ttlError and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $ttlError} {
             <a name="::result_ok(50)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ttl error expected more than $ttlError and \
                        got $val&#34;
          } else {
             <a name="::result_error(51)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ttl error expected more than $ttlError but \
                           got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $ttlError} {
             <a name="::result_ok(51)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ttl error expected less than $ttlError and \
                        got $val&#34;
          } else {
             <a name="::result_error(52)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ttl error expected less than $ttlError but \
                           got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $ttlError} {
             <a name="::result_ok(52)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ttl error expected more than or equal to \
                       $ttlError and got $val&#34;
          } else {
             <a name="::result_error(53)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ttl error expected more than or equal to \
                       $ttlError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $ttlError} {
             <a name="::result_ok(53)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func ttl error expected less than or equal to \
                       $ttlError and got $val&#34;
          } else {
             <a name="::result_error(54)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func ttl error expected less than or equal to \
                       $ttlError but got $val&#34;
          }
       }
    }

    if {$zeroPrioPktRecv != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsPriorityZeroPktsRcvd.$ifIndex.$vrId]

       set val [<a name="::snmpUtilGetVal(22)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(44)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(45)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP zero priority packet received is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $zeroPrioPktRecv} {
             <a name="::result_error(55)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet receive counter expected \
                            $zeroPrioPktRecv but got $val&#34;
          } else {
             <a name="::result_ok(54)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet receive counter expected \
                            $zeroPrioPktRecv and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $zeroPrioPktRecv} {
             <a name="::result_ok(55)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet receive counter expected more than\
                            $zeroPrioPktRecv and got $val&#34;
          } else {
             <a name="::result_error(56)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet receive counter expected more than\
                            $zeroPrioPktRecv but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $zeroPrioPktRecv} {
             <a name="::result_ok(56)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet receive counter expected less than\
                            $zeroPrioPktRecv and got $val&#34;
          } else {
             <a name="::result_error(57)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet receive counter expected less than\
                            $zeroPrioPktRecv but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $zeroPrioPktRecv} {
             <a name="::result_ok(57)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet receive counter expected more than\
                        or equal to $zeroPrioPktRecv and got $val&#34;
          } else {
             <a name="::result_error(58)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet receive counter expected more than\
                           or equal to $zeroPrioPktRecv but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $zeroPrioPktRecv} {
             <a name="::result_ok(58)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet receive counter expected less than\
                        or equal to $zeroPrioPktRecv and got $val&#34;
          } else {
             <a name="::result_error(59)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet receive counter expected less than\
                           or equal to $zeroPrioPktRecv but got $val&#34;
          }
       }
    }

    if {$zeroPrioPktSent != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsPriorityZeroPktsSent.$ifIndex.$vrId]

       set val [<a name="::snmpUtilGetVal(23)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(46)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(47)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP zero priority packet sent is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $zeroPrioPktSent} {
             <a name="::result_error(60)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet sent counter expected \
                            $zeroPrioPktSent but got $val&#34;
          } else {
             <a name="::result_ok(59)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet sent counter expected \
                            $zeroPrioPktSent and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $zeroPrioPktSent} {
             <a name="::result_ok(60)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet sent counter expected more than \
                            $zeroPrioPktSent and got $val&#34;
          } else {
             <a name="::result_error(61)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet sent counter expected more than \
                            $zeroPrioPktSent but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $zeroPrioPktSent} {
             <a name="::result_ok(61)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet sent counter expected less than \
                            $zeroPrioPktSent and got $val&#34;
          } else {
             <a name="::result_error(62)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet sent counter expected less than \
                            $zeroPrioPktSent but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $zeroPrioPktSent} {
             <a name="::result_ok(62)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet sent counter expected more than \
                            or equal to $zeroPrioPktSent and got $val&#34;
          } else {
             <a name="::result_error(63)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet sent counter expected more than \
                            or equal to $zeroPrioPktSent but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $zeroPrioPktSent} {
             <a name="::result_ok(63)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func zero packet sent counter expected less than \
                            or equal to $zeroPrioPktSent and got $val&#34;
          } else {
             <a name="::result_error(64)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func zero packet sent counter expected less than \
                            or equal to $zeroPrioPktSent but got $val&#34;
          }
       }
    }

    if {$invalidPktsRecv != &#34;&#34;} {

       set var [snmpGet -session $session -oid \
                          vrrpStatsInvalidTypePktsRcvd.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(24)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(48)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(49)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP invalid packet type error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $invalidPktsRecv} {
             <a name="::result_error(65)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalid packet received expected \
                           $invalidPktsRecv but got $val&#34;
          } else {
             <a name="::result_ok(64)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalid packet received expected \
                           $invalidPktsRecv and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $invalidPktsRecv} {
             <a name="::result_ok(65)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalid packet received expected more than \
                           $invalidPktsRecv and got $val&#34;
          } else {
             <a name="::result_error(66)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalid packet received expected more than \
                           $invalidPktsRecv but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $invalidPktsRecv} {
             <a name="::result_ok(66)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalid packet received expected less than \
                           $invalidPktsRecv and got $val&#34;
          } else {
             <a name="::result_error(67)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalid packet received expected less than \
                           $invalidPktsRecv but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $invalidPktsRecv} {
             <a name="::result_ok(67)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalid packet received expected more than \
                        or equal to $invalidPktsRecv and got $val&#34;
          } else {
             <a name="::result_error(68)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalid packet received expected more than \
                           or equal to $invalidPktsRecv but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $invalidPktsRecv} {
             <a name="::result_ok(68)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalid packet received expected less than \
                        or equal to $invalidPktsRecv and got $val&#34;
          } else {
             <a name="::result_error(69)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalid packet received expected less than \
                           or equal to $invalidPktsRecv but got $val&#34;
          }
       }
    }

    if { $addrListError != &#34;&#34; } {
       set var [snmpGet -session $session -oid \
                          vrrpStatsAddressListErrors.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(25)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]
 
       <a name="::snmpDebug(50)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(51)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP address list error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $addrListError} {
             <a name="::result_error(70)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func address list error expected $addrListError \
                           but got $val&#34;
          } else {
             <a name="::result_ok(69)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func address list error expected $addrListError and \
                          got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $addrListError} {
             <a name="::result_ok(70)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func address list error expected more than \
                        $addrListError and got $val&#34;
          } else {
             <a name="::result_error(71)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func address list error expected more than \
                        $addrListError but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $addrListError} {
             <a name="::result_ok(71)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func address list error expected less than \
                        $addrListError and got $val&#34;
          } else {
             <a name="::result_error(72)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func address list error expected less than \
                        $addrListError but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $addrListError} {
             <a name="::result_ok(72)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func address list error expected more than or equal to\
                        $addrListError and got $val&#34;
          } else {
             <a name="::result_error(73)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func address list error expected more than or \
                           equal to $addrListError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $addrListError} {
             <a name="::result_ok(73)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func address list error expected less than or equal to\
                        $addrListError and got $val&#34;
          } else {
             <a name="::result_error(74)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func address list error expected less than or \
                           equal to $addrListError but got $val&#34;
          }
       }
    }

    if {$invalidAuthType != &#34;&#34;} {

       set var [snmpGet -session $session -oid \
                         vrrpStatsInvalidAuthType.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(26)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(52)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(53)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP authentication type error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $invalidAuthType} {
             <a name="::result_error(75)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalidAuthType expected $invalidAuthType but \
                           got $val&#34;
          } else {
             <a name="::result_ok(74)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalidAuthType expected $invalidAuthType and \
                        got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $invalidAuthType} {
             <a name="::result_ok(75)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalidAuthType expected more than \
                        $invalidAuthType and got $val&#34;
          } else {
             <a name="::result_error(76)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalidAuthType expected more than \
                        $invalidAuthType but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $invalidAuthType} {
             <a name="::result_ok(76)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalidAuthType expected less than \
                        $invalidAuthType and got $val&#34;
          } else {
             <a name="::result_error(77)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalidAuthType expected less than \
                        $invalidAuthType but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $invalidAuthType} {
             <a name="::result_ok(77)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalidAuthType expected more than or equal to \
                        $invalidAuthType and got $val&#34;
          } else {
             <a name="::result_error(78)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalidAuthType expected more than or equal to\
                        $invalidAuthType but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $invalidAuthType} {
             <a name="::result_ok(78)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func invalidAuthType expected less than or equal to \
                        $invalidAuthType and got $val&#34;
          } else {
             <a name="::result_error(79)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func invalidAuthType expected less than or equal to\
                        $invalidAuthType but got $val&#34;
          }
       }
    }

    if {$authMismatch !=  &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsAuthTypeMismatch.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(27)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(54)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(55)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP authentication mismatch error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $authMismatch} {
             <a name="::result_error(80)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func authMismatch count expected $authMismatch \
                           but got $val&#34;
          } else {
             <a name="::result_ok(79)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func authMismatch count expected $authMismatch \
                        and got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $authMismatch} {
             <a name="::result_ok(80)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func authMismatch count expected more than \
                        $authMismatch and got $val&#34;
          } else {
             <a name="::result_error(81)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func authMismatch count expected more than \
                           $authMismatch but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $authMismatch} {
             <a name="::result_ok(81)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func authMismatch count expected less than \
                        $authMismatch and got $val&#34;
          } else {
             <a name="::result_error(82)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func authMismatch count expected less than \
                           $authMismatch but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $authMismatch} {
             <a name="::result_ok(82)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func authMismatch count expected more than \
                        or equal to $authMismatch and got $val&#34;
          } else {
             <a name="::result_error(83)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func authMismatch count expected more than \
                           or equal to $authMismatch but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $authMismatch} {
             <a name="::result_ok(83)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func authMismatch count expected less than \
                        or equal to $authMismatch and got $val&#34;
          } else {
             <a name="::result_error(84)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func authMismatch count expected less than \
                           or equal to $authMismatch but got $val&#34;
          }
       }
    }

    if {$pktLenError != &#34;&#34;} {
       set var [snmpGet -session $session -oid \
                          vrrpStatsPacketLengthErrors.$ifIndex.$vrId]
       set val [<a name="::snmpUtilGetVal(28)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> counter $var]

       <a name="::snmpDebug(56)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> DEBUG &#34;$func snmpGet-$var&#34; $fd
       <a name="::snmpDebug(57)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func VRRP packet length error is $val&#34; $fd

       if {$status == &#34;eq&#34;} {
          if {$val != $pktLenError} {
             <a name="::result_error(85)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func packet length error expected $pktLenError but \
              got $val&#34;
          } else {
             <a name="::result_ok(84)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func packet length error expected $pktLenError and \
              got $val&#34;
          }
       } elseif {$status == &#34;gt&#34;} {
          if {$val &gt; $pktLenError} {
             <a name="::result_ok(85)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func packet length error expected more than \
                       $pktLenError and got $val&#34;
          } else {
             <a name="::result_error(86)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func packet length error expected more than \
                           $pktLenError but got $val&#34;
          }
       } elseif {$status == &#34;lt&#34;} {
          if {$val &lt; $pktLenError} {
             <a name="::result_ok(86)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func packet length error expected less than \
                       $pktLenError and got $val&#34;
          } else {
             <a name="::result_error(87)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func packet length error expected less than \
                           $pktLenError but got $val&#34;
          }
       } elseif {$status == &#34;ge&#34;} {
          if {$val &gt;= $pktLenError} {
             <a name="::result_ok(87)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func packet length error expected more than \
                       or equal to $pktLenError and got $val&#34;
          } else {
             <a name="::result_error(88)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func packet length error expected more than \
                           or equal to $pktLenError but got $val&#34;
          }
       } elseif {$status == &#34;le&#34;} {
          if {$val &lt;= $pktLenError} {
             <a name="::result_ok(88)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;$func packet length error expected less than \
                       or equal to $pktLenError and got $val&#34;
          } else {
             <a name="::result_error(89)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;$func packet length error expected less than \
                           or equal to $pktLenError but got $val&#34;
          }
       }
    }
    <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
    return success
}

<span class="comment-line">################################################################</span>
<span class="comment-line">#  Procedure Name: snmpGetIpAddrOfVlan</span>
<span class="comment-line">#  </span>
<span class="comment-line">#  Description:</span>
<span class="comment-line">#  This procedure returns the ip address of a required vlan. </span>
<span class="comment-line">#</span>
<span class="comment-line">#  Input Variables:</span>
<span class="comment-line">#    session    - Session identifier which identifies the connection</span>
<span class="comment-line">#                 with the DUT</span>
<span class="comment-line">#    vlanId     - VLAN Id of the specified VLAN whose ip address is </span>
<span class="comment-line">#                 returned</span>
<span class="comment-line">#  Optional Args:</span>
<span class="comment-line">#    fd - File descriptor for logging the command outputs   </span>
<span class="comment-line"># </span>
<span class="comment-line">#  Output Variables: </span>
<span class="comment-line">#     None</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Return Variables:</span>
<span class="comment-line">#    Logs the error message - On failure </span>
<span class="comment-line">#    ip address of the Vlan on success</span>
<span class="comment-line">#</span>
<span class="comment-line">#  Possible Usage:</span>
<span class="comment-line">#    snmpGetIpAddrOfVlan -session $sessionid -vlanId 62</span>
<span class="comment-line">###############################################################</span>
<strong><a name="::::snmpGetIpAddrOfVlan_1446">proc <a href="snmpVRRPLib.tcl-annot.html#::::snmpGetIpAddrOfVlan">::::snmpGetIpAddrOfVlan</a></a></strong> { args } {
    <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> snmpGetIpAddrOfVlan $args {
       session         &#34;&#34;
       vlanId          &#34;&#34;
       fd              &#34;NULL&#34;
    }
 
    set func &#34;snmpGetIpAddrOfVlan:&#34;
    if {$session == &#34;&#34; || $vlanId == &#34;&#34;} {
       error &#34;$func session, Vlan Id must be specified&#34;
       return Error
    }
    set res [snmpGet -session $session -oid extremeVlanIpNetAddress.$vlanId]
    <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$func SNMP Get returns $res&#34;

    set val [<a name="::snmpUtilGetVal(29)"><a href="./snmplib.tcl.html#::snmpUtilGetVal_2283">::snmpUtilGetVal</a></a> ipaddr $res]
       <a name="::snmpDebug(58)"><a href="./snmplib.tcl.html#::snmpDebug_63">::snmpDebug</a></a> LOG &#34;$func snmpGet value is $val&#34; $fd
    return $val
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
