<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>stc.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#stc.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>stc.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="stc.tcl-annot.html">annotations</a> | <a href="stc.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::overWriteProcs.working_1">proc <a href="stc.tcl-annot.html#::::overWriteProcs.working">::::overWriteProcs.working</a></a></strong> {libdir overwritedir} {

   <span class="comment-line"># save cur dir</span>
   set retdir [pwd]

   <span class="comment-line"># go to spirent dir and create index (just as a means to discover all procs)</span>
   cd $overwritedir
   auto_mkindex .
   set dir spirent
   source tclIndex
   set proclist [array names auto_index]
   set f [open [file join $libdir tclIndex] r]
   set data [read $f]
   close $f

   set filestoremove {}
   foreach line [split $data \n] {
      if {[lindex $line 0] == &#34;set&#34;} {
         set tofind [string range [lindex $line 1] 11 end-1]
         if {[set loc [lsearch $proclist $tofind]] &gt;= 0} {
            lappend filestoremove [lindex $line end]
         }
      }
   }
   <span class="comment-line"># source the files to be removed from the tclIndex</span>
   foreach f $filestoremove {
      uplevel #0 &#34;source [file join $libdir [string range $f 0 end-2]]&#34;
   }

   <span class="comment-line"># write the tclIndex and rewrite it without the files sourced</span>
   set f [open [file join $libdir tclIndex] w]
   foreach line [split $data \n] {
      if {[lsearch $filestoremove [lindex $line end]] &lt; 0} {
         puts $f $line
      }
   }
   close $f

   <span class="comment-line"># now that all the ixia files that have shared procs with the overwrite directory ... overwrite them</span>
   cd $overwritedir
   foreach f [glob -nocomplain *.tcl] {
      source [file join $overwritedir $f]
   }
   cd $retdir

}
<strong><a name="::::auto_load.spirent_47">proc <a href="stc.tcl-annot.html#::::auto_load.spirent">::::auto_load.spirent</a></a></strong> {cmd namespace} {

   global auto_index auto_path auto_index_spirent
   <span class="comment-line">#puts &#34;AUTOLOAD : $cmd&#34;</span>
   <span class="comment-line">#puts &#34;SOURCING spirent.tcl&#34;</span>
   <span class="comment-line">#source /spirent/automation/Lib/spirent/spirent.tcl</span>
   if {$namespace eq &#34;&#34;} {
      set namespace [uplevel 1 [list ::namespace current]]
   }
   set nameList [auto_qualify $cmd $namespace]
   <span class="comment-line"># workaround non canonical auto_index entries that might be around</span>
   <span class="comment-line"># from older auto_mkindex versions</span>
   lappend nameList $cmd
   foreach name $nameList {
      if {[info exists auto_index_spirent($name)]} {
         <strong>namespace eval  ::</strong>  $auto_index_spirent($name)
         if {[namespace which -command $name] ne &#34;&#34;} {
            return 1
         }
      } elseif {[info exists auto_index($name)]} {
         <strong>namespace eval  ::</strong>  $auto_index($name)
         <span class="comment-line">#puts &#34;SOURCING spirent.tcl&#34;</span>
         foreach {i j} [array get ::auto_index_spirent] {set x($j) 0}
         foreach i [array names x] { <strong>namespace eval  ::</strong>  $i }
         <span class="comment-line">#source /spirent/automation/Lib/spirent/spirent.tcl</span>
         if {[namespace which -command $name] ne &#34;&#34;} {
            return 1
         }
      }
   }
   if {![info exists auto_path]} {
      return 0
   }

   if {![auto_load_index]} {
      return 0
   }
<span class="comment-line">#   foreach name $nameList {</span>
<span class="comment-line">#      if {[info exists auto_index($name)]} {</span>
<span class="comment-line">#         namespace eval :: $auto_index($name)</span>
<span class="comment-line">#         if {[namespace which -command $name] ne &#34;&#34;} {</span>
<span class="comment-line">#            return 1</span>
<span class="comment-line">#         }</span>
<span class="comment-line">#      }</span>
<span class="comment-line">#   }</span>
   return 0
}

<strong><a name="::::overWriteProcs_95">proc <a href="stc.tcl-annot.html#::::overWriteProcs">::::overWriteProcs</a></a></strong><a name="::::overWriteProcs"></a> {libdir overwritedir} {

   set retdir [pwd]

   set ::auto_path [linsert $::auto_path end $overwritedir]
   cd $overwritedir
   auto_mkindex .
   set dir [pwd]
   source tclIndex
   file delete tclIndex
   source spirent.tcl
   array set ::auto_index_spirent [array get auto_index]
   rename auto_load auto_load.orig
   rename auto_load.spirent auto_load
   cd $retdir
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
