<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>itestrt.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#itestrt.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>itestrt.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="itestrt.tcl-annot.html">annotations</a> | <a href="itestrt.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">#   set ITARPATHDEF /iTest/15.3.1</span>
<span class="comment-line">#   set MODPATHDEF Enterprise</span>
<span class="comment-line">#   set NTAFSERVERDEF rtp-itest.extremenetworks.com</span>
<span class="comment-line">#   set LICSERVERDEF 10.127.8.86</span>
<span class="comment-line">#   set TOPODIRDEF Spirent</span>
<span class="comment-line">#   set tbml_sub_dir &#34;Spirent&#34;</span>
<span class="comment-line">#   set itestrtPath &#34;/iTestRT/itestrt&#34;</span>


<strong><a name="::::exec_itest_10">proc <a href="itestrt.tcl-annot.html#::::exec_itest">::::exec_itest</a></a></strong> {args} {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> exec_itest $args {
        module &#34;L2&#34;
        tcList &#34;all&#34;
        list &#34;pass&#34;
        topoDir &#34;Spirent&#34;
        cfg &#34;spirent_testbed1_std&#34;
        category &#34;FunctionalTest&#34;
        itarPath &#34;/iTest_15.3.1&#34;
        modPath &#34;Enterprise&#34;
        <a name="::version(1)"><a href="./ePTClient.tcl.html#::version_470">::version</a></a> &#34;15.1.1&#34;
        iplatform &#34;NULL&#34;
        eplatform &#34;NULL&#34;
        qId &#34;RTP_121212_232323&#34;
        resultDir &#34;&#34;
        jobDir &#34;&#34;
        ntafServer &#34;sc-regserver.extremenetworks.com&#34;
        licenseServer &#34;10.127.8.86&#34;
    }
    global itestrtPath
   <span class="comment-line"># global DEVITESTMODS</span>
   <span class="comment-line"># global DEVITESTMODPATH</span>
   <span class="comment-line"># global DEVITESTITARPATH</span>

    <span class="comment-line"># Determine if this is a devlopment module that has a different itar path</span>
   <span class="comment-line"># if {[lsearch $DEVITESTMODS $module] &gt;= 0} {</span>
   <span class="comment-line">#     set modPath [lindex $DEVITESTMODPATH [lsearch $DEVITESTMODS $module]]</span>
   <span class="comment-line">#     set itarPath [lindex $DEVITESTITARPATH [lsearch $DEVITESTMODS $module]]</span>
   <span class="comment-line">#     result_debug &#34;!!! Changing the modPath to : [lindex $DEVITESTMODPATH [lsearch $DEVITESTMODS $module]]&#34;;</span>
   <span class="comment-line">#     result_debug &#34;!!! Changing the itarPath to : [lindex $DEVITESTITARPATH [lsearch $DEVITESTMODS $module]]&#34;;</span>
   <span class="comment-line"># }</span>
    set ntafUser $cfg
    set ntafPassword $cfg
    <span class="comment-line">#global itarPath itestTopoDir</span>
    puts &#34;pwd [pwd]&#34;
    set all_modules [<a name="::get_itest_modules(1)"><a href="./itestrt.tcl.html#::get_itest_modules_197">::get_itest_modules</a></a> -itarPath &#34;$itarPath&#34; -modPath &#34;$modPath&#34;]
    set all_tc [<a name="::get_itest_mod_tests(1)"><a href="./itestrt.tcl.html#::get_itest_mod_tests_219">::get_itest_mod_tests</a></a> -itarPath &#34;$itarPath&#34; -modPath &#34;$modPath&#34; -module &#34;$module&#34; -category &#34;$category&#34;]
    puts &#34;all_modules: $all_modules&#34;
    puts &#34;all_tc: $all_tc&#34;
    if {[lsearch $all_modules $module] &gt;= 0 &amp;&amp; [llength $all_tc] &gt; 0} {
        <span class="comment-line">#Check to see if a tcList is passed in</span>
        if {$tcList != &#34;all&#34;} {
            <span class="comment-line">#100.1.1\\.fftc|1.1.2.10\\.fftc</span>
            <span class="comment-line">#</span>
            set newTcList &#34;&#34;
            foreach mTC $tcList {
                if {[lsearch $all_tc $mTC] &lt; 0} {
                    <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Test Case $mTC is not an iTest Case&#34;
                    continue
                    <span class="comment-line">#return testSkipped</span>
                } else {
                    lappend newTcList $mTC
                }
            }
            if {[llength $newTcList] &gt; 0} {
                set tcList $newTcList
            } else {
                return testSkipped
            }
            set l [regexp -inline -all -- {\S+} $tcList]
            regsub -all &#34; &#34; $l &#34;.fftc|&#34; tcList;
            append tcList &#34;.fftc&#34;
            set list &#34;NULL&#34;

        } else {
            set tcList &#34;.*.fftc&#34;
        }
<span class="comment-line">#VR</span>
        <span class="comment-line">#Check to see if a tcList is passed in</span>
        if {$list == &#34;NULL&#34;} {
            set testSuiteList &#34;.*&#34;
        } elseif {$list == &#34;pass&#34;} {
            set testSuiteList &#34;pass|sanity|extsanity&#34;
        } elseif {$list == &#34;quick&#34;} {
            set testSuiteList &#34;sanity&#34;
	} elseif {$list == &#34;extsanity&#34;} {
	    set testSuiteList &#34;sanity|extsanity&#34;
        } elseif {$list == &#34;devonly&#34;} {          <span class="comment-line">#added on 6/3/2014 by vrao</span>
	    set testSuiteList &#34;dev&#34;
        } else {
            set testSuiteList $list
        }
	

        <span class="comment-line">#Create the test suite </span>
        <a name="::create_ts(1)"><a href="./itestrt.tcl.html#::create_ts_242">::create_ts</a></a> -module &#34;$module&#34; \
            -category &#34;$category&#34; \
            -modPath &#34;$modPath&#34; \
            -version &#34;$version&#34; \
            -iplatform &#34;$iplatform&#34; \
            -eplatform &#34;$eplatform&#34; \
            -itarPath &#34;$itarPath&#34; \
            -qId &#34;$qId&#34; \
            -tcList &#34;$tcList&#34; \
            -list &#34;$testSuiteList&#34; \
            -resultDir &#34;$jobDir&#34; 

        <a name="::create_job(1)"><a href="./itestrt.tcl.html#::create_job_317">::create_job</a></a> -cfg &#34;$cfg&#34; \
            -topoDir &#34;$topoDir&#34; \
            -itarPath &#34;$itarPath&#34; \
            -qId &#34;$qId&#34; \
            -resultDir &#34;$jobDir&#34;
    } else {
        puts &#34;No iTest tests to run&#34;
        return testSkipped
    }
    global LICSERVERDEF
    <span class="comment-line">#catch {set pCheck [exec ping -c 4 $ntafServer | tee /dev/tty]} pout</span>
    <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Sending: exec $itestrtPath --itar $itarPath --job.logfile file://${jobDir}/log.txt \
         --job \&#34;file://${jobDir}/job.ffjd\&#34; \
         --report \&#34;file://${jobDir}/{tcfilename}.html\&#34; --ntaf.server $ntafServer \
         --ntaf.user $ntafUser --ntaf.password $ntafPassword --licenseServer $licenseServer | tee /dev/tty&#34;
    catch {set cout2 [exec $itestrtPath --itar $itarPath --job.logfile file://${jobDir}/log.txt --job &#34;file://${jobDir}/job.ffjd&#34; \
         --report &#34;file://${jobDir}/{tcfilename}.html&#34; --ntaf.server $ntafServer \
         --ntaf.user $ntafUser --ntaf.password $ntafPassword --licenseServer $licenseServer | tee /dev/tty]} cout
    <span class="comment-line">#puts &#34;$cout&#34;</span>
    <span class="comment-line"># Build a list of lines in the job output</span>
    set jLines [split $cout2 \n]
    set inData 0
    foreach l $jLines {
        set l [string trim $l]
        if {$l != &#34;&#34;} {
            set l [regexp -inline -all -- {\S+} $l]
            set items [split $l &#34; &#34;]
            if {[lindex $items 0] == &#34;Result&#34; &amp;&amp; [lindex $items 1] == &#34;Owner&#34;} {
                set inData 1
                puts &#34;In Data&#34;
                continue;
            } elseif {$inData} {
                if {[regexp {(.*)\.fftc} [lindex $items 3] junk tc]} {
                    puts &#34;$items&#34;
                    <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$tc $module iTest [lindex $items 3]&#34;;
                    if {[lindex $items 0] != &#34;Pass&#34; &amp;&amp; [lindex $items 0] != &#34;Fail&#34;} {
                        <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> ok
                    } else {
                        <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> [lindex $items 0]
                    }
                    save_incrementally_run_data $tc
                } elseif {[regexp {(.*)\.fftc} [lindex $items 2] junk tc]} {
                    puts &#34;$items&#34;
                    <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$tc $module iTest [lindex $items 2]&#34;;
                    if {[lindex $items 0] != &#34;Pass&#34; &amp;&amp; [lindex $items 0] != &#34;Fail&#34;} {
                        <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> ok
                    } else {
                        <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> [lindex $items 0]
                    }
                    save_incrementally_run_data $tc
                } elseif {[regexp {(.*)\.fftc} [file tail [string trimleft [lindex $items 7] &#34;project:/&#34;]] junk tc]} {
                    puts &#34;$items&#34;
                    <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$tc $module iTest [lindex $items 2]&#34;;
                    if {[lindex $items 0] != &#34;Pass&#34; &amp;&amp; [lindex $items 0] != &#34;Fail&#34;} {
                        <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> ok
                    } else {
                        <a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> [lindex $items 0]
                    }
                    save_incrementally_run_data $tc
                } elseif {[regexp {(.*)\.fftc} [file tail [string trimleft [lindex $items 6] &#34;project:/&#34;]] junk tc]} {
                    puts &#34;$items&#34;
                    <a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$tc $module iTest [lindex $items 2]&#34;;
                    if {[lindex $items 0] != &#34;Pass&#34; &amp;&amp; [lindex $items 0] != &#34;Fail&#34;} {
                        <a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> ok
                    } else {
                        <a name="::report_end_test(8)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a> [lindex $items 0]
                    }
                    save_incrementally_run_data $tc
                }
                continue;
            } else {
                continue;
            }
        } else {
            continue;
        }
    }
    <span class="comment-line"># Move the jobDir files to the resultDir</span>
    puts &#34;JobDir is $jobDir&#34;
    set fList [glob -types {f} -path ${jobDir}/ *]

    foreach aFile $fList {
        puts &#34;Moving $aFile $resultDir&#34;
        catch {exec mv $aFile $resultDir} output
    }
    if [file isdirectory $jobDir] {
        <span class="comment-line">#catch {exec rm -rf $jobDir} dout</span>
    }
    return testCompleted
}
<strong><a name="::::get_itest_modules_197">proc <a href="itestrt.tcl-annot.html#::::get_itest_modules">::::get_itest_modules</a></a></strong> {args} {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> get_itest_modules $args {
        itarPath &#34;/iTest_15.3.1&#34;
        modPath &#34;Enterprise&#34;
        result_dir &#34;mac&#34;
        sourceMac &#34;default&#34;
    }
    global itestrtPath
    <span class="comment-line">#global itarPath itestTopoDir</span>
    <span class="comment-line">#puts &#34;$itestrtPath --itar $itarPath --fileutils.list project://${modPath}&#34;</span>
    catch {exec $itestrtPath --itar $itarPath --fileutils.list project://${modPath}/} cout
    set modList &#34;&#34;
    set pList [split $cout \n]
    foreach p $pList {
        set fList [split $p &#34;/&#34;]
        if {[lindex $fList [expr [llength $fList] -1]] != &#34;&#34; &amp;&amp; [lindex $fList [expr [llength $fList] -1]] != &#34;.project&#34;} {
            lappend modList [lindex $fList [expr [llength $fList] -1]]
            <span class="comment-line">#puts &#34;Added [lindex $fList [expr [llength $fList] -1]] to the modList&#34;</span>
        }
    }
    return $modList
}
<strong><a name="::::get_itest_mod_tests_219">proc <a href="itestrt.tcl-annot.html#::::get_itest_mod_tests">::::get_itest_mod_tests</a></a></strong> {args} {
    <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> get_itest_mod_tests $args {
        module &#34;L2&#34;
        category &#34;FunctionalTest&#34;
        itarPath &#34;/iTest_15.3.1&#34;
        modPath &#34;Enterprise&#34;
    }
    global itestrtPath
    <span class="comment-line">#global itarPath itestTopoDir</span>
    <span class="comment-line"># itestrt --itar $itarPath --fileutils.list project://${modPath}/</span>
    catch {exec $itestrtPath --itar $itarPath --fileutils.list project://${modPath}/${module}/${category}} cout
    set testList &#34;&#34;
    set tList [split $cout \n]
    foreach t $tList {
        set fList [split $t &#34;/&#34;]
        if {[lindex $fList [expr [llength $fList] -1]] != &#34;&#34; &amp;&amp; \
            [regexp {(.*)\.fftc} [lindex $fList [expr [llength $fList] -1]] a tc]} {
            lappend testList $tc
            <span class="comment-line">#puts &#34;Added [lindex $fList [expr [llength $fList] -1]] to the testList&#34;</span>
        }
    }
    return $testList
}
<strong><a name="::::create_ts_242">proc <a href="itestrt.tcl-annot.html#::::create_ts">::::create_ts</a></a></strong> {args} {
    <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> create_ts $args {
        module &#34;L2&#34;
        category &#34;FunctionalTest&#34;
        modPath &#34;Enterprise&#34;
        <a name="::version(2)"><a href="./ePTClient.tcl.html#::version_470">::version</a></a> &#34;15.1.1&#34;
        iplatform &#34;bcmFamily&#34;
        eplatform &#34;gnssFamily&#34;
        itarPath &#34;/iTest_15.3.1&#34;
        qId &#34;RTP_121212_232323&#34;
        tcList &#34;.*.fftc&#34;
        list &#34;sanity&#34;
        resultDir &#34;/tmp/itestrt&#34;
    }
    set ts_template &#34;&lt;?xml version=\&#34;1.0\&#34;?&gt;\n\
&lt;testSuite version=\&#34;4.2.1.67445\&#34;&gt;\n\
    &lt;testGroups&gt;\n\
        &lt;item name=\&#34;group1\&#34;&gt;\n\
            &lt;rootFolder&gt;project://@modPath@/@module@/@category@&lt;/rootFolder&gt;\n\
            &lt;filterList&gt;\n\
                &lt;item name=\&#34;fftc_filter\&#34; type=\&#34;com.fnfr.svt.testsuite.core.filters.TestSuiteFileMatchFilter\&#34; matchType=\&#34;REGEX\&#34;&gt;\n\
                    &lt;pattern&gt;@tcList@&lt;/pattern&gt;\n\
                    &lt;onMatch&gt;INCLUDE&lt;/onMatch&gt;\n\
                    &lt;onNoMatch&gt;EXCLUDE&lt;/onNoMatch&gt;\n\
                &lt;/item&gt;\n\
                &lt;item name=\&#34;list_filter\&#34; type=\&#34;com.fnfr.svt.testsuite.core.filters.TestSuiteParameterMatchFilter\&#34; matchType=\&#34;REGEX\&#34;&gt;\n\
                    &lt;query&gt;list&lt;/query&gt;\n\
                    &lt;pattern&gt;@list@&lt;/pattern&gt;\n\
                    &lt;onMatch&gt;INCLUDE&lt;/onMatch&gt;\n\
                    &lt;onNoMatch&gt;EXCLUDE&lt;/onNoMatch&gt;\n\
                &lt;/item&gt;\n\
                &lt;item name=\&#34;verion_filter\&#34; type=\&#34;com.fnfr.svt.testsuite.core.filters.TestSuiteParameterAssertionFilter\&#34;&gt;\n\
                    &lt;query&gt;version_available&lt;/query&gt;\n\
                    &lt;assertion&gt;\$value&amp;lt;=&amp;quot;@version@&amp;quot;&lt;/assertion&gt;\n\
                    &lt;onNoParameter&gt;INCLUDE&lt;/onNoParameter&gt;\n\
                    &lt;onAssertionTrue&gt;INCLUDE&lt;/onAssertionTrue&gt;\n\
                    &lt;onAssertionFalse&gt;EXCLUDE&lt;/onAssertionFalse&gt;\n\
                &lt;/item&gt;\n\
                &lt;item name=\&#34;exclude\&#34; type=\&#34;com.fnfr.svt.testsuite.core.filters.TestSuiteParameterMatchFilter\&#34; matchType=\&#34;REGEX\&#34;&gt;\n\
                    &lt;query&gt;exclude_platform&lt;/query&gt;\n\
                    &lt;pattern&gt;.*@eplatform@.*&lt;/pattern&gt;\n\
                    &lt;onMatch&gt;EXCLUDE&lt;/onMatch&gt;\n\
                &lt;/item&gt;\n\
                &lt;item name=\&#34;include\&#34; type=\&#34;com.fnfr.svt.testsuite.core.filters.TestSuiteParameterMatchFilter\&#34; matchType=\&#34;REGEX\&#34;&gt;\n\
                    &lt;query&gt;include_platform&lt;/query&gt;\n\
                    &lt;pattern&gt;.*@iplatform@.*&lt;/pattern&gt;\n\
                    &lt;onMatch&gt;INCLUDE&lt;/onMatch&gt;\n\
                &lt;/item&gt;\n\
            &lt;/filterList&gt;\n\
        &lt;/item&gt;\n\
    &lt;/testGroups&gt;\n\
&lt;/testSuite&gt;&#34;

   set str $ts_template
   regsub -all &#34;@tcList@&#34; $str &#34;$tcList&#34; str;
   regsub -all &#34;@list@&#34; $str &#34;$list&#34; str;
   regsub -all &#34;@modPath@&#34; $str &#34;$modPath&#34; str;
   regsub -all &#34;@module@&#34; $str &#34;$module&#34; str;
   regsub -all &#34;@category@&#34; $str &#34;$category&#34; str;
   regsub -all &#34;@version@&#34; $str &#34;$version&#34; str;
   regsub -all &#34;@eplatform@&#34; $str &#34;$eplatform&#34; str;
   regsub -all &#34;@iplatform@&#34; $str &#34;$iplatform&#34; str;
   puts &#34;TS = $str&#34;
   set tsPath &#34;$resultDir&#34;
   if {![file isdirectory $tsPath]} {
        file mkdir $tsPath
   }
   if {[file isfile ${tsPath}/ts.ffts]} {
       file delete ${tsPath}/ts.ffts
   }
   set fd [open &#34;${tsPath}/ts.ffts&#34; &#34;w&#34;]
   puts $fd $str
   close $fd
   puts &#34;Created TS ${tsPath}/ts.ffts&#34;
}
<strong><a name="::::create_job_317">proc <a href="itestrt.tcl-annot.html#::::create_job">::::create_job</a></a></strong> {args} {
    <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> create_job $args {
        cfg &#34;spirent_testbed1_std&#34;
        topoDir &#34;Spirent&#34;
        itarPath &#34;/iTest_15.3.1&#34;
        qId &#34;RTP_121212_232323&#34;
        resultDir &#34;/tmp/itestrt&#34;
    }

set job_template &#34;&lt;?xml version=\&#34;1.0\&#34; encoding=\&#34;ASCII\&#34;?&gt;\n\
&lt;jobs:JobDefinition xmi:version=\&#34;2.0\&#34; \
xmlns:xmi=\&#34;http://www.omg.org/XMI\&#34; \
xmlns:xsi=\&#34;http://www.w3.org/2001/XMLSchema-instance\&#34; \
xmlns:jobs=\&#34;http://fanfaresoftware.com/itest/3.4/jobs\&#34; \
onceStartTime=\&#34;1357676040000\&#34; immediate=\&#34;true\&#34; \
periodEnd=\&#34;1373310578721\&#34; dailyStartTime=\&#34;54840000\&#34; timeLimit=\&#34;3600000\&#34;&gt;\n\
  &lt;data xsi:type=\&#34;jobs:TestJobDefinitionData\&#34; headline=\&#34;\&#34; description=\&#34;\&#34; \
  test=\&#34;file://@resultDir@/ts.ffts\&#34; testbed=\&#34;file://@resultDir@/@cfg@.tbml\&#34; \
  paramFile=\&#34;project://common_project/topologies/extreme_parameters.ffpt\&#34;/&gt;\n\
&lt;/jobs:JobDefinition&gt;&#34;

   set str $job_template
   regsub -all &#34;@resultDir@&#34; $str &#34;$resultDir&#34; str;
   regsub -all &#34;@topoDir@&#34; $str &#34;$topoDir&#34; str;
   regsub -all &#34;@cfg@&#34; $str &#34;$cfg&#34; str;
   puts &#34;Job = $str&#34;
   set tsPath &#34;$resultDir&#34;
   if {![file isdirectory $tsPath]} {
        file mkdir $tsPath
   }
   if {[file isfile ${tsPath}/job.ffjd]} {
       file delete ${tsPath}/job.ffjd
   }
   set fd [open &#34;${tsPath}/job.ffjd&#34; &#34;w&#34;]
   puts $fd $str
   close $fd
   puts &#34;Created Job ${tsPath}/job.ffjd&#34;
}
<strong><a name="::::get_itest_category_355">proc <a href="itestrt.tcl-annot.html#::::get_itest_category">::::get_itest_category</a></a></strong> {args} {
    <a name="::parse_args(6)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> get_itest_category $args {
        modPath &#34;null&#34;
    }

    if {[regexp -nocase &#34;func&#34; $modPath]} {
        return &#34;FunctionalTest&#34;
    } elseif {[regexp -nocase &#34;diag&#34; $modPath]} {
        return &#34;DiagnosticTest&#34;
    } elseif {[regexp -nocase &#34;perf&#34; $modPath]} {
        return &#34;PerformanceTest&#34;
    } elseif {[regexp -nocase &#34;scal&#34; $modPath]} {
        return &#34;ScalabilityTest&#34;
    } elseif {[regexp -nocase &#34;snmp&#34; $modPath]} {
        return &#34;SNMPTest&#34;
    } elseif {[regexp -nocase &#34;stress&#34; $modPath]} {
        return &#34;StressTest&#34;
    } elseif {[regexp -nocase &#34;syst&#34; $modPath]} {
        return &#34;SystemsTest&#34;
    } elseif {[regexp -nocase &#34;xml&#34; $modPath]} {
        return &#34;XMLTest&#34;
    } else {
        return 0
    }
}
<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetCfgTestList</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This proc verifies and returns the testListFile</span>
<span class="comment-line">#              Dumps tests if ? entered</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#             platform - name of the platform</span>
<span class="comment-line">#             modName  - name of the feature desired</span>
<span class="comment-line">#             testsList - , separated list of tests</span>
<span class="comment-line">#             testListFile - out arg to return</span>
<span class="comment-line">#</span>
<span class="comment-line"># Output args: returns testListFile on success, -1 if error</span>
<span class="comment-line">#</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetCfgTestList_395">proc <a href="itestrt.tcl-annot.html#::::GetCfgTestList">::::GetCfgTestList</a></a></strong> {platform testsList release inList1 outList1} {
   upvar $inList1 inList
   upvar $outList1 outList
   if {![file isdirectory Tmp]} {
        file mkdir Tmp
   }
   if {$release==&#34;&#34;} {
      set release &#34;current&#34;
   }
   set sourceCompleteTestsDir &#34;completetests.lst&#34;
   foreach tmptest $testsList {
      lappend tests [string trim $tmptest]
   }

   set testsToRunA [calculateTestToRun &#34;dev&#34; $platform]
   array set testsToRunAll $testsToRunA
   puts &#34;testsList = $testsList&#34;
   set strippedAllTestsList [combineAndStripTestList testsToRunAll]
   if {$testsList==&#34;&#34;||$testsList==&#34;?&#34;} {
      regsub -all &#34; &#34; $strippedAllTestsList &#34;, &#34; comaSeparated
      puts &#34;$comaSeparated&#34;
      return -1
   }

   set arrName [array names testsToRunAll]
   set initIndex [lsearch -regexp $strippedAllTestsList init]
   if {$initIndex!=-1} {
      <span class="comment-line">#puts $fd_out &#34;[lindex $strippedAllTestsList $initIndex]&#34;</span>
      set oldInitTest [lindex $strippedAllTestsList $initIndex]
   } else {
      set oldInitTest &#34;&#34;
   }

   <span class="comment-line">### Put check here for valid tests from completetests.lst of $modName</span>
   set inList &#34;&#34;
   set outList &#34;&#34;
   foreach testToRun $tests {
      if {[lsearch -exact $strippedAllTestsList $testToRun]==-1} {
         lappend outList $testToRun
      } else {
         lappend inList $testToRun
      }
   }
   return 1
}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
