<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ePTMisc.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ePTMisc.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ePTMisc.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ePTMisc.tcl-annot.html">annotations</a> | <a href="ePTMisc.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<span class="comment-line">##################################################################</span>
<span class="comment-line"># $RCSfile: ixiaMisc.tcl,v $ - SQA Library</span>
<span class="comment-line">#</span>
<span class="comment-line"># Copyright (c) 1999 by Extreme Networks Inc.</span>
<span class="comment-line"># </span>
<span class="comment-line"># Revision control history</span>
<span class="comment-line"># ------------------------</span>
<span class="comment-line"># $Header: /export/cvsroot/automation/Lib/ixiaMisc.tcl,v 2.11.2.1.4.26.2.1 2010/11/03 07:09:07 mshabeer Exp $</span>
<span class="comment-line">#</span>
<span class="comment-line"># Extreme Networks modification history</span>
<span class="comment-line"># -------------------------------------</span>
<span class="comment-line"># $Log: ixiaMisc.tcl,v $</span>
<span class="comment-line"># Revision 2.11.2.1.4.26.2.1  2010/11/03 07:09:07  mshabeer</span>
<span class="comment-line"># Add ixia 5.50 client version</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.26  2010/08/24 01:39:52  ghundertmark</span>
<span class="comment-line"># Merge branch 12_4 to trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.26  2010/08/24 01:39:52  ghundertmark</span>
<span class="comment-line"># Merge branch 12_4 to trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.25  2010/08/18 19:48:24  ghundertmark</span>
<span class="comment-line"># Add ixia version 5.60</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.24  2010/06/08 18:03:07  ghundertmark</span>
<span class="comment-line"># Add ixia 5.30 client version</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.23  2009/07/07 22:39:03  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.22.2.3  2010/08/23 22:06:51  ghundertmark</span>
<span class="comment-line"># Add new ixia version check for ixia 5_60 version</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.22.2.2  2009/08/10 20:17:51  jramarao</span>
<span class="comment-line"># Ixia version 5.30 addition</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.22.2.1  2009/07/07 22:37:05  lagrawal</span>
<span class="comment-line"># removed extra empty line causing issue in some procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.22  2009/07/01 10:55:41  nellinivasu</span>
<span class="comment-line"># Merged From Branch 'branch-dev_v12-1-rel4'</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.21  2009/05/01 18:07:10  lagrawal</span>
<span class="comment-line"># merge from dev</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.20.6.1  2009/03/24 16:34:09  jramarao</span>
<span class="comment-line"># Timeout increased to avoid warning Tx error checking</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.20  2008/08/05 03:44:07  lagrawal</span>
<span class="comment-line"># merge from branch-fixes_v12-1-rel0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.19.6.2  2008/07/25 23:02:00  lagrawal</span>
<span class="comment-line"># merged changes from branch-dev_v12-1-rel2 and trunk-exos. cmd cvs update -dj branch-dev_v12-1-rel2 automation</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.19.6.1.2.1  2008/07/02 22:59:08  jramarao</span>
<span class="comment-line"># Support for 5.2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.19.6.1  2008/06/27 23:16:26  lagrawal</span>
<span class="comment-line"># merged from branch-dev_v12-1-rel1 to branch-fixes_v12-1-rel0 , cvs update -dj branch-dev_v12-1-rel1</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.19.8.1  2008/06/25 23:39:58  msubramanian</span>
<span class="comment-line"># To support Ixia Client 5.10 in SetupIxiaEnv</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.19  2007/10/18 21:46:52  djain</span>
<span class="comment-line"># Added result_debug statement</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.18  2007/09/24 19:17:39  dsuk</span>
<span class="comment-line"># added getIxiaPortType function</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.17  2007/04/05 00:16:10  igokhale</span>
<span class="comment-line"># updated SetIxiaEnv to set default ixia ver</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.16  2007/03/08 18:51:50  eyoung</span>
<span class="comment-line"># Changed SetIxiaEnv code to check existence of environment variables before referencing them.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.15  2007/02/21 01:42:46  achilukuri</span>
<span class="comment-line"># Merging  Q3FY07-11.6-Phase-2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.11.4.1  2007/02/09 20:43:01  ghundertmark</span>
<span class="comment-line"># Merge trunk to branch</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.14  2007/01/30 00:36:29  skumar</span>
<span class="comment-line"># Fix dependency on 5.00</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.13  2007/01/16 16:34:46  skumar</span>
<span class="comment-line"># SetupIxiaEnv</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.12  2007/01/03 22:00:09  skumar</span>
<span class="comment-line"># Do not call package req at top</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.11  2006/07/12 19:41:47  skumar</span>
<span class="comment-line"># Removed debug code for linkdown</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.10  2006/06/30 22:35:34  ghundertmark</span>
<span class="comment-line"># Q4FY06 Release commit</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.9  2006/06/09 09:06:22  nellinivasu</span>
<span class="comment-line">#  Changes made to debug ixia transmission problem.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.8  2006/05/31 05:11:10  nellinivasu</span>
<span class="comment-line"># Changes made to debug ixia transmission problem.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.7  2006/05/29 13:19:30  nellinivasu</span>
<span class="comment-line"># Changes made to debug ixia transmission problem.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.6  2006/05/26 12:17:34  nellinivasu</span>
<span class="comment-line"># Changes made to debug ixia transmission problem.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.5  2006/03/14 19:51:24  skumar</span>
<span class="comment-line"># Updated loopCount proc with right math computation</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.4  2005/12/21 22:24:18  smohanty</span>
<span class="comment-line"># Commit for Release 12</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.3  2005/11/30 02:27:44  skumar</span>
<span class="comment-line"># New proc decideLoopCount for large numFrames</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.2.14.2  2005/10/12 01:51:38  skumar</span>
<span class="comment-line"># Fix wrong spelling in couint</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.2.14.1  2005/10/12 00:43:57  skumar</span>
<span class="comment-line"># Added workaround for &gt; 16Mil pkt count</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.2.14.2  2005/10/12 01:51:38  skumar</span>
<span class="comment-line"># Fix wrong spelling in couint</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.2.14.1  2005/10/12 00:43:57  skumar</span>
<span class="comment-line"># Added workaround for &gt; 16Mil pkt count</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.2  2004/06/16 20:09:52  cshaw</span>
<span class="comment-line"># merge from main trunk again for ixOS3.70 stuff</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.14  2003/08/18 19:33:01  skumar</span>
<span class="comment-line"># Redo ixiaGenMap to work correctly with 1port 10Gig card in mixed speed chassis</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.4.1  2003/08/20 03:20:05  cshaw</span>
<span class="comment-line"># trunk-exos release</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.2.3  2003/08/14 02:10:01  cshaw</span>
<span class="comment-line"># Merged in trunk for 3.65 related changes</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.2.2  2003/08/14 00:44:41  cshaw</span>
<span class="comment-line"># Merged in trunk for 3.65 related changes</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.13  2003/07/25 18:02:58  cshaw</span>
<span class="comment-line"># Merged from br-1-6</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.12.20.1  2003/07/19 21:38:35  skumar</span>
<span class="comment-line"># Added decidePercentage call due to avoid calling deprecated calls.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1.2.1  2003/06/23 21:28:45  cshaw</span>
<span class="comment-line"># Merged in EW trunk</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11.2.1  2002/09/27 00:21:48  jna</span>
<span class="comment-line"># Modified for L2 testing</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.12  2002/07/29 18:06:46  aleu</span>
<span class="comment-line"># add description header for each proc</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.11  2002/06/04 00:15:52  aleu</span>
<span class="comment-line"># add ixia card type 3 (2 port GigaBit card)</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.10  2002/05/15 21:08:57  aleu</span>
<span class="comment-line"># add ixia card types 6/26/28 in findNumPortPerIxiaCard{}</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.9  2002/05/06 21:30:26  aleu</span>
<span class="comment-line"># remove all cardSpeed global var and rewrite related ixia msic procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.9  2002/05/06 21:30:26  aleu</span>
<span class="comment-line"># remove all cardSpeed global var and rewrite related ixia msic procs</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.8  2002/04/24 21:28:58  aleu</span>
<span class="comment-line"># add ixia TXS8 card (type 57) checking and check numPortPerCd card by card</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.7  2001/12/06 19:48:47  tnguyen</span>
<span class="comment-line"># decideFrameRate now return correct framerate for any framesize</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.6  2000/09/11 23:33:17  tnguyen</span>
<span class="comment-line"># Add timeout so this function will return instead of going into an infinite loop</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.5  2000/06/02 23:58:43  tnguyen</span>
<span class="comment-line"># Fix frameRate error</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.4  2000/01/06 23:58:45  jfan</span>
<span class="comment-line"># Modify for different speed Ixia port number conversion</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.3  1999/10/11 16:13:41  jfan</span>
<span class="comment-line"># Modify program fir IxiaCardSpeed &amp; IxiaStartingCardNumber options</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.2  1999/09/16 23:45:57  jfan</span>
<span class="comment-line"># Add &#34;standard&#34; map option</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 2.1  1999/07/23 14:50:21  aedem</span>
<span class="comment-line"># Merge for 2.0</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1.2.1  1999/06/30 15:16:12  aedem</span>
<span class="comment-line"># Updated for Linux and Ixia 2.0 Beta</span>
<span class="comment-line">#</span>
<span class="comment-line"># Revision 1.1.1.1  1999/06/25 17:53:46  jfan</span>
<span class="comment-line"># Initial import.</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">##################################################################</span>

<span class="comment-line">#load {expect52.dll}</span>
set auto_path [linsert $auto_path 0 . ]

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaGenMap</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Generate ixia one2one map by adding all ixia ports.</span>
<span class="comment-line"># Input args: {numIxiaCd} {startCardNum} {ixMapOption} {direction} {chid}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaGenMap $numIxiaCd $startCardNum $ixMapOption $direction $chid</span>
<span class="comment-line"># Category: SetupTestTool</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaGenMap_218">proc <a href="ePTMisc.tcl-annot.html#::::ixiaGenMap">::::ixiaGenMap</a></a></strong> {{txPortId 1}
                 {rxPortId 2}
                 {ixMapOption standard}
                 {direction 2Way}
                 {chid 1}} {

   global one2oneArray
   set portList &#34;&#34;

   <a name="::map(1)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> new 	-type   one2one
   <a name="::map(2)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> config 	-type 	one2one

   switch $ixMapOption {
   	standard {
           for {set p $txPortId} {$p&lt;=$rxPortId} {incr p} {
               set rxPort [<a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $p chas card port]
               lappend portList &#34;{$chas $card $port}&#34;
           }
           for {set i 0} {$i&lt;[llength $portList]} {incr i 2} {
              set txPort [lindex [lindex $portList $i] 0]
              set rxPort [lindex [lindex $portList [expr $i+1]] 0]
              <a name="::map(3)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> add [lindex $txPort 0] [lindex $txPort 1] [lindex $txPort 2] [lindex $rxPort 0] [lindex $rxPort 1] [lindex $rxPort 2]
              if {$direction == &#34;2Way&#34;} {
                 <a name="::map(4)"><a href="./ePTClient.tcl.html#::map_366">::map</a></a> add [lindex $rxPort 0] [lindex $rxPort 1] [lindex $rxPort 2] [lindex $txPort 0] [lindex $txPort 1] [lindex $txPort 2]
              }
           }
	}
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaConf_clearStat</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Clear all ports statistics on the specified ixia chassis/card.</span>
<span class="comment-line"># Input args: {cardNo} {chid}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaConf_clearStat $cardNo</span>
<span class="comment-line"># Category: SetupTestTool</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaConf_clearStat_258">proc <a href="ePTMisc.tcl-annot.html#::::ixiaConf_clearStat">::::ixiaConf_clearStat</a></a></strong> {{cardNo 1} {chid 1}} {
   global one2oneArray
   set numPorts [<a name="::findNumPortPerIxiaCard(1)"><a href="./ePTMisc.tcl.html#::findNumPortPerIxiaCard_388">::findNumPortPerIxiaCard</a></a> $cardNo]
   for {set p 1} {$p&lt;=$numPorts} {incr p 1} {<a name="::zeroPortStats(1)"><a href="./mapping.tcl.html#::zeroPortStats_130">::zeroPortStats</a></a> $chid $cardNo $p}
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaStartCaptureCards</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Start capture on all ports of the specified ixia card range.</span>
<span class="comment-line"># Input args: {numIxiaCd} {startCardNum} {chid}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaStartCaptureCards $numIxiaCd $startCardNum</span>
<span class="comment-line"># Category: SetupTestTool</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaStartCaptureCards_274">proc <a href="ePTMisc.tcl-annot.html#::::ixiaStartCaptureCards">::::ixiaStartCaptureCards</a></a></strong> {{numIxiaCd 1} {startCardNum 1} {chid 1}} {
   set lastCardNum [expr $startCardNum + $numIxiaCd - 1]
   for {set c $startCardNum} {$c&lt;=$lastCardNum} {incr c 1} {
      set numPorts [<a name="::findNumPortPerIxiaCard(2)"><a href="./ePTMisc.tcl.html#::findNumPortPerIxiaCard_388">::findNumPortPerIxiaCard</a></a> $c]
      for {set p 1} {$p&lt;=$numPorts} {incr p 1} {
         <a name="::startPortCapture(1)"><a href="./mapping.tcl.html#::startPortCapture_118">::startPortCapture</a></a> $chid $c $p
      }
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaStopCaptureCards</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Stop capture on all ports of the specified ixia card range.</span>
<span class="comment-line"># Input args: {numIxiaCd} {startCardNum} {chid}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaStopCaptureCards $numIxiaCd $startCardNum</span>
<span class="comment-line"># Category: SetupTestTool</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaStopCaptureCards_294">proc <a href="ePTMisc.tcl-annot.html#::::ixiaStopCaptureCards">::::ixiaStopCaptureCards</a></a></strong> {{numIxiaCd 1} {startCardNum 1} {chid 1}} {
   set lastCardNum [expr $startCardNum + $numIxiaCd - 1]
   for {set c $startCardNum} {$c&lt;=$lastCardNum} {incr c 1} {
      set numPorts [<a name="::findNumPortPerIxiaCard(3)"><a href="./ePTMisc.tcl.html#::findNumPortPerIxiaCard_388">::findNumPortPerIxiaCard</a></a> $c]
      for {set p 1} {$p&lt;=$numPorts} {incr p 1} {
         <a name="::stopPortCapture(1)"><a href="./mapping.tcl.html#::stopPortCapture_115">::stopPortCapture</a></a> $chid $c $p
      }
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaStopTxCards</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	Stop transmission on all ports of the specified ixia card range.</span>
<span class="comment-line"># Input args: {numIxiaCd} {startCardNum} {chid}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaStopTxCards $numIxiaCd $startCardNum</span>
<span class="comment-line"># Category: SetupTestTool</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaStopTxCards_314">proc <a href="ePTMisc.tcl-annot.html#::::ixiaStopTxCards">::::ixiaStopTxCards</a></a></strong> {{numIxiaCd 1} {startCardNum 1} {chid 1}} {
   set lastCardNum [expr $startCardNum + $numIxiaCd - 1]
   for {set c $startCardNum} {$c&lt;=$lastCardNum} {incr c 1} {
      set numPorts [<a name="::findNumPortPerIxiaCard(4)"><a href="./ePTMisc.tcl.html#::findNumPortPerIxiaCard_388">::findNumPortPerIxiaCard</a></a> $c]
      for {set p 1} {$p&lt;=$numPorts} {incr p 1} {
         stopPortTx $chid $c $p
      }
   }
}

<span class="comment-line">##################################################################    </span>
<span class="comment-line"># Procedure Name: ixiaCheckTxDone</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     	 Check if ixia transmission is done as expected no. of frames.</span>
<span class="comment-line"># Input args: {chid} {c} {p} {targetTxNum}</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	ixiaCheckTxDone $chid $card $port $targetTxNum</span>
<span class="comment-line"># Category: VerifyTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::ixiaCheckTxDone_334">proc <a href="ePTMisc.tcl-annot.html#::::ixiaCheckTxDone">::::ixiaCheckTxDone</a></a></strong> {{chid 1}
                      {c 1}
                      {p 1}
                      {targetTxNum 1}
                      {txPortId 1}} {
        global DUTs_info;
        global whichDutNow;
       
	set timeout	[expr 60 + $targetTxNum/10]
	set retCode 0

	if { [<a name="::stat(1)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statFramesSent $chid $c $p] } {
		logMsg &#34;Error getting Tx statistics for $chid $c $p&#34;
		set retCode 1
	}
<span class="comment-line">#        puts &#34;Param values :$chid:$c:$p:$targetTxNum:$txPortId&#34;</span>
    	set numTxFrames [<a name="::stat(2)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -counterVal]

<span class="comment-line">#        puts &#34;NumTXFrames : $numTxFrames&#34;</span>
	while {$numTxFrames &lt; $targetTxNum} {
<span class="comment-line">#                puts &#34;INSIDE ixiaCheckTxdone&#34; </span>
		if { [<a name="::stat(3)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> get statFramesSent $chid $c $p] } {
<span class="comment-line">#                puts &#34;INSIDE ixiaCheckTxdone if&#34; </span>
			logMsg &#34;Error getting Tx statistics for $chid $c $p&#34;
			set retCode 1
		}
<span class="comment-line">#                puts &#34;INSIDE ixiaCheckTxdone after if&#34; </span>
        	set numTxFrames [<a name="::stat(4)"><a href="./ePTClient.tcl.html#::stat_1769">::stat</a></a> cget -counterVal]
<span class="comment-line">#                puts &#34;INSIDE ixiaCheckTxdone after counterval&#34; </span>
        	after 100
		incr timeout -1
		if { $timeout == 0 } {
		   <a name="::result_warning(1)"><a href="./ql_multi.tcl.html#::result_warning_407">::result_warning</a></a> &#34;Error checking Tx Done on $chid $c $p. Timeout after [expr $timeout/10] seconds&#34;

         	   set retCode 1
		   break
		}
	}

<span class="comment-line">#                puts &#34;After While Loop&#34; </span>
    if {$retCode == 0} { return $numTxFrames
    } else {             return 0 }
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: findNumPortPerIxiaCard   </span>
<span class="comment-line"># Description: </span>
<span class="comment-line">#	Find the right number of ports on the specified Ixia card</span>
<span class="comment-line"># Input args: {cardNum}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	set numPorts [findNumPortPerIxiaCard $c]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::findNumPortPerIxiaCard_388">proc <a href="ePTMisc.tcl-annot.html#::::findNumPortPerIxiaCard">::::findNumPortPerIxiaCard</a></a></strong> {{cardNum 1}} {
if {0} {
   if {[<a name="::card(1)"><a href="./ePTClient.tcl.html#::card_424">::card</a></a> get 1 $cardNum] == 0} {
     set cardType [<a name="::card(2)"><a href="./ePTClient.tcl.html#::card_424">::card</a></a> cget -type]
     switch $cardType {
	2  -
	6  -
	26 		{ set numPorts 4 }
	3  -
	7  -
	28 		{ set numPorts 2 }
	42 -
	46 -
	61 		{ set numPorts 1 }
	57 		{ set numPorts 8 }
        default 	{ set numPorts 4 }
     }
   } else {
     set numPorts 0
   }   
}
   return 8
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: decideFrameRate   </span>
<span class="comment-line"># Description: </span>
<span class="comment-line">#	Decide the ixia frame rate based on the given portSpeed, FrameSize, </span>
<span class="comment-line">#	&amp; percentage bandwidth</span>
<span class="comment-line"># Input args: {portSpeed} {frameSize} {percentage}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	set frameRate [decideFrameRate $txSpeed $frameSize $percentage]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::decideFrameRate_423">proc <a href="ePTMisc.tcl-annot.html#::::decideFrameRate">::::decideFrameRate</a></a></strong> {{portSpeed 100}
                      {frameSize 64}
		      {percentage 100}} {
   switch $frameSize {
            	64	{ set frameRate 1488.1	}
            	128	{ set frameRate 844.6	}
		256	{ set frameRate 452.9	}
		512	{ set frameRate 235.0	}
		1024	{ set frameRate 119.8	}
		1280	{ set frameRate 96.2		}
		1518	{ set frameRate 81.3 	}
		default { set frameRate [expr (1488.1*64)/$frameSize] }
   }

   set frameRate [expr $frameRate * $portSpeed * $percentage / 100 ]
   return $frameRate
}

<span class="comment-line">################################################################## </span>
<span class="comment-line"># Procedure Name: GetPortIdSpeed   </span>
<span class="comment-line"># Description: </span>
<span class="comment-line">#	Get the ixia port speed on the specified port ID</span>
<span class="comment-line"># Input args: {portId}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage: </span>
<span class="comment-line">#	set txSpeed [GetPortIdSpeed $portID]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::GetPortIdSpeed_451">proc <a href="ePTMisc.tcl-annot.html#::::GetPortIdSpeed">::::GetPortIdSpeed</a></a></strong> { {portId 1} } {
  
   <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chasisId card port
<span class="comment-line">#   port get $chasisId $card $port</span>
<span class="comment-line">#   return [port cget -speed]</span>
   return 100
   
}   

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: decidePercentage</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Decide the ixia percentage given portSpeed, FrameSize,</span>
<span class="comment-line">#       &amp; frameRate</span>
<span class="comment-line"># Input args: {portSpeed} {frameSize} {frameRate}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#         set percentage [decidePercentage $txSpeed $frameSize $frameRate]</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::decidePercentage_471">proc <a href="ePTMisc.tcl-annot.html#::::decidePercentage">::::decidePercentage</a></a></strong> {{portSpeed 100}
                      {frameSize 64}
                      {frameRate default}} {
   switch $frameSize {
                64      { set full [expr 1488.1* $portSpeed]}
                128     { set full [expr 844.6*$portSpeed]      }
                256     { set full [expr 452.9*$portSpeed]      }
                512     { set full  [expr 235.0*$portSpeed]     }
                1024    { set full  [expr 191.8*$portSpeed]     }
                1280    { set full  [expr 96.2*$portSpeed]      }
                1518    { set full  [expr 81.3*$portSpeed]      }
                default { set full [expr (1488.1*64*$portSpeed)/$frameSize] }
   }

   set percentage [expr $frameRate * 100 / $full]
   return $percentage
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: decideLoopCount</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#       Decides the loopCount if numFrames &gt; 16Mil due to ixia bug</span>
<span class="comment-line"># Input args: {portSpeed} {frameSize} {frameRate}</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line"># decideLoopCount $numFrames $streamType</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::decideLoopCount_499">proc <a href="ePTMisc.tcl-annot.html#::::decideLoopCount">::::decideLoopCount</a></a></strong> {numFrames streamType} {
 
      if {$numFrames&gt;16777215} {
         for {set i 1} {$i&lt;900000} {incr i 1} {
            set framesCount [mpexpr $numFrames/[mpexpr 1e$i]]
            if {$framesCount&lt;16770000} {
               break
            }
         }
         <a name="::stream(1)"><a href="./ePTClient.tcl.html#::stream_565">::stream</a></a> config -numFrames  $framesCount
         <a name="::stream(2)"><a href="./ePTClient.tcl.html#::stream_565">::stream</a></a> config -loopCount [expr 1e$i]
         <a name="::stream(3)"><a href="./ePTClient.tcl.html#::stream_565">::stream</a></a> config -dma    firstLoopCount
      } else {
      <a name="::stream(4)"><a href="./ePTClient.tcl.html#::stream_565">::stream</a></a> config -dma    $streamType
      }
   return
}

<strong><a name="::::SetIxiaEnv_517">proc <a href="ePTMisc.tcl-annot.html#::::SetIxiaEnv">::::SetIxiaEnv</a></a></strong> {ixiaPath} {
global env
   set env(DEFAULT_IXIA_HOME) $env(IXIA_HOME)
   set env(IXIA_HOME) &#34;$ixiaPath&#34;
   set TCLver 8.3

<span class="comment-line"># USER MAY NEED TO CHANGE THESE IF USING OWN TCL LIBRARY </span>
   set env(TCL_HOME) &#34;$ixiaPath&#34;

<span class="comment-line"># USER NORMALLY DOES NOT CHANGE ANY LINES BELOW</span>
   set env(IxiaLibPath) &#34;$env(IXIA_HOME)/lib&#34;
   set env(IxiaBinPath) &#34;$env(IXIA_HOME)/bin&#34;
   set env(TCLLibPath) &#34;$env(TCL_HOME)/lib&#34;
   set env(TCLBinPath) &#34;$env(TCL_HOME)/bin&#34;
   set env(TCL_LIBRARY) &#34;$env(TCLLibPath)/tcl$TCLver&#34;
   set env(TK_LIBRARY) &#34;$env(TCLLibPath)/tk$TCLver&#34;

   <span class="comment-line"># EY-03-08-2007: Check if variable exists when referencing.</span>
   set env(PATH) &#34;$env(IxiaBinPath):.:$env(TCLBinPath):[expr {[info exists env(PATH)] ? $env(PATH) : &#34;&#34;}]&#34;;

   set env(TCLLIBPATH) &#34;$env(IxiaLibPath)&#34;

   <span class="comment-line"># EY-03-08-2007: Check if variable exists when referencing.</span>
   set env(LD_LIBRARY_PATH) &#34;$env(IxiaLibPath):$env(TCLLibPath):[expr {[info exists env(LD_LIBRARY_PATH)] ? $env(LD_LIBRARY_PATH) : &#34;&#34;}]&#34;;
   set env(IXIA_RESULTS_DIR) &#34;$env(IXIA_HOME)/results&#34;
   set env(IXIA_LOGS_DIR) &#34;$env(IXIA_HOME)/logs&#34;
   set env(IXIA_TCL_DIR) &#34;$env(IxiaLibPath)&#34;
   set env(IXIA_SAMPLES) &#34;$env(IxiaLibPath)/ixTcl1.0&#34;
   if {[regexp -nocase &#34;5_00&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.00.300.20
   } elseif {[regexp -nocase &#34;4_10&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 4.10.250.15
   } elseif {[regexp -nocase &#34;5_10&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.10.350.28
   } elseif {[regexp -nocase &#34;5_20&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.20.400.3
   } elseif {[regexp -nocase &#34;5_30&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.30.450.31
   } elseif {[regexp -nocase &#34;5_60&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.60.550.7
   } elseif {[regexp -nocase &#34;5_50&#34; $ixiaPath]} {
      set env(IXIA_VERSION) 5.50.500.27
   } else {
      set env(IXIA_VERSION) 3.80.125.27
   }

}

<span class="comment-line">#############################################################################################</span>
<span class="comment-line"># Procedure Name: getIxiaPortType</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This proc returns the type of a ixia port.</span>
<span class="comment-line"># ex:</span>
<span class="comment-line"># 1     port10100BaseTX</span>
<span class="comment-line"># 8     portGbic</span>
<span class="comment-line"># 63    port10100Txs</span>
<span class="comment-line"># 82    port1000Stxs4</span>
<span class="comment-line"># see Ixia manual for more definitions</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#</span>
<span class="comment-line">#  -ixPort             - Ixia port</span>
<span class="comment-line">#</span>
<span class="comment-line"># Output args: none</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage: getIxiaPortType 8</span>
<span class="comment-line">#</span>
<span class="comment-line">##############################################################################################</span>
<strong><a name="::::getIxiaPortType_585">proc <a href="ePTMisc.tcl-annot.html#::::getIxiaPortType">::::getIxiaPortType</a></a></strong> {ixPort} {

<a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $ixPort chasis card port
  <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;chasis : $chasis card : $card port : $port&#34;
  <a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chasis $card $port
  set portType [<a name="::port(2)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> cget -type]
  <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;portType - $portType&#34;
  return $portType
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
