<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>tbmlLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#tbmlLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>tbmlLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="tbmlLib.tcl-annot.html">annotations</a> | <a href="tbmlLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">
<strong><a name="::::CreateTBML_1">proc <a href="tbmlLib.tcl-annot.html#::::CreateTBML">::::CreateTBML</a></a></strong><a name="::::CreateTBML"></a> {args} {

    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CreateTBML $args {
        cfg &#34;NULL&#34;
        path &#34;NULL&#34;
        homeDir &#34;NULL&#34;
    }

set tbmlhead &#34;&lt;?xml version=\&#34;1.0\&#34; encoding=\&#34;UTF-8\&#34;?&gt;\n\
&lt;tbml xmlns:xs=\&#34;http://www.w3.org/2001/XMLSchema\&#34; xmlns:xsi=\&#34;http://www.w3.org/2001/XMLSchema-instance\&#34; xsi:schemaLocation=\&#34;http://www.teslaalliance.org/trs/tbml/1.0/tbml-core.xsd\&#34; xmlns=\&#34;http://www.teslaalliance.org/trs/tbml/1.0\&#34;&gt;\n\
  &lt;header&gt;\n\
    &lt;name&gt;&lt;/name&gt;\n\
    &lt;description&gt;&lt;/description&gt;\n\
    &lt;property name=\&#34;dateModified\&#34;&gt;2014-05-22T22:25:26.844-04:00&lt;/property&gt;\n        \
    &lt;property name=\&#34;creationTool\&#34; vendor=\&#34;com.fnfr\&#34;&gt;com.fnfr.itest.topology.tbml.diagram&lt;/property&gt;\n        \
    &lt;property name=\&#34;creationToolVersion\&#34; vendor=\&#34;com.fnfr\&#34;&gt;4.3.0.71664&lt;/property&gt;\n        \
    &lt;property name=\&#34;switchPort2DefaultRouter\&#34; vendor=\&#34;Extreme\&#34;&gt;@switchPort2DefaultRouter@&lt;/property&gt;\n        \
    &lt;property name=\&#34;numDUT\&#34; vendor=\&#34;Extreme\&#34;&gt;@numDUT@&lt;/property&gt;\n        \
    &lt;property name=\&#34;ETCL_ID\&#34; vendor=\&#34;Extreme\&#34;&gt;@ETCL_ID@&lt;/property&gt;\n        \
    &lt;property name=\&#34;defaultRouter\&#34; vendor=\&#34;Extreme\&#34;&gt;@defaultRouter@&lt;/property&gt;\n        \
    &lt;property name=\&#34;startCardNum\&#34; vendor=\&#34;Extreme\&#34;&gt;@startCardNum@&lt;/property&gt;\n        \
    &lt;property name=\&#34;checkConnection\&#34; vendor=\&#34;Extreme\&#34;&gt;@checkConnection@&lt;/property&gt;\n        \
    &lt;property name=\&#34;connectionTimeout\&#34; vendor=\&#34;Extreme\&#34;&gt;@connectionTimeout@&lt;/property&gt;\n        \
    &lt;property name=\&#34;InBandNetworkV4GW\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkV4GW@&lt;/property&gt;\n        \
    &lt;property name=\&#34;InBandNetworkV4Mask\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkV4Mask@&lt;/property&gt;\n        \
    &lt;property name=\&#34;InBandNetworkV6Mask\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkV6Mask@&lt;/property&gt;\n        \
    &lt;property name=\&#34;lab\&#34; vendor=\&#34;Extreme\&#34;&gt;@lab@&lt;/property&gt;\n        \
    &lt;property name=\&#34;phyMode\&#34; vendor=\&#34;Extreme\&#34;&gt;@phyMode@&lt;/property&gt;\n\
  &lt;/header&gt;\n\
  &lt;body&gt;\n&#34;;

set tbmlFoot &#34;  &lt;/body&gt;\n\
  &lt;illustration&gt;\n\
    &lt;layer/&gt;\n\
  &lt;/illustration&gt;\n\
&lt;/tbml&gt;\n&#34;;

set resourcesTop &#34;    &lt;resources&gt;&#34;;
set resourcesBottom &#34;    &lt;/resources&gt;&#34;;
set resourceBottom &#34;    &lt;/resource&gt;&#34;;
set linkTop &#34;    &lt;connectivity&gt;&#34;;
set linkBottom &#34;    &lt;/connectivity&gt;&#34;

<span class="comment-line"># Variables for Switches kept in DUTs_info... Loop through to sub vars</span>
set diList {&#34;imageSel&#34; &#34;imageBooted&#34; &#34;version&#34; &#34;connectType&#34; \
   &#34;VERSION&#34; &#34;priImage&#34; &#34;secImage&#34; &#34;platform&#34; &#34;sysMAC&#34; &#34;bootROM&#34; \
   &#34;relMaster&#34; &#34;verTime&#34; &#34;serial&#34; &#34;hwList&#34; &#34;hwListFM&#34; &#34;numSlots&#34; \
   &#34;numSlotsFM&#34; &#34;HardwareType&#34; &#34;bladeType&#34; &#34;dlReqD&#34; &#34;sysName&#34; &#34;sysType&#34; \
   &#34;sVVersion&#34; &#34;snmpVersion&#34; &#34;license&#34; &#34;memoryCard&#34; &#34;mpls_license&#34; \
   &#34;bgp&#34; &#34;openflow_license&#34; &#34;ssh_license&#34; &#34;advancededge_core&#34; &#34;advancedcore_edge&#34; \
   &#34;advancededge_advancedcore&#34; &#34;core_advancedcore&#34; &#34;edge_advancededge&#34; &#34;edge_core&#34; \
   &#34;trill_license&#34; &#34;40_100_optics_license&#34; &#34;avb_license&#34; \
   &#34;remark&#34; &#34;connect&#34; &#34;ip&#34; &#34;defaultblade&#34; &#34;setup&#34;}

set tbmlSwitchHead_O &#34;      &lt;resource guid=\&#34;db4a221c-dc20-4e09-964f-534e99db164b\&#34; id=\&#34;@res_id@\&#34; type=\&#34;switch\&#34;&gt;\n        \
        &lt;boundary height=\&#34;45\&#34; width=\&#34;50\&#34; x=\&#34;@x@\&#34; y=\&#34;@y@\&#34;/&gt;\n        \
        &lt;property name=\&#34;iconURI\&#34;&gt;platform:/plugin/com.fnfr.itest.topology.tbml.edit/icons/full/topology/switch_32.gif&lt;/property&gt;\n        \
        &lt;property name=\&#34;name\&#34;&gt;@DUT@&lt;/property&gt;\n        \
        &lt;property name=\&#34;InBandNetworkV4IP\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkV4IP@&lt;/property&gt;\n        \
        &lt;property name=\&#34;InBandNetworkBlade\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkBlade@&lt;/property&gt;\n        \
        &lt;property name=\&#34;InBandNetworkPort\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkPort@&lt;/property&gt;\n        \
        &lt;property name=\&#34;InBandNetworkMask\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkMask@&lt;/property&gt;\n        \
        &lt;property name=\&#34;DefaultBlade\&#34; vendor=\&#34;Extreme\&#34;&gt;@DefaultBlade@&lt;/property&gt;\n        \
        &lt;property name=\&#34;MASK\&#34; vendor=\&#34;Extreme\&#34;&gt;@MASK@&lt;/property&gt;\n        \
        &lt;property name=\&#34;SETUP\&#34; vendor=\&#34;Extreme\&#34;&gt;@SETUP@&lt;/property&gt;\n        \
        &lt;property name=\&#34;POWERCYCLE_DUT\&#34; vendor=\&#34;Extreme\&#34;&gt;@POWERCYCLE_DUT@&lt;/property&gt;\n        \
        &lt;property name=\&#34;switchPort2DefaultRouter\&#34; vendor=\&#34;Extreme\&#34;&gt;@switchPort2DefaultRouter@&lt;/property&gt;\n        \
        &lt;property name=\&#34;MGMT_GW\&#34; vendor=\&#34;Extreme\&#34;&gt;@MGMT_GW@&lt;/property&gt;\n        \
        &lt;property name=\&#34;InBandNetworkV6IP\&#34; vendor=\&#34;Extreme\&#34;&gt;@InBandNetworkV6IP@&lt;/property&gt;&#34;

set tbmlConnTop_0 &#34;       &lt;extensions namespace=\&#34;com.fnfr.itest.session\&#34; type=\&#34;com.fnfr.itest.session\&#34;&gt;&#34;
set tbmlConnBottom_0 &#34;       &lt;/extensions&gt;&#34;

set tbmlConn_0 &#34;          &lt;session baseSessionProfile=\&#34;\&#34; name=\&#34;@CONNECT@\&#34; provider=\&#34;com.fnfr\&#34;&gt;\n            \
            &lt;sessionProfile version=\&#34;4.3.0.71664\&#34;&gt;\n               \
              &lt;baseApplication&gt;com.fnfr.svt.applications.telnet&lt;/baseApplication&gt;\n                  \
              &lt;sessionProperties type=\&#34;com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties\&#34;&gt;\n                   \
                &lt;ipAddress inherit=\&#34;false\&#34;&gt;@CONNECTIP@&lt;/ipAddress&gt;\n                   \
                &lt;port inherit=\&#34;false\&#34;&gt;@CONNECTPORT@&lt;/port&gt;\n                 \
              &lt;/sessionProperties&gt;\n                 \
              &lt;baseProfile&gt;project://common_project/session_profiles/extr.ffsp&lt;/baseProfile&gt;\n                 \
              &lt;standalone&gt;false&lt;/standalone&gt;\n             \
            &lt;/sessionProfile&gt;\n            \
          &lt;/session&gt;          &#34;

set tbmlSSHConn_0 &#34;          &lt;session baseSessionProfile=\&#34;\&#34; name=\&#34;mgmt_network_ssh\&#34; provider=\&#34;com.fnfr\&#34;&gt;\n            \
            &lt;sessionProfile version=\&#34;4.3.0.71664\&#34;&gt;\n              \
              &lt;baseApplication&gt;com.fnfr.svt.applications.ssh&lt;/baseApplication&gt;\n              \
              &lt;sessionProperties type=\&#34;com.fnfr.svt.applications.ssh.documents.SSHProperties\&#34;&gt;\n              \
                &lt;ipAddress inherit=\&#34;false\&#34;&gt;@CONNECTIP@&lt;/ipAddress&gt;\n            \
                &lt;user inherit=\&#34;false\&#34;&gt;admin&lt;/user&gt;\n             \
              &lt;/sessionProperties&gt;\n              \
              &lt;baseProfile&gt;project://common_project/session_profiles/extr_ssh.ffsp&lt;/baseProfile&gt;\n           \
              &lt;standalone&gt;false&lt;/standalone&gt;\n     \
            &lt;/sessionProfile&gt;\n          \
          &lt;/session&gt;&#34;

set tbmlPort_0 &#34;       &lt;resource guid=\&#34;6256833a-4500-45df-a3d8-9d819a7d30c4\&#34; id=\&#34;@res_id@\&#34; type=\&#34;port\&#34;&gt;\n          \
          &lt;property name=\&#34;name\&#34;&gt;@portName@&lt;/property&gt;\n          \
          &lt;property name=\&#34;portMapping\&#34; vendor=\&#34;Extreme\&#34;&gt;@portNum@&lt;/property&gt;\n      \
        &lt;/resource&gt;&#34;

set tbmlHubHead_0 &#34;      &lt;resource guid=\&#34;db4a22ac-dc20-4e09-964f-534e99db164b\&#34; id=\&#34;@res_id@\&#34; type=\&#34;@type@\&#34;&gt;\n        \
        &lt;boundary height=\&#34;45\&#34; width=\&#34;50\&#34; x=\&#34;@x@\&#34; y=\&#34;@y@\&#34;/&gt;\n        \
        &lt;property name=\&#34;iconURI\&#34;&gt;platform:/plugin/com.fnfr.itest.topology.tbml.edit/icons/full/topology/switch_32.gif&lt;/property&gt;\n        \
        &lt;property name=\&#34;name\&#34;&gt;@DUT@&lt;/property&gt;       &#34;

set tbmlIxia &#34;      &lt;resource guid=\&#34;4f1cf57d-c88e-424b-9b0a-d3e9cfd26376\&#34; id=\&#34;resource_0\&#34; type=\&#34;trafficgen\&#34;&gt;\n        \
        &lt;boundary height=\&#34;50\&#34; width=\&#34;781\&#34; x=\&#34;152\&#34; y=\&#34;32\&#34;/&gt;\n        \
        &lt;property name=\&#34;iconURI\&#34;&gt;platform:/plugin/com.fnfr.itest.topology.tbml.edit/icons/full/topology/Traffic-Generator_32.gif&lt;/property&gt;\n        \
        &lt;property name=\&#34;name\&#34;&gt;trafficgen1&lt;/property&gt;\n        \
        &lt;property name=\&#34;ixiaPath\&#34; vendor=\&#34;Extreme\&#34;&gt;@ixiaPath@&lt;/property&gt;\n        \
        &lt;property name=\&#34;phyMode\&#34; vendor=\&#34;Extreme\&#34;&gt;@phyMode@&lt;/property&gt;\n          \
        &lt;extensions namespace=\&#34;com.fnfr.itest.session\&#34; type=\&#34;com.fnfr.itest.session\&#34;&gt;\n\
          &lt;session baseSessionProfile=\&#34;\&#34; name=\&#34;ixiaTraffic\&#34; provider=\&#34;com.fnfr\&#34;&gt;\n            \
            &lt;sessionProfile version=\&#34;4.3.0.71664\&#34;&gt;\n            \
              &lt;baseApplication&gt;com.fnfr.svt.applications.ixiaTraffic&lt;/baseApplication&gt;\n              \
              &lt;sessionProperties type=\&#34;com.fnfr.svt.applications.ixtraffic.ixTrafficSessionPropertyGroup\&#34;&gt;\n                \
                &lt;tclProperties&gt;\n                    \
                  &lt;interpreterLocation defaultValue=\&#34;\&#34; inherit=\&#34;false\&#34;/&gt;\n                        \
                  &lt;interpreterLibraryPath defaultValue=\&#34;\&#34; inherit=\&#34;false\&#34;/&gt;\n                    \
                &lt;/tclProperties&gt;\n                    \
                &lt;chassisIpAddress inherit=\&#34;false\&#34;&gt;@ixiaCh1@&lt;/chassisIpAddress&gt;\n                    \
                &lt;IxOSLocation inherit=\&#34;false\&#34;&gt;C:\\\\Program Files\\\\Ixia&lt;/IxOSLocation&gt;\n                    \
                &lt;sessionCards inherit=\&#34;false\&#34;&gt;1 2 3&lt;/sessionCards&gt;\n                    \
                &lt;automaticPortLock inherit=\&#34;false\&#34;&gt;false&lt;/automaticPortLock&gt;\n                \
              &lt;/sessionProperties&gt;\n            \
            &lt;/sessionProfile&gt;\n        \
          &lt;/session&gt;\n        \
          &lt;session baseSessionProfile=\&#34;\&#34; name=\&#34;ntaf\&#34; provider=\&#34;com.fnfr\&#34;&gt;\n          \
            &lt;sessionProfile version=\&#34;4.3.0.71664\&#34;&gt;\n          \
              &lt;baseApplication&gt;http://spirent.com/ntaf/harness/extreme/0.2&lt;/baseApplication&gt;\n          \
              &lt;sessionProperties NodeId=\&#34;@ntafHost@/unspecified\&#34; NodeId.inherit=\&#34;false\&#34; action=\&#34;open\&#34; harness=\&#34;http://spirent.com/ntaf/harness/extreme/0.2\&#34; harnessName=\&#34;Extreme NTAF provider\&#34; toolId=\&#34;standalone\&#34; toolId.inherit=\&#34;false\&#34; type=\&#34;com.fnfr.itest.adapter.automation.ntaf.common.documents.NtafOpenTransferableObject\&#34;/&gt;\n          \
              &lt;baseProfile&gt;project://common_project/session_profiles/ntaf.ffsp&lt;/baseProfile&gt;\n          \
              &lt;standalone&gt;false&lt;/standalone&gt;\n        \
            &lt;/sessionProfile&gt;\n        \
          &lt;/session&gt;\n      \
        &lt;/extensions&gt;&#34;;

set link_0 &#34;      &lt;link id=\&#34;link_@c@\&#34;&gt;\n        \
        &lt;property name=\&#34;type\&#34;&gt;ethernet&lt;/property&gt;\n        \
        &lt;property name=\&#34;name\&#34;&gt;ethernet@c@&lt;/property&gt;\n        \
        &lt;endpoint id=\&#34;@res1@\&#34;/&gt;\n        \
        &lt;endpoint id=\&#34;@res2@\&#34;/&gt;\n        \
      &lt;/link&gt;&#34;;

set tbmlServer &#34;      &lt;resource guid=\&#34;4f1cf57d-c88e-424b-9b0a-d3e9cfd26376\&#34; id=\&#34;resource_30\&#34; type=\&#34;server\&#34;&gt;\n        \
        &lt;boundary height=\&#34;60\&#34; width=\&#34;60\&#34; x=\&#34;12\&#34; y=\&#34;12\&#34;/&gt;\n        \
        &lt;property name=\&#34;iconURI\&#34;&gt;platform:/plugin/com.fnfr.itest.topology.tbml.edit/icons/full/topology/server_32.gif&lt;/property&gt;\n        \
        &lt;property name=\&#34;name\&#34;&gt;TftpServer&lt;/property&gt;\n        \
        &lt;extensions namespace=\&#34;com.fnfr.itest.session\&#34; type=\&#34;com.fnfr.itest.session\&#34;&gt;\n\
          &lt;session baseSessionProfile=\&#34;\&#34; name=\&#34;telnet\&#34; provider=\&#34;com.fnfr\&#34;&gt;\n            \
            &lt;sessionProfile version=\&#34;4.3.0.71664\&#34;&gt;\n            \
              &lt;baseApplication&gt;com.fnfr.svt.applications.telnet&lt;/baseApplication&gt;\n              \
              &lt;sessionProperties type=\&#34;com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties\&#34;&gt;\n                \
                &lt;ipAddress inherit=\&#34;false\&#34;&gt;@TFTPIP@&lt;/ipAddress&gt;\n                    \
                &lt;port defaultValue=\&#34;\&#34; inherit=\&#34;false\&#34;/&gt;\n                \
              &lt;/sessionProperties&gt;\n              \
              &lt;baseProfile&gt;project://common_project/session_profiles/extr.ffsp&lt;/baseProfile&gt;\n              \
              &lt;standalone&gt;false&lt;/standalone&gt;\n        \
            &lt;/sessionProfile&gt;\n        \
          &lt;/session&gt;\n        \
        &lt;/extensions&gt;&#34;;


global defaultRouter
global bootpserver
global tftpServerList
global switchPort2DefaultRouter
result_h2 &#34;Start to build the tbml&#34;

<a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Put HEADER HERE&#34;
global portMappingList
global DUTs_info
set pre_DUTs_info DUTs_info
set pre_mapping $portMappingList

if {$homeDir == &#34;module&#34;} {
    source ../../main/cfg/common.cfg
    source ../../main/cfg/$cfg
} else {
    source ../main/cfg/common.cfg
    source ../main/cfg/$cfg
}

set tftpServer [lindex $tftpServerList 0]

global numDUT
set portMappingList $pre_mapping
set cfgFile $cfg
set cLst [split [file tail $cfgFile] &#34;.&#34;]
set sCfg [lindex $cLst 0]
set fd_t [open &#34;${path}/${sCfg}.tbml&#34; &#34;w&#34;]
    if {[info exists switchPort2DefaultRouter]} {
        regsub -all &#34;@switchPort2DefaultRouter@&#34; $tbmlhead &#34;$switchPort2DefaultRouter&#34; tbmlhead;
    } else {
        regsub -all &#34;@switchPort2DefaultRouter@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists numDUT]} {
        regsub -all &#34;@numDUT@&#34; $tbmlhead &#34;$numDUT&#34; tbmlhead;
    } else {
        regsub -all &#34;@numDUT@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists defaultRouter]} {
        regsub -all &#34;@defaultRouter@&#34; $tbmlhead &#34;$defaultRouter&#34; tbmlhead;
    } else {
        regsub -all &#34;@defaultRouter@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists startCardNum]} {
        regsub -all &#34;@startCardNum@&#34; $tbmlhead &#34;$startCardNum&#34; tbmlhead;
    } else {
        regsub -all &#34;@startCardNum@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists checkConnection]} {
        regsub -all &#34;@checkConnection@&#34; $tbmlhead &#34;$checkConnection&#34; tbmlhead;
    } else {
        regsub -all &#34;@checkConnection@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists connectionTimeout]} {
        regsub -all &#34;@connectionTimeout@&#34; $tbmlhead &#34;$connectionTimeout&#34; tbmlhead;
    } else {
        regsub -all &#34;@connectionTimeout@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }
    if {[info exists fpdefaultRouter]} {
        regsub -all &#34;@InBandNetworkV4GW@&#34; $tbmlhead &#34;$fpdefaultRouter&#34; tbmlhead;
    } else {
        regsub -all &#34;@InBandNetworkV4GW@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    }

    regsub -all &#34;@InBandNetworkV4Mask@&#34; $tbmlhead &#34;24&#34; tbmlhead;
    regsub -all &#34;@InBandNetworkV6Mask@&#34; $tbmlhead &#34;NULL&#34; tbmlhead;
    regsub -all &#34;@ETCL_ID@&#34; $tbmlhead &#34;${sCfg}&#34; tbmlhead;

    if {[info exists phyMode]} {
        regsub -all &#34;@phyMode@&#34; $tbmlhead &#34;$phyMode&#34; tbmlhead;
    } else {
        regsub -all &#34;@phyMode@&#34; $tbmlhead &#34;copper&#34; tbmlhead;
    }

    puts $fd_t $tbmlhead


set rId 0
<a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Put Resources Header&#34;
    puts $fd_t $resourcesTop

<span class="comment-line"># Setup ther server/tftpserver .. put has random high resource id.</span>
if {[info exists tftpServer]} {
    regsub -all &#34;@TFTPIP@&#34; $tbmlServer &#34;NULL&#34; tbmlServer;
    puts $fd_t $tbmlServer
    puts $fd_t $resourceBottom
}

<a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Put Ixia info here - resource id $rId&#34;
set ntafHost &#34;spirent@rtp-itest.extremenetworks.com&#34;
    if {[info exists phyMode]} {
        regsub -all &#34;@phyMode@&#34; $tbmlIxia &#34;$phyMode&#34; tbmlIxia;
    } else {
        regsub -all &#34;@phyMode@&#34; $tbmlIxia &#34;copper&#34; tbmlIxia;
    }
    if {[info exists ixiaCh1]} {
        if {[info exists ixiaPath($ixiaCh1)]} {
             regsub -all &#34;@ixiaPath@&#34; $tbmlIxia &#34;$ixiaPath($ixiaCh1)&#34; tbmlIxia;
        } else {
             regsub -all &#34;@ixiaPath@&#34; $tbmlIxia &#34;NULL&#34; tbmlIxia;
        }
        regsub -all &#34;@ixiaCh1@&#34; $tbmlIxia &#34;$ixiaCh1&#34; tbmlIxia;
    } else {
        regsub -all &#34;@ixiaCh1@&#34; $tbmlIxia &#34;NULL&#34; tbmlIxia;
    }
    if {[info exists ntafHost]} {
        regsub -all &#34;@ntafHost@&#34; $tbmlIxia &#34;$ntafHost&#34; tbmlIxia;
    } else {
        regsub -all &#34;@ntafHost@&#34; $tbmlIxia &#34;NULL&#34; tbmlIxia;
    }
    <span class="comment-line">#START OF IXIA RESOURCE</span>
    puts $fd_t $tbmlIxia

global ixiaPortMappingArray
set myPortIdList [array names ixiaPortMappingArray]
set myPortIdList [lsort $myPortIdList]
set ic 0
foreach myPortId $myPortIdList {
    set ixPList $ixiaPortMappingArray($myPortId)
    set iPortMap($myPortId) resource_${rId}_$ic
    puts &#34;portId$myPortId  portMapping \&#34;[lindex $ixPList 1] [lindex $ixPList 2]\&#34; resource_${rId}_$ic&#34;
    set tbmlPort $tbmlPort_0
    regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$ic&#34; tbmlPort;
    regsub -all &#34;@portName@&#34; $tbmlPort &#34;portId$myPortId&#34; tbmlPort;
    regsub -all &#34;@portNum@&#34; $tbmlPort &#34;[lindex $ixPList 1] [lindex $ixPList 2]&#34; tbmlPort;
    puts $fd_t $tbmlPort
    incr ic
}
    <span class="comment-line"># END OF IXIA RESOURCES</span>
    puts $fd_t $resourceBottom
incr rId


set numDUT 1

set hitHub 1
foreach tPart $trunkPortList {
    if {[lindex $tPart 1] == 0} {
        set hConnect([lindex $tPart 0]) [lindex $tPart 2]
        incr hitHub
    }
    if {![info exists tHit([lindex $tPart 0][lindex $tPart 1])]} {
        set tHit([lindex $tPart 0][lindex $tPart 1]) 0
    }
    set tMapC([lindex $tPart 0],[lindex $tPart 1]) 1
}

while { [info exists DUT${numDUT}_CONNECT] } {
      set nameList [array names $pre_DUTs_info]
      foreach in $nameList {
          if {[lindex $in 0] == &#34;DUT${numDUT}&#34;} {
              set DUTs_info(DUT${numDUT},[lindex $in 1]) $pre_DUTs_info(DUT${numDUT},[lindex $in 1])
          }
      }
      <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Put SWITCH $numDUT&#34;
      set connect [set DUT${numDUT}_CONNECT]
      set dut_ip [set DUT${numDUT}_IP]
      set def_blade [set DUT${numDUT}_DefaultBlade]
      if { $def_blade != 0 } {
          set port $def_blade:$switchPort2DefaultRouter
      } else {
          set port $switchPort2DefaultRouter
      }
      puts &#34;Start DUT$numDUT - with HEADER resource id $rId&#34;
      puts &#34;ADD Console TOP&#34;
      puts &#34;Place for DUT${numDUT}_CONNECT&#34;
      if {[info exists DUT${numDUT}_CONNECTB]} {
          puts &#34;Place for DUT${numDUT}_CONNECTB&#34;
      }
          <span class="comment-line">#START OF SWITCH RESOURCE</span>
          set tbmlSwitchHead $tbmlSwitchHead_O

   switch -exact -- $numDUT {
      1 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;200&#34; tbmlSwitchHead;}
      2 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;200&#34; tbmlSwitchHead;}
      3 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;350&#34; tbmlSwitchHead;}
      4 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;350&#34; tbmlSwitchHead;}
      5 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;500&#34; tbmlSwitchHead;}
      6 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;500&#34; tbmlSwitchHead;}
      7 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;650&#34; tbmlSwitchHead;}
      8 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;650&#34; tbmlSwitchHead;}
      9 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;800&#34; tbmlSwitchHead;}
     10 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;800&#34; tbmlSwitchHead;}
     11 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;950&#34; tbmlSwitchHead;}
     12 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;950&#34; tbmlSwitchHead;}
     13 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1100&#34; tbmlSwitchHead;}
     14 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1100&#34; tbmlSwitchHead;}
     15 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1250&#34; tbmlSwitchHead;}
     16 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1250&#34; tbmlSwitchHead;}
     17 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;180&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1400&#34; tbmlSwitchHead;}
     18 { regsub -all &#34;@x@&#34; $tbmlSwitchHead &#34;780&#34; tbmlSwitchHead; regsub -all &#34;@y@&#34; $tbmlSwitchHead &#34;1400&#34; tbmlSwitchHead;}
      default { }
   }

          regsub -all &#34;@DUT@&#34; $tbmlSwitchHead &#34;DUT${numDUT}&#34; tbmlSwitchHead;
          regsub -all &#34;@res_id@&#34; $tbmlSwitchHead &#34;resource_${rId}&#34; tbmlSwitchHead;
          if {[info exists DUT${numDUT}_IP_FP]} {
              regsub -all &#34;@InBandNetworkV4IP@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_IP_FP]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@InBandNetworkV4IP@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists DUT${numDUT}_DefaultBlade_FP]} {
              regsub -all &#34;@InBandNetworkBlade@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_DefaultBlade_FP]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@InBandNetworkBlade@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists DUT${numDUT}_MASK_FP]} {
              regsub -all &#34;@InBandNetworkMask@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_MASK_FP]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@InBandNetworkMask@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists frontPanelPortToGw]} {
              regsub -all &#34;@InBandNetworkPort@&#34; $tbmlSwitchHead &#34;$frontPanelPortToGw&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@InBandNetworkPort@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists DUT${numDUT}_SETUP]} {
              regsub -all &#34;@SETUP@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_SETUP]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@SETUP@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists DUT${numDUT}_MASK]} {
              regsub -all &#34;@MASK@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_MASK]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@MASK@&#34; $tbmlSwitchHead &#34;24&#34; tbmlSwitchHead;
          }
          if {[info exists DUT${numDUT}_DefaultBlade]} {
              regsub -all &#34;@DefaultBlade@&#34; $tbmlSwitchHead &#34;[set DUT${numDUT}_DefaultBlade]&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@DefaultBlade@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists POWERCYCLE_DUT($numDUT)]} {
              regsub -all &#34;@POWERCYCLE_DUT@&#34; $tbmlSwitchHead &#34;$POWERCYCLE_DUT($numDUT)&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@POWERCYCLE_DUT@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists defaultRouter]} {
              regsub -all &#34;@MGMT_GW@&#34; $tbmlSwitchHead &#34;$defaultRouter&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@MGMT_GW@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists InBandNetworkV6IP]} {
              regsub -all &#34;@InBandNetworkV6IP@&#34; $tbmlSwitchHead &#34;$InBandNetworkV6IP&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@InBandNetworkV6IP@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
          if {[info exists switchPort2DefaultRouter]} {
              regsub -all &#34;@switchPort2DefaultRouter@&#34; $tbmlSwitchHead &#34;$switchPort2DefaultRouter&#34; tbmlSwitchHead;
          } else {
              regsub -all &#34;@switchPort2DefaultRouter@&#34; $tbmlSwitchHead &#34;NULL&#34; tbmlSwitchHead;
          }
<span class="comment-line">#switchPort2DefaultRouter</span>
          puts $fd_t $tbmlSwitchHead

          foreach myVar $diList {
              if {[info exists DUTs_info(DUT${numDUT},$myVar)]} {
                  puts $fd_t &#34;         &lt;property name=\&#34;$myVar\&#34; vendor=\&#34;Extreme\&#34;&gt;$DUTs_info(DUT${numDUT},$myVar)&lt;/property&gt;&#34;          
              }
          }

      puts &#34;Place for mgmt $dut_ip&#34;
      puts &#34;Place for mgmt_ssh $dut_ip&#34;
      puts &#34;ADD Console BOTTOM&#34;
      puts &#34;Add ports&#34;
      set dutRCount 0


      set conhead $tbmlConnTop_0
      puts $fd_t $conhead
      set tbmlConn $tbmlConn_0
      if {[info exists DUT${numDUT}_CONNECT]} {
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;CONNECT&#34; tbmlConn;
          set f [split [set DUT${numDUT}_CONNECT] &#34; &#34;]
          set fip [lindex $f 0]
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;$fip&#34; tbmlConn;
          if {[string trim [lindex $f 1]] != &#34;&#34;} {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;[lindex $f 1]&#34; tbmlConn;
          } else {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;23&#34; tbmlConn;
          }
          puts $fd_t $tbmlConn
      }
      set tbmlConn $tbmlConn_0
      if {[info exists DUT${numDUT}_CONNECTB]} {
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;CONNECTB&#34; tbmlConn;
          set f [split [set DUT${numDUT}_CONNECTB] &#34; &#34;]
          set fip [lindex $f 0]
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;$fip&#34; tbmlConn;
          if {[string trim [lindex $f 1]] != &#34;&#34;} {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;[lindex $f 1]&#34; tbmlConn;
          } else {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;23&#34; tbmlConn;
          }
          puts $fd_t $tbmlConn
      }
      set tbmlConn $tbmlConn_0
      if {[info exists DUT${numDUT}_IP]} {
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;mgmt_network&#34; tbmlConn;
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;[set DUT${numDUT}_IP]&#34; tbmlConn;
          regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;23&#34; tbmlConn;
          puts $fd_t $tbmlConn
      }
      set tbmlConn $tbmlSSHConn_0
      if {[info exists DUT${numDUT}_IP]} {
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;mgmt_network_ssh&#34; tbmlConn;
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;[set DUT${numDUT}_IP]&#34; tbmlConn;
          puts $fd_t $tbmlConn
      }
      set confoot $tbmlConnBottom_0
      puts $fd_t $confoot

      set tbml_port $tbmlPort_0
      foreach pPart $portMappingList {
          if {[lindex $pPart 2] == $numDUT} {
              set tbmlPort $tbmlPort_0
              set dPortMap([lindex $pPart 0]) resource_${rId}_$dutRCount
              puts &#34;tb_portId[lindex $pPart 0] portMapping [lindex $pPart 1] resource_${rId}_$dutRCount&#34;
              regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$dutRCount&#34; tbmlPort;
              regsub -all &#34;@portName@&#34; $tbmlPort &#34;tb_portId[lindex $pPart 0]&#34; tbmlPort;
              regsub -all &#34;@portNum@&#34; $tbmlPort &#34;[lindex $pPart 1]&#34; tbmlPort;
              puts $fd_t $tbmlPort
              incr dutRCount
          }
      }
      set ti 1
      foreach tPart $trunkPortList {
          if {[lindex $tPart 0] == $numDUT &amp;&amp; [lindex $tPart 1] != 0} {
              set tbmlPort $tbmlPort_0
              incr tHit([lindex $tPart 0][lindex $tPart 1])
              set h $tHit([lindex $tPart 0][lindex $tPart 1])
              set tMap([lindex $tPart 0],[lindex $tPart 1],$h) resource_${rId}_$dutRCount
              puts &#34;h $h tMap([lindex $tPart 0],[lindex $tPart 1],$h) trunk_[lindex $tPart 0]_[lindex $tPart 1]_$h portMapping [lindex $tPart 2] resource_${rId}_$dutRCount&#34;
              regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$dutRCount&#34; tbmlPort;
              regsub -all &#34;@portName@&#34; $tbmlPort &#34;trunk_[lindex $tPart 0]_[lindex $tPart 1]_$h&#34; tbmlPort;
              regsub -all &#34;@portNum@&#34; $tbmlPort &#34;[lindex $tPart 2]&#34; tbmlPort;
              puts $fd_t $tbmlPort
              incr dutRCount
              incr tMapC([lindex $tPart 0],[lindex $tPart 1])
          }
      }
      if {[info exists hConnect($numDUT)]} {
          set tbmlPort $tbmlPort_0
          puts &#34;hub_connect portMapping $hConnect($numDUT) resource_${rId}_$dutRCount&#34;
          set hubRes($numDUT) resource_${rId}_$dutRCount
          regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$dutRCount&#34; tbmlPort;
          regsub -all &#34;@portName@&#34; $tbmlPort &#34;hub_connect&#34; tbmlPort;
          regsub -all &#34;@portNum@&#34; $tbmlPort &#34;$hConnect($numDUT)&#34; tbmlPort;
          puts $fd_t $tbmlPort
          incr dutRCount
      }
      <span class="comment-line"># END OF SWITCH RESOURCE</span>
      puts $fd_t $resourceBottom
      incr numDUT 1
      incr rId
}
incr numDUT -1

set dutRCount 0
if {$hitHub &gt; 1} {
    <span class="comment-line">#    set hConnect([lindex $tPart 0]) [lindex $tPart 2]</span>
    <span class="comment-line">#    set hPortMap([lindex $tPart 0]) resource_${rId}_$ic</span>
    <span class="comment-line">#    incr hitHub</span>
    set hubstuff $tbmlHubHead_0
    regsub -all &#34;@x@&#34; $hubstuff &#34;450&#34; hubstuff; regsub -all &#34;@y@&#34; $hubstuff &#34;280&#34; hubstuff;
    regsub -all &#34;@res_id@&#34; $hubstuff &#34;resource_${rId}&#34; hubstuff;
    regsub -all &#34;@DUT@&#34; $hubstuff &#34;hub1&#34; hubstuff;
    regsub -all &#34;@type@&#34; $hubstuff &#34;hub&#34; hubstuff;
    puts $fd_t $hubstuff

      if {[info exists HUB_IP] || [info exists HUB_CONNECT]} {
          set conhead $tbmlConnTop_0
          puts $fd_t $conhead
      }
      set tbmlConn $tbmlConn_0
      if {[info exists HUB_CONNECT]} {
          set tbmlConn $tbmlConn_0
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;$HUB_CONNECT&#34; tbmlConn;
          set f [split $HUB_CONNECT &#34; &#34;]
          set fip [lindex $f 0]
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;$fip&#34; tbmlConn;
          if {[string trim [lindex $f 1]] != &#34;&#34;} {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;[lindex $f 1]&#34; tbmlConn;
          } else {
              regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;23&#34; tbmlConn;
          }
          puts $fd_t $tbmlConn
      }
      set tbmlConn $tbmlConn_0
      if {[info exists HUB_IP]} {
          regsub -all &#34;@CONNECT@&#34; $tbmlConn &#34;mgmt_network&#34; tbmlConn;
          regsub -all &#34;@CONNECTIP@&#34; $tbmlConn &#34;$HUB_IP&#34; tbmlConn;
          regsub -all &#34;@CONNECTPORT@&#34; $tbmlConn &#34;23&#34; tbmlConn;
          puts $fd_t $tbmlConn
      }
      if {[info exists HUB_IP] || [info exists HUB_CONNECT]} {
          set conbott $tbmlConnBottom_0
          puts $fd_t $conbott
      }

    puts &#34;Create a hub switch ports&#34;
    set h 1
    while {$dutRCount &lt; [expr $hitHub - 1]} {
        set tbmlPort $tbmlPort_0
        puts &#34;port$h portMapping resource_${rId}_$dutRCount&#34;
        set hPortMap($h) resource_${rId}_$dutRCount
          regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$dutRCount&#34; tbmlPort;
          regsub -all &#34;@portName@&#34; $tbmlPort &#34;port$h&#34; tbmlPort;
          regsub -all &#34;@portNum@&#34; $tbmlPort &#34;port$h&#34; tbmlPort;
          puts $fd_t $tbmlPort
        incr dutRCount
        incr h
    }
    incr dutRCount -1
    set tbmlPort $tbmlPort_0
    set hPortMap(9) resource_${rId}_$dutRCount
    regsub -all &#34;@res_id@&#34; $tbmlPort &#34;resource_${rId}_$dutRCount&#34; tbmlPort;
    regsub -all &#34;@portName@&#34; $tbmlPort &#34;port$h&#34; tbmlPort;
    regsub -all &#34;@portNum@&#34; $tbmlPort &#34;port$h&#34; tbmlPort;
    puts $fd_t $tbmlPort
    puts $fd_t $resourceBottom
}
puts $fd_t $resourcesBottom
<span class="comment-line"># Links section</span>

puts $fd_t $linkTop
set lic 0
foreach myPortId $myPortIdList {
    set li $link_0
    if {$hitHub &gt; 1 &amp;&amp; $myPortId == 9} {
        puts &#34;Link HUB portId$myPortId $iPortMap($myPortId) AND $hPortMap($myPortId)&#34;
        regsub -all &#34;@c@&#34; $li &#34;$lic&#34; li;
        regsub -all &#34;@res1@&#34; $li &#34;$iPortMap($myPortId)&#34; li;
        regsub -all &#34;@res2@&#34; $li &#34;$hPortMap($myPortId)&#34; li;
    } else {
        puts &#34;Link portId$myPortId $iPortMap($myPortId) AND $dPortMap($myPortId)&#34;
        regsub -all &#34;@c@&#34; $li &#34;$lic&#34; li;
        regsub -all &#34;@res1@&#34; $li &#34;$iPortMap($myPortId)&#34; li;
        regsub -all &#34;@res2@&#34; $li &#34;$dPortMap($myPortId)&#34; li;
    }
    incr lic
    puts $fd_t $li
}

set hx 1
while {$hx &lt; $hitHub} {
    set li $link_0
    puts &#34;Link HUB $hx $hubRes($hx) AND $hPortMap($hx)&#34;
        regsub -all &#34;@c@&#34; $li &#34;$lic&#34; li;
        regsub -all &#34;@res1@&#34; $li &#34;$hubRes($hx)&#34; li;
        regsub -all &#34;@res2@&#34; $li &#34;$hPortMap($hx)&#34; li;
    incr hx
    incr lic
    puts $fd_t $li
}

set tlen [llength $trunkPortList]
<span class="comment-line"># change to foreach</span>
set lcnt 0
while {$lcnt &lt; $tlen} {
    set bList [lindex $trunkPortList $lcnt]
    if {[lindex $bList 1] == 0} {
        incr lcnt
        continue
    } else {
        set tmc $tMapC([lindex $bList 0],[lindex $bList 1])
        set mC 1
        while {$mC &lt; $tmc} {
            set li $link_0
            puts &#34;t link lcnt $lcnt - tMap([lindex $bList 0],[lindex $bList 1],$mC) $tMap([lindex $bList 0],[lindex $bList 1],$mC)&#34;
            set a1 $tMap([lindex $bList 0],[lindex $bList 1],$mC)
            incr lcnt
            set bList [lindex $trunkPortList $lcnt]
            puts &#34;t link lcnt $lcnt - tMap([lindex $bList 0],[lindex $bList 1],$mC) $tMap([lindex $bList 0],[lindex $bList 1],$mC)&#34;
            set a2 $tMap([lindex $bList 0],[lindex $bList 1],$mC)
                regsub -all &#34;@c@&#34; $li &#34;$lic&#34; li;
                regsub -all &#34;@res1@&#34; $li &#34;$a1&#34; li;
                regsub -all &#34;@res2@&#34; $li &#34;$a2&#34; li;
                puts $fd_t $li
                incr lic
            incr lcnt
            incr mC
            set bList [lindex $trunkPortList $lcnt]
            <span class="comment-line">#incr tMapC([lindex $bList 0],[lindex $bList 1])</span>
        }
    }
}
puts $fd_t $linkBottom
puts $fd_t $tbmlFoot
close $fd_t

}
</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
