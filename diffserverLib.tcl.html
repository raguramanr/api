<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>diffserverLib.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#diffserverLib.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>diffserverLib.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="diffserverLib.tcl-annot.html">annotations</a> | <a href="diffserverLib.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<strong><a name="::::setupCodePtQoSMapping_2">proc <a href="diffserverLib.tcl-annot.html#::::setupCodePtQoSMapping">::::setupCodePtQoSMapping</a></a></strong> { { dut  1 } } {
global DUT1_CONNECT
global DUT2_CONNECT
global bcmPlatform
global pioneerPlatform

<a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT]
if [regexp -nocase &#34;$pioneerPlatform&#34; [<a name="::GetPlatform(1)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${dut}]] {
    <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv replacement port all&#34;
    <a name="::SendACmd(2)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv examination port all&#34;
} else {
    <a name="::SendACmd(3)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv replacement&#34;
    <a name="::SendACmd(4)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv examination&#34;
}
<span class="comment-line"># ---- they are not created by default in bcmPlatform</span>
if [regexp -nocase &#34;$bcmPlatform&#34; [<a name="::GetPlatform(2)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${dut}]] {
   <a name="::SendACmd(5)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp2&#34;
   foreach codepoint {08 09 10 11 12 13 14 15} {
      <a name="::SendACmd(6)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp2&#34;
   }
   <a name="::SendACmd(7)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp3&#34;
   foreach codepoint {16 17 18 19 20 21 22 23} {
      <a name="::SendACmd(8)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp3&#34;
   }
   <a name="::SendACmd(9)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp4&#34;
   foreach codepoint {24 25 26 27 28 29 30 31} {
      <a name="::SendACmd(10)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp4&#34;
   }
   <a name="::SendACmd(11)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp5&#34;
   foreach codepoint {32 33 34 35 36 37 38 39} {
      <a name="::SendACmd(12)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp5&#34;
   }
   <a name="::SendACmd(13)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp6&#34;
   foreach codepoint {40 41 42 43 44 45 46 47} {
      <a name="::SendACmd(14)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp6&#34;
   }
   <a name="::SendACmd(15)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;create qosprofile qp7&#34;
   foreach codepoint {48 49 50 51 52 53 54 55} {
      <a name="::SendACmd(16)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config diffserv examination code-point $codepoint qp7&#34;
   }
}
}

<strong><a name="::::cleanupCodePtQoSMapping_45">proc <a href="diffserverLib.tcl-annot.html#::::cleanupCodePtQoSMapping">::::cleanupCodePtQoSMapping</a></a></strong> { { dut  1 } } {
global DUT1_CONNECT
global DUT2_CONNECT
global bcmPlatform
global pioneerPlatform

<a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dut}_CONNECT]
if [regexp -nocase &#34;$pioneerPlatform&#34; [<a name="::GetPlatform(3)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${dut}]] {
    <a name="::SendACmd(17)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv replacement port all&#34;
    <a name="::SendACmd(18)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv examination port all&#34;
} else {
    <a name="::SendACmd(19)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv replacement&#34;
    <a name="::SendACmd(20)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;unconfig diffserv examination&#34;
}

<span class="comment-line"># ---- delete created qp in bcmPlatform</span>
if [regexp -nocase &#34;$bcmPlatform&#34; [<a name="::GetPlatform(4)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT${dut}]] {
   <a name="::SendACmd(21)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp2&#34;
   <a name="::SendACmd(22)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp3&#34;
   <a name="::SendACmd(23)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp4&#34;
   <a name="::SendACmd(24)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp5&#34;
   <a name="::SendACmd(25)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp6&#34;
   <a name="::SendACmd(26)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;delete qosprofile qp7&#34;
}
}

;<span class="comment-line"># Looks for TOS bits in frames contained in frameList</span>
<strong><a name="::::checkTOSinFrameList_72">proc <a href="diffserverLib.tcl-annot.html#::::checkTOSinFrameList">::::checkTOSinFrameList</a></a></strong> { frameList ixSrcIp TOS } {
    set goodTOS 0
    foreach frame $frameList {
	set srcIp [<a name="::GetSourceIPAddress(1)"><a href="./MessageDecoding.tcl.html#::GetSourceIPAddress_411">::GetSourceIPAddress</a></a> $frame]
	<a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;SRC Ip: $srcIp&#34;
	if { $srcIp == $ixSrcIp} { 
	    set TOSbits [<a name="::GetTOSHex(1)"><a href="./MessageDecoding.tcl.html#::GetTOSHex_348">::GetTOSHex</a></a> $frame]
	    <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;TOSBits: $TOSbits&#34;
	    
	    if {$TOSbits == $TOS} {
		set goodTOS 1
		break;
	    }
	}
    }
    return $goodTOS
}


;<span class="comment-line"># Looks for dot1p bits in frames contained in frameList</span>
<strong><a name="::::checkDOT1PinFrameList_92">proc <a href="diffserverLib.tcl-annot.html#::::checkDOT1PinFrameList">::::checkDOT1PinFrameList</a></a></strong> { frameList ixSrcIp DOT1P } {
    set goodDOT1P 0
    foreach frame $frameList {
        set srcIp [<a name="::GetSourceIPAddress(2)"><a href="./MessageDecoding.tcl.html#::GetSourceIPAddress_411">::GetSourceIPAddress</a></a> $frame]
        <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;SRC Ip: $srcIp&#34;
        if { $srcIp == $ixSrcIp} {
            set DOT1Pbits [<a name="::GetDot1pPriority(1)"><a href="./MessageDecoding.tcl.html#::GetDot1pPriority_766">::GetDot1pPriority</a></a> $frame]
            <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;DOT1PBits: $DOT1Pbits&#34;

            if {$DOT1Pbits == $DOT1P} {
                set goodDOT1P 1
                break;
            }
        }
    }
    return $goodDOT1P
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
