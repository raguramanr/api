<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/transitional.dtd">
<!-- Generated by TclDoc @@VERSION@@ -->
<html>
<head>
  <title>ISISv6.tcl</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body class="src-html">
<div class="index-selector">
<!-- index for tcl source files -->
	Index by: 
	<a href="index_main.html#ISISv6.tcl">file name</a> | 
	<a href="index_main.html#byprocname">procedure name</a> | 
	<a href="index_main.html#bycall">procedure call</a> | 
	<a href="index_annot_full.html">annotation</a>

</div>
<hr>

<p><strong>ISISv6.tcl</strong>&nbsp;&nbsp;<span class="filetype-link">(<a href="ISISv6.tcl-annot.html">annotations</a> | <a href="ISISv6.tcl.txt">original source</a>)</span>
</p>
<pre class="src-code">

<strong><a name="::::CheckIsisProtocolsup_2">proc <a href="ISISv6.tcl-annot.html#::::CheckIsisProtocolsup">::::CheckIsisProtocolsup</a></a></strong> { rawFrame field } {
    set psup [string range [<a name="::RemoveIsisVlanTag(1)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] 80 190]
    <a name="::result_debug(1)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Protocol Supported Bit is $psup&#34;
    return [regexp -nocase $field $psup]
}

<strong><a name="::::CheckIsisAreasup_8">proc <a href="ISISv6.tcl-annot.html#::::CheckIsisAreasup">::::CheckIsisAreasup</a></a></strong> { rawFrame field } {
    set asup [string range [<a name="::RemoveIsisVlanTag(2)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] 180 230]
    <a name="::result_debug(2)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Area Bit is $asup&#34;
    return [regexp -nocase $field $asup]
}

<strong><a name="::::GetIsisPduType_14">proc <a href="ISISv6.tcl-annot.html#::::GetIsisPduType">::::GetIsisPduType</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(3)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    set llcHead [string range $mFrame 42 52]
    if { $llcHead == &#34;FE FE 03 83&#34; } {
        set pduType [string range $mFrame 63 64]
       <a name="::result_debug(3)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;pdu type is $pduType&#34;
        switch $pduType {
            &#34;0F&#34;        { return &#34;ISIS_LEVEL1_HELLO&#34; }  ;<span class="comment-line"># 15</span>
            &#34;10&#34;        { return &#34;ISIS_LEVEL2_HELLO&#34; }  ;<span class="comment-line"># 16</span>
            &#34;12&#34;        { return &#34;ISIS_LEVEL1_LSP&#34; }    ;<span class="comment-line"># 18</span>
            &#34;14&#34;        { return &#34;ISIS_LEVEL2_LSP&#34; }    ;<span class="comment-line"># 20</span>
            &#34;18&#34;        { return &#34;ISIS_LEVEL1_CSNP&#34; }   ;<span class="comment-line"># 24</span>
            &#34;19&#34;        { return &#34;ISIS_LEVEL2_CSNP&#34; }   ;<span class="comment-line"># 25</span>
            &#34;1A&#34;        { return &#34;ISIS_LEVEL1_PSNP&#34; }   ;<span class="comment-line"># 26</span>
            &#34;1B&#34;        { return &#34;ISIS_LEVEL2_PSNP&#34; }   ;<span class="comment-line"># 27</span>
            &#34;11&#34;        { return &#34;ISIS_PTOP_HELLO&#34; }   
            default { return &#34;ISIS_UNKNOWN_TYPE&#34; }
        }
    } else {
        return &#34;NOT_ISIS_PDU&#34;
    }
}

<strong><a name="::::CheckPTOPAdj_37">proc <a href="ISISv6.tcl-annot.html#::::CheckPTOPAdj">::::CheckPTOPAdj</a></a></strong> { rawFrame field } {
    set padj [string range [<a name="::RemoveIsisVlanTag(4)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] 100 180]
    <a name="::result_debug(4)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Area Bit is $padj&#34;
    return [regexp -nocase $field $padj]
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name:  setupISISRouterV6</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description:  This proc is used to setup ixia port as an isis router for v6,v4-v6,v4 interface.</span>
<span class="comment-line">#               It can create multiple interfaces supplied via interfaceIpList</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  args</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line"># setupISISRouterV6  -maskIpv6List &#34;64&#34; -interfaceIpv6List &#34;3001:0:0:0:0:0:0:1&#34; \</span>
<span class="comment-line">#    	     -interfaceMacList &#34;default&#34; -areaIdList &#34;{00 11}&#34; \</span>
<span class="comment-line">#            -levelList &#34;isisLevel1&#34; -routeOriginList &#34;{isisRouteInternal isisRouteExternal}&#34; \</span>
<span class="comment-line">#            -routeMetricList &#34;{10 10}&#34; -numNetworksList {1 1} -prefixList &#34;{64 64}&#34; \</span>
<span class="comment-line">#            -networkIpList &#34;{3041:0:0:0:0:0:0:1 3051:0:0:0:0:0:0:0}&#34; -txPortId 1 -ipType &#34;v6&#34;</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::setupISISRouterV6_65">proc  <a href="ISISv6.tcl-annot.html#::::setupISISRouterV6">::::setupISISRouterV6</a></a></strong> {args} {
    <a name="::parse_args(1)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a>  setupISISRouterV6 $args {
        dutIp &#34;&#34;
        interfaceMacList &#34;&#34;
        interfaceIpList &#34;&#34;
        interfaceIpv6List &#34;&#34;  
        maskIpv6List &#34;64&#34;
        maskList &#34;255.255.255.0&#34;
        areaIdList &#34;0&#34;
        levelList &#34;isisLevel2&#34;
        helloIntervalL1List &#34;10&#34;
        deadIntervalL1List &#34;30&#34;
        helloIntervalL2List &#34;10&#34;
        deadIntervalL2List &#34;30&#34;
        networkTypeList &#34;isisBroadcast&#34;
        metricList &#34;10&#34;
        routeOriginList &#34;&#34;
        numNetworksList &#34;0&#34;
        prefixList &#34;&#34;
        networkIpList &#34;&#34;
        routeMetricList &#34;10&#34;
        routerIdList &#34;&#34;
        txPortId  &#34;1&#34;
        ipType &#34;v4&#34;
    }

    <span class="comment-line"># get the port information</span>
    <a name="::MapIxiaPortId(1)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId cha car por
    <a name="::result_debug(5)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34; setupISISRouterV6: Chas: $cha Card: $car Port: $por&#34;
    set netIp [lindex $networkIpList 0]

    ipAddressTable clear
    ipAddressTable setDefault
    if {[regexp {([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)} $netIp]} {
    ipAddressTable config -defaultGateway $dutIp    
    } else {
    ipAddressTable config -defaultGateway 0.0.0.0
    }
    interfaceTable select $cha $car $por
    interfaceTable clearAllInterfaces

<span class="comment-line">#-----Verify the ipType and set the mask and interface details</span>

   if {[regexp -nocase &#34;v6&#34; $ipType]} {
    interfaceIpV6 setDefault
    interfaceIpV6 config -maskWidth $maskIpv6List
    interfaceIpV6 config -ipAddress [lindex $interfaceIpv6List 0]
    interfaceEntry addItem addressTypeIpV6
    if {[llength $interfaceMacList] &gt; 0} {
        set macAddr [lindex $interfaceMacList 0]
        if {$macAddr == &#34;default&#34;} {
            if {[<a name="::port(1)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $cha $car $por]} {
                error &#34; setupISISRouterV6: port get $chassis $card $port failed.&#34;
            }
    <span class="comment-line">#        set macAddr [port cget -MacAddress]</span>
             set macAddr [<a name="::GetPortIdMac(1)"><a href="./misc.tcl.html#::GetPortIdMac_405">::GetPortIdMac</a></a> $txPortId]
        }
    } else {
        set macAddr [<a name="::uniqMac(1)"><a href="./bgp.tcl.html#::uniqMac_1832">::uniqMac</a></a> $cha $car $por]
    }
 } 

if {[regexp -nocase &#34;v4&#34; $ipType]} {
    interfaceIpV4 setDefault
    interfaceIpV4 config -gatewayIpAddress $dutIp
    interfaceIpV4 config -maskWidth 24
    interfaceIpV4 config -ipAddress [lindex $interfaceIpList 0]
    interfaceEntry addItem addressTypeIpV4
    if {[llength $interfaceMacList] &gt; 0} {
        set macAddr [lindex $interfaceMacList 0]
        if {$macAddr == &#34;default&#34;} {
            if {[<a name="::port(2)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $cha $car $por]} {
                error &#34; setupISISRouterV6: port get $chassis $card $port failed.&#34;
            }
            set macAddr [<a name="::port(3)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> cget -MacAddress]
        }
    } else {
        set macAddr [<a name="::uniqMac(2)"><a href="./bgp.tcl.html#::uniqMac_1832">::uniqMac</a></a> $cha $car $por]
    }
}
    interfaceEntry setDefault
    interfaceEntry config -enable true
    interfaceEntry config -description &#34;protocol interface-$car.$por&#34;
    interfaceEntry config -macAddress $macAddr
    interfaceTable addInterface
    interfaceEntry clearAllItems addressTypeIpV6
    interfaceEntry clearAllItems addressTypeIpV4

    if {[isisServer select $cha $car $por]} {
        error &#34; setupISISRouterV6: isisServer select $cha $car $por failed.&#34;
    }
    if {[isisServer clearAllRouters]} {
        error &#34; setupISISRouterV6: isisServer clearAllRouters failed.&#34;
    }

    if {[regexp {([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)} $netIp]} {
    set interfaceIpList $interfaceIpList
    } else {
    set interfaceIpList $interfaceIpv6List
   }

    set routerId $macAddr

    for {set i 0} {$i&lt;[llength $interfaceIpList]} {incr i} {
        <a name="::result_debug(6)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\nset up interfaces...&#34;
        set interfaceId $macAddr
        <a name="::result_debug(7)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;interfaceId: $interfaceId&#34;
        <a name="::incrx(1)"><a href="./misc.tcl.html#::incrx_2341">::incrx</a></a> macAddr 5 1
        <a name="::result_debug(8)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;macAddr: $macAddr&#34;
        set interfaceIp [lindex $interfaceIpList $i]
        <a name="::result_debug(9)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;interfaceIp: $interfaceIp&#34;
        <a name="::result_debug(10)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;interfaceipv6 : $interfaceIpv6List&#34;
        <a name="::result_debug(11)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;maskIpv6 : $maskIpv6List&#34;
        if {[llength $maskList] &gt; 1} {
            set mask [lindex $maskList $i]
        } else {
            set mask [lindex $maskList 0]
        }
        <a name="::result_debug(12)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;mask: $mask&#34;
        if {[llength $areaIdList] &gt; 1} {
            set areaId [lindex $areaIdList $i]
        } else {
            set areaId [lindex $areaIdList 0]
        }
        <a name="::result_debug(13)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;areaId: $areaId&#34;
        if {[llength $levelList] &gt; 1} {
            set level [lindex $levelList $i]
        } else {
            set level [lindex $levelList 0]
        }
        <a name="::result_debug(14)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;level: $level&#34;
        if {[llength $helloIntervalL1List] &gt; 1} {
            set helloIntervalL1 [lindex $helloIntervalL1List $i]
        } else {
            set helloIntervalL1 [lindex $helloIntervalL1List 0]
        }
        <a name="::result_debug(15)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;helloIntervalL1: $helloIntervalL1&#34;
        if {[llength $deadIntervalL1List] &gt; 1} {
            set deadIntervalL1 [lindex $deadIntervalL1List $i]
        } else {
            set deadIntervalL1 [lindex $deadIntervalL1List 0]
        }
        <a name="::result_debug(16)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;deadIntervalL1: $deadIntervalL1&#34;
        if {[llength $helloIntervalL2List] &gt; 1} {
            set helloIntervalL2 [lindex $helloIntervalL2List $i]
        } else {
            set helloIntervalL2 [lindex $helloIntervalL2List 0]
        }
        <a name="::result_debug(17)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;helloIntervalL2: $helloIntervalL2&#34;
        if {[llength $deadIntervalL2List] &gt; 1} {
            set deadIntervalL2 [lindex $deadIntervalL2List $i]
        } else {
            set deadIntervalL2 [lindex $deadIntervalL2List 0]
        }
        <a name="::result_debug(18)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;deadIntervalL2: $deadIntervalL2&#34;
         if {[llength $networkTypeList] &gt; 1} {
            set networkType [lindex $networkTypeList $i]
        } else {
            set networkType [lindex $networkTypeList 0]
        }
        <a name="::result_debug(19)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;neworkType: $networkType&#34;
        if {[llength $metricList] &gt; 1} {
            set metric [lindex $metricList $i]
        } else {
            set metric [lindex $metricList 0]
        }
        <a name="::result_debug(20)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;metric: $metric&#34;
        if {[llength $numNetworksList] &gt; 1} {
            set numNetworks [lindex $numNetworksList $i]
        } else {
            set numNetworks [lindex $numNetworksList 0]
        }
        <a name="::result_debug(21)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;numNetworks: $numNetworks&#34;
        if {[llength $prefixList] &gt; 1} {
            set prefix [lindex $prefixList $i]
        } else {
            set prefix [lindex $prefixList 0]
        }
        <a name="::result_debug(22)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;prefix: $prefix&#34;
        if {[llength $networkIpList] &gt; 1} {
            set networkIp [lindex $networkIpList $i]
        } else {
            set networkIp [lindex $networkIpList 0]
        }
        <a name="::result_debug(23)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;networkIp: $networkIp&#34;
        if {[llength $routeOriginList] &gt; 1} {
            set routeOrigin [lindex $routeOriginList $i]
        } else {
            set routeOrigin [lindex $routeOriginList 0]
        }
        <a name="::result_debug(24)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routeOrigin: $routeOrigin&#34;
        if {[llength $routeMetricList] &gt; 1} {
            set routeMetric [lindex $routeMetricList $i]
        } else {
            set routeMetric [lindex $routeMetricList 0]
        }
        <a name="::result_debug(25)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routeMetric: $routeMetric&#34;
        if {[llength $routerIdList] &gt; 1} {
            set routerId [lindex $routerIdList $i]
        } else {
            set routerId [lindex $routerIdList 0]
        }
        if {[string length $routerId] == 0} {
            set routerId $interfaceId
        }
        <a name="::result_debug(26)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routeId: $routerId&#34;
        set routerLocalId [expr ($i + 1)]
        <a name="::result_debug(27)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routerLocaId: $routerLocalId&#34;
        set returnCode [<a name="::extrMakeIsisRouterV6(1)"><a href="./ISISv6.tcl.html#::extrMakeIsisRouterV6_336">::extrMakeIsisRouterV6</a></a> -interfaceId &#34;$interfaceId&#34; \
                                           -interfaceIp &#34;$interfaceIp&#34; \
                                           -ipMask &#34;$mask&#34; \
                                           -areaId &#34;$areaId&#34; \
                                           -level $level \
                                           -helloIntervalL1 $helloIntervalL1 \
                                           -deadIntervalL1 $deadIntervalL1 \
                                           -helloIntervalL2 $helloIntervalL2 \
                                           -deadIntervalL2 $deadIntervalL2 \
                                           -networkType $networkType \
                                           -metric $metric \
                                           -routeOrigin $routeOrigin\
                                           -numNetworks $numNetworks \
                                           -prefix $prefix \
                                           -networkIp &#34;$networkIp&#34; \
                                           -routeMetric $routeMetric \
                                           -routerId &#34;$routerId&#34; \
                                           -routerLocalId $routerLocalId \
                                           -txPortId $txPortId -ipType $ipType \
                                           -interfaceIpv6List $interfaceIpv6List -maskIpv6List $maskIpv6List]

        if {$returnCode==-1} {
            return -1
        }
    }

    protocolServer setDefault
    protocolServer config -enableArpResponse true
    protocolServer config -enablePingResponse true
    protocolServer config -enableIsisService true
    if {[protocolServer set $cha $car $por]} {
        error &#34; setupISISRouterV6: protocolServer set $cha $car $por failed.&#34;
    }

    set portList [list [list $cha $car $por]]
    <a name="::result_debug(28)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Writing Configuration to Hardware...&#34;
    if {[<a name="::ixWriteConfigToHardware(1)"><a href="./mapping.tcl.html#::ixWriteConfigToHardware_151">::ixWriteConfigToHardware</a></a> portList]} {
        <a name="::result_debug(29)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Error writing config to hardware&#34;
    }
} ;<span class="comment-line">#  setupISISRouterV6</span>


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: extrMakeIsisRouterV6</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This internal proc is used to setup test equipment port for isis configuration</span>
<span class="comment-line">#              This is called within from  setupISISRouterV6.</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  args</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#      set returnCode [extrMakeIsisRouterV6 -interfaceIp $interfaceIp -ipMask $mask -areaId $areaId \</span>
<span class="comment-line">#          -helloInterval $helloInterval -deadInterval $deadInterval \</span>
<span class="comment-line">#          -networkType $networkType -metric $metric -numNetworks $numNetworks \</span>
<span class="comment-line">#          -prefix $prefix -networkIp $networkIp -routerId $routerId -txPortId $txPortId]</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::extrMakeIsisRouterV6_336">proc <a href="ISISv6.tcl-annot.html#::::extrMakeIsisRouterV6">::::extrMakeIsisRouterV6</a></a></strong> {args} {
    <a name="::parse_args(2)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> extrMakeIsisRouterV6 $args {
        interfaceId &#34;&#34;
        interfaceIp &#34;&#34;
        ipMask &#34;&#34;
        areaId &#34;&#34;
        interfaceIpv6List &#34;&#34;
        maskIpv6List &#34;&#34;
        level &#34;isisLevel2&#34;
        helloIntervalL1 10
        deadIntervalL1 30
        helloIntervalL2 10
        deadIntervalL2 30
        networkType &#34;isisBroadcast&#34;
        metric 10
        routeMetric 10
        routeOrigin &#34;&#34;
        numNetworks 0
        prefix &#34;&#34;
        networkIp &#34;&#34;
        routerId &#34;&#34;
        routerLocalId &#34;1&#34;
        txPortId  &#34;1&#34;
        ipType &#34;v4&#34;
    }

    <span class="comment-line"># get the port information</span>
    <a name="::MapIxiaPortId(2)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId cha car por
    <a name="::result_debug(30)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;extrMakeIsisRouterV6: Chas: $cha Card: $car Port: $por&#34;

    <a name="::result_debug(31)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;inside extrMakeIsisRouterV6&#34;
    <a name="::result_debug(32)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;interfaceId: $interfaceId&#34;
    <a name="::result_debug(33)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;areaId: $areaId&#34;
    <a name="::result_debug(34)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;level: $level&#34;
    <a name="::result_debug(35)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;prefix: $prefix&#34;
    <a name="::result_debug(36)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;networkIp: $networkIp&#34;
    <a name="::result_debug(37)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routerId: $routerId&#34;
    <a name="::result_debug(38)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;routeOrigin: $routeOrigin&#34;
    <a name="::result_debug(39)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;ipType: $ipType&#34;
    isisRouter setDefault
    isisRouter clearAllInterfaces
    isisRouter clearAllRouteRanges
    isisRouter config -enable true
    isisRouter config -routerId $routerId
    isisRouter config -areaAddressList $areaId

    isisInterface setDefault
    isisInterface config -enable true
    isisInterface config -connectToDut true
    isisInterface config -protocolInterfaceDescription &#34;protocol interface-$car.$por&#34;
    isisInterface config -metric $metric
    isisInterface config -interfaceId $interfaceId
    isisInterface config -networkType $networkType
    isisInterface config -level $level
    isisInterface config -enableTrafficEngineering false
    isisInterface config -administrativeGroup {0.0.0.0}
    isisInterface config -maxBandwidth 0.0
    isisInterface config -maxReservableBandwidth 0.0
    isisInterface config -unreservedBandwidthPriority0 0.0
    isisInterface config -unreservedBandwidthPriority1 0.0
    isisInterface config -unreservedBandwidthPriority2 0.0
    isisInterface config -unreservedBandwidthPriority3 0.0
    isisInterface config -unreservedBandwidthPriority4 0.0
    isisInterface config -unreservedBandwidthPriority5 0.0
    isisInterface config -unreservedBandwidthPriority6 0.0
    isisInterface config -unreservedBandwidthPriority7 0.0
    isisInterface config -priorityLevel1 0
    isisInterface config -helloIntervalLevel1 $helloIntervalL1
    isisInterface config -deadIntervalLevel1 $deadIntervalL1
    isisInterface config -extendedDefaultMetric1 10
    isisInterface config -trafficEngineeringMetric1 10
    isisInterface config -priorityLevel2 0
    isisInterface config -helloIntervalLevel2 $helloIntervalL2
    isisInterface config -deadIntervalLevel2 $deadIntervalL2
    isisInterface config -extendedDefaultMetric2 10
    isisInterface config -trafficEngineeringMetric2 10

    if {[isisRouter addInterface interface1]} {
        error &#34;extrMakeIsisRouterV6: isisRouter addInterface interface1 failed.&#34;
    }
    set idx 0
    set rangeId 1
    while {[llength $networkIp] &gt; $idx} {
            set myIp [lindex $networkIp $idx]
            set rMetric [lindex $routeMetric $idx]
            set prefx [lindex $prefix $idx]
            set routeOrg [lindex $routeOrigin $idx]
            set noOfNetworks [lindex $numNetworks $idx]
            incr idx
            isisRouteRange config -enable true
            isisRouteRange config -routeOrigin $routeOrg
            isisRouteRange config -metric $rMetric
            isisRouteRange config -numberOfNetworks $noOfNetworks
            isisRouteRange config -prefix $prefx
            isisRouteRange config -networkIpAddress $myIp
          if {[regexp {([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)} $myIp]} {
            isisRouteRange config -ipType addressTypeIpV4
            } else {
            isisRouteRange config -ipType addressTypeIpV6
          }
            isisRouter addRouteRange [format &#34;routeRange%02d&#34; $rangeId]
            isisRouteRange setDefault
            incr rangeId

   <span class="comment-line"># if {[isisRouter addRouteRange routeRange1]} {</span>
   <span class="comment-line">#     error &#34;extrMakeIsisRouterV6: isisRouter addRouteRange routeRange1 failed.&#34;</span>
    <span class="comment-line">#}</span>
}
    if {[isisServer addRouter router$routerLocalId]} {
        error &#34;extrMakeIsisRouterV6: isisServer addRouter router$routerLocalId failed.&#34;
    }

    return 0
} ;<span class="comment-line"># extrMakeIsisRouterV6</span>


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: startIsis</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This proc is used to start test equipment isis protocol adjacency</span>
<span class="comment-line">#              on the list of ports supplied via txPortIdList</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  txPortIdList</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#      startIsis 2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::startIsis_470">proc <a href="ISISv6.tcl-annot.html#::::startIsis">::::startIsis</a></a></strong> {txPortIdList} {
    set pList &#34;&#34;
    foreach txPortId $txPortIdList {
        <a name="::MapIxiaPortId(3)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId cha car por
        <a name="::result_debug(40)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;startIsis: Chas: $cha Card: $car Port: $por&#34;
        lappend pList &#34;$cha $car $por&#34;
    }

    if {[ixStartIsis pList]} {
        error &#34;startIsis: ixStartIsis failed.&#34;
    }
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: stopIsis</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This proc is used to stop test equipment isis protocol adjacency</span>
<span class="comment-line">#              on the list of ports supplied via txPortIdList</span>
<span class="comment-line">#              This proc is opposite of startIsis</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  txPortIdList</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#      stopIsis 2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::stopIsis_502">proc <a href="ISISv6.tcl-annot.html#::::stopIsis">::::stopIsis</a></a></strong> {txPortIdList} {
    set pList &#34;&#34;
    foreach txPortId $txPortIdList {
        <a name="::MapIxiaPortId(4)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId cha car por
        <a name="::result_debug(41)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;stopIsis: Chas: $cha Card: $car Port: $por&#34;
        lappend pList &#34;$cha $car $por&#34;
    }

    if {[ixStopIsis pList]} {
        error &#34;stopIsis: ixStopIsis failed.&#34;
    }
}

<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: cleanupIsis</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: This proc is used to cleanup test equipment port for isis configuration</span>
<span class="comment-line">#              that was performed by  setupISISRouterV6</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:  txPortIdList</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#      cleanupIsis 2</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (Setup,GetSwitchInfo,SendTraffic,CaptureTraffic,VerifySwitchOutput</span>
<span class="comment-line">#                          VerifyTraffic)</span>
<span class="comment-line"># Category: SendTraffic</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::cleanupIsis_533">proc <a href="ISISv6.tcl-annot.html#::::cleanupIsis">::::cleanupIsis</a></a></strong> {txPortIdList} {
    foreach txPortId $txPortIdList {
        <span class="comment-line"># get the port information</span>
        <a name="::MapIxiaPortId(5)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $txPortId cha car por
        <a name="::result_debug(42)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;cleanupIsis: Chas: $cha Card: $car Port: $por&#34;

        <span class="comment-line"># select the port</span>
        if {[isisServer select $cha $car $por]} {
            error &#34;cleanupIsis: isisServer select $cha $car $por failed.&#34;
        }


        if {[isisServer getFirstRouter]} {
            error &#34;cleanupIsis: isisServer getFirstRouterfailed.&#34;
        }

        isisRouter clearAllInterfaces
        isisRouter clearAllRouteRanges
        isisRouter setDefault

        while {[isisServer getNextRouter] == 0} {
            isisRouter clearAllInterfaces
            isisRouter clearAllRouteRanges
            isisRouter setDefault
        }

        if {[isisServer clearAllRouters]} {
            error &#34;cleanupIsis: isisServer clearAllRouters failed.&#34;
        }
        isisServer write

        ipAddressTable setDefault
        ipAddressTable clear
        ipAddressTable set $cha $car $por

        protocolServer setDefault
        protocolServer config -enableArpResponse false
        protocolServer config -enablePingResponse false
        protocolServer config -enableIsisService false
        if {[protocolServer set $cha $car $por]} {
            error &#34;cleanupIsis: Error Setting Protocol Server&#34;
        }
        if {[protocolServer write $cha $car $por]} {
            error &#34;cleanupIsis: protocolServer write $cha $car $por failed.&#34;
        }
    } ;<span class="comment-line"># foreach txPortId</span>
} ;<span class="comment-line"># cleanupIsis</span>


<span class="comment-line"># Description:</span>
<span class="comment-line">#     The follwoing procs are used to decode PDU type, etc if the frame</span>
<span class="comment-line">#     is a ISIS PDU.</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args: rawFrame</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::RemoveIsisVlanTag_589">proc <a href="ISISv6.tcl-annot.html#::::RemoveIsisVlanTag">::::RemoveIsisVlanTag</a></a></strong> { rawFrame } {
    set tagType [string range $rawFrame 36 40]
    <span class="comment-line"># if tagged, get rid of type and tag field from 36 to 47</span>
    if {$tagType == &#34;81 00&#34;} {
        set leftRawFrame [string range $rawFrame 0 35]
        set rightRawFrame [string range $rawFrame 48 [string length $rawFrame]]
        set rawFrame [format &#34;%s%s&#34; $leftRawFrame $rightRawFrame]
    }
    return $rawFrame
}

<strong><a name="::::GetIsisDestMacAddr_600">proc <a href="ISISv6.tcl-annot.html#::::GetIsisDestMacAddr">::::GetIsisDestMacAddr</a></a></strong> { rawFrame } {
    return [string range $rawFrame 0 16]
}

<strong><a name="::::GetIsisSourceMacAddr_604">proc <a href="ISISv6.tcl-annot.html#::::GetIsisSourceMacAddr">::::GetIsisSourceMacAddr</a></a></strong> { rawFrame } {
    return [string range $rawFrame 18 34]
}

<strong><a name="::::GetIsisDlcLength_608">proc <a href="ISISv6.tcl-annot.html#::::GetIsisDlcLength">::::GetIsisDlcLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(5)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 36 40] {} hexVal
    return [<a name="::hextodec(1)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisIRPD_614">proc <a href="ISISv6.tcl-annot.html#::::GetIsisIRPD">::::GetIsisIRPD</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(6)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(2)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 51 52]]
}

<strong><a name="::::GetIsisHeaderLength_619">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHeaderLength">::::GetIsisHeaderLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(7)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(3)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 54 55]]
}

<strong><a name="::::GetIsisVersionPID_624">proc <a href="ISISv6.tcl-annot.html#::::GetIsisVersionPID">::::GetIsisVersionPID</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(8)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(4)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 57 58]]
}

<span class="comment-line"># --- ID length = 0 indciates 6 octets</span>
<strong><a name="::::GetIsisIdLength_630">proc <a href="ISISv6.tcl-annot.html#::::GetIsisIdLength">::::GetIsisIdLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(9)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(5)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 60 61]]
}

<strong><a name="::::GetIsisVersion_635">proc <a href="ISISv6.tcl-annot.html#::::GetIsisVersion">::::GetIsisVersion</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(10)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(6)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 66 67]]
}

<strong><a name="::::GetIsisReserved_640">proc <a href="ISISv6.tcl-annot.html#::::GetIsisReserved">::::GetIsisReserved</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(11)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(7)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 69 70]]
}

<strong><a name="::::GetIsisMaxAreaAddr_645">proc <a href="ISISv6.tcl-annot.html#::::GetIsisMaxAreaAddr">::::GetIsisMaxAreaAddr</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(12)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(8)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 72 73]]
}

<strong><a name="::::GetIsisHelloCircuitType_650">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloCircuitType">::::GetIsisHelloCircuitType</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(13)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(9)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 75 76]]
}

<strong><a name="::::GetIsisHelloSourceId_655">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloSourceId">::::GetIsisHelloSourceId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(14)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 78 94]
}

<strong><a name="::::GetIsisHelloHoldTime_660">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloHoldTime">::::GetIsisHelloHoldTime</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(15)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 96 100] {} hexVal
    return [<a name="::hextodec(10)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisHelloFrameLength_666">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloFrameLength">::::GetIsisHelloFrameLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(16)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 102 106] {} hexVal
    return [<a name="::hextodec(11)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisHelloPriority_672">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloPriority">::::GetIsisHelloPriority</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(17)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [<a name="::hextodec(12)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $mFrame 108 109]]
}

<strong><a name="::::GetIsisHelloLanId_677">proc <a href="ISISv6.tcl-annot.html#::::GetIsisHelloLanId">::::GetIsisHelloLanId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(18)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 111 130]
}

<strong><a name="::::GetIsisLspFrameLength_682">proc <a href="ISISv6.tcl-annot.html#::::GetIsisLspFrameLength">::::GetIsisLspFrameLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(19)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 75 79] {} hexVal
    return [<a name="::hextodec(13)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisLspRemainLifetime_688">proc <a href="ISISv6.tcl-annot.html#::::GetIsisLspRemainLifetime">::::GetIsisLspRemainLifetime</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(20)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 81 85] {} hexVal
    return [<a name="::hextodec(14)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisLspFrameId_694">proc <a href="ISISv6.tcl-annot.html#::::GetIsisLspFrameId">::::GetIsisLspFrameId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(21)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 87 109]
}

<strong><a name="::::GetIsisLspFrameSequence_699">proc <a href="ISISv6.tcl-annot.html#::::GetIsisLspFrameSequence">::::GetIsisLspFrameSequence</a></a></strong> { rawFrame } {
   set mFrame [<a name="::RemoveIsisVlanTag(22)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
   regsub -all { } [string range $mFrame 111 121] {} hexVal
   return [<a name="::hextodec(15)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisLspChecksum_705">proc <a href="ISISv6.tcl-annot.html#::::GetIsisLspChecksum">::::GetIsisLspChecksum</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(23)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 123 127]
}

<strong><a name="::::GetIsisCsnpFrameLength_710">proc <a href="ISISv6.tcl-annot.html#::::GetIsisCsnpFrameLength">::::GetIsisCsnpFrameLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(24)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 75 79] {} hexVal
    return [<a name="::hextodec(16)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisCsnpSourceId_716">proc <a href="ISISv6.tcl-annot.html#::::GetIsisCsnpSourceId">::::GetIsisCsnpSourceId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(25)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 81 100]
}

<strong><a name="::::GetIsisCsnpStartLspId_721">proc <a href="ISISv6.tcl-annot.html#::::GetIsisCsnpStartLspId">::::GetIsisCsnpStartLspId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(26)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 102 124]
}

<strong><a name="::::GetIsisCsnpEndLspId_726">proc <a href="ISISv6.tcl-annot.html#::::GetIsisCsnpEndLspId">::::GetIsisCsnpEndLspId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(27)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 126 148]
}

<strong><a name="::::GetIsisPsnpFrameLength_731">proc <a href="ISISv6.tcl-annot.html#::::GetIsisPsnpFrameLength">::::GetIsisPsnpFrameLength</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(28)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    regsub -all { } [string range $mFrame 75 79] {} hexVal
    return [<a name="::hextodec(17)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> $hexVal]
}

<strong><a name="::::GetIsisPsnpSourceId_737">proc <a href="ISISv6.tcl-annot.html#::::GetIsisPsnpSourceId">::::GetIsisPsnpSourceId</a></a></strong> { rawFrame } {
    set mFrame [<a name="::RemoveIsisVlanTag(29)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    return [string range $mFrame 81 100]
}

<span class="comment-line"># --- in Hello, variable-length fields are after position #132 (44 * 3)</span>
<span class="comment-line">#proc CheckHelloClv { rawFrame field {byteOffset &#34;44&#34;} } {</span>
<span class="comment-line">#    set clvs [string range [RemoveIsisVlanTag $rawFrame] [expr 3*$byteOffset] end]</span>
<span class="comment-line">#    result_debug &#34;$clvs bit&#34;</span>
<span class="comment-line">#    return [regexp -nocase $field $clvs]</span>
<span class="comment-line">#}</span>


<span class="comment-line"># --- in Hello, variable-length fields are after position #132 (44 * 3)</span>
<strong><a name="::::CheckHelloClv_751">proc <a href="ISISv6.tcl-annot.html#::::CheckHelloClv">::::CheckHelloClv</a></a></strong> { rawFrame field startByte endByte} {
    set vlantag [<a name="::RemoveIsisVlanTag(30)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame]
    <a name="::result_ok(1)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;VLANTAG==&gt; $vlantag&#34;
    set clvs [string range [<a name="::RemoveIsisVlanTag(31)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] $startByte $endByte]
    <a name="::result_debug(43)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$clvs bit&#34;
    return [regexp -nocase $field $clvs]
}



<span class="comment-line"># --- in LSP, variable-length fields are after position #132 (44 * 3)</span>
<strong><a name="::::CheckLspClv_762">proc <a href="ISISv6.tcl-annot.html#::::CheckLspClv">::::CheckLspClv</a></a></strong> { rawFrame field {byteOffset &#34;44&#34;} } {
    set clvs [string range [<a name="::RemoveIsisVlanTag(32)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] [expr 3*$byteOffset] end]
    return [regexp -nocase $field $clvs]
}

<span class="comment-line"># --- in LSP, variable-length fields are after position #132 (44 * 3)</span>
<strong><a name="::::GetLspClvs_768">proc <a href="ISISv6.tcl-annot.html#::::GetLspClvs">::::GetLspClvs</a></a></strong> { rawFrame {byteOffset &#34;44&#34;} } {
    set clvs [string range [<a name="::RemoveIsisVlanTag(33)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] [expr 3*$byteOffset] end]
    return $clvs
}

<span class="comment-line"># --- in CSNP, variable-length fields are after position #150 (50 * 3)</span>
<strong><a name="::::CheckCsnpClv_774">proc <a href="ISISv6.tcl-annot.html#::::CheckCsnpClv">::::CheckCsnpClv</a></a></strong> { rawFrame field {byteOffset &#34;50&#34;} } {
    set clvs [string range [<a name="::RemoveIsisVlanTag(34)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] [expr 3*$byteOffset] end]
    return [regexp -nocase $field $clvs]
}

<span class="comment-line"># --- in PSNP, variable-length fields are after position #102 (34 * 3)</span>
<strong><a name="::::CheckPsnpClv_780">proc <a href="ISISv6.tcl-annot.html#::::CheckPsnpClv">::::CheckPsnpClv</a></a></strong> { rawFrame field {byteOffset &#34;34&#34;} } {
    set clvs [string range [<a name="::RemoveIsisVlanTag(35)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] [expr 3*$byteOffset] end]
    return [regexp -nocase $field $clvs]
}

<strong><a name="::::GetPsnpClvs_785">proc <a href="ISISv6.tcl-annot.html#::::GetPsnpClvs">::::GetPsnpClvs</a></a></strong> { rawFrame {byteOffset &#34;34&#34;} } {
    set clvs [string range [<a name="::RemoveIsisVlanTag(36)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $rawFrame] [expr 3*$byteOffset] end]
    return $clvs
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: GetCLV</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     The follwoing proc is used to search the CLVs to find the one</span>
<span class="comment-line">#       match the clv code specified</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#       clvs    - the clvs returned from GetxxxxClvs (including the ending</span>
<span class="comment-line">#                       frame checksum)</span>
<span class="comment-line">#       code    - the clv code to locate</span>
<span class="comment-line">#       index   - the index-sh clv in the clvs</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># return: the clv</span>
<span class="comment-line"># Typical Usage:</span>
<span class="comment-line">#       set clvs [GetpsnpClvs $frame]</span>
<span class="comment-line">#       set code9Clv [GetCLV $clvs 9 0]</span>
<span class="comment-line">##################################################################</span>
<span class="comment-line"># --- the input clvs is expected to have included the ending checksum</span>
<strong><a name="::::GetCLV_809">proc <a href="ISISv6.tcl-annot.html#::::GetCLV">::::GetCLV</a></a></strong> { clvs code {index 0}} {
    set clvsLength [string length $clvs]
    incr clvsLength -6
    set clvs [string range $clvs 0 [expr $clvsLength -1]]
    <a name="::result_debug(44)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvs = $clvs&#34;
    <a name="::result_debug(45)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvsLength = $clvsLength&#34;
    set count 0
    while { $clvsLength &gt; 0 } {
        set clvCode [<a name="::hextodec(18)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $clvs 0 1]]
        set clvLengthField [<a name="::hextodec(19)"><a href="./ePTUtils.tcl.html#::hextodec_451">::hextodec</a></a> [string range $clvs 3 4]]
        <a name="::result_debug(46)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvCode = $clvCode&#34;
        <a name="::result_debug(47)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvLengthField = $clvLengthField&#34;
        set clvLength [expr 3 * [expr $clvLengthField + 2]]
        if { $clvCode == $code } {
            if {$count == $index } {
                return [string range $clvs 0  [expr $clvLength - 1]]
            }
            incr count
        }
        set clvs [string range $clvs $clvLength [expr $clvsLength -1]]
        set clvsLength [expr $clvsLength - $clvLength]
        <a name="::result_debug(48)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvs = $clvs&#34;
        <a name="::result_debug(49)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;clvsLength = $clvsLength&#34;
    }
    return &#34;&#34;
}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: decodeIsisPackets</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     The follwoing proc is used to decode ISIS packets</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#       frameList- the captured raw frames</span>
<span class="comment-line">#       dut     - for output display purpose</span>
<span class="comment-line">#       level   - for output display purpose</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical Usage:</span>
<span class="comment-line">#       decodeIsisPackets $frameList 1 2</span>
<span class="comment-line">##################################################################</span>
<span class="comment-line"># --- to decode isis packets</span>
<strong><a name="::::decodeIsisPackets_851">proc <a href="ISISv6.tcl-annot.html#::::decodeIsisPackets">::::decodeIsisPackets</a></a></strong> {frameList {dut 1} {level 1} } {

    set dutMac [<a name="::GetDUTMac(1)"><a href="./misc.tcl.html#::GetDUTMac_380">::GetDUTMac</a></a> DUT$dut &#34; &#34;]
    if {$level == 1} {
        set isisDestMac &#34;01 80 C2 00 00 14&#34;
    } else {
        set isisDestMac &#34;01 80 C2 00 00 15&#34;
    }

    <a name="::result_debug(50)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n==== Decode DUT $dut Level $level PDU ====&#34;
    <a name="::result_debug(51)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Source Mac = $dutMac&#34;
    <a name="::result_debug(52)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Dest Mac = $isisDestMac&#34;
    set frameListLength [llength $frameList]
    <a name="::result_debug(53)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;total number of frames: $frameListLength&#34;

    for {set i 0} {$i &lt; $frameListLength} {incr i} {

        <a name="::result_debug(54)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n    ++++ Decoded DUT $dut Level $level PDU ++++&#34;
        set frame [lindex $frameList $i]
        <a name="::result_debug(55)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;frame $i = $frame&#34;
        set destMac [<a name="::GetIsisDestMacAddr(1)"><a href="./ISISv6.tcl.html#::GetIsisDestMacAddr_600">::GetIsisDestMacAddr</a></a> $frame]
        set srcMac [<a name="::GetIsisSourceMacAddr(1)"><a href="./ISISv6.tcl.html#::GetIsisSourceMacAddr_604">::GetIsisSourceMacAddr</a></a> $frame]
        set 8023Len [<a name="::GetIsisDlcLength(1)"><a href="./ISISv6.tcl.html#::GetIsisDlcLength_608">::GetIsisDlcLength</a></a> $frame]
        set headerLen [<a name="::GetIsisHeaderLength(1)"><a href="./ISISv6.tcl.html#::GetIsisHeaderLength_619">::GetIsisHeaderLength</a></a> $frame]
        set pduType [<a name="::GetIsisPduType(1)"><a href="./ISISv6.tcl.html#::GetIsisPduType_14">::GetIsisPduType</a></a> $frame]
        set frameLen [<a name="::GetIsisLspFrameLength(1)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameLength_682">::GetIsisLspFrameLength</a></a> $frame]
        <a name="::result_debug(56)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;destination MAC = $destMac&#34;
        <a name="::result_debug(57)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;source MAC = $srcMac&#34;
        <a name="::result_debug(58)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;802.3 length = $8023Len&#34;
        <a name="::result_debug(59)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;header length = $headerLen&#34;
        <a name="::result_debug(60)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;PDU Type = $pduType&#34;
        <a name="::result_debug(61)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;frame length = $frameLen&#34;

        if {$pduType == &#34;ISIS_LEVEL1_LSP&#34; || $pduType == &#34;ISIS_LEVEL2_LSP&#34; } {
            set remainLifetime [<a name="::GetIsisLspRemainLifetime(1)"><a href="./ISISv6.tcl.html#::GetIsisLspRemainLifetime_688">::GetIsisLspRemainLifetime</a></a> $frame]
            set lspId [<a name="::GetIsisLspFrameId(1)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameId_694">::GetIsisLspFrameId</a></a> $frame]
            set frameSeq [<a name="::GetIsisLspFrameSequence(1)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameSequence_699">::GetIsisLspFrameSequence</a></a> $frame]
            set checksum [<a name="::GetIsisLspChecksum(1)"><a href="./ISISv6.tcl.html#::GetIsisLspChecksum_705">::GetIsisLspChecksum</a></a> $frame]
            <a name="::result_debug(62)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;remaining lifetime = $remainLifetime&#34;
            <a name="::result_debug(63)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;LSP ID = $lspId&#34;
            <a name="::result_debug(64)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;frame sequence = $frameSeq&#34;
            <a name="::result_debug(65)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;checksum = $checksum&#34;
        } elseif {$pduType == &#34;ISIS_LEVEL1_CSNP&#34; || $pduType == &#34;ISIS_LEVEL2_CSNP&#34; } {
            set srcId [<a name="::GetIsisCsnpSourceId(1)"><a href="./ISISv6.tcl.html#::GetIsisCsnpSourceId_716">::GetIsisCsnpSourceId</a></a> $frame]
            set startLspId [<a name="::GetIsisCsnpStartLspId(1)"><a href="./ISISv6.tcl.html#::GetIsisCsnpStartLspId_721">::GetIsisCsnpStartLspId</a></a> $frame]
            set endLspId [<a name="::GetIsisCsnpEndLspId(1)"><a href="./ISISv6.tcl.html#::GetIsisCsnpEndLspId_726">::GetIsisCsnpEndLspId</a></a> $frame]
            <a name="::result_debug(66)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;source ID = $srcId&#34;
            <a name="::result_debug(67)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;start LSP ID = $startLspId&#34;
            <a name="::result_debug(68)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;end LSP ID = $endLspId&#34;
        } elseif {$pduType == &#34;ISIS_LEVEL1_PSNP&#34; || $pduType == &#34;ISIS_LEVEL2_PSNP&#34; } {
            set srcId [<a name="::GetIsisPsnpSourceId(1)"><a href="./ISISv6.tcl.html#::GetIsisPsnpSourceId_737">::GetIsisPsnpSourceId</a></a> $frame]
            <a name="::result_debug(69)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;source ID = $srcId&#34;
        }
    }

}


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: EnableIsisFilterOutHello</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     The follwoing proc is used to set up ixia filter to filter out</span>
<span class="comment-line">#       ISIS Hello packets</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#       PostIdList - ixia port IDs</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical Usage:</span>
<span class="comment-line">#       EnableIsisFilterOutHello 1</span>
<span class="comment-line">##################################################################</span>
<span class="comment-line"># --- Most of the time, we dont need to look into hello packets</span>
<strong><a name="::::EnableIsisFilterOutHello_922">proc <a href="ISISv6.tcl-annot.html#::::EnableIsisFilterOutHello">::::EnableIsisFilterOutHello</a></a></strong> {portIdList} {
global TrafficGen
    foreach portId $portIdList {
        <a name="::MapIxiaPortId(6)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
        <a name="::port(4)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chas $card $port

        <span class="comment-line"># Define filter &amp; capture</span>
        <a name="::filterPallette(1)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -pattern1 {05 D9}
        <a name="::filterPallette(2)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternMask1 {00 00}
        <a name="::filterPallette(3)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternOffset1 34
        <a name="::filterPallette(4)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -matchType1 3
	if {$TrafficGen != &#34;ept&#34;} {
        <a name="::filterPallette(5)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> set $chas $card $port

        <a name="::filter(1)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable true
        <a name="::filter(2)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable true
        <a name="::filter(3)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern notPattern1
        <a name="::filter(4)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern notPattern1
        <a name="::filter(5)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA anyAddr
        <a name="::filter(6)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA anyAddr
        <a name="::filter(7)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> set $chas $card $port
        set portList [list [list $chas $card $port]]
        <a name="::ixWriteConfigToHardware(2)"><a href="./mapping.tcl.html#::ixWriteConfigToHardware_151">::ixWriteConfigToHardware</a></a> portList
	} else {
	 <a name="::filter(8)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable true
        <a name="::filter(9)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable true
        <a name="::filter(10)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern notPattern1
        <a name="::filter(11)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern notPattern1
        <a name="::filter(12)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA anyAddr
        <a name="::filter(13)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA anyAddr
	}

	}

    }


<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: DisableIsisFilterOutHello</span>
<span class="comment-line"># Description:</span>
<span class="comment-line">#     The follwoing proc is used to reset the ixia filter that has been set up</span>
<span class="comment-line">#       to filter out ISIS Hello packets</span>
<span class="comment-line">#</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#       PostIdList - ixia port IDs</span>
<span class="comment-line"># Output args: None</span>
<span class="comment-line"># Typical Usage:</span>
<span class="comment-line">#       DisableIsisFilterOutHello 1</span>
<span class="comment-line">##################################################################</span>
<strong><a name="::::DisableIsisFilterOutHello_971">proc <a href="ISISv6.tcl-annot.html#::::DisableIsisFilterOutHello">::::DisableIsisFilterOutHello</a></a></strong> {portIdList} {
global TrafficGen

    foreach portId $portIdList {
        <a name="::MapIxiaPortId(7)"><a href="./ePTPortMapping.tcl.html#::MapIxiaPortId_14">::MapIxiaPortId</a></a> $portId chas card port
        <a name="::port(5)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> get $chas $card $port

        <span class="comment-line"># Define filter &amp; capture</span>

        <a name="::filterPallette(6)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -pattern1 00
        <a name="::filterPallette(7)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> config -patternMask1 00
  if {$TrafficGen != &#34;ept&#34;} {
        <a name="::filterPallette(8)"><a href="./ePTClient.tcl.html#::filterPallette_915">::filterPallette</a></a> set $chas $card $port

        <a name="::filter(14)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable true
        <a name="::filter(15)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable true
        <a name="::filter(16)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern anypattern
        <a name="::filter(17)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern anypattern
        <a name="::filter(18)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA anyAddr
        <a name="::filter(19)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA anyAddr
        <a name="::filter(20)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> set $chas $card $port
        set portList [list [list $chas $card $port]]
        <a name="::ixWriteConfigToHardware(3)"><a href="./mapping.tcl.html#::ixWriteConfigToHardware_151">::ixWriteConfigToHardware</a></a> portList
	} else {
	
	<a name="::filter(21)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterEnable true
        <a name="::filter(22)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerEnable true
        <a name="::filter(23)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterPattern anypattern
        <a name="::filter(24)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerPattern anypattern
        <a name="::filter(25)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureTriggerDA anyAddr
        <a name="::filter(26)"><a href="./ePTClient.tcl.html#::filter_846">::filter</a></a> config -captureFilterDA anyAddr

	}
    }
}


<span class="comment-line"># convert MAC format to ISIS system ID format, e.g. 01:02:03:04:05:06 -&gt; 0102.0304.0506</span>
<strong><a name="::::MacToIsisId_1009">proc <a href="ISISv6.tcl-annot.html#::::MacToIsisId">::::MacToIsisId</a></a></strong> {mac} {
   set list [split [string tolower $mac] &#34;:&#34;]
   return [lindex $list 0][lindex $list 1].[lindex $list 2][lindex $list 3].[lindex $list 4][lindex $list 5]
}

<span class="comment-line"># clean manual area address of Level-2 except the 1st one which is the last one and can't be deleted</span>
<strong><a name="::::CleanLevel2AreaManuAddress_1015">proc <a href="ISISv6.tcl-annot.html#::::CleanLevel2AreaManuAddress">::::CleanLevel2AreaManuAddress</a></a></strong> { {dutNo &#34;1&#34;} } {

    global DUT${dutNo}_CONNECT

    <a name="::Login(1)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT${dutNo}_CONNECT]

    lappend getKeyList &#34;{Manual Area Addresses:} 1&#34;
    set numAddress [<a name="::GetKeyValue(1)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show isis Level-2&#34; $getKeyList]
    unset getKeyList
    if {$numAddress == 0} {
        return &#34;NO_MANUAL_ADDRESS&#34;
    } else {
        set i $numAddress
        while { $i &gt; 1 } {
            lappend getKeyList &#34;{Manual Area Addresses: $numAddress -} $i&#34;
            set addr [<a name="::GetKeyValue(2)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show isis Level-2&#34; $getKeyList]
            unset getKeyList
            <a name="::SendACmd(1)"><a href="./SendSwCmd.tcl.html#::SendACmd_157">::SendACmd</a></a> &#34;config isis Level-2 delete [string trimright $addr , ]&#34;
            set i [expr $i - 1]
        }
        lappend getKeyList &#34;{Manual Area Addresses: 1 -} 1&#34;
        set addr [<a name="::GetKeyValue(3)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show isis Level-2&#34; $getKeyList]
        unset getKeyList
        return [string trimright $addr , ]  ;<span class="comment-line"># return the 1st area address if existing</span>
    }

}

<strong><a name="::::VerifyRefreshInterval_1043">proc <a href="ISISv6.tcl-annot.html#::::VerifyRefreshInterval">::::VerifyRefreshInterval</a></a></strong> {timeStampList lspId {interval 900} {tolerance 25}} {
   set subTest &#34;Verify Refresh interval is $interval seconds for LSPID $lspId&#34;
   <a name="::report_start_test(1)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;

   <span class="comment-line"># Check for error</span>
   if {[llength $timeStampList]&lt;2} {
      <a name="::result_error(1)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Insufficient information in timestamp list, FAIL&#34;
      <a name="::report_end_test(1)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

      return 0
   }

   for {set i 0} {$i &lt; [expr [llength $timeStampList]-1]} {incr i} {
      set secondTimeStamp [lindex $timeStampList [expr $i + 1]]
      set firstTimeStamp [lindex $timeStampList $i]

      <span class="comment-line"># Store in mili seconds</span>
<span class="comment-line">#      set secTimeStamp [string range $secondTimeStamp 0 8]</span>
<span class="comment-line">#      set firTimeStamp [string range $firstTimeStamp 0 8]</span>

      <span class="comment-line">#result_debug &#34;the firTimeStamp:$firTimeStamp, secTimeStamp:$secTimeStamp&#34;</span>
      set intervalInSe [mpexpr $secondTimeStamp-$firstTimeStamp]
      set intervalInSec [mpexpr $intervalInSe/1000000000.0]
      set diff [expr abs(double($intervalInSec) - double($interval))]
      set percent [expr double($diff)/ double($interval)*100.0]
      <a name="::result_debug(70)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;The interval=$intervalInSec, percent=$percent and diff:$diff&#34;
      <span class="comment-line"># Count for a percentage of 1 tolerance</span>
      if {$percent &lt;= $tolerance} {
         set result &#34;ok&#34;
      } else {
         set wrongInterval $intervalInSec
         set result &#34;ng&#34;
      }
   }

   if {$result == &#34;ok&#34;} {
      <a name="::result_ok(2)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Packets correctly spaced with $intervalInSec secs, PASS&#34;
   } else {
      <a name="::result_error(2)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;Packets incorrectly spaced with $wrongInterval secs, FAIL&#34;
   }
   <a name="::report_end_test(2)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
}

<strong><a name="::::CheckIsisV6Installed_1086">proc <a href="ISISv6.tcl-annot.html#::::CheckIsisV6Installed">::::CheckIsisV6Installed</a></a></strong> { } {
  global ixiaCh1
  global env
  set IXIA_VER $env(IXIA_VERSION)
<a name="::result_debug(71)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Ixia chassis ip is $ixiaCh1&#34;
<a name="::result_debug(72)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Ixia version is $IXIA_VER&#34;

if {[regexp -nocase &#34;3.80&#34; $IXIA_VER]} {
       return &#34;Skip&#34;
} elseif {[regexp -nocase &#34;4.10&#34; $IXIA_VER]} {
    if {[ixIsIsisInstalled]} {
       return &#34;ok&#34;
     } else {
       return &#34;Skip&#34;
   }
} elseif {[regexp -nocase &#34;5.00 || 5.10&#34; $IXIA_VER]} {
    if {([licenseManagement isFeatureLicensed $ixiaCh1 licenseISIS] &amp;&amp; [licenseManagement isFeatureLicensed $ixiaCh1 licenseIsIsIPV6])} { 
     return &#34;ok&#34;
     } else {
     return &#34;Skip&#34;
    }
   }
 }
 

<strong><a name="::::IsisInstalled_1111">proc <a href="ISISv6.tcl-annot.html#::::IsisInstalled">::::IsisInstalled</a></a></strong> { } {
  global ixiaCh1
  global env
  set IXIA_VER $env(IXIA_VERSION)
<a name="::result_debug(73)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Ixia chassis ip is $ixiaCh1&#34;
<a name="::result_debug(74)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;Ixia version is $IXIA_VER&#34;

if {[regexp -nocase &#34;3.80&#34; $IXIA_VER]} {
    if {[ixIsIsisInstalled]} {
       return &#34;ok&#34;
     } else {
       return &#34;Skip&#34;
    }
} elseif {[regexp -nocase &#34;4.10&#34; $IXIA_VER]} {
    if {[ixIsIsisInstalled]} {
       return &#34;ok&#34;
     } else {
       return &#34;Skip&#34;
   }
} elseif {[regexp -nocase &#34;5.00 || 5.10&#34; $IXIA_VER]} {
    if {([licenseManagement isFeatureLicensed $ixiaCh1 licenseISIS])} {
     return &#34;ok&#34;
     } else {
     return &#34;Skip&#34;
    }
   }
 }





<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name : checkIxiaCardTypeIsisV6</span>
<span class="comment-line"># Description:</span>
<span class="comment-line"># This procedure checks for per port CPU cards to run ISISv6Router and if those</span>
<span class="comment-line"># cards are not found it will skip the test case</span>
<span class="comment-line">#</span>
<span class="comment-line"># optional Input args:</span>
<span class="comment-line"># Output args: None.</span>
<span class="comment-line"># Typical usage: checkIxiaCardTypeIsisV6</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category Types (SetupSwitch,GetSwitchInfo,SendTraffic,CaptureTraffic,</span>
<span class="comment-line">#                 SetupTestTool,VerifySwitchOutput,Utility,VerifyTraffic)</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>

<strong><a name="::::checkIxiaCardTypeIsisV6_1158">proc <a href="ISISv6.tcl-annot.html#::::checkIxiaCardTypeIsisV6">::::checkIxiaCardTypeIsisV6</a></a></strong> {testNo time1 txPortList} {

foreach txPort $txPortList {
       if {[<a name="::getIxiaPortType(1)"><a href="./ePTMisc.tcl.html#::getIxiaPortType_585">::getIxiaPortType</a></a> $txPort] &lt; 82 } {
  result_skip &#34;Skipping this test as only per port CPU Card support ISISv6 feature&#34;
          set time2 [clock seconds]
          result_p &#34;*** Time for $testNo = [expr $time2-$time1] secs\n\n&#34;
          <a name="::close_result_file(1)"><a href="./result.tcl.html#::close_result_file_363">::close_result_file</a></a>
          <a name="::report_end_test(3)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
          return -code return
       }
    }

}





<span class="comment-line">##################################################################</span>
<span class="comment-line"># Procedure Name: CheckLSP</span>
<span class="comment-line">#</span>
<span class="comment-line"># Description: Verify a LSP is recevied on a particular ixia port,</span>
<span class="comment-line">#           from the mentioned source dut witht the expected ipaddress</span>
<span class="comment-line"># Input args:</span>
<span class="comment-line">#       port --- the ixia port number on which LSP needs be verified</span>
<span class="comment-line">#       Level -- the Level at which the LSP frame needs to be verified</span>
<span class="comment-line">#             Valid Args L1- Level 1, L2- Level 2, L1L2-  both at Level 1&amp;2</span>
<span class="comment-line">#       trans -- if value of trans is 1 proc verifies no LSP is sent from the</span>
<span class="comment-line">#                list of source duts mentioned in srcdutLst on ixia port</span>
<span class="comment-line">#                if value of trans is 0, proc verifies or looks out for LSP</span>
<span class="comment-line">#                from source duts mentioned in srcdutLst on ixia port</span>
<span class="comment-line">#       srcdutLst- List of dut numbers from which LSP is expected/ not expected</span>
<span class="comment-line">#       ipaddv4stOct -- value of first octet of the expected/not expected</span>
<span class="comment-line">#                        ipv4 address in LSP#</span>
<span class="comment-line">#       ipaddv6stOct -- value of first octet of the expected/not expected</span>
<span class="comment-line">#                        ipv6 address in LSP</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line">#</span>
<span class="comment-line"># Output args:</span>
<span class="comment-line">#              None</span>
<span class="comment-line">#</span>
<span class="comment-line"># Typical usage:</span>
<span class="comment-line">#</span>
<span class="comment-line"># Category: Utility</span>
<span class="comment-line">##################################################################</span>


<strong><a name="::::CheckLSP_1207">proc <a href="ISISv6.tcl-annot.html#::::CheckLSP">::::CheckLSP</a></a></strong> {<a name="::port(6)"><a href="./ePTClient.tcl.html#::port_510">::port</a></a> Level {trans 1} {srcdutLst 1} {ipaddv4stOct 100} {ipaddv6stOct &#34;31 00&#34;}} {
set ipaddv4stOct [<a name="::dectohex(1)"><a href="./ePTUtils.tcl.html#::dectohex_470">::dectohex</a></a> $ipaddv4stOct]
set frameLst [<a name="::GetCapturedFrames(1)"><a href="./ePTRx.tcl.html#::GetCapturedFrames_982">::GetCapturedFrames</a></a> $port &#34;NULL&#34; 1000]
foreach srcdut $srcdutLst {
   set dutMac [<a name="::GetDUTMac(2)"><a href="./misc.tcl.html#::GetDUTMac_380">::GetDUTMac</a></a> DUT$srcdut]
   set dutMac [split $dutMac :]
   set validation 0
   set frameNo 1
   set psnpFrameNo &#34;&#34;
   set lspFrameNo &#34;&#34;
   set ipaddrV4 &#34;$ipaddv4stOct 00 00 00 FF FF FF&#34;
<span class="comment-line">#  result_debug &#34;the vlau eof ipaddv4 is $ipaddrV4&#34;</span>
<span class="comment-line">#  result_debug &#34;reference DUTmac is $dutMac&#34;</span>
   set ipaddrV6 &#34;$ipaddv6stOct 00 00 00 00 00 00 00 00 00&#34;

   foreach frame $frameLst {
      set frame [<a name="::RemoveIsisVlanTag(37)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $frame]
      set pduType [<a name="::GetIsisPduType(2)"><a href="./ISISv6.tcl.html#::GetIsisPduType_14">::GetIsisPduType</a></a> $frame]
<span class="comment-line">#      result_debug &#34;the PDU type captured is $pduType&#34;</span>
      set srcMac [<a name="::GetIsisSourceMacAddr(2)"><a href="./ISISv6.tcl.html#::GetIsisSourceMacAddr_604">::GetIsisSourceMacAddr</a></a>  $frame]
<span class="comment-line">#      result_debug &#34;the source mac captured is $srcMac&#34;</span>
      switch $Level {

         &#34;L1&#34; {
            if {(($pduType == &#34;ISIS_LEVEL1_LSP&#34;) &amp;&amp; ($srcMac == $dutMac))} {
               set lspFrameLen [<a name="::GetIsisLspFrameLength(2)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameLength_682">::GetIsisLspFrameLength</a></a> $frame]
               if {$lspFrameLen &gt; 100} {
 <span class="comment-line">#                result_debug &#34;the frame captured is $frame&#34;</span>
                  if {(([regexp -nocase $ipaddrV4 $frame])||([regexp -nocase $ipaddrV6 $frame]))} {
                     incr validation
                     lappend lspFrameNo $frameNo
                  }
               }
            }
            if {$pduType == &#34;ISIS_LEVEL1_PSNP&#34; } {
               set psnpSrc [<a name="::GetIsisPsnpSourceId(2)"><a href="./ISISv6.tcl.html#::GetIsisPsnpSourceId_737">::GetIsisPsnpSourceId</a></a> $frame]
               if {$psnpSrc != $dutMac} {
                  lappend  psnpFrameNo $frameNo
               }
            }
         }
         &#34;L2&#34; {
            if {(($pduType == &#34;ISIS_LEVEL2_LSP&#34;) &amp;&amp; ($srcMac == $dutMac))} {
               set lspFrameLen [<a name="::GetIsisLspFrameLength(3)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameLength_682">::GetIsisLspFrameLength</a></a> $frame]
  <span class="comment-line">#             result_debug &#34;the frame captured is $frame&#34;</span>
               if {$lspFrameLen &gt; 100} {
                  if {(([regexp -nocase $ipaddrV4 $frame])||([regexp -nocase $ipaddrV6 $frame]))} {
                     incr validation
                     lappend lspFrameNo $frameNo
                  }
               }
            }
           if {$pduType == &#34;ISIS_LEVEL2_PSNP&#34; } {
              set psnpSrc [<a name="::GetIsisPsnpSourceId(3)"><a href="./ISISv6.tcl.html#::GetIsisPsnpSourceId_737">::GetIsisPsnpSourceId</a></a> $frame]
               if {$psnpSrc != $dutMac} {
                 lappend  psnpFrameNo $frameNo
               }
           }
        }
        &#34;L1L2&#34; {
           if {((($pduType == &#34;ISIS_LEVEL1_LSP&#34;) || \
              ($pduType == &#34;ISIS_LEVEL2_LSP&#34;) ) \
               &amp;&amp; ($srcMac == $dutMac))} {
               set lspFrameLen [<a name="::GetIsisLspFrameLength(4)"><a href="./ISISv6.tcl.html#::GetIsisLspFrameLength_682">::GetIsisLspFrameLength</a></a> $frame]
               if {$lspFrameLen &gt; 100} {
   <span class="comment-line">#            result_debug &#34;the frame captured is $frame&#34;</span>
                 if {(([regexp -nocase $ipaddrV4 $frame])||([regexp -nocase $ipaddrV6 $frame]))} {
                    incr validation
                    lappend lspFrameNo $frameNo
                 }
               }
           }
           if {(($pduType == &#34;ISIS_LEVEL1_PSNP&#34;) || \
             ($pduType == &#34;ISIS_LEVEL2_PSNP&#34;))} {
              set psnpSrc [<a name="::GetIsisPsnpSourceId(4)"><a href="./ISISv6.tcl.html#::GetIsisPsnpSourceId_737">::GetIsisPsnpSourceId</a></a> $frame]
              if {$psnpSrc != $dutMac} {
                 lappend  psnpFrameNo $frameNo
              }
           }
        }
     }
     incr frameNo
   }
   if $trans {
      <a name="::report_start_test(2)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;verify LSP is not sent with mesh block from DUT$srcdut&#34;
      if !$validation {
         <a name="::result_ok(3)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;No LSP sent over the monitored link&#34;
      } else {
         if {[lindex $lspFrameNo 0] &gt; [lindex $psnpFrameNo 0]} {
            <a name="::result_ok(4)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;LSP sent over the monitored link over PSNP request&#34;
         } else {
            <a name="::result_error(3)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;LSP sent over the monitored link&#34;
         }
     }
     <a name="::report_end_test(4)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   } else {
      <a name="::report_start_test(3)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;verify LSP is sent with mesh block  from DUT$srcdut&#34;
      if $validation {
         <a name="::result_ok(5)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34; LSP sent over the monitored link&#34;
      } else {
         <a name="::result_error(4)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34; NoLSP sent over the monitored link&#34;
      }
      <a name="::report_end_test(5)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>
   }

}
}

<strong><a name="::::CheckRestartTlv_1315">proc <a href="ISISv6.tcl-annot.html#::::CheckRestartTlv">::::CheckRestartTlv</a></a></strong> {args} {
     <a name="::parse_args(3)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> CheckRestartTlv $args {
     capPort &#34;4&#34;
     FirstDutno &#34;DUT1&#34;
     SecondDutno &#34;DUT2&#34;
     conditionCheck &#34;11&#34;
     }
<span class="comment-line">################################################################</span>
set subTest &#34;Checking for RR and RA bit in Restart TLV in Hello PDUs &#34;
<span class="comment-line">################################################################</span>
result_h2 &#34;$subTest&#34;
<a name="::report_start_test(4)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;$subTest&#34;
set frameList [<a name="::GetCapturedFrames(2)"><a href="./ePTRx.tcl.html#::GetCapturedFrames_982">::GetCapturedFrames</a></a> $capPort NULL 2000]

set restart_clv_RR &#34;D3 03 01 00 00&#34;
set restart_clv_RA &#34;D3 03 02&#34;
set numHello 0
set RR 0
set RA 0
        foreach frame $frameList {
        set frame [<a name="::RemoveIsisVlanTag(38)"><a href="./ISISv6.tcl.html#::RemoveIsisVlanTag_589">::RemoveIsisVlanTag</a></a> $frame]
          puts &#34;$frame&#34;
          set pduType [<a name="::GetIsisPduType(3)"><a href="./ISISv6.tcl.html#::GetIsisPduType_14">::GetIsisPduType</a></a> $frame]
          <a name="::result_debug(75)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;PDUTYPE : $pduType&#34;
          set pduType1 &#34;ISIS_LEVEL1_HELLO&#34;
          set pduType2 &#34;ISIS_LEVEL2_HELLO&#34;
          set pduType3 &#34;ISIS_PTOP_HELLO&#34;
           if {($pduType == $pduType1) || ($pduType == $pduType2) || ($pduType == $pduType3)} {
                        <a name="::result_debug(76)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;\n$pduType captured:&#34;
                        <a name="::result_debug(77)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$frame&#34;
                        set srcMac [<a name="::GetIsisSourceMacAddr(3)"><a href="./ISISv6.tcl.html#::GetIsisSourceMacAddr_604">::GetIsisSourceMacAddr</a></a>  $frame]
                        set 8023Len [<a name="::GetIsisDlcLength(2)"><a href="./ISISv6.tcl.html#::GetIsisDlcLength_608">::GetIsisDlcLength</a></a> $frame]
                        set destMac [<a name="::GetIsisDestMacAddr(2)"><a href="./ISISv6.tcl.html#::GetIsisDestMacAddr_600">::GetIsisDestMacAddr</a></a> $frame]
                        set headerLen [<a name="::GetIsisHeaderLength(2)"><a href="./ISISv6.tcl.html#::GetIsisHeaderLength_619">::GetIsisHeaderLength</a></a> $frame]
                        set idLen [<a name="::GetIsisIdLength(1)"><a href="./ISISv6.tcl.html#::GetIsisIdLength_630">::GetIsisIdLength</a></a> $frame]
                        if { ($pduType == $pduType3) } {
                        set restartTlvRR [string range $frame 111 124]
                        set restartTlvRA [string range $frame 111 118]
                        } else {
                        set restartTlvRR [string range $frame 132 145]
                        set restartTlvRA [string range $frame 132 139]
                        }
                        <a name="::result_debug(78)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;    ++++ Decoded $pduType packet ++++&#34;
                        <a name="::result_debug(79)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;destination MAC = $destMac &#34;
                        <a name="::result_debug(80)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;source MAC = $srcMac&#34;
                        <a name="::result_debug(81)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;802.3 length = $8023Len &#34;
                        <a name="::result_debug(82)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;header length = $headerLen&#34;
                        <a name="::result_debug(83)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;ID length = $idLen&#34;
                        <a name="::result_debug(84)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;RestartTLV value is RR=$restartTlvRR&#34;
                        <a name="::result_debug(85)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;RestartTLV value is RA=$restartTlvRA&#34;
                                 if {( $restartTlvRR == $restart_clv_RR) &amp;&amp; ($srcMac == [<a name="::GetDUTMac(3)"><a href="./misc.tcl.html#::GetDUTMac_380">::GetDUTMac</a></a> $FirstDutno &#34; &#34;])} {
                                         incr RR
                                         <a name="::result_debug(86)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$RR&#34;
                                 } elseif {( $restartTlvRA == $restart_clv_RA) &amp;&amp; ($srcMac == [<a name="::GetDUTMac(4)"><a href="./misc.tcl.html#::GetDUTMac_380">::GetDUTMac</a></a> $SecondDutno &#34; &#34;]) } {
                                         incr RA
                                         <a name="::result_debug(87)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;$RA&#34;
                                          }
                                 }

                 }


set type $conditionCheck
switch -- $type \
        &#34;11&#34; {
                if {$RR &gt;= 1 &amp;&amp; $RA &gt;= 1} {
                <a name="::result_ok(6)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;L1-L2 Hello from DUTs is captured and RR &amp; RA  Bit is set in Planned/Unplanned/both state&#34;
                        } else {
                <a name="::result_error(5)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;L1-L2 Hello from DUTs is captured and RR &amp; RA  Bit is not set  Planned/Unplanned/both state&#34;
                        }
             } &#34;00&#34; {
                if {$RR == &#34;0&#34; &amp;&amp; $RA == &#34;0&#34;} {
                <a name="::result_ok(7)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;L1-L2 Hello from DUTs is captured and RR &amp; RA  Bit should not be set in NONE state&#34;
                      } else {
                <a name="::result_error(6)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;L1-L2 Hello from DUTs is captured and RR &amp; RA  Bit is set in NONE state&#34;
                      }
             } &#34;10&#34; {
                if {$RR &gt;= &#34;1&#34; &amp;&amp; $RA == &#34;0&#34;} {
                <a name="::result_ok(8)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;L1-L2 Hello from DUT1 is captured and RR Bit is set and RA bit is not set for one switch config&#34;   
                        } else {
          <a name="::result_error(7)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;L1-L2 Hello from DUTs is captured and RR Bit is not set or RA bit is also set for one switch config&#34;
                        }
             } &#34;01&#34; {
                if {$RR &gt;= &#34;0&#34; &amp;&amp; $RA == &#34;1&#34;} {
                <a name="::result_ok(9)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;L1-L2 Hello from DUT2 is captured and RA Bit is set and RR bit is not set for one switch config&#34;
                        } else {
          <a name="::result_error(8)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;L1-L2 Hello from DUTs is captured and RA Bit is not set or RR bit is also set for one switch config&#34;
                        }

             } &#34;L1-L2&#34; {
                if {$RR &gt;= &#34;2&#34; &amp;&amp; $RA &gt;= &#34;2&#34;} {
                <a name="::result_ok(10)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;L1-L2 Hello from DUT1 is captured and RR Bit and RA bit is set in Planned/Unplanned/both state&#34;                                    } else {
          <a name="::result_error(9)"><a href="./lconsoles.tcl.html#::result_error_6">::result_error</a></a> &#34;L1-L2 Hello from DUTs is captured and RR Bit or RA bit is not set&#34;
                        }
             } default {
                <a name="::result_debug(88)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;RA and RR bit not set accordingly&#34;
                return -1
             }


<a name="::report_end_test(6)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

}


<strong><a name="::::startRestartTraffic_1420">proc <a href="ISISv6.tcl-annot.html#::::startRestartTraffic">::::startRestartTraffic</a></a></strong> {args} {
     <a name="::parse_args(4)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> startRestartTraffic $args {
     Dut1Port &#34;1&#34;
     Dut2Port &#34;3&#34;
     }

upvar 1 dut1Mac dut1mac
upvar 1 dut2Mac dut2mac

<span class="comment-line">#---Verify the traffic flow between Dut1 and Dut 2</span>

<a name="::report_start_test(5)"><a href="./report.tcl.html#::report_start_test_79">::report_start_test</a></a> &#34;Transmit a ip frame between the ports&#34;

   set sip1 &#34;11.10.10.4&#34;;
   set dip1 &#34;12.10.10.4&#34;;

  <a name="::EnableProtocolServer(1)"><a href="./CheckArp.tcl.html#::EnableProtocolServer_207">::EnableProtocolServer</a></a> 1 11.10.10.4 none true
  <a name="::EnableProtocolServer(2)"><a href="./CheckArp.tcl.html#::EnableProtocolServer_207">::EnableProtocolServer</a></a> 3 12.10.10.4 none true

   <a name="::SendIpFrame(1)"><a href="./ePTSendPacket.tcl.html#::SendIpFrame_587">::SendIpFrame</a></a> -protocol &#34;ip&#34; -txPortId &#34;$Dut1Port&#34; -destMac $dut1mac -destIp $dip1 \
                -sourceIp $sip1  \
               -streamType &#34;contPacket&#34; -frameRate 14881 ;<span class="comment-line">#-percentage 10</span>

   <a name="::result_debug(89)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;sleep for 5s for packet transmission&#34;;
   <a name="::exSleep(1)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5


   <a name="::SendIpFrame(2)"><a href="./ePTSendPacket.tcl.html#::SendIpFrame_587">::SendIpFrame</a></a> -protocol &#34;ip&#34; -txPortId &#34;$Dut2Port&#34; -destMac $dut2mac -destIp $sip1 \
                -sourceIp $dip1  \
               -streamType &#34;contPacket&#34; -frameRate 14881 ;<span class="comment-line">#-percentage 10</span>

   <a name="::result_debug(90)"><a href="./lconsoles.tcl.html#::result_debug_3">::result_debug</a></a> &#34;sleep for 5s for packet transmission&#34;;
   <a name="::exSleep(2)"><a href="./sleep.tcl.html#::exSleep_248">::exSleep</a></a> 5
<a name="::report_end_test(7)"><a href="./report.tcl.html#::report_end_test_122">::report_end_test</a></a>

}

<strong><a name="::::checkRestartTraffic_1457">proc <a href="ISISv6.tcl-annot.html#::::checkRestartTraffic">::::checkRestartTraffic</a></a></strong> {args} {
     <a name="::parse_args(5)"><a href="./parse_args.tcl.html#::parse_args_29">::parse_args</a></a> checkRestartTraffic $args {
     Dut1Port &#34;1&#34;
     Dut2Port &#34;3&#34;
     }

 <span class="comment-line">#---- Checking the traffic in port $Dut1Port</span>
   <a name="::result_ok(11)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Checking the traffic in port $Dut1Port&#34;
   set percentageList &#34;&#34;;
   lappend percentageList &#34;$Dut2Port 100&#34;;
   <a name="::CheckRates(1)"><a href="./ePTRx.tcl.html#::CheckRates_1509">::CheckRates</a></a> $Dut1Port $percentageList &#34;&#34; 1.5;
   unset percentageList;


 <span class="comment-line">#---- Checking the traffic in port $Dut1Port</span>
   <a name="::result_ok(12)"><a href="./lconsoles.tcl.html#::result_ok_9">::result_ok</a></a> &#34;Checking the traffic in port $Dut2Port&#34;
   set percentageList &#34;&#34;;
   lappend percentageList &#34;$Dut1Port 100&#34;;
   <a name="::CheckRates(2)"><a href="./ePTRx.tcl.html#::CheckRates_1509">::CheckRates</a></a> $Dut2Port $percentageList &#34;&#34; 1.5;

}



<strong><a name="::::cleanupProtocolServer_1481">proc <a href="ISISv6.tcl-annot.html#::::cleanupProtocolServer">::::cleanupProtocolServer</a></a></strong> {} {

  <a name="::DisableProtocolServer(1)"><a href="./CheckArp.tcl.html#::DisableProtocolServer_371">::DisableProtocolServer</a></a> 1 11.10.10.4
  <a name="::DisableProtocolServer(2)"><a href="./CheckArp.tcl.html#::DisableProtocolServer_371">::DisableProtocolServer</a></a> 3 12.10.10.4

}



<strong><a name="::::CheckQueens_1490">proc <a href="ISISv6.tcl-annot.html#::::CheckQueens">::::CheckQueens</a></a></strong> {dut} {
global DUT[set dut]_CONNECT
<a name="::Login(2)"><a href="./login.tcl.html#::Login_24">::Login</a></a> [set DUT[set dut]_CONNECT]
global bcmChassis
global stacking
set platform [<a name="::GetPlatform(1)"><a href="./misc.tcl.html#::GetPlatform_478">::GetPlatform</a></a> DUT$dut]
set msmSlot &#34;none&#34;
if {((![regexp -nocase $stacking $platform ]) &amp;&amp; \
     ([regexp -nocase $bcmChassis $platform]))} {
   set parameter &#34;&#34;
   lappend parameter &#34;{MSM-A} 1&#34;
   set msmSlot [<a name="::GetKeyValue(4)"><a href="./OptionCheck.tcl.html#::GetKeyValue_438">::GetKeyValue</a></a> &#34;show slot&#34; $parameter]
   unset parameter
}

if [regexp &#34;8500&#34; $msmSlot] {
   return 1
} else {
   return 0
}
}

</pre>
<hr>
<div class="index-selector">
	<a href="index_main.html#byfilename">file name</a> 
 | 
	<a href="index_main.html#byprocname">procedure name</a> 
 | 
	<a href="index_main.html#bycall">procedure call</a> 
 | 
	<a href="index_annot_full.html">annotation</a> 

<br>
<cite>File generated 2018-06-14 at 17:09.</cite>
</div>

</body>
</html>
